<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Platform Bridge</title>
    <script>
!function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)};function t(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})}function r(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function n(e,t){return function(){return e.apply(t,arguments)}}"function"==typeof SuppressedError&&SuppressedError;const{toString:i}=Object.prototype,{getPrototypeOf:s}=Object,{iterator:o,toStringTag:a}=Symbol,c=(u=Object.create(null),e=>{const t=i.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const l=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:d}=Array,f=h("undefined");function p(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m=l("ArrayBuffer");const g=h("string"),y=h("function"),w=h("number"),v=e=>null!==e&&"object"==typeof e,A=e=>{if("object"!==c(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||a in e||o in e)},b=l("Date"),E=l("File"),_=l("Blob"),k=l("FileList"),T=l("URLSearchParams"),[I,R,S,N]=["ReadableStream","Request","Response","Headers"].map(l);function P(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,i;if("object"!=typeof e&&(e=[e]),d(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(p(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(n=0;n<s;n++)o=i[n],t.call(null,e[o],o,e)}}function C(e,t){if(p(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,x=e=>!f(e)&&e!==O;const M=(D="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>D&&e instanceof D);var D;const U=l("HTMLFormElement"),L=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),B=l("RegExp"),F=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};P(r,(r,i)=>{let s;!1!==(s=t(r,i,e))&&(n[i]=s||r)}),Object.defineProperties(e,n)};const q=l("AsyncFunction"),G=(H="function"==typeof setImmediate,j=y(O.postMessage),H?setImmediate:j?(K=`axios@${Math.random()}`,z=[],O.addEventListener("message",({source:e,data:t})=>{e===O&&t===K&&z.length&&z.shift()()},!1),e=>{z.push(e),O.postMessage(K,"*")}):e=>setTimeout(e));var H,j,K,z;const W="undefined"!=typeof queueMicrotask?queueMicrotask.bind(O):"undefined"!=typeof process&&process.nextTick||G;var V={isArray:d,isArrayBuffer:m,isBuffer:p,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=c(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer),t},isString:g,isNumber:w,isBoolean:e=>!0===e||!1===e,isObject:v,isPlainObject:A,isEmptyObject:e=>{if(!v(e)||p(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:I,isRequest:R,isResponse:S,isHeaders:N,isUndefined:f,isDate:b,isFile:E,isBlob:_,isRegExp:B,isFunction:y,isStream:e=>v(e)&&y(e.pipe),isURLSearchParams:T,isTypedArray:M,isFileList:k,forEach:P,merge:function e(){const{caseless:t,skipUndefined:r}=x(this)&&this||{},n={},i=(i,s)=>{const o=t&&C(n,s)||s;A(n[o])&&A(i)?n[o]=e(n[o],i):A(i)?n[o]=e({},i):d(i)?n[o]=i.slice():r&&f(i)||(n[o]=i)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&P(arguments[e],i);return n},extend:(e,t,r,{allOwnKeys:i}={})=>(P(t,(t,i)=>{r&&y(t)?e[i]=n(t,r):e[i]=t},{allOwnKeys:i}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,a;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],n&&!n(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==r&&s(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:l,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!w(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[o]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:U,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:F,freezeMethods:e=>{F(e,(t,r)=>{if(y(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];y(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return d(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:C,global:O,isContextDefined:x,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[a]&&e[o])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(v(e)){if(t.indexOf(e)>=0)return;if(p(e))return e;if(!("toJSON"in e)){t[n]=e;const i=d(e)?[]:{};return P(e,(e,t)=>{const s=r(e,n+1);!f(s)&&(i[t]=s)}),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:q,isThenable:e=>e&&(v(e)||y(e))&&y(e.then)&&y(e.catch),setImmediate:G,asap:W,isIterable:e=>null!=e&&y(e[o])};function J(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}V.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const Y=J.prototype,Q={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Q[e]={value:e}}),Object.defineProperties(J,Q),Object.defineProperty(Y,"isAxiosError",{value:!0}),J.from=(e,t,r,n,i,s)=>{const o=Object.create(Y);V.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const a=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return J.call(o,a,c,r,n,i),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};function $(e){return V.isPlainObject(e)||V.isArray(e)}function X(e){return V.endsWith(e,"[]")?e.slice(0,-2):e}function Z(e,t,r){return e?e.concat(t).map(function(e,t){return e=X(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const ee=V.toFlatObject(V,{},null,function(e){return/^is[A-Z]/.test(e)});function te(e,t,r){if(!V.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=V.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!V.isUndefined(t[e])})).metaTokens,i=r.visitor||u,s=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&V.isSpecCompliantForm(t);if(!V.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(V.isDate(e))return e.toISOString();if(V.isBoolean(e))return e.toString();if(!a&&V.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(e)||V.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,i){let a=e;if(e&&!i&&"object"==typeof e)if(V.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(V.isArray(e)&&function(e){return V.isArray(e)&&!e.some($)}(e)||(V.isFileList(e)||V.endsWith(r,"[]"))&&(a=V.toArray(e)))return r=X(r),a.forEach(function(e,n){!V.isUndefined(e)&&null!==e&&t.append(!0===o?Z([r],n,s):null===o?r:r+"[]",c(e))}),!1;return!!$(e)||(t.append(Z(i,r,s),c(e)),!1)}const l=[],h=Object.assign(ee,{defaultVisitor:u,convertValue:c,isVisitable:$});if(!V.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!V.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),V.forEach(r,function(r,s){!0===(!(V.isUndefined(r)||null===r)&&i.call(t,r,V.isString(s)?s.trim():s,n,h))&&e(r,n?n.concat(s):[s])}),l.pop()}}(e),t}function re(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ne(e,t){this._pairs=[],e&&te(e,this,t)}const ie=ne.prototype;function se(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function oe(e,t,r){if(!t)return e;const n=r&&r.encode||se;V.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(s=i?i(t,r):V.isURLSearchParams(t)?t.toString():new ne(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}ie.append=function(e,t){this._pairs.push([e,t])},ie.toString=function(e){const t=e?function(t){return e.call(this,t,re)}:re;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class ae{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){V.forEach(this.handlers,function(t){null!==t&&e(t)})}}var ce={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ue={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ne,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const le="undefined"!=typeof window&&"undefined"!=typeof document,he="object"==typeof navigator&&navigator||void 0,de=le&&(!he||["ReactNative","NativeScript","NS"].indexOf(he.product)<0),fe="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,pe=le&&window.location.href||"http://localhost";var me={...Object.freeze({__proto__:null,hasBrowserEnv:le,hasStandardBrowserEnv:de,hasStandardBrowserWebWorkerEnv:fe,navigator:he,origin:pe}),...ue};function ge(e){function t(e,r,n,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&V.isArray(n)?n.length:s,a)return V.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!o;n[s]&&V.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],i)&&V.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}(n[s])),!o}if(V.isFormData(e)&&V.isFunction(e.entries)){const r={};return V.forEachEntry(e,(e,n)=>{t(function(e){return V.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const ye={transitional:ce,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=V.isObject(e);i&&V.isHTMLForm(e)&&(e=new FormData(e));if(V.isFormData(e))return n?JSON.stringify(ge(e)):e;if(V.isArrayBuffer(e)||V.isBuffer(e)||V.isStream(e)||V.isFile(e)||V.isBlob(e)||V.isReadableStream(e))return e;if(V.isArrayBufferView(e))return e.buffer;if(V.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return te(e,new me.classes.URLSearchParams,{visitor:function(e,t,r,n){return me.isNode&&V.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=V.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return te(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(V.isString(e))try{return(t||JSON.parse)(e),V.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ye.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(V.isResponse(e)||V.isReadableStream(e))return e;if(e&&V.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw J.from(e,J.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.classes.FormData,Blob:me.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],e=>{ye.headers[e]={}});const we=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ve=Symbol("internals");function Ae(e){return e&&String(e).trim().toLowerCase()}function be(e){return!1===e||null==e?e:V.isArray(e)?e.map(be):String(e)}function Ee(e,t,r,n,i){return V.isFunction(n)?n.call(this,t,r):(i&&(t=r),V.isString(t)?V.isString(n)?-1!==t.indexOf(n):V.isRegExp(n)?n.test(t):void 0:void 0)}let _e=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=Ae(t);if(!i)throw new Error("header name must be a non-empty string");const s=V.findKey(n,i);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=be(e))}const s=(e,t)=>V.forEach(e,(e,r)=>i(e,r,t));if(V.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(V.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&we[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(V.isObject(e)&&V.isIterable(e)){let r,n,i={};for(const t of e){if(!V.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[n=t[0]]=(r=i[n])?V.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,r);return this}get(e,t){if(e=Ae(e)){const r=V.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(V.isFunction(t))return t.call(this,e,r);if(V.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ae(e)){const r=V.findKey(this,e);return!(!r||void 0===this[r]||t&&!Ee(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=Ae(e)){const i=V.findKey(r,e);!i||t&&!Ee(0,r[i],i,t)||(delete r[i],n=!0)}}return V.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!Ee(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return V.forEach(this,(n,i)=>{const s=V.findKey(r,i);if(s)return t[s]=be(n),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(i):String(i).trim();o!==i&&delete t[i],t[o]=be(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return V.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&V.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[ve]=this[ve]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Ae(e);t[n]||(!function(e,t){const r=V.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})})}(r,e),t[n]=!0)}return V.isArray(e)?e.forEach(n):n(e),this}};function ke(e,t){const r=this||ye,n=t||r,i=_e.from(n.headers);let s=n.data;return V.forEach(e,function(e){s=e.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Te(e){return!(!e||!e.__CANCEL__)}function Ie(e,t,r){J.call(this,null==e?"canceled":e,J.ERR_CANCELED,t,r),this.name="CanceledError"}function Re(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),V.reduceDescriptors(_e.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),V.freezeMethods(_e),V.inherits(Ie,J,{__CANCEL__:!0});const Se=(e,t,r=3)=>{let n=0;const i=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=n[o];i||(i=c),r[s]=a,n[s]=c;let l=o,h=0;for(;l!==s;)h+=r[l++],l%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const d=u&&c-u;return d?Math.round(1e3*h/d):void 0}}(50,250);return function(e,t){let r,n,i=0,s=1e3/t;const o=(t,s=Date.now())=>{i=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-i;a>=s?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},s-a)))},()=>r&&o(r)]}(r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,c=i(a);n=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},Ne=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Pe=e=>(...t)=>V.asap(()=>e(...t));var Ce=me.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,me.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(me.origin),me.navigator&&/(msie|trident)/i.test(me.navigator.userAgent)):()=>!0,Oe=me.hasStandardBrowserEnv?{write(e,t,r,n,i,s,o){if("undefined"==typeof document)return;const a=[`${e}=${encodeURIComponent(t)}`];V.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),V.isString(n)&&a.push(`path=${n}`),V.isString(i)&&a.push(`domain=${i}`),!0===s&&a.push("secure"),V.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function xe(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Me=e=>e instanceof _e?{...e}:e;function De(e,t){t=t||{};const r={};function n(e,t,r,n){return V.isPlainObject(e)&&V.isPlainObject(t)?V.merge.call({caseless:n},e,t):V.isPlainObject(t)?V.merge({},t):V.isArray(t)?t.slice():t}function i(e,t,r,i){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e,0,i):n(e,t,0,i)}function s(e,t){if(!V.isUndefined(t))return n(void 0,t)}function o(e,t){return V.isUndefined(t)?V.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,s){return s in t?n(r,i):s in e?n(void 0,r):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>i(Me(e),Me(t),0,!0)};return V.forEach(Object.keys({...e,...t}),function(n){const s=c[n]||i,o=s(e[n],t[n],n);V.isUndefined(o)&&s!==a||(r[n]=o)}),r}var Ue=e=>{const t=De({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;if(t.headers=o=_e.from(o),t.url=oe(xe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),V.isFormData(r))if(me.hasStandardBrowserEnv||me.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(V.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}if(me.hasStandardBrowserEnv&&(n&&V.isFunction(n)&&(n=n(t)),n||!1!==n&&Ce(t.url))){const e=i&&s&&Oe.read(s);e&&o.set(i,e)}return t};var Le="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Ue(e);let i=n.data;const s=_e.from(n.headers).normalize();let o,a,c,u,l,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=n;function p(){u&&u(),l&&l(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=_e.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Re(function(e){t(e),p()},function(e){r(e),p()},{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new J("Request aborted",J.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const n=new J(t&&t.message?t.message:"Network Error",J.ERR_NETWORK,e,m);n.event=t||null,r(n),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||ce;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new J(t,i.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&V.forEach(s.toJSON(),function(e,t){m.setRequestHeader(t,e)}),V.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),h&&"json"!==h&&(m.responseType=n.responseType),f&&([c,l]=Se(f,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,u]=Se(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(o=t=>{m&&(r(!t||t.type?new Ie(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===me.protocols.indexOf(y)?r(new J("Unsupported protocol "+y+":",J.ERR_BAD_REQUEST,e)):m.send(i||null)})};const Be=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const i=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof J?t:new Ie(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new J(`timeout ${t} of ms exceeded`,J.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=n;return a.unsubscribe=()=>V.asap(o),a}},Fe=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},qe=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Ge=(e,t,r,n)=>{const i=async function*(e,t){for await(const r of qe(e))yield*Fe(r,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return a(),void e.close();let s=n.byteLength;if(r){let e=o+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},{isFunction:He}=V,je=(({Request:e,Response:t})=>({Request:e,Response:t}))(V.global),{ReadableStream:Ke,TextEncoder:ze}=V.global,We=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Ve=e=>{e=V.merge.call({skipUndefined:!0},je,e);const{fetch:t,Request:r,Response:n}=e,i=t?He(t):"function"==typeof fetch,s=He(r),o=He(n);if(!i)return!1;const a=i&&He(Ke),c=i&&("function"==typeof ze?(e=>t=>e.encode(t))(new ze):async e=>new Uint8Array(await new r(e).arrayBuffer())),u=s&&a&&We(()=>{let e=!1;const t=new r(me.origin,{body:new Ke,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),l=o&&a&&We(()=>V.isReadableStream(new n("").body)),h={stream:l&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,r)})});const d=async(e,t)=>{const n=V.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(V.isBlob(e))return e.size;if(V.isSpecCompliantForm(e)){const t=new r(me.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return V.isArrayBufferView(e)||V.isArrayBuffer(e)?e.byteLength:(V.isURLSearchParams(e)&&(e+=""),V.isString(e)?(await c(e)).byteLength:void 0)})(t):n};return async e=>{let{url:i,method:o,data:a,signal:c,cancelToken:f,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:w,withCredentials:v="same-origin",fetchOptions:A}=Ue(e),b=t||fetch;y=y?(y+"").toLowerCase():"text";let E=Be([c,f&&f.toAbortSignal()],p),_=null;const k=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let T;try{if(g&&u&&"get"!==o&&"head"!==o&&0!==(T=await d(w,a))){let e,t=new r(i,{method:"POST",body:a,duplex:"half"});if(V.isFormData(a)&&(e=t.headers.get("content-type"))&&w.setContentType(e),t.body){const[e,r]=Ne(T,Se(Pe(g)));a=Ge(t.body,65536,e,r)}}V.isString(v)||(v=v?"include":"omit");const t=s&&"credentials"in r.prototype,c={...A,signal:E,method:o.toUpperCase(),headers:w.normalize().toJSON(),body:a,duplex:"half",credentials:t?v:void 0};_=s&&new r(i,c);let f=await(s?b(_,A):b(i,c));const p=l&&("stream"===y||"response"===y);if(l&&(m||p&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=f[t]});const t=V.toFiniteNumber(f.headers.get("content-length")),[r,i]=m&&Ne(t,Se(Pe(m),!0))||[];f=new n(Ge(f.body,65536,r,()=>{i&&i(),k&&k()}),e)}y=y||"text";let I=await h[V.findKey(h,y)||"text"](f,e);return!p&&k&&k(),await new Promise((t,r)=>{Re(t,r,{data:I,headers:_e.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:_})})}catch(t){if(k&&k(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,_),{cause:t.cause||t});throw J.from(t,t&&t.code,e,_)}}},Je=new Map,Ye=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:i}=t,s=[n,i,r];let o,a,c=s.length,u=Je;for(;c--;)o=s[c],a=u.get(o),void 0===a&&u.set(o,a=c?new Map:Ve(t)),u=a;return a};Ye();const Qe={http:null,xhr:Le,fetch:{get:Ye}};V.forEach(Qe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const $e=e=>`- ${e}`,Xe=e=>V.isFunction(e)||null===e||!1===e;var Ze={getAdapter:function(e,t){e=V.isArray(e)?e:[e];const{length:r}=e;let n,i;const s={};for(let o=0;o<r;o++){let r;if(n=e[o],i=n,!Xe(n)&&(i=Qe[(r=String(n)).toLowerCase()],void 0===i))throw new J(`Unknown adapter '${r}'`);if(i&&(V.isFunction(i)||(i=i.get(t))))break;s[r||"#"+o]=i}if(!i){const e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new J("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map($e).join("\n"):" "+$e(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return i},adapters:Qe};function et(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ie(null,e)}function tt(e){et(e),e.headers=_e.from(e.headers),e.data=ke.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ze.getAdapter(e.adapter||ye.adapter,e)(e).then(function(t){return et(e),t.data=ke.call(e,e.transformResponse,t),t.headers=_e.from(t.headers),t},function(t){return Te(t)||(et(e),t&&t.response&&(t.response.data=ke.call(e,e.transformResponse,t.response),t.response.headers=_e.from(t.response.headers))),Promise.reject(t)})}const rt="1.13.2",nt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{nt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const it={};nt.transitional=function(e,t,r){function n(e,t){return"[Axios v"+rt+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,s)=>{if(!1===e)throw new J(n(i," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!it[i]&&(it[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,s)}},nt.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var st={assertOptions:function(e,t,r){if("object"!=typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],o=t[s];if(o){const t=e[s],r=void 0===t||o(t,s,e);if(!0!==r)throw new J("option "+s+" must be "+r,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new J("Unknown option "+s,J.ERR_BAD_OPTION)}},validators:nt};const ot=st.validators;let at=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ae,response:new ae}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=De(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;void 0!==r&&st.assertOptions(r,{silentJSONParsing:ot.transitional(ot.boolean),forcedJSONParsing:ot.transitional(ot.boolean),clarifyTimeoutError:ot.transitional(ot.boolean)},!1),null!=n&&(V.isFunction(n)?t.paramsSerializer={serialize:n}:st.assertOptions(n,{encode:ot.function,serialize:ot.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),st.assertOptions(t,{baseUrl:ot.spelling("baseURL"),withXsrfToken:ot.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&V.merge(i.common,i[t.method]);i&&V.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=_e.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const c=[];let u;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let l,h=0;if(!a){const e=[tt.bind(this),void 0];for(e.unshift(...o),e.push(...c),l=e.length,u=Promise.resolve(t);h<l;)u=u.then(e[h++],e[h++]);return u}l=o.length;let d=t;for(;h<l;){const e=o[h++],t=o[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{u=tt.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,l=c.length;h<l;)u=u.then(c[h++],c[h++]);return u}getUri(e){return oe(xe((e=De(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};V.forEach(["delete","get","head","options"],function(e){at.prototype[e]=function(t,r){return this.request(De(r||{},{method:e,url:t,data:(r||{}).data}))}}),V.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,i){return this.request(De(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}at.prototype[e]=t(),at.prototype[e+"Form"]=t(!0)});const ct={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ct).forEach(([e,t])=>{ct[t]=e});const ut=function e(t){const r=new at(t),i=n(at.prototype.request,r);return V.extend(i,at.prototype,r,{allOwnKeys:!0}),V.extend(i,r,null,{allOwnKeys:!0}),i.create=function(r){return e(De(t,r))},i}(ye);ut.Axios=at,ut.CanceledError=Ie,ut.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,i){r.reason||(r.reason=new Ie(e,n,i),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const r=new e(function(e){t=e});return{token:r,cancel:t}}},ut.isCancel=Te,ut.VERSION=rt,ut.toFormData=te,ut.AxiosError=J,ut.Cancel=ut.CanceledError,ut.all=function(e){return Promise.all(e)},ut.spread=function(e){return function(t){return e.apply(null,t)}},ut.isAxiosError=function(e){return V.isObject(e)&&!0===e.isAxiosError},ut.mergeConfig=De,ut.AxiosHeaders=_e,ut.formToJSON=e=>ge(V.isHTMLForm(e)?new FormData(e):e),ut.getAdapter=Ze.getAdapter,ut.HttpStatusCode=ct,ut.default=ut;const{Axios:lt,AxiosError:ht,CanceledError:dt,isCancel:ft,CancelToken:pt,VERSION:mt,all:gt,Cancel:yt,isAxiosError:wt,spread:vt,toFormData:At,AxiosHeaders:bt,HttpStatusCode:Et,formToJSON:_t,getAdapter:kt,mergeConfig:Tt}=ut;var It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Rt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function St(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}const Nt=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var Pt=e=>!Nt.has(e&&e.code),Ct=Rt(Pt);const Ot="axios-retry";function xt(e){return!e.response&&(!!e.code&&(!["ERR_CANCELED","ECONNABORTED"].includes(e.code)&&Ct(e)))}const Mt=["get","head","options"],Dt=Mt.concat(["put","delete"]);function Ut(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function Lt(e){return!!e.config?.method&&(Ut(e)&&-1!==Dt.indexOf(e.config.method))}function Bt(e){return xt(e)||Lt(e)}function Ft(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let r=1e3*(Number(t)||0);return 0===r&&(r=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,r)}const qt={retries:3,retryCondition:Bt,retryDelay:function(e=0,t=void 0){return Math.max(0,Ft(t))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function Gt(e,t,r=!1){const n=function(e,t){return{...qt,...t,...e[Ot]}}(e,t||{});return n.retryCount=n.retryCount||0,n.lastRequestTime&&!r||(n.lastRequestTime=Date.now()),e[Ot]=n,n}const Ht=(e,t)=>{const r=e.interceptors.request.use(e=>(Gt(e,t,!0),e[Ot]?.validateResponse&&(e.validateStatus=()=>!1),e)),n=e.interceptors.response.use(null,async r=>{const{config:n}=r;if(!n)return Promise.reject(r);const i=Gt(n,t);return r.response&&i.validateResponse?.(r.response)?r.response:await async function(e,t){const{retries:r,retryCondition:n}=e,i=(e.retryCount||0)<r&&n(t);if("object"==typeof i)try{return!1!==await i}catch(e){return!1}return i}(i,r)?async function(e,t,r,n){t.retryCount+=1;const{retryDelay:i,shouldResetTimeout:s,onRetry:o}=t,a=i(t.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!s&&n.timeout&&t.lastRequestTime){const e=Date.now()-t.lastRequestTime,i=n.timeout-e-a;if(i<=0)return Promise.reject(r);n.timeout=i}return n.transformRequest=[e=>e],await o(t.retryCount,r,n),n.signal?.aborted?Promise.resolve(e(n)):new Promise(t=>{const r=()=>{clearTimeout(i),t(e(n))},i=setTimeout(()=>{t(e(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",r)},a);n.signal?.addEventListener&&n.signal.addEventListener("abort",r,{once:!0})})}(e,i,r,n):(await async function(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}(i,r),Promise.reject(r))});return{requestInterceptorId:r,responseInterceptorId:n}};Ht.isNetworkError=xt,Ht.isSafeRequestError=function(e){return!!e.config?.method&&(Ut(e)&&-1!==Mt.indexOf(e.config.method))},Ht.isIdempotentRequestError=Lt,Ht.isNetworkOrIdempotentRequestError=Bt,Ht.exponentialDelay=function(e=0,t=void 0,r=100){const n=2**e*r,i=Math.max(n,Ft(t));return i+.2*i*Math.random()},Ht.linearDelay=function(e=100){return(t=0,r=void 0)=>{const n=t*e;return Math.max(n,Ft(r))}},Ht.isRetryableError=Ut;const jt="https://api.openfort.io".replace(/\/+$/,"");let Kt=class{basePath;axios;configuration;constructor(e,t=jt,r=ut){this.basePath=t,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}},zt=class extends Error{field;constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};const Wt="https://example.com",Vt=function(e,t,r){if(null==r)throw new zt(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},Jt=async function(e,t){if(t&&t.accessToken){const r="function"==typeof t.accessToken?await t.accessToken():await t.accessToken;e.Authorization="Bearer "+r}};function Yt(e,t,r=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach(t=>Yt(e,t,r)):Object.keys(t).forEach(n=>Yt(e,t[n],`${r}${""!==r?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}const Qt=function(e,...t){const r=new URLSearchParams(e.search);Yt(r,t),e.search=r.toString()},$t=function(e,t,r){const n="string"!=typeof e;return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},Xt=function(e){return e.pathname+e.search+e.hash},Zt=function(e,t,r,n){return(i=t,s=r)=>{const o={...e.options,url:(n?.basePath||i.defaults.baseURL||s)+e.url};return i.request(o)}},er=function(e){const t=function(e){return{cancelTransferOwnership:async(t,r,n={})=>{Vt("cancelTransferOwnership","id",t),Vt("cancelTransferOwnership","cancelTransferOwnershipRequest",r);const i="/v1/accounts/{id}/cancel_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},completeRecovery:async(t,r,n={})=>{Vt("completeRecovery","id",t),Vt("completeRecovery","completeRecoveryRequest",r);const i="/v1/accounts/{id}/complete_recovery".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},createAccount:async(t,r={})=>{Vt("createAccount","createAccountRequest",t);const n=new URL("/v1/accounts",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},createAccountV2:async(t,r={})=>{Vt("createAccountV2","createAccountRequestV2",t);const n=new URL("/v2/accounts",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},deployAccount:async(t,r,n={})=>{Vt("deployAccount","id",t),Vt("deployAccount","deployRequest",r);const i="/v1/accounts/{id}/deploy".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},disableAccount:async(t,r={})=>{Vt("disableAccount","id",t);const n="/v1/accounts/{id}/disable".replace("{id}",encodeURIComponent(String(t))),i=new URL(n,Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...r},a={};await Jt(a,e),Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...r.headers},{url:Xt(i),options:o}},getAccount:async(t,r,n={})=>{Vt("getAccount","id",t);const i="/v1/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Jt(c,e),r&&(u.expand=r),Qt(s,u);let l=o&&o.headers?o.headers:{};return a.headers={...c,...l,...n.headers},{url:Xt(s),options:a}},getAccountV2:async(t,r={})=>{Vt("getAccountV2","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(n,Wt);let s;e&&(s=e.baseOptions);const o={method:"GET",...s,...r},a={};await Jt(a,e),Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...r.headers},{url:Xt(i),options:o}},getAccounts:async(t,r,n,i,s,o,a,c={})=>{const u=new URL("/v1/accounts",Wt);let l;e&&(l=e.baseOptions);const h={method:"GET",...l,...c},d={},f={};await Jt(d,e),void 0!==t&&(f.limit=t),void 0!==r&&(f.skip=r),void 0!==n&&(f.order=n),void 0!==i&&(f.chainId=i),void 0!==s&&(f.player=s),void 0!==o&&(f.address=o),a&&(f.expand=a),Qt(u,f);let p=l&&l.headers?l.headers:{};return h.headers={...d,...p,...c.headers},{url:Xt(u),options:h}},getAccountsV2:async(t,r,n,i,s,o,a,c,u={})=>{const l=new URL("/v2/accounts",Wt);let h;e&&(h=e.baseOptions);const d={method:"GET",...h,...u},f={},p={};await Jt(f,e),void 0!==t&&(p.limit=t),void 0!==r&&(p.skip=r),void 0!==n&&(p.order=n),void 0!==i&&(p.chainId=i),void 0!==s&&(p.user=s),void 0!==o&&(p.chainType=o),void 0!==a&&(p.accountType=a),void 0!==c&&(p.address=c),Qt(l,p);let m=h&&h.headers?h.headers:{};return d.headers={...f,...m,...u.headers},{url:Xt(l),options:d}},getSignerIdByAddress:async(t,r={})=>{Vt("getSignerIdByAddress","address",t);const n=new URL("/v2/accounts/signer",Wt);let i;e&&(i=e.baseOptions);const s={method:"GET",...i,...r},o={},a={};await Jt(o,e),void 0!==t&&(a.address=t),Qt(n,a);let c=i&&i.headers?i.headers:{};return s.headers={...o,...c,...r.headers},{url:Xt(n),options:s}},removeAccount:async(t,r={})=>{Vt("removeAccount","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(n,Wt);let s;e&&(s=e.baseOptions);const o={method:"DELETE",...s,...r},a={};await Jt(a,e),Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...r.headers},{url:Xt(i),options:o}},requestTransferOwnership:async(t,r,n={})=>{Vt("requestTransferOwnership","id",t),Vt("requestTransferOwnership","transferOwnershipRequest",r);const i="/v1/accounts/{id}/request_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},signPayload:async(t,r,n={})=>{Vt("signPayload","id",t),Vt("signPayload","signPayloadRequest",r);const i="/v1/accounts/{id}/sign_payload".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},startRecovery:async(t,r,n={})=>{Vt("startRecovery","id",t),Vt("startRecovery","startRecoveryRequest",r);const i="/v1/accounts/{id}/start_recovery".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}},switchChainV2:async(t,r={})=>{Vt("switchChainV2","switchChainQueriesV2",t);const n=new URL("/v2/accounts/switch-chain",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},syncAccount:async(t,r={})=>{Vt("syncAccount","id",t);const n="/v1/accounts/{id}/sync".replace("{id}",encodeURIComponent(String(t))),i=new URL(n,Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...r},a={};await Jt(a,e),Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...r.headers},{url:Xt(i),options:o}}}}(e);return{async cancelTransferOwnership(r,n,i){const s=await t.cancelTransferOwnership(r,n,i);return Zt(s,ut,jt,e)},async completeRecovery(r,n,i){const s=await t.completeRecovery(r,n,i);return Zt(s,ut,jt,e)},async createAccount(r,n){const i=await t.createAccount(r,n);return Zt(i,ut,jt,e)},async createAccountV2(r,n){const i=await t.createAccountV2(r,n);return Zt(i,ut,jt,e)},async deployAccount(r,n,i){const s=await t.deployAccount(r,n,i);return Zt(s,ut,jt,e)},async disableAccount(r,n){const i=await t.disableAccount(r,n);return Zt(i,ut,jt,e)},async getAccount(r,n,i){const s=await t.getAccount(r,n,i);return Zt(s,ut,jt,e)},async getAccountV2(r,n){const i=await t.getAccountV2(r,n);return Zt(i,ut,jt,e)},async getAccounts(r,n,i,s,o,a,c,u){const l=await t.getAccounts(r,n,i,s,o,a,c,u);return Zt(l,ut,jt,e)},async getAccountsV2(r,n,i,s,o,a,c,u,l){const h=await t.getAccountsV2(r,n,i,s,o,a,c,u,l);return Zt(h,ut,jt,e)},async getSignerIdByAddress(r,n){const i=await t.getSignerIdByAddress(r,n);return Zt(i,ut,jt,e)},async removeAccount(r,n){const i=await t.removeAccount(r,n);return Zt(i,ut,jt,e)},async requestTransferOwnership(r,n,i){const s=await t.requestTransferOwnership(r,n,i);return Zt(s,ut,jt,e)},async signPayload(r,n,i){const s=await t.signPayload(r,n,i);return Zt(s,ut,jt,e)},async startRecovery(r,n,i){const s=await t.startRecovery(r,n,i);return Zt(s,ut,jt,e)},async switchChainV2(r,n){const i=await t.switchChainV2(r,n);return Zt(i,ut,jt,e)},async syncAccount(r,n){const i=await t.syncAccount(r,n);return Zt(i,ut,jt,e)}}};let tr=class extends Kt{cancelTransferOwnership(e,t){return er(this.configuration).cancelTransferOwnership(e.id,e.cancelTransferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}completeRecovery(e,t){return er(this.configuration).completeRecovery(e.id,e.completeRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}createAccount(e,t){return er(this.configuration).createAccount(e.createAccountRequest,t).then(e=>e(this.axios,this.basePath))}createAccountV2(e,t){return er(this.configuration).createAccountV2(e.createAccountRequestV2,t).then(e=>e(this.axios,this.basePath))}deployAccount(e,t){return er(this.configuration).deployAccount(e.id,e.deployRequest,t).then(e=>e(this.axios,this.basePath))}disableAccount(e,t){return er(this.configuration).disableAccount(e.id,t).then(e=>e(this.axios,this.basePath))}getAccount(e,t){return er(this.configuration).getAccount(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccountV2(e,t){return er(this.configuration).getAccountV2(e.id,t).then(e=>e(this.axios,this.basePath))}getAccounts(e={},t){return er(this.configuration).getAccounts(e.limit,e.skip,e.order,e.chainId,e.player,e.address,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccountsV2(e={},t){return er(this.configuration).getAccountsV2(e.limit,e.skip,e.order,e.chainId,e.user,e.chainType,e.accountType,e.address,t).then(e=>e(this.axios,this.basePath))}getSignerIdByAddress(e,t){return er(this.configuration).getSignerIdByAddress(e.address,t).then(e=>e(this.axios,this.basePath))}removeAccount(e,t){return er(this.configuration).removeAccount(e.id,t).then(e=>e(this.axios,this.basePath))}requestTransferOwnership(e,t){return er(this.configuration).requestTransferOwnership(e.id,e.transferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}signPayload(e,t){return er(this.configuration).signPayload(e.id,e.signPayloadRequest,t).then(e=>e(this.axios,this.basePath))}startRecovery(e,t){return er(this.configuration).startRecovery(e.id,e.startRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}switchChainV2(e,t){return er(this.configuration).switchChainV2(e.switchChainQueriesV2,t).then(e=>e(this.axios,this.basePath))}syncAccount(e,t){return er(this.configuration).syncAccount(e.id,t).then(e=>e(this.axios,this.basePath))}};const rr=function(e){const t=function(e){return{authenticateSIWE:async(t,r={})=>{Vt("authenticateSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/authenticate",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},getJwks:async(t,r={})=>{Vt("getJwks","publishableKey",t);const n="/iam/v1/{publishable_key}/jwks.json".replace("{publishable_key}",encodeURIComponent(String(t))),i=new URL(n,Wt);let s;e&&(s=e.baseOptions);const o={method:"GET",...s,...r};Qt(i,{});let a=s&&s.headers?s.headers:{};return o.headers={...a,...r.headers},{url:Xt(i),options:o}},initOAuth:async(t,r,n={})=>{Vt("initOAuth","oAuthInitRequest",t);const i=new URL("/iam/v1/oauth/init",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},initSIWE:async(t,r,n={})=>{Vt("initSIWE","sIWERequest",t);const i=new URL("/iam/v1/siwe/init",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},linkEmail:async(t,r,n={})=>{Vt("linkEmail","loginRequest",t);const i=new URL("/iam/v1/password/link",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},linkOAuth:async(t,r,n={})=>{Vt("linkOAuth","oAuthInitRequest",t);const i=new URL("/iam/v1/oauth/init_link",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},linkSIWE:async(t,r={})=>{Vt("linkSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/link",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},linkThirdParty:async(t,r,n={})=>{Vt("linkThirdParty","thirdPartyLinkRequest",t);const i=new URL("/iam/v1/oauth/link",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},loginEmailPassword:async(t,r,n={})=>{Vt("loginEmailPassword","loginRequest",t);const i=new URL("/iam/v1/password/login",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},loginOIDC:async(t,r,n={})=>{Vt("loginOIDC","loginOIDCRequest",t);const i=new URL("/iam/v1/oidc/login",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},loginWithIdToken:async(t,r={})=>{Vt("loginWithIdToken","loginWithIdTokenRequest",t);const n=new URL("/iam/v1/oauth/login_id_token",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},logout:async(t,r={})=>{Vt("logout","logoutRequest",t);const n=new URL("/iam/v1/sessions/logout",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},me:async(t={})=>{const r=new URL("/iam/v1/me",Wt);let n;e&&(n=e.baseOptions);const i={method:"GET",...n,...t};Qt(r,{});let s=n&&n.headers?n.headers:{};return i.headers={...s,...t.headers},{url:Xt(r),options:i}},poolOAuth:async(t,r={})=>{Vt("poolOAuth","key",t);const n=new URL("/iam/v1/oauth/pool",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={},a={};await Jt(o,e),void 0!==t&&(a.key=t),Qt(n,a);let c=i&&i.headers?i.headers:{};return s.headers={...o,...c,...r.headers},{url:Xt(n),options:s}},refresh:async(t,r={})=>{Vt("refresh","refreshTokenRequest",t);const n=new URL("/iam/v1/sessions",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},registerGuest:async(t,r={})=>{const n=new URL("/iam/v1/guest",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),null!=t&&(o["x-game"]=String(t)),Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},{url:Xt(n),options:s}},requestEmailVerification:async(t,r={})=>{Vt("requestEmailVerification","requestVerifyEmailRequest",t);const n=new URL("/iam/v1/password/request_email_verification",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},requestResetPassword:async(t,r={})=>{Vt("requestResetPassword","requestResetPasswordRequest",t);const n=new URL("/iam/v1/password/request_reset",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},resetPassword:async(t,r={})=>{Vt("resetPassword","resetPasswordRequest",t);const n=new URL("/iam/v1/password/reset",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},signupEmailPassword:async(t,r,n={})=>{Vt("signupEmailPassword","signupRequest",t);const i=new URL("/iam/v1/password/signup",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},thirdParty:async(t,r,n={})=>{Vt("thirdParty","thirdPartyOAuthRequest",t);const i=new URL("/iam/v1/oauth/third_party",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},unlinkEmail:async(t,r={})=>{Vt("unlinkEmail","unlinkEmailRequest",t);const n=new URL("/iam/v1/password/unlink",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},unlinkOAuth:async(t,r={})=>{Vt("unlinkOAuth","unlinkOAuthRequest",t);const n=new URL("/iam/v1/oauth/unlink",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},unlinkSIWE:async(t,r={})=>{Vt("unlinkSIWE","sIWERequest",t);const n=new URL("/iam/v1/siwe/unlink",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},verifyEmail:async(t,r={})=>{Vt("verifyEmail","verifyEmailRequest",t);const n=new URL("/iam/v1/password/verify_email",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},verifyOAuthToken:async(t,r={})=>{Vt("verifyOAuthToken","authenticateOAuthRequest",t);const n=new URL("/iam/v1/oauth/verify",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}}}}(e);return{async authenticateSIWE(r,n){const i=await t.authenticateSIWE(r,n);return Zt(i,ut,jt,e)},async getJwks(r,n){const i=await t.getJwks(r,n);return Zt(i,ut,jt,e)},async initOAuth(r,n,i){const s=await t.initOAuth(r,n,i);return Zt(s,ut,jt,e)},async initSIWE(r,n,i){const s=await t.initSIWE(r,n,i);return Zt(s,ut,jt,e)},async linkEmail(r,n,i){const s=await t.linkEmail(r,n,i);return Zt(s,ut,jt,e)},async linkOAuth(r,n,i){const s=await t.linkOAuth(r,n,i);return Zt(s,ut,jt,e)},async linkSIWE(r,n){const i=await t.linkSIWE(r,n);return Zt(i,ut,jt,e)},async linkThirdParty(r,n,i){const s=await t.linkThirdParty(r,n,i);return Zt(s,ut,jt,e)},async loginEmailPassword(r,n,i){const s=await t.loginEmailPassword(r,n,i);return Zt(s,ut,jt,e)},async loginOIDC(r,n,i){const s=await t.loginOIDC(r,n,i);return Zt(s,ut,jt,e)},async loginWithIdToken(r,n){const i=await t.loginWithIdToken(r,n);return Zt(i,ut,jt,e)},async logout(r,n){const i=await t.logout(r,n);return Zt(i,ut,jt,e)},async me(r){const n=await t.me(r);return Zt(n,ut,jt,e)},async poolOAuth(r,n){const i=await t.poolOAuth(r,n);return Zt(i,ut,jt,e)},async refresh(r,n){const i=await t.refresh(r,n);return Zt(i,ut,jt,e)},async registerGuest(r,n){const i=await t.registerGuest(r,n);return Zt(i,ut,jt,e)},async requestEmailVerification(r,n){const i=await t.requestEmailVerification(r,n);return Zt(i,ut,jt,e)},async requestResetPassword(r,n){const i=await t.requestResetPassword(r,n);return Zt(i,ut,jt,e)},async resetPassword(r,n){const i=await t.resetPassword(r,n);return Zt(i,ut,jt,e)},async signupEmailPassword(r,n,i){const s=await t.signupEmailPassword(r,n,i);return Zt(s,ut,jt,e)},async thirdParty(r,n,i){const s=await t.thirdParty(r,n,i);return Zt(s,ut,jt,e)},async unlinkEmail(r,n){const i=await t.unlinkEmail(r,n);return Zt(i,ut,jt,e)},async unlinkOAuth(r,n){const i=await t.unlinkOAuth(r,n);return Zt(i,ut,jt,e)},async unlinkSIWE(r,n){const i=await t.unlinkSIWE(r,n);return Zt(i,ut,jt,e)},async verifyEmail(r,n){const i=await t.verifyEmail(r,n);return Zt(i,ut,jt,e)},async verifyOAuthToken(r,n){const i=await t.verifyOAuthToken(r,n);return Zt(i,ut,jt,e)}}};class nr extends Kt{authenticateSIWE(e,t){return rr(this.configuration).authenticateSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}getJwks(e,t){return rr(this.configuration).getJwks(e.publishableKey,t).then(e=>e(this.axios,this.basePath))}initOAuth(e,t){return rr(this.configuration).initOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}initSIWE(e,t){return rr(this.configuration).initSIWE(e.sIWERequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkEmail(e,t){return rr(this.configuration).linkEmail(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkOAuth(e,t){return rr(this.configuration).linkOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkSIWE(e,t){return rr(this.configuration).linkSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}linkThirdParty(e,t){return rr(this.configuration).linkThirdParty(e.thirdPartyLinkRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginEmailPassword(e,t){return rr(this.configuration).loginEmailPassword(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginOIDC(e,t){return rr(this.configuration).loginOIDC(e.loginOIDCRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginWithIdToken(e,t){return rr(this.configuration).loginWithIdToken(e.loginWithIdTokenRequest,t).then(e=>e(this.axios,this.basePath))}logout(e,t){return rr(this.configuration).logout(e.logoutRequest,t).then(e=>e(this.axios,this.basePath))}me(e){return rr(this.configuration).me(e).then(e=>e(this.axios,this.basePath))}poolOAuth(e,t){return rr(this.configuration).poolOAuth(e.key,t).then(e=>e(this.axios,this.basePath))}refresh(e,t){return rr(this.configuration).refresh(e.refreshTokenRequest,t).then(e=>e(this.axios,this.basePath))}registerGuest(e={},t){return rr(this.configuration).registerGuest(e.xGame,t).then(e=>e(this.axios,this.basePath))}requestEmailVerification(e,t){return rr(this.configuration).requestEmailVerification(e.requestVerifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}requestResetPassword(e,t){return rr(this.configuration).requestResetPassword(e.requestResetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}resetPassword(e,t){return rr(this.configuration).resetPassword(e.resetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}signupEmailPassword(e,t){return rr(this.configuration).signupEmailPassword(e.signupRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}thirdParty(e,t){return rr(this.configuration).thirdParty(e.thirdPartyOAuthRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}unlinkEmail(e,t){return rr(this.configuration).unlinkEmail(e.unlinkEmailRequest,t).then(e=>e(this.axios,this.basePath))}unlinkOAuth(e,t){return rr(this.configuration).unlinkOAuth(e.unlinkOAuthRequest,t).then(e=>e(this.axios,this.basePath))}unlinkSIWE(e,t){return rr(this.configuration).unlinkSIWE(e.sIWERequest,t).then(e=>e(this.axios,this.basePath))}verifyEmail(e,t){return rr(this.configuration).verifyEmail(e.verifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}verifyOAuthToken(e,t){return rr(this.configuration).verifyOAuthToken(e.authenticateOAuthRequest,t).then(e=>e(this.axios,this.basePath))}}let ir=class extends Kt{handleRpcRequest(e,t){return function(e){const t=function(e){return{handleRpcRequest:async(t,r={})=>{Vt("handleRpcRequest","jsonRpcRequest",t);const n=new URL("/rpc",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r};Qt(n,{});let o=i&&i.headers?i.headers:{};return s.headers={"Content-Type":"application/json",...o,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}}}}(e);return{async handleRpcRequest(r,n){const i=await t.handleRpcRequest(r,n);return Zt(i,ut,jt,e)}}}(this.configuration).handleRpcRequest(e.jsonRpcRequest,t).then(e=>e(this.axios,this.basePath))}};const sr=function(e){const t=function(e){return{createSession:async(t,r,n={})=>{Vt("createSession","createSessionRequest",t);const i=new URL("/v1/sessions",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},getPlayerSessions:async(t,r,n,i,s,o={})=>{Vt("getPlayerSessions","player",t);const a=new URL("/v1/sessions",Wt);let c;e&&(c=e.baseOptions);const u={method:"GET",...c,...o},l={},h={};await Jt(l,e),void 0!==r&&(h.limit=r),void 0!==n&&(h.skip=n),void 0!==i&&(h.order=i),void 0!==t&&(h.player=t),s&&(h.expand=s),Qt(a,h);let d=c&&c.headers?c.headers:{};return u.headers={...l,...d,...o.headers},{url:Xt(a),options:u}},getSession:async(t,r,n={})=>{Vt("getSession","id",t);const i="/v1/sessions/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Jt(c,e),r&&(u.expand=r),Qt(s,u);let l=o&&o.headers?o.headers:{};return a.headers={...c,...l,...n.headers},{url:Xt(s),options:a}},revokeSession:async(t,r,n={})=>{Vt("revokeSession","revokeSessionRequest",t);const i=new URL("/v1/sessions/revoke",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},signatureSession:async(t,r,n={})=>{Vt("signatureSession","id",t),Vt("signatureSession","signatureRequest",r);const i="/v1/sessions/{id}/signature".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}}}}(e);return{async createSession(r,n,i){const s=await t.createSession(r,n,i);return Zt(s,ut,jt,e)},async getPlayerSessions(r,n,i,s,o,a){const c=await t.getPlayerSessions(r,n,i,s,o,a);return Zt(c,ut,jt,e)},async getSession(r,n,i){const s=await t.getSession(r,n,i);return Zt(s,ut,jt,e)},async revokeSession(r,n,i){const s=await t.revokeSession(r,n,i);return Zt(s,ut,jt,e)},async signatureSession(r,n,i){const s=await t.signatureSession(r,n,i);return Zt(s,ut,jt,e)}}};class or extends Kt{createSession(e,t){return sr(this.configuration).createSession(e.createSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}getPlayerSessions(e,t){return sr(this.configuration).getPlayerSessions(e.player,e.limit,e.skip,e.order,e.expand,t).then(e=>e(this.axios,this.basePath))}getSession(e,t){return sr(this.configuration).getSession(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}revokeSession(e,t){return sr(this.configuration).revokeSession(e.revokeSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}signatureSession(e,t){return sr(this.configuration).signatureSession(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const ar=function(e){const t=function(e){return{createTransactionIntent:async(t,r,n={})=>{Vt("createTransactionIntent","createTransactionIntentRequest",t);const i=new URL("/v1/transaction_intents",Wt);let s;e&&(s=e.baseOptions);const o={method:"POST",...s,...n},a={};await Jt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Qt(i,{});let c=s&&s.headers?s.headers:{};return o.headers={...a,...c,...n.headers},o.data=$t(t,o,e),{url:Xt(i),options:o}},estimateTransactionIntentCost:async(t,r={})=>{Vt("estimateTransactionIntentCost","createTransactionIntentRequest",t);const n=new URL("/v1/transaction_intents/estimate_gas_cost",Wt);let i;e&&(i=e.baseOptions);const s={method:"POST",...i,...r},o={};await Jt(o,e),o["Content-Type"]="application/json",Qt(n,{});let a=i&&i.headers?i.headers:{};return s.headers={...o,...a,...r.headers},s.data=$t(t,s,e),{url:Xt(n),options:s}},getTransactionIntent:async(t,r,n={})=>{Vt("getTransactionIntent","id",t);const i="/v1/transaction_intents/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Jt(c,e),r&&(u.expand=r),Qt(s,u);let l=o&&o.headers?o.headers:{};return a.headers={...c,...l,...n.headers},{url:Xt(s),options:a}},getTransactionIntents:async(t,r,n,i,s,o,a,c,u,l={})=>{const h=new URL("/v1/transaction_intents",Wt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...l},p={},m={};await Jt(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),i&&(m.expand=i),void 0!==s&&(m.chainId=s),o&&(m.account=o),a&&(m.player=a),void 0!==c&&(m.status=c),u&&(m.policy=u),Qt(h,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...l.headers},{url:Xt(h),options:f}},signature:async(t,r,n={})=>{Vt("signature","id",t),Vt("signature","signatureRequest",r);const i="/v1/transaction_intents/{id}/signature".replace("{id}",encodeURIComponent(String(t))),s=new URL(i,Wt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Jt(c,e),await Jt(c,e),c["Content-Type"]="application/json",Qt(s,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=$t(r,a,e),{url:Xt(s),options:a}}}}(e);return{async createTransactionIntent(r,n,i){const s=await t.createTransactionIntent(r,n,i);return Zt(s,ut,jt,e)},async estimateTransactionIntentCost(r,n){const i=await t.estimateTransactionIntentCost(r,n);return Zt(i,ut,jt,e)},async getTransactionIntent(r,n,i){const s=await t.getTransactionIntent(r,n,i);return Zt(s,ut,jt,e)},async getTransactionIntents(r,n,i,s,o,a,c,u,l,h){const d=await t.getTransactionIntents(r,n,i,s,o,a,c,u,l,h);return Zt(d,ut,jt,e)},async signature(r,n,i){const s=await t.signature(r,n,i);return Zt(s,ut,jt,e)}}};let cr=class extends Kt{createTransactionIntent(e,t){return ar(this.configuration).createTransactionIntent(e.createTransactionIntentRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}estimateTransactionIntentCost(e,t){return ar(this.configuration).estimateTransactionIntentCost(e.createTransactionIntentRequest,t).then(e=>e(this.axios,this.basePath))}getTransactionIntent(e,t){return ar(this.configuration).getTransactionIntent(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getTransactionIntents(e={},t){return ar(this.configuration).getTransactionIntents(e.limit,e.skip,e.order,e.expand,e.chainId,e.account,e.player,e.status,e.policy,t).then(e=>e(this.axios,this.basePath))}signature(e,t){return ar(this.configuration).signature(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}},ur=class{apiKey;username;password;accessToken;basePath;baseOptions;formDataCtor;constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};const lr=({basePath:e,accessToken:t,nativeAppIdentifier:r})=>{if(!e.trim())throw Error("basePath can not be empty");const n={basePath:e,accessToken:t};return r&&(n.baseOptions={headers:{"x-native-app-identifier":r}}),new ur(n)};let hr=class{config;transactionIntentsApi;accountsApi;rpcApi;sessionsApi;authenticationApi;storage;onLogout;axiosInstance;constructor(e){this.storage=e.storage,this.onLogout=e.onLogout,this.axiosInstance=ut.create(),Ht(this.axiosInstance,{retries:3,retryDelay:Ht.exponentialDelay,retryCondition:Ht.isRetryableError}),this.setupInterceptors();const t={basePath:e.basePath,accessToken:e.accessToken,nativeAppIdentifier:e.nativeAppIdentifier};this.config={backend:lr(t)},this.transactionIntentsApi=new cr(this.config.backend,void 0,this.axiosInstance),this.accountsApi=new tr(this.config.backend,void 0,this.axiosInstance),this.sessionsApi=new or(this.config.backend,void 0,this.axiosInstance),this.rpcApi=new ir(this.config.backend,void 0,this.axiosInstance),this.authenticationApi=new nr(this.config.backend,void 0,this.axiosInstance)}setupInterceptors(){this.axiosInstance.interceptors.response.use(e=>e,async e=>(401===e.response?.status&&(await this.clearAuthenticationState(),this.emitLogoutEvent()),Promise.reject(e)))}async clearAuthenticationState(){if(this.storage)try{this.storage.remove("openfort.authentication"),this.storage.remove("openfort.account"),this.storage.remove("openfort.session"),this.storage.remove("openfort.pkce_state"),this.storage.remove("openfort.pkce_verifier")}catch(e){}}emitLogoutEvent(){if(this.onLogout)try{this.onLogout()}catch(e){}}};var dr;!function(e){e.AUTHENTICATION="openfort.authentication",e.CONFIGURATION="openfort.configuration",e.ACCOUNT="openfort.account",e.TEST="openfort.test",e.SESSION="openfort.session",e.PKCE_STATE="openfort.pkce_state",e.PKCE_VERIFIER="openfort.pkce_verifier"}(dr||(dr={}));let fr=class e{type;token;player;refreshToken;thirdPartyProvider;thirdPartyTokenType;constructor(e,t,r,n,i,s){this.type=e,this.token=t,this.player=r,this.refreshToken=n,this.thirdPartyProvider=i,this.thirdPartyTokenType=s}static thirdPartyAuthToken;get provider(){return this.thirdPartyProvider}get tokenType(){return this.thirdPartyTokenType}save(t){const r="third_party"===this.type;r&&(e.thirdPartyAuthToken=this.token),t.save(dr.AUTHENTICATION,JSON.stringify({type:this.type,token:r?void 0:this.token,player:this.player,refreshToken:this.refreshToken,thirdPartyProvider:this.thirdPartyProvider,thirdPartyTokenType:this.thirdPartyTokenType}))}static clear(t){e.thirdPartyAuthToken="",t.remove(dr.AUTHENTICATION)}static async fromStorage(t){const r=await t.get(dr.AUTHENTICATION);if(!r)return null;try{const t=JSON.parse(r);return"third_party"===t.type&&(t.token=e.thirdPartyAuthToken),new e(t.type,t.token,t.player,t.refreshToken,t.thirdPartyProvider,t.thirdPartyTokenType)}catch{return null}}};var pr;!function(e){e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_CONFIGURATION="INVALID_CONFIGURATION",e.NOT_LOGGED_IN_ERROR="NOT_LOGGED_IN_ERROR",e.ALREADY_LOGGED_IN_ERROR="ALREADY_LOGGED_IN_ERROR",e.REFRESH_TOKEN_ERROR="REFRESH_TOKEN_ERROR",e.USER_REGISTRATION_ERROR="USER_REGISTRATION_ERROR",e.LOGOUT_ERROR="LOGOUT_ERROR",e.OPERATION_NOT_SUPPORTED_ERROR="OPERATION_NOT_SUPPORTED_ERROR",e.MISSING_SIGNER_ERROR="MISSING_SIGNER_ERROR",e.USER_NOT_AUTHORIZED_ON_ECOSYSTEM="USER_NOT_AUTHORIZED_ON_ECOSYSTEM",e.INTERNAL_ERROR="INTERNAL_ERROR"}(pr||(pr={}));let mr=class extends Error{type;data;constructor(e,t,r={}){super(e),this.type=t,this.data=r}};const gr=async(e,t,r)=>{try{return await e()}catch(e){let n;const i={};let s;wt(e)?(s=e.response?.status,n=e.response?.data?.error&&function(e){return"type"in e&&"message"in e}(e.response.data.error)?e.response.data.error.message:e.message):n=e.message;const o=void 0!==s&&t[s]?t[s]:t.default,a=new mr(n,o,i);throw void 0!==s&&t[s]||r?.(e,a),a}};var yr,wr,vr,Ar,br,Er,_r,kr,Tr,Ir,Rr,Sr,Nr,Pr;!function(e){e[e.NONE=0]="NONE",e[e.UNAUTHENTICATED=1]="UNAUTHENTICATED",e[e.EMBEDDED_SIGNER_NOT_CONFIGURED=2]="EMBEDDED_SIGNER_NOT_CONFIGURED",e[e.CREATING_ACCOUNT=3]="CREATING_ACCOUNT",e[e.READY=4]="READY"}(yr||(yr={})),function(e){e.ON_AUTH_INIT="onAuthInit",e.ON_AUTH_SUCCESS="onAuthSuccess",e.ON_AUTH_FAILURE="onAuthFailure",e.ON_LOGOUT="onLogout",e.ON_SWITCH_ACCOUNT="onSwitchAccount",e.ON_SIGNED_MESSAGE="onSignedMessage",e.ON_EMBEDDED_WALLET_CREATED="onEmbeddedWalletCreated",e.ON_EMBEDDED_WALLET_RECOVERED="onEmbeddedWalletRecovered"}(wr||(wr={})),function(e){e.PASSWORD="password",e.AUTOMATIC="automatic",e.PASSKEY="passkey"}(vr||(vr={})),function(e){e.ERC6551V1="ERC6551V1",e.UPGRADEABLE_V5="UpgradeableV5",e.UPGRADEABLE_V4="UpgradeableV4",e.UPGRADEABLE_V6="UpgradeableV6",e.ZKSYNC_UPGRADEABLE_V1="ZKSyncUpgradeableV1",e.ZKSYNC_UPGRADEABLE_V2="ZKSyncUpgradeableV2",e.SIMPLE="Simple",e.CALIBUR="Calibur"}(Ar||(Ar={})),function(e){e.OPENFORT="openfort",e.THIRD_PARTY="thirdParty"}(br||(br={})),function(e){e.ID_TOKEN="idToken",e.CUSTOM_TOKEN="customToken"}(Er||(Er={})),function(e){e.ACCELBYTE="accelbyte",e.FIREBASE="firebase",e.BETTER_AUTH="better-auth",e.LOOTLOCKER="lootlocker",e.PLAYFAB="playfab",e.SUPABASE="supabase",e.CUSTOM="custom",e.OIDC="oidc"}(_r||(_r={})),function(e){e.EMAIL="email",e.WALLET="wallet"}(kr||(kr={})),function(e){e.GOOGLE="google",e.TWITTER="twitter",e.APPLE="apple",e.FACEBOOK="facebook",e.DISCORD="discord",e.EPIC_GAMES="epic_games",e.LINE="line"}(Tr||(Tr={})),function(e){e.ACTION_VERIFY_EMAIL="verify_email"}(Ir||(Ir={})),function(e){e.S256="S256"}(Rr||(Rr={})),function(e){e.EOA="Externally Owned Account",e.SMART_ACCOUNT="Smart Account",e.DELEGATED_ACCOUNT="Delegated Account"}(Sr||(Sr={})),function(e){e.EVM="EVM",e.SVM="SVM"}(Nr||(Nr={})),function(e){e.ASC="asc",e.DESC="desc"}(Pr||(Pr={}));let Cr=class{storage;authManager;validateAndRefreshToken;ensureInitialized;eventEmitter;constructor(e,t,r,n,i){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.eventEmitter=i}async logInWithEmailPassword({email:e,password:t,ecosystemGame:r}){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"email",provider:"email"});try{const n=await this.authManager.loginEmailPassword(e,t,r);return"action"in n||(new fr("jwt",n.token,n.player.id,n.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,n)),n}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async signUpGuest(){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"guest"});try{const e=await this.authManager.registerGuest();return new fr("jwt",e.token,e.player.id,e.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,e),e}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async signUpWithEmailPassword({email:e,password:t,options:r,ecosystemGame:n}){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"email",provider:"email"});try{const i=await this.authManager.signupEmailPassword(e,t,r?.data.name,n);return"action"in i||(new fr("jwt",i.token,i.player.id,i.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,i)),i}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async linkEmailPassword({email:e,password:t,authToken:r,ecosystemGame:n}){return await this.validateAndRefreshToken(),await this.authManager.linkEmail(e,t,r,n)}async unlinkEmailPassword({email:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkEmail(e,t)}async requestEmailVerification({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestEmailVerification(e,t)}async resetPassword({email:e,password:t,state:r}){await this.ensureInitialized(),await this.authManager.resetPassword(e,t,r)}async requestResetPassword({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestResetPassword(e,t)}async verifyEmail({email:e,state:t}){await this.ensureInitialized(),await this.authManager.verifyEmail(e,t)}async initOAuth({provider:e,options:t,ecosystemGame:r}){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);return this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"oauth",provider:e}),await this.authManager.initOAuth(e,t,r)}async initLinkOAuth({provider:e,options:t,ecosystemGame:r}){await this.validateAndRefreshToken();const n=await fr.fromStorage(this.storage);if(!n)throw new mr("No authentication found",pr.NOT_LOGGED_IN_ERROR);return this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"oauth",provider:e}),await this.authManager.linkOAuth(n,e,t,r)}async unlinkOAuth({provider:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkOAuth(e,t)}async poolOAuth(e){await this.ensureInitialized();try{const t=await this.authManager.poolOAuth(e);return new fr("jwt",t.token,t.player.id,t.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,t),t}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async loginWithIdToken({provider:e,token:t,ecosystemGame:r}){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"idToken",provider:e});try{const n=await this.authManager.loginWithIdToken(e,t,r);return new fr("jwt",n.token,n.player.id,n.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,n),n}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async initSIWE({address:e,ecosystemGame:t}){return await this.ensureInitialized(),await this.authManager.initSIWE(e,t)}async authenticateWithSIWE({signature:e,message:t,walletClientType:r,connectorType:n}){if(await this.ensureInitialized(),await fr.fromStorage(this.storage))throw new mr("Already logged in",pr.ALREADY_LOGGED_IN_ERROR);this.eventEmitter.emit(wr.ON_AUTH_INIT,{method:"siwe",provider:"wallet"});try{const i=await this.authManager.authenticateSIWE(e,t,r,n);return new fr("jwt",i.token,i.player.id,i.refreshToken).save(this.storage),this.eventEmitter.emit(wr.ON_AUTH_SUCCESS,i),i}catch(e){throw this.eventEmitter.emit(wr.ON_AUTH_FAILURE,e),e}}async linkWallet({signature:e,message:t,walletClientType:r,connectorType:n,authToken:i}){return await this.validateAndRefreshToken(),await this.authManager.linkWallet(e,t,r,n,i)}async unlinkWallet({address:e,authToken:t}){return await this.validateAndRefreshToken(),await this.authManager.unlinkWallet(e,t)}async storeCredentials(e){if(await this.ensureInitialized(),!e.player)throw new mr("Player ID is required to store credentials",pr.INVALID_CONFIGURATION);new fr("jwt",e.accessToken,e.player,e.refreshToken).save(this.storage)}async logout(){const e=await fr.fromStorage(this.storage);if(e){try{"third_party"!==e.type&&await this.authManager.logout(e.token,e.refreshToken??"")}catch(e){}fr.clear(this.storage),this.eventEmitter.emit(wr.ON_LOGOUT)}}};var Or={};!function(e){var t=It&&It.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};function r(e){return e[Math.floor(Math.random()*e.length)]}function n(e){return e.reduce(function(e,t){return e.length>t.length?e:t})}function i(e){return e.reduce(function(e,t){return e.length<t.length?e:t})}function s(n){void 0===n&&(n={}),"string"==typeof n&&(n={separator:n}),"boolean"==typeof n&&(n={capitalize:n});var i=n.separator,s=void 0===i?"":i,o=n.capitalize,a=void 0===o||o,c=n.adjectiveCount,u=void 0===c?1:c,l=n.addAdverb,h=void 0!==l&&l,d=t(t(t([],t([],Array(u),!0).map(function(t){return r(e.adjectives)}),!0),[r(e.nouns),r(e.verbs)],!1),h?[r(e.adverbs)]:[],!0);return a&&(d=d.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})),d.join(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.minLength=e.maxLength=e.poolSize=e.humanId=e.adverbs=e.verbs=e.nouns=e.adjectives=void 0,e.adjectives=["afraid","all","beige","better","big","blue","bold","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","common","cool","cozy","crisp","cuddly","curly","curvy","cute","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","fair","famous","fancy","fast","few","fiery","fifty","fine","five","flat","floppy","fluffy","forty","four","frank","free","fresh","fruity","full","funky","funny","fuzzy","gentle","giant","gold","good","goofy","great","green","grumpy","happy","heavy","hip","honest","hot","huge","humble","hungry","icy","itchy","jolly","khaki","kind","large","late","lazy","legal","lemon","light","little","long","loose","loud","lovely","lucky","major","many","metal","mighty","modern","moody","neat","new","nice","nine","ninety","odd","old","olive","open","orange","perky","petite","pink","plain","plenty","polite","pretty","proud","public","puny","purple","quick","quiet","rare","ready","real","red","rich","ripe","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","sparkly","spicy","spotty","stale","strict","strong","sunny","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","wacky","warm","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],e.nouns=["actors","ads","adults","aliens","animals","ants","apes","apples","areas","baboons","badgers","bags","balloons","bananas","banks","bars","baths","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","breads","brooms","buckets","bugs","buses","bushes","buttons","camels","cameras","candies","candles","canyons","carpets","carrots","cars","cases","cats","chairs","chefs","chicken","cities","clocks","cloths","clouds","clowns","clubs","coats","cobras","coins","colts","comics","cooks","corners","cougars","cows","crabs","crews","cups","cycles","dancers","days","deer","deserts","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","eagles","ears","eels","eggs","emus","ends","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hoops","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lilies","lines","lions","lizards","llamas","loops","mails","mammals","mangos","maps","masks","meals","melons","memes","meteors","mice","mirrors","moles","moments","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","papers","parents","parks","parrots","parts","paths","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","regions","results","rice","rings","rivers","rockets","rocks","rooms","roses","rules","sails","schools","seals","seas","sheep","shirts","shoes","showers","shrimps","sides","signs","singers","sites","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stamps","stars","states","steaks","streets","suits","suns","swans","symbols","tables","taxes","taxis","teams","teeth","terms","things","ties","tigers","times","tips","tires","toes","tools","towns","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","wasps","waves","ways","webs","weeks","windows","wings","wolves","wombats","words","worlds","worms","yaks","years","zebras","zoos"],e.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enjoy","enter","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","lie","like","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","pick","play","poke","post","press","prove","pull","pump","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","search","see","sell","send","serve","shake","share","shave","shine","shop","shout","show","sin","sing","sink","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","stare","start","stay","stick","stop","strive","study","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],e.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowingly","lazily","noisily","oddly","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"],e.humanId=s,e.poolSize=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,i=t.addAdverb,s=void 0!==i&&i;return e.adjectives.length*n*e.nouns.length*e.verbs.length*(s?e.adverbs.length:1)},e.maxLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,i=void 0===r?1:r,s=t.addAdverb,o=void 0!==s&&s,a=t.separator,c=void 0===a?"":a;return n(e.adjectives).length*i+i*c.length+n(e.nouns).length+c.length+n(e.verbs).length+(o?n(e.adverbs).length+c.length:0)},e.minLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,s=t.addAdverb,o=void 0!==s&&s,a=t.separator,c=void 0===a?"":a;return i(e.adjectives).length*n+n*c.length+i(e.nouns).length+c.length+i(e.verbs).length+(o?i(e.adverbs).length+c.length:0)},e.default=s}(Or);let xr,Mr=class{iValidByteLengths=[16,24,32];rpId;rpName;timeoutMillis;derivedKeyLengthBytes;extractableKey;constructor({rpId:e,rpName:t,timeoutMillis:r,derivedKeyLengthBytes:n,extractableKey:i}){if(this.rpId=e,this.rpName=t,this.timeoutMillis=r??6e4,this.derivedKeyLengthBytes=n??32,this.extractableKey=i??!0,!this.iValidByteLengths.includes(this.derivedKeyLengthBytes))throw new Error(`Invalid key byte length ${this.derivedKeyLengthBytes}`)}static randomPasskeyName(){return Or.humanId({capitalize:!0,separator:" "})}getChallengeBytes(){return crypto.getRandomValues(new Uint8Array(32))}async deriveFromAssertion(e){const t=e.getClientExtensionResults();if(!t)throw new Error("Passkey fetch failed");const r=t.prf;if(!r||!r.results)throw new Error("PRF extension not supported or missing results");const n=r.results.first;return await crypto.subtle.importKey("raw",n,{name:"AES-CBC",length:this.derivedKeyLengthBytes},this.extractableKey,["encrypt","decrypt"])}async createPasskey({id:e,displayName:t,seed:r}){const n={challenge:this.getChallengeBytes(),rp:{id:this.rpId,name:this.rpName},user:{id:(new TextEncoder).encode(e),name:e,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{residentKey:"required",userVerification:"required"},extensions:{prf:{eval:{first:(new TextEncoder).encode(r)}}},timeout:this.timeoutMillis,attestation:"direct"},i=await navigator.credentials.create({publicKey:n});if(i)return{id:btoa(String.fromCharCode(...new Uint8Array(i.rawId))),displayName:t,key:new Uint8Array(await crypto.subtle.exportKey("raw",await this.deriveFromAssertion(i)))};throw new Error("could not create passkey")}base64ToArrayBuffer(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}async deriveKey({id:e,seed:t}){const r=e,n=await navigator.credentials.get({publicKey:{challenge:this.getChallengeBytes(),rpId:this.rpId,allowCredentials:[{id:this.base64ToArrayBuffer(r),type:"public-key"}],userVerification:"required",extensions:{prf:{eval:{first:(new TextEncoder).encode(t)}}}}});return this.deriveFromAssertion(n)}async deriveAndExportKey({id:e,seed:t}){if(!this.extractableKey)throw new Error("Derived keys cannot be exported if extractableKey is not set to true");const r=await this.deriveKey({id:e,seed:t});return new Uint8Array(await crypto.subtle.exportKey("raw",r))}};function Dr(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,[...e].map((e,t)=>{const r=e.toString(16).padStart(2,"0");return[4,6,8,10].includes(t)?`-${r}`:r}).join("")}function Ur(e){return`0x${e.toString(16)}`}function Lr(e){let t="";const r=e.startsWith("0x")?e.slice(2):e;for(let e=0;e<r.length;e+=2){const n=parseInt(r.substring(e,e+2),16);0!==n&&(t+=String.fromCharCode(n))}return t}let Br=class e{baseConfiguration;shieldConfiguration;thirdPartyAuth;shieldUrl;iframeUrl;backendUrl;storage;passkeyRpId;passkeyRpName;nativeAppIdentifier;debug;static instance=null;constructor({baseConfiguration:t,shieldConfiguration:r,overrides:n,thirdPartyAuth:i,debug:s}){this.shieldConfiguration=r,this.baseConfiguration=t,this.backendUrl=n?.backendUrl||"https://api.openfort.io",this.iframeUrl=n?.iframeUrl||"https://embed.openfort.io",this.iframeUrl=`${this.iframeUrl}/iframe/${this.baseConfiguration.publishableKey}`,this.debug=s,r?.debug&&(this.iframeUrl=`${this.iframeUrl}?debug=true`),this.shieldUrl=n?.shieldUrl||"https://shield.openfort.io",this.storage=n?.storage,this.thirdPartyAuth=i,this.passkeyRpId=r?.passkeyRpId,this.passkeyRpName=r?.passkeyRpName,this.nativeAppIdentifier=t.nativeAppIdentifier,n?.crypto?.digest&&function(e){xr=e}(n.crypto.digest),e.instance=this}static getInstance(){return e.instance}},Fr=class e{constructor(e){this.user=e.user,this.id=e.id,this.chainType=e.chainType,this.address=e.address,this.accountType=e.accountType,this.chainId=e.chainId,this.createdAt=e.createdAt,this.implementationAddress=e.implementationAddress,this.implementationType=e.implementationType,this.factoryAddress=e.factoryAddress,this.recoveryMethod=e.recoveryMethod,this.recoveryMethodDetails=e.recoveryMethodDetails,this.salt=e.salt,this.ownerAddress=e.ownerAddress,this.type=e.type}user;id;chainType;address;accountType;chainId;ownerAddress;factoryAddress;implementationAddress;salt;createdAt;implementationType;recoveryMethod;recoveryMethodDetails;type;save(e){e.save(dr.ACCOUNT,JSON.stringify({user:this.user,id:this.id,chainType:this.chainType,address:this.address,accountType:this.accountType,chainId:this.chainId,ownerAddress:this.ownerAddress,createdAt:this.createdAt,implementationType:this.implementationType,factoryAddress:this.factoryAddress,implementationAddress:this.implementationAddress,salt:this.salt,recoveryMethod:this.recoveryMethod,recoveryMethodDetails:this.recoveryMethodDetails}))}static parseRecoveryMethod=e=>{switch(e){case"user":case vr.PASSWORD:return vr.PASSWORD;case"project":case vr.AUTOMATIC:return vr.AUTOMATIC;case"passkey":case vr.PASSKEY:return vr.PASSKEY;default:return}};static async fromStorage(t){const r=await t.get(dr.ACCOUNT);if(!r)return null;try{const t=JSON.parse(r);return new e(t)}catch{return null}}};function qr(...e){const t=Br.getInstance();t?.debug&&console.log(`${(new Date).toISOString()} [SDK]`,...e)}let Gr=class{iframeManager;storage;backendApiClients;passkeyHandler;eventEmitter;constructor(e,t,r,n,i){this.iframeManager=e,this.storage=t,this.backendApiClients=r,this.passkeyHandler=n,this.eventEmitter=i}async createPasskey(e){const t=await this.passkeyHandler.createPasskey({id:Mr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:e});return{id:t.id,key:t.key}}async configure(e){const t=await fr.fromStorage(this.storage);if(!t)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);const r=Br.getInstance();if(!r)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);const n=await Fr.fromStorage(this.storage);let i;if(n){const t={account:n.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===n.recoveryMethod&&{passkey:{id:n.recoveryMethodDetails?.passkeyId,env:n.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(n.recoveryMethodDetails?.passkeyId??"")}}}}},r=await this.iframeManager.recover(t);i=r.account}else{const n=await this.backendApiClients.accountsApi.getAccountsV2({user:t.player,accountType:e.accountType,chainType:e.chainType},{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}});if(0===n.data.data.length){const r=e.entropy?.passkey?await this.createPasskey(t.player):void 0,n={accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},...e.entropy.passkey&&{passkey:r}}}},s=await this.iframeManager.create(n);i=s.account}else{const t=n.data.data,r=t.find(t=>t.chainId===e.chainId),s=r||t[0],o={account:s.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===s.recoveryMethod&&{passkey:{id:s.recoveryMethodDetails?.passkeyId,env:s.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(s.recoveryMethodDetails?.passkeyId??"")}}}}},a=await this.iframeManager.recover(o);if(i=a.account,!r){const t=await this.iframeManager.switchChain(e.chainId);i=t.account}}}return gr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:i},{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}}),n=new Fr({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Fr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return n.save(this.storage),this.eventEmitter.emit(wr.ON_SWITCH_ACCOUNT,e.data.address),n},{default:pr.AUTHENTICATION_ERROR})}async sign(e,t,r,n){const i=await this.iframeManager.sign(e,t,r,n);return this.eventEmitter.emit(wr.ON_SIGNED_MESSAGE,{message:e,signature:i}),i}async export(){return await this.iframeManager.export()}async switchChain({chainId:e}){const t=await Fr.fromStorage(this.storage);if(t?.accountType===Sr.EOA)new Fr({...t,chainId:e}).save(this.storage);else{const r=await this.iframeManager.switchChain(e);new Fr({...t,id:r.account,chainId:e}).save(this.storage)}}async create(e){const t=await this.iframeManager.create(e),r=await fr.fromStorage(this.storage);if(!r)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);const n=Br.getInstance();if(!n)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);return gr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:t.account},{headers:{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}}),i=new Fr({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,implementationAddress:e.data.smartAccount?.implementationAddress,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Fr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return i.save(this.storage),this.eventEmitter.emit(wr.ON_SWITCH_ACCOUNT,e.data.address),i},{default:pr.AUTHENTICATION_ERROR})}async recover(e){const t=await this.iframeManager.recover(e),r=await fr.fromStorage(this.storage);if(!r)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);const n=Br.getInstance();if(!n)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);return gr(async()=>{const e=await this.backendApiClients.accountsApi.getAccountV2({id:t.account},{headers:{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}}),i=new Fr({user:e.data.user,chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Fr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return i.save(this.storage),this.eventEmitter.emit(wr.ON_SWITCH_ACCOUNT,e.data.address),i},{default:pr.AUTHENTICATION_ERROR})}async setRecoveryMethod({recoveryMethod:e,recoveryPassword:t,encryptionSession:r,passkeyInfo:n}){await this.iframeManager.setRecoveryMethod(e,t,r,n?.passkeyKey,n?.passkeyId)}async disconnect(){await this.iframeManager.disconnect(),this.storage.remove(dr.ACCOUNT)}};const Hr={1:"https://cloudflare-eth.com",10:"https://optimism-rpc.publicnode.com",56:"https://bsc.publicnode.com",97:"https://bsc-testnet.publicnode.com",137:"https://polygon-rpc.com",1946:"https://rpc.minato.soneium.org",3008:"https://kl1-testnet.kiooverse.xyz/rpc",4337:"https://build.onbeam.com/rpc",5611:"https://opbnb-testnet-rpc.bnbchain.org",8453:"https://mainnet.base.org",10143:"https://testnet-rpc.monad.xyz",13337:"https://build.onbeam.com/rpc/testnet",42161:"https://arb1.arbitrum.io/rpc",42170:"https://nova.arbitrum.io/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",43114:"https://api.avax.network/ext/bc/C/rpc",80002:"https://polygon-amoy-bor-rpc.publicnode.com",84358:"https://subnets.avax.network/titan/mainnet/rpc",84532:"https://sepolia.base.org",421614:"https://sepolia-rollup.arbitrum.io/rpc",510525:"https://rpc.clankermon.com",510530:"https://open-loot.rpc.syndicate.io",510531:"https://open-loot.rpc.testnet.syndicate.io",7225878:"https://rpc.saakuru.network",7777777:"https://rpc.zora.energy",11155111:"https://ethereum-sepolia-rpc.publicnode.com",11155420:"https://optimism-sepolia-rpc.publicnode.com",28122024:"https://rpcv2-testnet.ancient8.gg",666666666:"https://rpc.degen.tips",888888888:"https://rpc.ancient8.gg",999999999:"https://sepolia.rpc.zora.energy"};var jr={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(jr);var Kr=Rt(jr.exports);let zr=class{emitter=new Kr;on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}emit(e,...t){return this.emitter.emit(e,...t)}once(e,t){return this.emitter.once(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}listenerCount(e){return this.emitter.listenerCount(e)}listeners(e){return this.emitter.listeners(e)}};var Wr,Vr;!function(e){e[e.UNAUTHORIZED=4100]="UNAUTHORIZED",e[e.UNSUPPORTED_METHOD=4200]="UNSUPPORTED_METHOD"}(Wr||(Wr={})),function(e){e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED"}(Vr||(Vr={}));let Jr=class extends Error{message;code;constructor(e,t){super(t),this.message=t,this.code=e}};const Yr=["chainId","chainName","nativeCurrency"],Qr=async({params:e,rpcProvider:t,storage:r})=>{if(!e||!Array.isArray(e)||0===e.length)throw new Jr(Vr.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const n=(e=>{if(!e||"object"!=typeof e)throw new Jr(Vr.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(e=>Yr.every(t=>t in e))(e))throw new Jr(Vr.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${Yr.join(", ")}`);if(!e.chainName||""===e.chainName.trim())throw new Jr(Vr.INVALID_PARAMS,"chainName cannot be empty");if(!((t=e.nativeCurrency)&&"object"==typeof t&&"name"in t&&"symbol"in t&&"decimals"in t&&"string"==typeof t.name&&"string"==typeof t.symbol&&"number"==typeof t.decimals&&Number.isInteger(t.decimals)))throw new Jr(Vr.INVALID_PARAMS,"Invalid nativeCurrency object");var t;if(0===e.rpcUrls?.length)throw new Jr(Vr.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(e.chainId))throw new Jr(Vr.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:e.chainId,blockExplorerUrls:e.blockExplorerUrls||[],chainName:e.chainName,iconUrls:e.iconUrls||[],rpcUrls:e.rpcUrls||[],nativeCurrency:e.nativeCurrency}})(e[0]),i=parseInt(n.chainId,16),{chainId:s}=await t.detectNetwork();return i!==s&&null},$r=async e=>{const{hash:t,signer:r,ownerAddress:n,factoryAddress:i,salt:s,chainId:o,address:a,implementationType:c}=e;let u=t;if([Ar.UPGRADEABLE_V5,Ar.UPGRADEABLE_V6,Ar.ZKSYNC_UPGRADEABLE_V1,Ar.ZKSYNC_UPGRADEABLE_V2].includes(c)){const e={name:"Openfort",version:"0.5",chainId:Number(o),verifyingContract:a},t={OpenfortMessage:[{name:"hashedMessage",type:"bytes32"}]},r={hashedMessage:u},{_TypedDataEncoder:n}=await Promise.resolve().then(function(){return Ua});u=n.hash(e,t,r)}const l=await r.sign(u,!1,!1);if(i&&s&&[Ar.UPGRADEABLE_V5,Ar.UPGRADEABLE_V6].includes(c)){const{id:e}=await Promise.resolve().then(function(){return Ua}),{defaultAbiCoder:t}=await Promise.resolve().then(function(){return La}),{hexConcat:r}=await Promise.resolve().then(function(){return Un}),o=r([e("createAccountWithNonce(address,bytes32,bool)").slice(0,10),t.encode(["address","bytes32","bool"],[n,s,!1])]);return r([t.encode(["address","bytes","bytes"],[i,o,l]),"0x6492649264926492649264926492649264926492649264926492649264926492"])}return l};function Xr(e){return{data:(()=>{if("token-allowance"===e.type)throw new Jr(Vr.INVALID_PARAMS,"token-allowance policy is not supported with this account implementation.");if("gas-limit"===e.type)throw new Jr(Vr.INVALID_PARAMS,"gas-limit policy is not supported with this account implementation.");if("rate-limit"===e.type)throw new Jr(Vr.INVALID_PARAMS,"rate-limit policy is not supported with this account implementation.");return e.data})(),type:e.type.custom}}function Zr(e){if("native-token-transfer"===e.type)throw new Jr(Vr.INVALID_PARAMS,"native-token-transfer permission is not supported with this account implementation.");if("rate-limit"===e.type)throw new Jr(Vr.INVALID_PARAMS,"rate-limit permission is not supported with this account implementation.");if("gas-limit"===e.type)throw new Jr(Vr.INVALID_PARAMS,"gas-limit permission is not supported with this account implementation.");return{...e,policies:e?.policies?.map(Xr),required:e.required??!1,type:"string"==typeof e.type?e.type:e.type.custom}}function en(e){return{expiry:e.validUntil?Number(e.validUntil):0,grantedPermissions:e.whitelist?e.whitelist.map(t=>({type:"contract-call",data:{address:t,calls:[]},policies:[{data:{limit:e.limit},type:{custom:"usage-limit"}}]})):[],permissionsContext:e.id}}var tn,rn={exports:{}};
/**
     * [js-sha3]{@link https://github.com/emn178/js-sha3}
     *
     * @version 0.8.0
     * @author Chen, Yi-Cyuan [emn178@gmail.com]
     * @copyright Chen, Yi-Cyuan 2015-2018
     * @license MIT
     */tn=rn,function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=It:n&&(r=self);var i=!r.JS_SHA3_NO_COMMON_JS&&tn.exports,s=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],u=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],h=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,r){return function(n){return new N(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,i){return new N(e,t,i).update(n)[r]()}},g=function(e,t,r){return function(t,n,i,s){return b["cshake"+e].update(t,n,i,s)[r]()}},y=function(e,t,r){return function(t,n,i,s){return b["kmac"+e].update(t,n,i,s)[r]()}},w=function(e,t,r,n){for(var i=0;i<d.length;++i){var s=d[i];e[s]=t(r,n,s)}return e},v=function(e,t){var r=p(e,t,"hex");return r.create=function(){return new N(e,t,e)},r.update=function(e){return r.create().update(e)},w(r,p,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:h,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new N(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},w(r,m,e,t)}},{name:"cshake",padding:a,bits:h,createMethod:function(e,t){var r=f[e],n=g(e,0,"hex");return n.create=function(n,i,s){return i||s?new N(e,t,n).bytepad([i,s],r):b["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},w(n,g,e,t)}},{name:"kmac",padding:a,bits:h,createMethod:function(e,t){var r=f[e],n=y(e,0,"hex");return n.create=function(n,i,s){return new P(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},w(n,y,e,t)}}],b={},E=[],_=0;_<A.length;++_)for(var k=A[_],T=k.bits,I=0;I<T.length;++I){var R=k.name+"_"+T[I];if(E.push(R),b[R]=k.createMethod(T[I],k.padding),"sha3"!==k.name){var S=k.name+T[I];E.push(S),b[S]=b[R]}}function N(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function P(e,t,r){N.call(this,e,t,r)}N.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var i,o,a=this.blocks,u=this.byteCount,l=t.length,h=this.blockCount,d=0,f=this.s;d<l;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<h+1;++i)a[i]=0;if(r)for(i=this.start;d<l&&i<u;++d)a[i>>2]|=t[d]<<c[3&i++];else for(i=this.start;d<l&&i<u;++d)(o=t.charCodeAt(d))<128?a[i>>2]|=o<<c[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++d)),a[i>>2]|=(240|o>>18)<<c[3&i++],a[i>>2]|=(128|o>>12&63)<<c[3&i++],a[i>>2]|=(128|o>>6&63)<<c[3&i++],a[i>>2]|=(128|63&o)<<c[3&i++]);if(this.lastByteIndex=i,i>=u){for(this.start=i-u,this.block=a[h],i=0;i<h;++i)f[i]^=a[i];C(f),this.reset=!0}else this.start=i}return this},N.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},N.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(s&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||s&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var i=0,o=t.length;if(r)i=o;else for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);c<128?i+=1:c<2048?i+=2:c<55296||c>=57344?i+=3:(c=65536+((1023&c)<<10|1023&t.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(t),i},N.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,s=[];return s.length=i,this.update(s),this},N.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];C(n)}},N.prototype.toString=N.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,a=0,c="";a<n;){for(s=0;s<t&&a<n;++s,++a)e=r[s],c+=o[e>>4&15]+o[15&e]+o[e>>12&15]+o[e>>8&15]+o[e>>20&15]+o[e>>16&15]+o[e>>28&15]+o[e>>24&15];a%t===0&&(C(r),s=0)}return i&&(e=r[s],c+=o[e>>4&15]+o[15&e],i>1&&(c+=o[e>>12&15]+o[e>>8&15]),i>2&&(c+=o[e>>20&15]+o[e>>16&15])),c},N.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,o=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(s=0;s<t&&o<n;++s,++o)c[o]=r[s];o%t===0&&C(r)}return i&&(c[s]=r[s],e=e.slice(0,a)),e},N.prototype.buffer=N.prototype.arrayBuffer,N.prototype.digest=N.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,o=0,a=0,c=[];a<i;){for(o=0;o<r&&a<i;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&C(n)}return s&&(e=a<<2,t=n[o],c[e]=255&t,s>1&&(c[e+1]=t>>8&255),s>2&&(c[e+2]=t>>16&255)),c},P.prototype=new N,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),N.prototype.finalize.call(this)};var C=function(e){var t,r,n,i,s,o,a,c,l,h,d,f,p,m,g,y,w,v,A,b,E,_,k,T,I,R,S,N,P,C,O,x,M,D,U,L,B,F,q,G,H,j,K,z,W,V,J,Y,Q,$,X,Z,ee,te,re,ne,ie,se,oe,ae,ce,ue,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],h=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|l>>>31),r=s^(l<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(h<<1|d>>>31),r=a^(d<<1|h>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|p>>>31),r=l^(p<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=h^(i<<1|s>>>31),r=d^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],g=e[1],V=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,N=e[20]<<3|e[21]>>>29,P=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,j=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,D=e[2]<<1|e[3]>>>31,U=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,w=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,O=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,A=e[24]<<11|e[25]>>>21,$=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,x=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,T=e[6]<<28|e[7]>>>4,I=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,q=e[27]<<25|e[26]>>>7,b=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,z=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,R=e[18]<<20|e[19]>>>12,S=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,G=e[38]<<8|e[39]>>>24,H=e[39]<<8|e[38]>>>24,_=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=m^~y&v,e[1]=g^~w&A,e[10]=T^~R&N,e[11]=I^~S&P,e[20]=D^~L&F,e[21]=U^~B&q,e[30]=z^~V&Y,e[31]=W^~J&Q,e[40]=te^~ne&se,e[41]=re^~ie&oe,e[2]=y^~v&b,e[3]=w^~A&E,e[12]=R^~N&C,e[13]=S^~P&O,e[22]=L^~F&G,e[23]=B^~q&H,e[32]=V^~Y&$,e[33]=J^~Q&X,e[42]=ne^~se&ae,e[43]=ie^~oe&ce,e[4]=v^~b&_,e[5]=A^~E&k,e[14]=N^~C&x,e[15]=P^~O&M,e[24]=F^~G&j,e[25]=q^~H&K,e[34]=Y^~$&Z,e[35]=Q^~X&ee,e[44]=se^~ae&ue,e[45]=oe^~ce&le,e[6]=b^~_&m,e[7]=E^~k&g,e[16]=C^~x&T,e[17]=O^~M&I,e[26]=G^~j&D,e[27]=H^~K&U,e[36]=$^~Z&z,e[37]=X^~ee&W,e[46]=ae^~ue&te,e[47]=ce^~le&re,e[8]=_^~m&y,e[9]=k^~g&w,e[18]=x^~T&R,e[19]=M^~I&S,e[28]=j^~D&L,e[29]=K^~U&B,e[38]=Z^~z&V,e[39]=ee^~W&J,e[48]=ue^~te&ne,e[49]=le^~re&ie,e[0]^=u[n],e[1]^=u[n+1]};if(i)tn.exports=b;else for(_=0;_<E.length;++_)r[E[_]]=b[E[_]]}();var nn=Rt(rn.exports);let sn=!1,on=!1;const an={debug:1,default:2,info:2,warning:3,error:4,off:5};let cn=an.default,un=null;const ln=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var hn,dn;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(hn||(hn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(dn||(dn={}));const fn="0123456789abcdef";class pn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==an[r]&&this.throwArgumentError("invalid log level name","logLevel",e),cn>an[r]||console.log.apply(console,t)}debug(...e){this._log(pn.levels.DEBUG,e)}info(...e){this._log(pn.levels.INFO,e)}warn(...e){this._log(pn.levels.WARNING,e)}makeError(e,t,r){if(on)return this.makeError("censored error",t,{});t||(t=pn.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=fn[t[e]>>4],r+=fn[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let s="";switch(t){case dn.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case dn.CALL_EXCEPTION:case dn.INSUFFICIENT_FUNDS:case dn.MISSING_NEW:case dn.NONCE_EXPIRED:case dn.REPLACEMENT_UNDERPRICED:case dn.TRANSACTION_REPLACED:case dn.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,pn.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){ln&&this.throwError("platform missing String.prototype.normalize",pn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:ln})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,pn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,pn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,pn.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,pn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",pn.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",pn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",pn.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return un||(un=new pn("logger/5.8.0")),un}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",pn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),sn){if(!e)return;this.globalLogger().throwError("error censorship permanent",pn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}on=!!e,sn=!!t}static setLogLevel(e){const t=an[e.toLowerCase()];null!=t?cn=t:pn.globalLogger().warn("invalid log level - "+e)}static from(e){return new pn(e)}}pn.errors=dn,pn.levels=hn;const mn=new pn("bytes/5.8.0");function gn(e){return!!e.toHexString}function yn(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return yn(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function wn(e){return Tn(e)&&!(e.length%2)||An(e)}function vn(e){return"number"==typeof e&&e==e&&e%1==0}function An(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!vn(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!vn(r)||r<0||r>=256)return!1}return!0}function bn(e,t){if(t||(t={}),"number"==typeof e){mn.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),yn(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),gn(e)&&(e=e.toHexString()),Tn(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":mn.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return yn(new Uint8Array(n))}return An(e)?yn(new Uint8Array(e)):mn.throwArgumentError("invalid arrayify value","value",e)}function En(e){const t=e.map(e=>bn(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),yn(n)}function _n(e){let t=bn(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function kn(e,t){(e=bn(e)).length>t&&mn.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),yn(r)}function Tn(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const In="0123456789abcdef";function Rn(e,t){if(t||(t={}),"number"==typeof e){mn.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=In[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),gn(e))return e.toHexString();if(Tn(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":mn.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(An(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=In[(240&n)>>4]+In[15&n]}return t}return mn.throwArgumentError("invalid hexlify value","value",e)}function Sn(e){if("string"!=typeof e)e=Rn(e);else if(!Tn(e)||e.length%2)return null;return(e.length-2)/2}function Nn(e,t,r){return"string"!=typeof e?e=Rn(e):(!Tn(e)||e.length%2)&&mn.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Pn(e){let t="0x";return e.forEach(e=>{t+=Rn(e).substring(2)}),t}function Cn(e){const t=On(Rn(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function On(e){"string"!=typeof e&&(e=Rn(e)),Tn(e)||mn.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function xn(e,t){for("string"!=typeof e?e=Rn(e):Tn(e)||mn.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&mn.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Mn(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(wn(e)){let r=bn(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Rn(r.slice(0,32)),t.s=Rn(r.slice(32,64))):65===r.length?(t.r=Rn(r.slice(0,32)),t.s=Rn(r.slice(32,64)),t.v=r[64]):mn.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:mn.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Rn(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=kn(bn(t._vs),32);t._vs=Rn(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&mn.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=Rn(r);null==t.s?t.s=i:t.s!==i&&mn.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?mn.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&mn.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Tn(t.r)?t.r=xn(t.r,32):mn.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Tn(t.s)?t.s=xn(t.s,32):mn.throwArgumentError("signature missing or invalid s","signature",e);const r=bn(t.s);r[0]>=128&&mn.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Rn(r);t._vs&&(Tn(t._vs)||mn.throwArgumentError("signature invalid _vs","signature",e),t._vs=xn(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&mn.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Dn(e){return Rn(En([(e=Mn(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var Un=Object.freeze({__proto__:null,arrayify:bn,concat:En,hexConcat:Pn,hexDataLength:Sn,hexDataSlice:Nn,hexStripZeros:On,hexValue:Cn,hexZeroPad:xn,hexlify:Rn,isBytes:An,isBytesLike:wn,isHexString:Tn,joinSignature:Dn,splitSignature:Mn,stripZeros:_n,zeroPad:kn});function Ln(e){return"0x"+nn.keccak_256(bn(e))}var Bn=Object.freeze({__proto__:null,keccak256:Ln});async function Fn(e){const{authorization:t,signer:r}=e,n=function(e){const{address:t,chainId:r,nonce:n}=e,i=function(e,t,r){const n=(e,t)=>{if(e<56)return(t+e).toString(16).padStart(2,"0");const r=e.toString(16),n=Math.ceil(r.length/2);return(t+55+n).toString(16).padStart(2,"0")+r.padStart(2*n,"0")},i=[e,t,r].map(e=>{if("number"==typeof e){if(0===e)return"80";e=`0x${e.toString(16)}`}let t=e.startsWith("0x")?e.slice(2):e;return t.length%2!=0&&(t=`0${t}`),0===t.length?"80":2===t.length&&parseInt(t,16)<128?t:n(t.length/2,128)+t}).join(""),s=i.length/2;return`0x${n(s,192)}${i}`}(r,t,n);return Ln(`0x05${i.slice(2)}`)}(t),i=await r.sign(n,!1,!1),s=i.startsWith("0x")?i.slice(2):i,o=`0x${s.slice(0,64)}`,a=`0x${s.slice(64,128)}`,c=s.slice(128,130),u=parseInt(c,16);let l;l=27===u||0===u||"1b"===c?0:28===u||1===u||"1c"===c?1:u>=35?u%2==0?1:0:u%2;const h=0===l?27:28;return{...t,r:o,s:a,v:h,yParity:l}}const qn=e=>{const t=e?.logs?.[0];return{blockHash:t?.blockHash,blockNumber:e?.blockNumber?.toString(),contractAddress:void 0,cumulativeGasUsed:e?.gasUsed,effectiveGasPrice:e?.gasFee,from:void 0,gasUsed:e?.gasUsed,logs:e?.logs||[],logsBloom:void 0,status:1===e?.status?"success":0===e?.status?"reverted":void 0,to:e?.to,transactionHash:e?.transactionHash,transactionIndex:t?.transactionIndex,type:"eip1559",blobGasPrice:void 0,blobGasUsed:void 0,root:void 0}};async function Gn(e,t){try{const r=await e.getCode(t);return"0x"!==r&&r.length>2}catch{return!1}}const Hn=async({params:e,signer:t,account:r,authentication:n,backendClient:i,rpcProvider:s,policyId:o})=>{const a=e[0]?.capabilities?.paymasterService?.policy??o;let c;if(r.accountType===Sr.DELEGATED_ACCOUNT){const[e,n]=await Promise.all([Gn(s,r.address),s.getTransactionCount(r.address)]);if(!e){const e=await async function(e){const{signer:t,contractAddress:r,chainId:n,nonce:i}=e;if(!r)throw new Error("contractAddress is required");if(void 0===n)throw new Error("chainId is required. Please provide it or fetch it from your RPC provider using eth_chainId");if(void 0===i)throw new Error("nonce is required. Please provide it or fetch it from your RPC provider using eth_getTransactionCount");return Fn({authorization:{address:r,chainId:n,nonce:i},signer:t})}({signer:t,accountAddress:r.address,contractAddress:r.implementationAddress,chainId:r.chainId,nonce:n});c=function(e){const{r:t,s:r,yParity:n}=e,i=t.startsWith("0x")?t.slice(2):t,s=r.startsWith("0x")?r.slice(2):r;return`0x${i.padStart(64,"0")}${s.padStart(64,"0")}${n.toString(16).padStart(2,"0")}`}(e)}}const u=await(async(e,t,r,n,i,s)=>{const o=e.map(e=>{if(!e.to)throw new Jr(Vr.INVALID_PARAMS,'wallet_sendCalls requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return gr(async()=>(await t.transactionIntentsApi.createTransactionIntent({createTransactionIntentRequest:{account:r.id,policy:i,signedAuthorization:s,chainId:r.chainId,interactions:o}},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR})})(e,i,r,n,a,c).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});if(u.response?.error.reason)throw new Jr(Vr.TRANSACTION_REJECTED,u.response?.error.reason);if(u?.nextAction?.payload?.signableHash){let e;e=[300,324].includes(r.chainId)||r.implementationType&&[Ar.CALIBUR].includes(r.implementationType)?await t.sign(u.nextAction.payload.signableHash,!1,!1):await t.sign(u.nextAction.payload.signableHash);const n=await gr(async()=>await i.transactionIntentsApi.signature({id:u.id,signatureRequest:{signature:e}}),{default:pr.AUTHENTICATION_ERROR}).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});if(0===n.data.response?.status)throw new Jr(Vr.TRANSACTION_REJECTED,n.data.response?.error.reason);if(!n.data.response)throw new Jr(Vr.TRANSACTION_REJECTED,"No transaction response received");return{id:u.id,receipt:qn(n.data.response)}}if(!u.response)throw new Jr(Vr.TRANSACTION_REJECTED,"No transaction response received");return{id:u.id,receipt:qn(u.response)}},jn=["types","domain","primaryType","message"],Kn=async({params:e,method:t,signer:r,implementationType:n,rpcProvider:i,account:s})=>{const o=e[0],a=e[1];if(!o||!a)throw new Jr(Vr.INVALID_PARAMS,`${t} requires an address and a typed data JSON`);const{chainId:c}=await i.detectNetwork(),u=((e,t)=>{let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new Jr(Vr.INVALID_PARAMS,`Failed to parse typed data JSON: ${e}`)}else{if("object"!=typeof e)throw new Jr(Vr.INVALID_PARAMS,`Invalid typed data argument: ${e}`);r=e}if(!(e=>jn.every(t=>t in e))(r))throw new Jr(Vr.INVALID_PARAMS,`Invalid typed data argument. The following properties are required: \n      ${jn.join(", ")}`);const n=r.domain?.chainId;if(n&&("string"==typeof n&&(n.startsWith("0x")?r.domain.chainId=parseInt(n,16):r.domain.chainId=parseInt(n,10)),r.domain.chainId!==t))throw new Jr(Vr.INVALID_PARAMS,`Invalid chainId, expected ${t}`);return r})(a,c),l={...u.types};delete l.EIP712Domain;const{_TypedDataEncoder:h}=await Promise.resolve().then(function(){return Ua}),d=h.hash(u.domain,l,u.message);return await $r({hash:d,implementationType:n,chainId:c,signer:r,address:o,ownerAddress:s.ownerAddress,factoryAddress:s.factoryAddress,salt:s.salt})};var zn;!function(e){e.ACCOUNTS_CHANGED="accountsChanged",e.ACCOUNTS_CONNECT="connect"}(zn||(zn={}));let Wn=class{#e;#t;#r;#n;updatePolicy(e){this.#t=e}#i;#s;#o=null;#a;isOpenfort=!0;#c;constructor({storage:e,backendApiClients:t,openfortEventEmitter:r,policyId:n,ensureSigner:i,chains:s,validateAndRefreshSession:o}){this.#c=i,this.#e=e,this.#r=s,this.#t=n,this.#i=o,this.#a=t,this.#s=new zr,r.on(wr.ON_LOGOUT,this.#u),r.on(wr.ON_SWITCH_ACCOUNT,this.#l)}#h=async()=>(this.#n||(this.#n=await this.#c()),this.#n);#u=async()=>{this.#n=void 0,this.#s.emit(zn.ACCOUNTS_CHANGED,[])};#l=async e=>{this.#s.emit(zn.ACCOUNTS_CHANGED,[e])};async getRpcProvider(){if(!this.#o){const e=await Fr.fromStorage(this.#e),t=e?.chainId||8453;await Promise.resolve().then(function(){return Sp}).then(e=>{const r=this.#r?this.#r[t]:void 0;this.#o=new e.StaticJsonRpcProvider(r??Hr[t])})}if(!this.#o)throw new Error("RPC provider not initialized");return this.#o}async#d(e){switch(e.method){case"eth_accounts":{const e=await Fr.fromStorage(this.#e);return e?[e.address]:[]}case"eth_requestAccounts":{const e=await Fr.fromStorage(this.#e);if(e)return this.#s.emit(zn.ACCOUNTS_CONNECT,{chainId:String(e.chainId)}),[e.address];throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - must be authenticated and configured with a signer.")}case"eth_signTransaction":{const t=await Fr.fromStorage(this.#e),r=await this.#h(),n=await fr.fromStorage(this.#e);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const i=await this.getRpcProvider(),{chainId:s}=await i.detectNetwork(),[o]=e.params||[];o.chainId||(o.chainId=s.toString());const a=function({from:e,...t}){return{to:t.to,data:t.data,accessList:t.accessList,chainId:(i=t.chainId,i.startsWith("0x")?parseInt(i,16):parseInt(i,10)),type:t.type&&{"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"}[t.type]||"eip1559",maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,value:(r=t.value,n=BigInt,void 0!==r?n(r):0n),nonce:t.nonce?parseInt(t.nonce.toString(),16):void 0,gas:t.gas?BigInt(t.gas):void 0};var r,n,i}(o),{serialize:c}=await Promise.resolve().then(function(){return Xl}),u=e=>({legacy:0,eip2930:1,eip1559:2}[e]),{gas:l,...h}=a,d={...h,gasLimit:l,to:a.to??void 0,type:u(a.type)},f=c(d),{keccak256:p}=await Promise.resolve().then(function(){return Bn}),m=p(f);await this.#i();const g=await r.sign(m,!1,!1),{splitSignature:y}=await Promise.resolve().then(function(){return Un});return c(d,y(g))}case"eth_sendTransaction":{const[t,r,n]=await Promise.all([Fr.fromStorage(this.#e),this.#h(),fr.fromStorage(this.#e)]);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(await this.#i(),t?.accountType===Sr.EOA){const[r]=e.params||[],n=await this.getRpcProvider(),i=await async function(e,t,r){const n={...e};if(!n.nonce){const e=await t.getTransactionCount(r,"pending");n.nonce=`0x${e.toString(16)}`}if(!n.gas)try{const e=await t.estimateGas({from:r,to:n.to,data:n.data,value:n.value});n.gas=e.toHexString()}catch{n.gas="0x5208"}const i=n.maxFeePerGas&&n.maxPriorityFeePerGas,s=n.gasPrice;if(!i&&!s){const e=await t.getBlock("latest");if(null!==e.baseFeePerGas&&void 0!==e.baseFeePerGas){const r=e.baseFeePerGas,i=r.mul(12).div(10),s=await t.getGasPrice();let o=s.sub(r);o.lt(0)&&(o=s.mul(0));const a=i.add(o);n.maxFeePerGas=a.toHexString(),n.maxPriorityFeePerGas=o.toHexString(),n.type="0x2",delete n.gasPrice}else{const e=(await t.getGasPrice()).mul(12).div(10);n.gasPrice=e.toHexString(),n.type="0x0",delete n.maxFeePerGas,delete n.maxPriorityFeePerGas}}return n}(r,n,t.address),s=await this.#d({method:"eth_signTransaction",params:[i]});return this.#d({method:"eth_sendRawTransaction",params:[s]})}return(await Hn({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})).receipt.transactionHash}case"eth_sendRawTransactionSync":{const[t,r,n]=await Promise.all([Fr.fromStorage(this.#e),this.#h(),fr.fromStorage(this.#e)]);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(t?.accountType===Sr.EOA)throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);return await this.#i(),await Hn({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"eth_estimateGas":{const t=await Fr.fromStorage(this.#e),r=await fr.fromStorage(this.#e);if(!t||!r)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,account:t,authentication:r,backendClient:n,policyId:i})=>{const s=await(async(e,t,r,n,i)=>{const s=e.map(e=>{if(!e.to)throw new Jr(Vr.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return gr(async()=>(await t.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:i,chainId:r.chainId,interactions:s}},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR})})(e,n,t,r,i).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});return s.estimatedTXGas})({params:e.params||[],account:t,authentication:r,backendClient:this.#a,policyId:this.#t})}case"eth_signTypedData":case"eth_signTypedData_v4":{const t=await Fr.fromStorage(this.#e),r=await this.#h();if(!t)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");await this.#i();const n=await this.getRpcProvider();return await Kn({method:e.method,params:e.params||[],signer:r,implementationType:t.implementationType||t.type,rpcProvider:n,account:t})}case"personal_sign":{const t=await Fr.fromStorage(this.#e);if(!t)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const r=await this.#h();return await this.#i(),await(async({params:e,signer:t,account:r})=>{const n=e[0],i=e[1];if(!i||!n)throw new Jr(Vr.INVALID_PARAMS,"personal_sign requires an address and a message");if(i.toLowerCase()!==r.address.toLowerCase())throw new Jr(Vr.INVALID_PARAMS,"personal_sign requires the signer to be the from address");const{hashMessage:s}=await Promise.resolve().then(function(){return Ua});return await $r({hash:s(Lr(n)),implementationType:r.implementationType||r.type,chainId:Number(r.chainId),signer:t,address:i,salt:r.salt,factoryAddress:r.factoryAddress,ownerAddress:r.ownerAddress})})({params:e.params||[],signer:r,account:t})}case"eth_chainId":{const e=await this.getRpcProvider(),{chainId:t}=await e.detectNetwork();return Ur(t)}case"wallet_switchEthereumChain":{const t=await this.#h();if(!e.params||!Array.isArray(e.params)||0===e.params.length)throw new Jr(Vr.INVALID_PARAMS,"Invalid parameters for wallet_switchEthereumChain");await this.#i();try{const r=parseInt(e.params[0].chainId,16);await t.switchChain({chainId:r}),await Promise.resolve().then(function(){return Sp}).then(e=>{const t=this.#r?this.#r[r]:void 0;this.#o=new e.StaticJsonRpcProvider(t??Hr[r])})}catch(e){const t=e;throw new Jr(Vr.INTERNAL_ERROR,`Failed to switch chain: ${t.message}`)}return null}case"wallet_addEthereumChain":{await this.#h();const t=await this.getRpcProvider();return await Qr({params:e.params||[],rpcProvider:t,storage:this.#e})}case"wallet_showCallsStatus":return null;case"wallet_getCallsStatus":{const t=await Fr.fromStorage(this.#e);if(t?.accountType===Sr.EOA)throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await fr.fromStorage(this.#e);if(!t||!r)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,authentication:t,backendClient:r})=>{const n=await(async(e,t,r)=>gr(async()=>(await t.transactionIntentsApi.getTransactionIntent({id:e},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR}))(e[0],r,t).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});return{status:n.response?"CONFIRMED":"PENDING",receipts:n.response?[{status:0===n.response.status?"reverted":"success",logs:n.response.logs?.map(e=>({address:e.address,data:e.data,topics:e.topics}))||[],blockHash:n.response.transactionHash||"",blockNumber:BigInt(n.response.blockNumber||0),gasUsed:BigInt(n.response.gasUsed||0),transactionHash:n.response.transactionHash||""}]:void 0}})({params:e.params||{},authentication:r,backendClient:this.#a})}case"wallet_sendCalls":{const[t,r,n]=await Promise.all([Fr.fromStorage(this.#e),this.#h(),fr.fromStorage(this.#e)]);if(t?.accountType===Sr.EOA)throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:i,rpcProvider:s,policyId:o})=>(await Hn({params:e,signer:t,account:r,authentication:n,backendClient:i,rpcProvider:s,policyId:o})).id)({params:e.params?e.params[0].calls:[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"wallet_grantPermissions":{const t=await Fr.fromStorage(this.#e);if(t?.accountType===Sr.EOA)throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.#h(),n=await fr.fromStorage(this.#e);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:i,policyId:s})=>{const o=await(async(e,t,r,n,i)=>{const s=e[0],o=Math.floor(Date.now()/1e3),a=Math.floor(new Date(Date.now()+1e3*s.expiry).getTime()/1e3),c=s.permissions.map(Zr),u=c.filter(e=>"contract-call"===e.type||"erc20-token-transfer"===e.type||"erc721-token-transfer"===e.type||"erc1155-token-transfer"===e.type).map(e=>e.data.address);let l,h=c.find(e=>"call-limit"===e.type)?.data;if(h=c[0]?.policies?.find(e=>"call-limit"===e.type)?.data?.limit,"signer"in s&&s.signer){if("keys"===s.signer.type)throw new Jr(Vr.INVALID_PARAMS,"Multi-key signers are not supported for session creation");"key"!==s.signer.type&&"account"!==s.signer.type||(l=s.signer.data.id)}else"account"in s&&s.account&&(l=s.account);if(!l)throw new Jr(Vr.INVALID_PARAMS,"Failed to request permissions - missing session address");const d=((e,t,r,n,i,s=!1,o,a,c,u)=>{const l={address:e,chainId:t,validAfter:r,validUntil:n,optimistic:s,whitelist:o,player:a,account:u};return i&&(l.policy=i),c&&(l.limit=c),l})(l,r.chainId,o,a,i,!1,u,n.player,h,r.id);return gr(async()=>(await t.sessionsApi.createSession({createSessionRequest:d},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR})})(e,i,r,n,s).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});if(o?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[Ar.CALIBUR].includes(r.implementationType)?await t.sign(o.nextAction.payload.signableHash,!1,!1):await t.sign(o.nextAction.payload.signableHash),en(await gr(async()=>(await i.sessionsApi.signatureSession({id:o.id,signatureRequest:{signature:e}})).data,{default:pr.AUTHENTICATION_ERROR}).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)}))}if(!1===o.isActive)throw new Jr(Vr.TRANSACTION_REJECTED,"Failed to grant permissions");return en(o)})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_revokePermissions":{const t=await Fr.fromStorage(this.#e),r=await this.#h(),n=await fr.fromStorage(this.#e);if(!t||!n)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:i,policyId:s})=>{const o=e[0];if(!o.permissionContext)return await t.disconnect(),{};const a=await(async(e,t,r,n,i)=>{const s=((e,t,r,n,i)=>{const s={address:e,chainId:t,player:r,account:i};return n&&(s.policy=n),s})(e.permissionContext,r.chainId,n.player,i,r.id);return gr(async()=>(await t.sessionsApi.revokeSession({revokeSessionRequest:s},{headers:{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR})})(o,i,r,n,s).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)});if(a?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[Ar.CALIBUR].includes(r.implementationType)?await t.sign(a.nextAction.payload.signableHash,!1,!1):await t.sign(a.nextAction.payload.signableHash),(await i.sessionsApi.signatureSession({id:a.id,signatureRequest:{signature:e}}).catch(e=>{throw new Jr(Vr.TRANSACTION_REJECTED,e.message)})).data}return a})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_getCapabilities":{const t=await Fr.fromStorage(this.#e);if(t?.accountType===Sr.EOA)throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.getRpcProvider(),{chainId:n}=await r.detectNetwork();return{[Ur(n)]:{permissions:{supported:!0,signerTypes:["account","key"],keyTypes:["secp256k1"],permissionTypes:["contract-calls"]},paymasterService:{supported:!0},atomicBatch:{supported:!0}}}}case"wallet_getAssets":{const t=await Fr.fromStorage(this.#e),r=await fr.fromStorage(this.#e);if(!t||!r)throw new Jr(Wr.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#i(),await(async({params:e,account:t,authentication:r,backendClient:n})=>{const i=await(async(e,t,r,n)=>gr(async()=>(await e.rpcApi.handleRpcRequest({jsonRpcRequest:{method:"wallet_getAssets",params:{account:t.address,chainFilter:n?.chainFilter,assetFilter:n?.assetFilter,assetTypeFilter:n?.assetTypeFilter},id:1,jsonrpc:"2.0"}},{headers:{authorization:`Bearer ${e.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR}))(n,t,r,e).catch(e=>{throw new Jr(Vr.INTERNAL_ERROR,e.message)});return i.result})({params:e.params?.[0],account:t,authentication:r,backendClient:this.#a})}case"eth_gasPrice":case"eth_getBalance":case"eth_sendRawTransaction":case"eth_getCode":case"eth_getStorageAt":case"eth_call":case"eth_blockNumber":case"eth_getBlockByHash":case"eth_getBlockByNumber":case"eth_getTransactionByHash":case"eth_getTransactionReceipt":case"eth_getTransactionCount":return(await this.getRpcProvider()).send(e.method,e.params||[]);default:throw new Jr(Wr.UNSUPPORTED_METHOD,`${e.method}: Method not supported`)}}async request(e){try{return this.#d(e)}catch(e){if(e instanceof Jr)throw e;if(e instanceof Error)throw new Jr(Vr.INTERNAL_ERROR,e.message);throw new Jr(Vr.INTERNAL_ERROR,"Internal error")}}on(e,t){this.#s.on(e,t)}removeListener(e,t){this.#s.off(e,t)}};const Vn={icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="597.32 331.34 171.36 105.32" ><g><rect x="673.9" y="404.26" width="18.2" height="32.4" /><polygon points="768.68,331.36 768.68,331.36 768.68,331.34 610.78,331.34 610.78,331.36 597.32,331.36 597.32,436.64    615.52,436.64 615.52,349.54 750.48,349.54 750.48,436.64 768.68,436.64  " /><polygon points="732.16,367.79 633.83,367.79 633.83,370.19 633.79,370.19 633.79,436.64 651.99,436.64 651.99,385.99    713.9,385.99 713.9,436.64 732.09,436.64 732.09,385.99 732.16,385.99  " /></g></svg>',name:"Openfort",rdns:"xyz.openfort",uuid:Dr()};const Jn="https://64a03e4967fb4dad3ecb914918c777b6@o4504593015242752.ingest.us.sentry.io/4509292415287296";let Yn=class e{static sentryInstance;static queuedCalls=[];static baseTags;static set sentry(t){const r=t.getDsn();if(!r)throw new Error("Sentry DSN is not set");if(r.projectId!==Jn.split("https://")[1].split("/")[1]||r.host!==Jn.split("@")[1].split("/")[0]||r.publicKey!==Jn.split("@")[0].split("https://")[1])throw new Error("Sentry DSN is not valid");t.captureAxiosError=(r,n,i,s)=>{if(n instanceof ht){if(400===n.response?.status||401===n.response?.status)return;n.name=r,t.captureException(n,{...i,captureContext:{...i?.captureContext,extra:{errorResponseData:n.response?.data,errorStatus:n.response?.status,errorHeaders:n.response?.headers,errorRequest:n.request},tags:{...e.baseTags,method:r}}})}else t.captureException(n,i,s)},e.sentryInstance=t}static get sentry(){return e.proxy}static async init({sentry:t,configuration:r}){if(t)return void(e.sentry=t);const n=await Promise.resolve().then(function(){return dw});e.sentry=new n.BrowserClient({dsn:Jn,integrations:[],stackParser:n.defaultStackParser,transport:n.makeFetchTransport}),e.baseTags={projectId:r?.baseConfiguration.publishableKey??"",sdk:"@openfort/openfort-js",sdkVersion:"0.10.38"},e.processQueuedCalls()}static proxy=new Proxy({},{get:(t,r)=>e.sentryInstance&&"function"==typeof e.sentryInstance[r]?(...t)=>e.sentryInstance[r](...t):(...t)=>{e.queuedCalls.push({fn:r,args:t})}});static processQueuedCalls(){e.sentryInstance&&(e.queuedCalls.forEach(({fn:t,args:r})=>{"function"==typeof e.sentryInstance[t]&&e.sentryInstance[t](...r)}),e.queuedCalls=[])}};const{sentry:Qn}=Yn;let $n=class extends Error{code;constructor(e,t){super(t),this.name="PenpalError",this.code=e}};var Xn="penpal";const Zn=e=>"object"==typeof e&&null!==e,ei=e=>"function"==typeof e,ti=e=>"SYN"===e.type,ri=e=>"ACK1"===e.type,ni=e=>"ACK2"===e.type,ii=e=>"CALL"===e.type,si=e=>"REPLY"===e.type;let oi=class extends Error{constructor(e){super(`You've hit a bug in Penpal. Please file an issue with the following information: ${e}`)}};const ai="deprecated-penpal";var ci,ui;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(ci||(ci={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(ui||(ui={}));const li=e=>e.split("."),hi=e=>e.join("."),di=e=>new oi(`Unexpected message to translate: ${JSON.stringify(e)}`);let fi=class{messagePoster;handlers=new Set;isInitialized=!1;hasBeenUsed=!1;validateMessage;messageBuffer=[];nextNumericId=1;stringToNumericId=new Map;numericToStringId=new Map;constructor(e){if(this.messagePoster=e,!e||"function"!=typeof e.postMessage)throw new $n("CONNECTION_DESTROYED","Invalid message poster provided");qr("ReactNativeMessenger created")}initialize(e){if(this.isInitialized)return void qr("ReactNativeMessenger already initialized");if(this.hasBeenUsed)throw new $n("CONNECTION_DESTROYED","A messenger can only be used for a single connection");this.validateMessage=e?.validateReceivedMessage,this.isInitialized=!0,this.hasBeenUsed=!0,qr(`ReactNativeMessenger initialized, processing ${this.messageBuffer.length} buffered messages`);const t=[...this.messageBuffer];this.messageBuffer=[],t.forEach(e=>{this.processMessage(e)})}sendMessage(e,t){if(!this.isInitialized)throw new $n("CONNECTION_DESTROYED","ReactNativeMessenger not initialized");t&&t.length>0&&qr("React Native: Ignoring transferables (not supported)"),qr("ReactNativeMessenger sending message:",e);try{let t=e;"penpal"===e?.namespace&&(t=this.convertToDeprecatedFormat(e),qr("React Native: Converted message:",t));const r=JSON.stringify(t);this.messagePoster.postMessage(r)}catch(e){throw new $n("TRANSMISSION_FAILED",`Failed to send message through React Native WebView: ${e instanceof Error?e.message:String(e)}`)}}addMessageHandler(e){this.handlers.add(e),qr(`Message handler added, total handlers: ${this.handlers.size}`)}removeMessageHandler(e){this.handlers.delete(e),qr(`Message handler removed, total handlers: ${this.handlers.size}`)}handleMessage(e){if(qr("[HANDSHAKE DEBUG] ReactNativeMessenger.handleMessage called with:",e),!this.isInitialized){return qr(`[HANDSHAKE DEBUG] ReactNativeMessenger: Message received but not initialized, buffering message (${this.messageBuffer.length+1} total)`),void this.messageBuffer.push(e)}qr("[HANDSHAKE DEBUG] ReactNativeMessenger is initialized, processing message"),this.processMessage(e)}processMessage(e){qr("[HANDSHAKE DEBUG] ReactNativeMessenger processing message:",e);const t=this.convertFromDeprecatedFormat(e);if(qr("[HANDSHAKE DEBUG] Message after conversion:",t),this.validateMessage&&!this.validateMessage(t))return void qr("[HANDSHAKE DEBUG] Message validation failed:",t);qr(`[HANDSHAKE DEBUG] Routing message to ${this.handlers.size} handlers`);let r=0;this.handlers.forEach(e=>{r++;try{qr(`[HANDSHAKE DEBUG] Calling handler ${r}/${this.handlers.size}`),e(t),qr(`[HANDSHAKE DEBUG] Handler ${r} completed successfully`)}catch(e){qr(`[HANDSHAKE DEBUG] Error in handler ${r}:`,e)}})}convertToDeprecatedFormat(e){if("penpal"!==e?.namespace)return e;switch(e.type){case"SYN":return qr("React Native: Converting SYN to deprecated format to avoid MessagePorts",{originalMessage:e}),{penpal:"syn",participantId:e.participantId};case"ACK1":return qr("React Native: Converting ACK1 to deprecated format",{originalMessage:e}),{penpal:"synAck",methodNames:e.methodPaths||[]};case"ACK2":return qr("React Native: Converting ACK2 to deprecated format",{originalMessage:e}),{penpal:"ack"};case"REPLY":{qr("React Native: Converting REPLY to deprecated format",{originalMessage:e});const t=this.getNumericId(e.callId);return e.isError?{penpal:"reply",id:t,resolution:"rejected",returnValue:e.value,returnValueIsError:e.isSerializedErrorInstance||!1}:{penpal:"reply",id:t,resolution:"fulfilled",returnValue:e.value}}case"CALL":return qr("React Native: Converting CALL to deprecated format",{originalMessage:e}),{penpal:"call",id:this.getNumericId(e.id),methodName:e.methodPath.join("."),args:e.args};case"DESTROY":return{namespace:"penpal",type:"DESTROY"};default:return e}}convertFromDeprecatedFormat(e){if(e?.penpal)switch(e.penpal){case"syn":{qr("[HANDSHAKE DEBUG] React Native: Converting deprecated SYN to modern format",{originalMessage:e});const t={namespace:"penpal",type:"SYN",participantId:e.participantId};return qr("[HANDSHAKE DEBUG] Converted SYN:",t),t}case"synAck":{qr("[HANDSHAKE DEBUG] React Native: Converting deprecated synAck to modern ACK1 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK1",methodPaths:e.methodNames?.map(e=>e.split("."))||[],channel:void 0};return qr("[HANDSHAKE DEBUG] Converted ACK1:",t),t}case"ack":{qr("[HANDSHAKE DEBUG] React Native: Converting deprecated ack to modern ACK2 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK2",channel:void 0};return qr("[HANDSHAKE DEBUG] Converted ACK2:",t),t}case"reply":{qr("React Native: Converting deprecated reply to modern REPLY format",{originalMessage:e});const t=this.getStringId(e.id);t||qr(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`);const r=t||String(e.id);return"fulfilled"===e.resolution?{namespace:"penpal",type:"REPLY",callId:r,value:e.returnValue}:{namespace:"penpal",type:"REPLY",callId:r,isError:!0,value:e.returnValue,isSerializedErrorInstance:e.returnValueIsError||!1}}case"call":{qr("React Native: Converting deprecated call to modern CALL format",{originalMessage:e});const t=this.getStringId(e.id);return t||qr(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`),{namespace:"penpal",type:"CALL",id:t||String(e.id),methodPath:e.methodName.split("."),args:e.args}}default:return qr("React Native: Unknown deprecated penpal message type:",e.penpal),e}return e}setupMessagePort(e){qr("React Native: setupMessagePort called but ignored (MessagePort not supported)")}destroy(){this.isInitialized&&(this.handlers.clear(),this.messageBuffer=[],this.stringToNumericId.clear(),this.numericToStringId.clear(),this.nextNumericId=1,this.isInitialized=!1,this.hasBeenUsed=!1,qr("ReactNativeMessenger destroyed and ready for reuse"))}reset(){qr("ReactNativeMessenger reset for reuse"),this.handlers.clear(),this.messageBuffer=[],this.isInitialized=!1,this.hasBeenUsed=!1,this.nextNumericId=1,this.stringToNumericId.clear(),this.numericToStringId.clear()}getNumericId(e){let t=this.stringToNumericId.get(e);return t||(t=this.nextNumericId++,this.stringToNumericId.set(e,t),this.numericToStringId.set(t,e),qr(`ID mapping created: "${e}" -> ${t}`)),t}getStringId(e){return this.numericToStringId.get(e)}};const pi=e=>({name:e.name,message:e.message,stack:e.stack,penpalCode:e instanceof $n?e.code:void 0}),mi=(e,t=[])=>{const r=[];for(const n of Object.keys(e)){const i=e[n];ei(i)?r.push([...t,n]):Zn(i)&&r.push(...mi(i,[...t,n]))}return r},gi=e=>e.join(".");let yi=class{value;transferables;constructor(e,t){this.value=e,this.transferables=t?.transferables}};const wi=(e,t,r)=>({namespace:Xn,channel:e,type:"REPLY",callId:t,isError:!0,...r instanceof Error?{value:pi(r),isSerializedErrorInstance:!0}:{value:r}}),vi=(e,t,r,n)=>{let i=!1;const s=async s=>{if(i)return;if(!ii(s))return;n?.(`Received ${gi(s.methodPath)}() call`,s);const{methodPath:o,args:a,id:c}=s;let u,l;try{const e=((e,t)=>{const r=e.reduce((e,t)=>Zn(e)?e[t]:void 0,t);return ei(r)?r:void 0})(o,t);if(!e)throw new $n("METHOD_NOT_FOUND",`Method \`${gi(o)}\` is not found.`);let n=await e(...a);n instanceof yi&&(l=n.transferables,n=await n.value),u={namespace:Xn,channel:r,type:"REPLY",callId:c,value:n}}catch(e){u=wi(r,c,e)}if(!i)try{n?.(`Sending ${gi(o)}() reply`,u),e.sendMessage(u,l)}catch(t){throw"DataCloneError"===t.name&&(u=wi(r,c,t),n?.(`Sending ${gi(o)}() reply`,u),e.sendMessage(u)),t}};return e.addMessageHandler(s),()=>{i=!0,e.removeMessageHandler(s)}};let Ai=class{transferables;timeout;constructor(e){this.transferables=e?.transferables,this.timeout=e?.timeout}};const bi=new Set(["apply","call","bind"]),Ei=(e,t,r=[])=>new Proxy(r.length?()=>{}:Object.create(null),{get(n,i){if("then"!==i)return r.length&&bi.has(i)?Reflect.get(n,i):Ei(e,t,[...r,i])},apply:(t,n,i)=>e(r,i)}),_i=e=>new $n("CONNECTION_DESTROYED",`Method call ${gi(e)}() failed due to destroyed connection`),ki=(e,t,r)=>{let n=!1;const i=new Map,s=e=>{if(!si(e))return;const{callId:t,value:n,isError:s,isSerializedErrorInstance:o}=e,a=i.get(t);a&&(i.delete(t),r?.(`Received ${gi(a.methodPath)}() call`,e),s?a.reject(o?(({name:e,message:t,stack:r,penpalCode:n})=>{const i=n?new $n(n,t):new Error(t);return i.name=e,i.stack=r,i})(n):n):a.resolve(n))};return e.addMessageHandler(s),{remoteProxy:Ei((s,o)=>{if(n)throw _i(s);const a=Dr(),c=o[o.length-1],u=c instanceof Ai,{timeout:l,transferables:h}=u?c:{},d=u?o.slice(0,-1):o;return new Promise((n,o)=>{const c=void 0!==l?window.setTimeout(()=>{i.delete(a),o(new $n("METHOD_CALL_TIMEOUT",`Method call ${gi(s)}() timed out after ${l}ms`))},l):void 0;i.set(a,{methodPath:s,resolve:n,reject:o,timeoutId:c});try{const n={namespace:Xn,channel:t,type:"CALL",id:a,methodPath:s,args:d};r?.(`Sending ${gi(s)}() call`,n),e.sendMessage(n,h)}catch(n){o(new $n("TRANSMISSION_FAILED",n.message))}})},r),destroy:()=>{n=!0,e.removeMessageHandler(s);for(const{methodPath:e,reject:t,timeoutId:r}of i.values())clearTimeout(r),t(_i(e));i.clear()}}},Ti=({messenger:e,methods:t,timeout:r,channel:n,log:i})=>{const s=Dr();let o;const a=[];let c=!1;const u=mi(t),{promise:l,resolve:h,reject:d}=(()=>{let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}})(),f=setTimeout(()=>{d(new $n("CONNECTION_TIMEOUT",`Connection timed out after ${r}ms`))},r),p=()=>{for(const e of a)e()},m=()=>{if(c)return;a.push(vi(e,t,n,i));const{remoteProxy:r,destroy:s}=ki(e,n,i);a.push(s),clearTimeout(f),c=!0,h({remoteProxy:r,destroy:p})},g=()=>{const t={namespace:Xn,type:"SYN",channel:n,participantId:s};i?.("Sending handshake SYN",t);try{e.sendMessage(t)}catch(t){d(new $n("TRANSMISSION_FAILED",t.message))}},y=t=>{ti(t)&&(t=>{if(i?.("Received handshake SYN",t),t.participantId===o&&o!==ai)return;if(o=t.participantId,g(),!(s>o||o===ai))return;const r={namespace:Xn,channel:n,type:"ACK1",methodPaths:u};i?.("Sending handshake ACK1",r);try{e.sendMessage(r)}catch(t){d(new $n("TRANSMISSION_FAILED",t.message))}})(t),ri(t)&&(t=>{i?.("Received handshake ACK1",t);const r={namespace:Xn,channel:n,type:"ACK2"};i?.("Sending handshake ACK2",r);try{e.sendMessage(r)}catch(t){return void d(new $n("TRANSMISSION_FAILED",t.message))}m()})(t),ni(t)&&(e=>{i?.("Received handshake ACK2",e),m()})(t)};return e.addMessageHandler(y),a.push(()=>e.removeMessageHandler(y)),g(),l},Ii=new WeakSet,Ri=({messenger:e,methods:t={},timeout:r,channel:n,log:i})=>{if(!e)throw new $n("INVALID_ARGUMENT","messenger must be defined");if(Ii.has(e))throw new $n("INVALID_ARGUMENT","A messenger can only be used for a single connection");Ii.add(e);const s=[e.destroy],o=(e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)})(t=>{if(t){const r={namespace:Xn,channel:n,type:"DESTROY"};try{e.sendMessage(r)}catch(t){}}for(const e of s)e();i?.("Connection destroyed")}),a=e=>(e=>Zn(e)&&e.namespace===Xn)(e)&&e.channel===n;return{promise:(async()=>{try{e.initialize({log:i,validateReceivedMessage:a}),e.addMessageHandler(e=>{(e=>"DESTROY"===e.type)(e)&&o(!1)});const{remoteProxy:c,destroy:u}=await Ti({messenger:e,methods:t,timeout:r,channel:n,log:i});return s.push(u),c}catch(e){throw o(!0),e}})(),destroy:()=>{o(!0)}}};var Si;!function(e){e.RECOVER="recover",e.RECOVERED="recovered",e.CREATE="create",e.CREATED="created",e.UPDATE_AUTHENTICATION="update-authentication",e.AUTHENTICATION_UPDATED="authentication-updated",e.SIGN="sign",e.SET_RECOVERY_METHOD="set-recovery-method",e.SWITCH_CHAIN="switch-chain",e.CHAIN_SWITCHED="chain-switched",e.EXPORT="export",e.SIGNED="signed",e.LOGGED_OUT="logged-out",e.GET_CURRENT_DEVICE="get-current-device",e.CURRENT_DEVICE="current-device"}(Si||(Si={}));let Ni=class{uuid;action=Si.GET_CURRENT_DEVICE;playerID;constructor(e,t){this.uuid=e,this.playerID=t}},Pi=class{uuid;action=Si.SIGN;message;requestConfiguration;requireArrayify;requireHash;chainType;constructor(e,t,r,n,i,s){this.uuid=e,this.message=t,this.requestConfiguration=r,this.requireArrayify=n,this.requireHash=i,this.chainType=s||"EVM"}},Ci=class{uuid;action=Si.SWITCH_CHAIN;chainId;requestConfiguration;constructor(e,t,r){this.uuid=e,this.chainId=t,this.requestConfiguration=r}},Oi=class{uuid;action=Si.EXPORT;requestConfiguration;constructor(e,t){this.uuid=e,this.requestConfiguration=t}},xi=class{uuid;action=Si.SET_RECOVERY_METHOD;recoveryMethod;recoveryPassword;encryptionSession;passkeyKey;passkeyId;requestConfiguration;constructor(e,t,r,n,i,s,o){this.uuid=e,this.recoveryMethod=t,this.recoveryPassword=n,this.encryptionSession=i,this.requestConfiguration=r,this.passkeyKey=s,this.passkeyId=o}};function Mi(e){return"error"in e}class Di{uuid;action=Si.UPDATE_AUTHENTICATION;accessToken;recovery;constructor(e,t,r){this.uuid=e,this.accessToken=t,this.recovery=r}}var Ui;!function(e){e.OPENFORT="openfort"}(Ui||(Ui={}));class Li extends Error{constructor(){super("This embedded signer requires a password to be recovered")}}class Bi extends Error{constructor(){super("Wrong recovery passkey for this embedded signer")}}let Fi=class extends Error{constructor(){super("MissingProjectEntropyError")}};class qi extends Error{constructor(){super("Wrong recovery password for this embedded signer")}}class Gi extends Error{constructor(){super("Not configured")}}class Hi extends Error{constructor(){super("OTP required")}}class ji{messenger;connection;remote;storage;sdkConfiguration;isInitialized=!1;initializationPromise=null;hasFailed=!1;constructor(e,t,r){if(!e)throw new mr("Configuration is required for IframeManager",pr.INVALID_CONFIGURATION);if(!t)throw new mr("Storage is required for IframeManager",pr.INVALID_CONFIGURATION);if(!r)throw new mr("Messenger is required for IframeManager",pr.INVALID_CONFIGURATION);this.sdkConfiguration=e,this.storage=t,this.messenger=r}async initialize(){if(!this.isInitialized){if(this.hasFailed)throw new mr("Failed to establish iFrame connection: Previous connection attempt failed",pr.INTERNAL_ERROR);if(this.initializationPromise)await this.initializationPromise;else{this.initializationPromise=this.doInitialize();try{await this.initializationPromise,this.isInitialized=!0}catch(e){throw this.hasFailed=!0,this.initializationPromise=null,e}}}}async doInitialize(){qr("Initializing IframeManager connection..."),this.messenger.initialize({validateReceivedMessage:e=>!(!e||"object"!=typeof e),log:qr}),this.connection=Ri({messenger:this.messenger,timeout:1e4,log:qr});try{this.remote=await this.connection.promise,qr("IframeManager connection established")}catch(e){const t=e;throw Qn.captureException(t),this.destroy(),qr("Failed to establish connection:",t),new mr(`Failed to establish iFrame connection: ${t.cause||t.message}`,pr.INTERNAL_ERROR,e)}}async ensureConnection(){if(this.isInitialized&&this.remote||await this.initialize(),!this.remote)throw new mr("Failed to establish connection",pr.INTERNAL_ERROR);return this.remote}handleError(e){if(Mi(e)){if("not-configured-error"===e.error)throw this.storage.remove(dr.ACCOUNT),new Gi;if("missing-user-entropy-error"===e.error)throw this.storage.remove(dr.ACCOUNT),new Li;if("missing-project-entropy-error"===e.error)throw this.storage.remove(dr.ACCOUNT),new Fi;if("incorrect-user-entropy-error"===e.error)throw new qi;if("missing-passkey-error"===e.error)throw this.storage.remove(dr.ACCOUNT),new Li;if("incorrect-passkey-error"===e.error)throw new Bi;if("otp-required-error"===e.error)throw new Hi;throw this.storage.remove(dr.ACCOUNT),new mr(`Unknown error: ${e.error}`,pr.INTERNAL_ERROR)}throw e}async buildRequestConfiguration(){const e=await fr.fromStorage(this.storage);if(!e)throw new mr("Must be authenticated to create a signer",pr.NOT_LOGGED_IN_ERROR);const t={auth:Ui.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyProvider:e.thirdPartyProvider,thirdPartyTokenType:e.thirdPartyTokenType,token:e.token,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,openfortURL:this.sdkConfiguration.backendUrl,shieldAuthentication:t,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",shieldURL:this.sdkConfiguration.shieldUrl,encryptionKey:this.sdkConfiguration?.shieldConfiguration?.shieldEncryptionKey??void 0,appNativeIdentifier:this.sdkConfiguration?.nativeAppIdentifier??void 0}}async buildIFrameRequestConfiguration(){const e=await fr.fromStorage(this.storage);if(!e)throw new mr("Must be authenticated to create a signer",pr.NOT_LOGGED_IN_ERROR);const t={auth:Ui.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyTokenType:e.thirdPartyTokenType??null,thirdPartyProvider:e.thirdPartyProvider??null,accessToken:e.token,playerID:e.player,recovery:t,chainId:null,password:null,passkey:null}}async create(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await this.ensureConnection(),r=await this.buildIFrameRequestConfiguration();r.chainId=e.chainId??null,r.password=e?.entropy?.recoveryPassword??null,r.recovery={...r.recovery,encryptionSession:e?.entropy?.encryptionSession},r.passkey=e?.entropy?.passkey??null;const n={uuid:Dr(),action:Si.CREATE,recovery:r.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:r.accessToken,playerID:r.playerID,thirdPartyProvider:r.thirdPartyProvider,thirdPartyTokenType:r.thirdPartyTokenType,encryptionKey:r.password,encryptionSession:r.recovery?.encryptionSession??null,passkey:r.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,chainId:e.chainId??null,accountType:e.accountType,chainType:e.chainType,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},i=await t.create(n);return Mi(i)&&this.handleError(i),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",i.version??"undefined"),i}async recover(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await Fr.fromStorage(this.storage),r=await this.ensureConnection(),n=await this.buildIFrameRequestConfiguration();n.chainId=t?.chainId??null,n.password=e?.entropy?.recoveryPassword??null,n.recovery={...n.recovery,encryptionSession:e?.entropy?.encryptionSession},n.passkey=e?.entropy?.passkey??null;const i={uuid:Dr(),action:Si.RECOVER,recovery:n.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:n.accessToken,playerID:n.playerID,thirdPartyProvider:n.thirdPartyProvider,thirdPartyTokenType:n.thirdPartyTokenType,encryptionKey:n.password,encryptionSession:n.recovery?.encryptionSession??null,passkey:n.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,account:e.account,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},s=await r.recover(i);return Mi(s)&&this.handleError(s),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",s.version??"undefined"),s}async sign(e,t,r,n){qr("[iframe] ensureConnection");const i=await this.ensureConnection(),s=new Pi(Dr(),e,await this.buildRequestConfiguration(),t,r,n);qr("[iframe] done ensureConnection");const o=await i.sign(s);return qr("[iframe] response",o),Mi(o)&&this.handleError(o),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",o.version??"undefined"),o.signature}async switchChain(e){const t=await this.ensureConnection(),r=new Ci(Dr(),e,await this.buildRequestConfiguration()),n=await t.switchChain(r);return Mi(n)&&this.handleError(n),n}async export(){const e=await this.ensureConnection(),t=new Oi(Dr(),await this.buildRequestConfiguration()),r=await e.export(t);return Mi(r)&&this.handleError(r),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",r.version??"undefined"),r.key}async setRecoveryMethod(e,t,r,n,i){const s=await this.ensureConnection(),o=new xi(Dr(),e,await this.buildRequestConfiguration(),t,r,n,i),a=await s.setRecoveryMethod(o);Mi(a)&&this.handleError(a),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",a.version??"undefined")}async getCurrentDevice(e){const t=await this.ensureConnection(),r=new Ni(Dr(),e);try{const e=await t.getCurrentDevice(r);return Mi(e)&&this.handleError(e),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",e.version??"undefined"),e}catch(e){if(e instanceof Gi)return null;throw e}}async updateAuthentication(){if(!this.isLoaded()||!this.remote)return void qr("IframeManager not loaded, skipping authentication update");const e=await fr.fromStorage(this.storage);if(!e)return void qr("No authentication found, skipping update");const t=new Di(Dr(),e.token);qr("Updating authentication in iframe with token");const r=await this.remote.updateAuthentication(t);Mi(r)&&this.handleError(r)}async disconnect(){const e=await this.ensureConnection(),t={uuid:Dr()};await e.logout(t)}async onMessage(e){qr("[HANDSHAKE DEBUG] IframeManager.onMessage called with:",e),this.messenger instanceof fi?(this.isInitialized||this.connection?qr(`[HANDSHAKE DEBUG] Connection already initialized (isInitialized: ${this.isInitialized}, hasConnection: ${!!this.connection})`):(qr("[HANDSHAKE DEBUG] First message received, initializing connection..."),this.initialize().catch(e=>{qr("[HANDSHAKE DEBUG] Failed to initialize connection:",e)})),qr("[HANDSHAKE DEBUG] Passing message to ReactNativeMessenger"),this.messenger.handleMessage(e)):qr("[HANDSHAKE DEBUG] Not a ReactNativeMessenger, ignoring message")}isLoaded(){return this.isInitialized&&void 0!==this.remote}destroy(){this.connection&&this.connection.destroy(),this.remote=void 0,this.isInitialized=!1,this.connection=void 0,this.initializationPromise=null}}class Ki{#t;#i;#e;#n;#o;#s=new Set;#a;#r=!1;constructor({remoteWindow:e,allowedOrigins:t}){if(!e)throw new $n("INVALID_ARGUMENT","remoteWindow must be defined");this.#t=e,this.#i=t?.length?t:[window.origin]}initialize=({log:e,validateReceivedMessage:t})=>{this.#e=e,this.#n=t,window.addEventListener("message",this.#l)};sendMessage=(e,t)=>{if(ti(e)){const r=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:r,transfer:t})}if(ri(e)||this.#r){const r=this.#r?(e=>{if(ri(e))return{penpal:ci.SynAck,methodNames:e.methodPaths.map(hi)};if(ii(e))return{penpal:ci.Call,id:e.id,methodName:hi(e.methodPath),args:e.args};if(si(e))return e.isError?{penpal:ci.Reply,id:e.callId,resolution:ui.Rejected,...e.isSerializedErrorInstance?{returnValue:e.value,returnValueIsError:!0}:{returnValue:e.value}}:{penpal:ci.Reply,id:e.callId,resolution:ui.Fulfilled,returnValue:e.value};throw di(e)})(e):e,n=this.#f(e);return void this.#t.postMessage(r,{targetOrigin:n,transfer:t})}if(ni(e)){const{port1:r,port2:n}=new MessageChannel;this.#a=r,r.addEventListener("message",this.#p),r.start();const i=[n,...t||[]],s=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:s,transfer:i})}if(!this.#a)throw new oi("Port is undefined");this.#a.postMessage(e,{transfer:t})};addMessageHandler=e=>{this.#s.add(e)};removeMessageHandler=e=>{this.#s.delete(e)};destroy=()=>{window.removeEventListener("message",this.#l),this.#u(),this.#s.clear()};#c=e=>this.#i.some(t=>t instanceof RegExp?t.test(e):t===e||"*"===t);#f=e=>{if(ti(e))return"*";if(!this.#o)throw new oi("Concrete remote origin not set");return"null"===this.#o&&this.#i.includes("*")?"*":this.#o};#u=()=>{this.#a?.removeEventListener("message",this.#p),this.#a?.close(),this.#a=void 0};#l=({source:e,origin:t,ports:r,data:n})=>{if(e===this.#t&&((e=>Zn(e)&&"penpal"in e)(n)&&(this.#e?.("Please upgrade the child window to the latest version of Penpal."),this.#r=!0,n=(e=>{if(e.penpal===ci.Syn)return{namespace:Xn,channel:void 0,type:"SYN",participantId:ai};if(e.penpal===ci.SynAck)return{namespace:Xn,channel:void 0,type:"ACK1",methodPaths:e.methodNames.map(li)};if(e.penpal===ci.Ack)return{namespace:Xn,channel:void 0,type:"ACK2"};if(e.penpal===ci.Call)return{namespace:Xn,channel:void 0,type:"CALL",id:e.id,methodPath:li(e.methodName),args:e.args};if(e.penpal===ci.Reply)return e.resolution===ui.Fulfilled?{namespace:Xn,channel:void 0,type:"REPLY",callId:e.id,value:e.returnValue}:{namespace:Xn,channel:void 0,type:"REPLY",callId:e.id,isError:!0,...e.returnValueIsError?{value:e.returnValue,isSerializedErrorInstance:!0}:{value:e.returnValue}};throw di(e)})(n)),this.#n?.(n)))if(this.#c(t)){if(ti(n)&&(this.#u(),this.#o=t),ni(n)&&!this.#r){if([this.#a]=r,!this.#a)throw new oi("No port received on ACK2");this.#a.addEventListener("message",this.#p),this.#a.start()}for(const e of this.#s)e(n)}else this.#e?.(`Received a message from origin \`${t}\` which did not match allowed origins \`[${this.#i.join(", ")}]\``)};#p=({data:e})=>{if(this.#n?.(e))for(const t of this.#s)t(e)}}class zi{storage;validateAndRefreshToken;ensureInitialized;eventEmitter;passkeyHandler;iframeManager=null;iframeManagerPromise=null;signer=null;signerPromise=null;provider=null;messagePoster=null;messenger=null;constructor(e,t,r,n,i){this.storage=e,this.validateAndRefreshToken=t,this.ensureInitialized=r,this.eventEmitter=n,this.passkeyHandler=i,this.eventEmitter.on(wr.ON_LOGOUT,()=>{qr("Handling logout event in EmbeddedWalletApi"),this.handleLogout()})}get backendApiClients(){const e=Br.getInstance();if(!e)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);return new hr({basePath:e.backendUrl,accessToken:e.baseConfiguration.publishableKey,nativeAppIdentifier:e.nativeAppIdentifier})}async getIframeManager(){if(qr("[HANDSHAKE DEBUG] getIframeManager called"),this.iframeManager&&this.iframeManager.hasFailed&&(qr("[HANDSHAKE DEBUG] Existing iframeManager has failed, clearing for recreation"),this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null),this.iframeManager)return qr("[HANDSHAKE DEBUG] Returning existing iframeManager instance"),this.iframeManager;if(this.iframeManagerPromise)return qr("[HANDSHAKE DEBUG] Returning existing iframeManagerPromise"),this.iframeManagerPromise;qr("[HANDSHAKE DEBUG] Creating new iframeManager"),this.iframeManagerPromise=this.createIframeManager();try{return qr("[HANDSHAKE DEBUG] Awaiting iframeManager creation"),this.iframeManager=await this.iframeManagerPromise,qr("[HANDSHAKE DEBUG] IframeManager created successfully"),this.iframeManagerPromise=null,this.iframeManager}catch(e){throw qr("[HANDSHAKE DEBUG] Error creating iframeManager:",e),this.iframeManagerPromise=null,this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null,e}}async createIframeManager(){qr("[HANDSHAKE DEBUG] createIframeManager starting");const e=Br.getInstance();if(!e)throw qr("[HANDSHAKE DEBUG] Configuration not found"),new mr("Configuration not found",pr.INVALID_CONFIGURATION);let t;if(qr("[HANDSHAKE DEBUG] Configuration found"),this.messagePoster)qr("[HANDSHAKE DEBUG] Creating ReactNativeMessenger with messagePoster"),this.messenger&&(qr("[HANDSHAKE DEBUG] Destroying old messenger before creating new one"),this.messenger.destroy()),this.messenger=new fi(this.messagePoster),qr("[HANDSHAKE DEBUG] Created new ReactNativeMessenger instance"),t=this.messenger;else{qr("[HANDSHAKE DEBUG] Creating WindowMessenger for browser mode");const r=this.createIframe(e.iframeUrl),n=new URL(e.iframeUrl).origin;t=new Ki({remoteWindow:r.contentWindow,allowedOrigins:[n]}),qr("[HANDSHAKE DEBUG] Created WindowMessenger")}return qr("[HANDSHAKE DEBUG] Creating IframeManager instance"),new ji(e,this.storage,t)}async ensureSigner(){if(this.iframeManager&&this.iframeManager.hasFailed&&(qr("IframeManager has failed, clearing signer for recreation"),this.signer=null),this.signer)return this.signer;if(this.signerPromise)return this.signerPromise;this.signerPromise=this.createSigner();try{return this.signer=await this.signerPromise,this.signer}catch(e){throw this.signerPromise=null,e}finally{this.signerPromise=null}}async createSigner(){const e=await this.getIframeManager();return new Gr(e,this.storage,this.backendApiClients,this.passkeyHandler,this.eventEmitter)}createIframe(e){if("undefined"==typeof document)throw new mr("Document is not available. Please provide a message poster for non-browser environments.",pr.INVALID_CONFIGURATION);const t=document.getElementById("openfort-iframe");t&&t.remove();const r=document.createElement("iframe");return r.style.display="none",r.id="openfort-iframe",r.src=e,document.body.appendChild(r),r}async getPasskeyKey(e){const t=await fr.fromStorage(this.storage);return await this.passkeyHandler.deriveAndExportKey({id:e,seed:t.player})}async getEntropy(e){switch(e.recoveryMethod){case vr.PASSWORD:return{recoveryPassword:e.password};case vr.AUTOMATIC:return{encryptionSession:e.encryptionSession};case vr.PASSKEY:return{passkey:e.passkeyInfo?{id:e.passkeyInfo.passkeyId,key:e.passkeyInfo.passkeyKey||await this.getPasskeyKey(e.passkeyInfo.passkeyId)}:{}};default:throw new mr("Invalid recovery method",pr.INVALID_CONFIGURATION)}}async configure(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:vr.AUTOMATIC},[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),i={chainId:e.chainId,entropy:n,accountType:e.accountType??Sr.SMART_ACCOUNT,chainType:e.chainType??Nr.EVM,getPasskeyKeyFn:async e=>this.getPasskeyKey(e)},s=await r.configure(i);return{id:s.id,chainId:s.chainId,user:s.user,address:s.address,ownerAddress:s.ownerAddress,chainType:s.chainType,accountType:s.accountType,implementationType:s.implementationType,factoryAddress:s.factoryAddress,salt:s.salt,createdAt:s.createdAt,implementationAddress:s.implementationAddress,recoveryMethod:Fr.parseRecoveryMethod(s.recoveryMethod),recoveryMethodDetails:s.recoveryMethodDetails}}async create(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:vr.AUTOMATIC},r=await fr.fromStorage(this.storage);if(!r)throw new mr("missing authentication",pr.AUTHENTICATION_ERROR);if(t.recoveryMethod===vr.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Mr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:r?.player??""});t.passkeyInfo={passkeyId:e.id,passkeyKey:e.key}}const[n,i]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),s=await n.create({accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,entropy:i}),o={id:s.id,chainId:s.chainId,user:r.player,address:s.address,ownerAddress:s.ownerAddress,chainType:s.chainType,accountType:s.accountType,implementationType:s.implementationType,factoryAddress:s.factoryAddress,salt:s.salt,createdAt:s.createdAt,implementationAddress:s.implementationAddress,recoveryMethod:Fr.parseRecoveryMethod(s.recoveryMethod),recoveryMethodDetails:s.recoveryMethodDetails};return this.eventEmitter.emit(wr.ON_EMBEDDED_WALLET_CREATED,o),o}async recover(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:vr.AUTOMATIC};if(t.recoveryMethod===vr.PASSKEY){if(!t.passkeyInfo?.passkeyId)throw new mr("Passkey ID must be provided for passkey recovery",pr.INVALID_CONFIGURATION);t.passkeyInfo={passkeyId:t.passkeyInfo.passkeyId}}const[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),i=await r.recover({account:e.account,entropy:n}),s={id:i.id,chainId:i.chainId,implementationAddress:i.implementationAddress,factoryAddress:i.factoryAddress,salt:i.salt,user:i.user,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,createdAt:i.createdAt,recoveryMethod:Fr.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails};return this.eventEmitter.emit(wr.ON_EMBEDDED_WALLET_RECOVERED,s),s}async signMessage(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),{hashMessage:n=!0,arrayifyMessage:i=!1}=t||{},s=await Fr.fromStorage(this.storage);return await r.sign(e,i,n,s?.chainType)}async signTypedData(e,t,r){await this.validateAndRefreshToken();const n=await this.ensureSigner(),i=await Fr.fromStorage(this.storage);if(!i)throw new mr("No account found",pr.MISSING_SIGNER_ERROR);const s={...t};delete s.EIP712Domain;const{_TypedDataEncoder:o}=await Promise.resolve().then(function(){return Ua}),a=o.hash(e,s,r);return await $r({hash:a,implementationType:i.implementationType||i.type,chainId:Number(i.chainId),signer:n,address:i.address,ownerAddress:i.ownerAddress,factoryAddress:i.factoryAddress,salt:i.salt})}async exportPrivateKey(){await this.validateAndRefreshToken();const e=await this.ensureSigner();return await e.export()}async setRecoveryMethod(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),n=await fr.fromStorage(this.storage);if(!n)throw new mr("missing authentication",pr.AUTHENTICATION_ERROR);let i,s,o,a;if(e.recoveryMethod===vr.PASSKEY){const e=await Fr.fromStorage(this.storage);if(!e)throw new mr("missing account",pr.INVALID_CONFIGURATION);const t=e?.recoveryMethodDetails?.passkeyId;if(!t)throw new mr("missing passkey id for account",pr.INVALID_CONFIGURATION);o={passkeyId:t,passkeyKey:await this.passkeyHandler.deriveAndExportKey({id:t,seed:n.player})}}else if(t.recoveryMethod===vr.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Mr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:n.player});o={passkeyId:e.id,passkeyKey:e.key},a={passkeyId:e.id}}if(e.recoveryMethod===vr.PASSWORD?i=e.password:t.recoveryMethod===vr.PASSWORD&&(i=t.password),e.recoveryMethod===vr.AUTOMATIC?s=e.encryptionSession:t.recoveryMethod===vr.AUTOMATIC&&(s=t.encryptionSession),!i&&!s)throw new mr("Password or encryption session is not provided",pr.INVALID_CONFIGURATION);await r.setRecoveryMethod({recoveryMethod:t.recoveryMethod,recoveryPassword:i,encryptionSession:s,passkeyInfo:o});const c=await Fr.fromStorage(this.storage);c&&new Fr({...c,recoveryMethod:t.recoveryMethod,recoveryMethodDetails:a}).save(this.storage)}async get(){const e=await Fr.fromStorage(this.storage);if(!e)throw new mr("No signer configured",pr.MISSING_SIGNER_ERROR);const t=await fr.fromStorage(this.storage);if(!t)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);return{id:e.id,chainId:e.chainId,user:t.player,address:e.address,ownerAddress:e.ownerAddress,factoryAddress:e.factoryAddress,salt:e.salt,chainType:e.chainType,accountType:e.accountType,implementationAddress:e.implementationAddress,implementationType:e.implementationType,createdAt:e.createdAt,recoveryMethod:Fr.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails}}async list(e){const t={accountType:Sr.SMART_ACCOUNT,...e},r=Br.getInstance();if(!r)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);await this.validateAndRefreshToken();const n=await fr.fromStorage(this.storage);if(!n)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);return gr(async()=>(await this.backendApiClients.accountsApi.getAccountsV2(t,{headers:{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}})).data.data.map(e=>({user:e.user,chainType:e.chainType,id:e.id,address:e.address,active:e.smartAccount?.active,ownerAddress:e.ownerAddress,factoryAddress:e.smartAccount?.factoryAddress,salt:e.smartAccount?.salt,accountType:e.accountType,implementationAddress:e.smartAccount?.implementationAddress,createdAt:e.createdAt,implementationType:e.smartAccount?.implementationType,chainId:e.chainId,recoveryMethod:Fr.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails})),{default:pr.AUTHENTICATION_ERROR})}async getEmbeddedState(){try{return await fr.fromStorage(this.storage)?await Fr.fromStorage(this.storage)?yr.READY:yr.EMBEDDED_SIGNER_NOT_CONFIGURED:yr.UNAUTHENTICATED}catch(e){return qr("Failed to get embedded state:",e),yr.UNAUTHENTICATED}}async getEthereumProvider(e){await this.ensureInitialized();const t={announceProvider:!0,...e},r=await fr.fromStorage(this.storage),n=await Fr.fromStorage(this.storage);return this.provider?this.provider&&t.policy&&this.provider.updatePolicy(t.policy):(this.provider=new Wn({storage:this.storage,openfortEventEmitter:this.eventEmitter,ensureSigner:this.ensureSigner.bind(this),account:n||void 0,authentication:r||void 0,backendApiClients:this.backendApiClients,policyId:t.policy,validateAndRefreshSession:this.validateAndRefreshToken.bind(this),chains:t.chains}),t.announceProvider&&function(e){if("undefined"==typeof window)return;const t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t),window.addEventListener("eip6963:requestProvider",()=>window.dispatchEvent(t))}({info:{...Vn,...t.providerInfo},provider:this.provider})),this.provider}async ping(e){try{e>0&&await new Promise(t=>{setTimeout(t,e)});const t=await this.getIframeManager();if(!t.isLoaded())return!1;const r=await fr.fromStorage(this.storage);if(r)try{return await t.getCurrentDevice(r.player),!0}catch(e){return!1}return t.isLoaded()}catch(e){return qr("Ping failed:",e),!1}}getURL(){const e=Br.getInstance();if(!e)throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);return e.iframeUrl}async setMessagePoster(e){if(!e||"function"!=typeof e.postMessage)throw new mr("Invalid message poster",pr.INVALID_CONFIGURATION);this.messagePoster=e,this.messenger&&this.messenger.destroy(),this.iframeManager&&this.iframeManager.destroy(),this.signer=null,this.signerPromise=null,this.iframeManager=null,this.iframeManagerPromise=null,this.messenger=null}async handleLogout(){const e=await this.ensureSigner();await e.disconnect(),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,this.signerPromise=null}async onMessage(e){if(!e||"object"!=typeof e)return void qr("Invalid message received:",e);qr("[HANDSHAKE DEBUG] EmbeddedWalletApi onMessage:",e);const t="penpal"===e.namespace&&"SYN"===e.type||e.penpal&&"string"==typeof e.penpal;if(t&&this.messenger&&this.messagePoster)return qr("[HANDSHAKE DEBUG] Passing message directly to existing ReactNativeMessenger"),void this.messenger.handleMessage(e);const r=await this.getIframeManager();qr(`[HANDSHAKE DEBUG] IframeManager obtained, isLoaded: ${r.isLoaded()}`),t&&!r.isLoaded()&&qr("[HANDSHAKE DEBUG] Received penpal message before connection initialized, setting up connection..."),qr("[HANDSHAKE DEBUG] Calling iframeManager.onMessage"),await r.onMessage(e),qr("[HANDSHAKE DEBUG] iframeManager.onMessage completed")}isReady(){return this.iframeManager?.isLoaded()||!1}}let Wi=class{backendApiClients;validateAndRefreshToken;ensureInitialized;getSignerSignFunction;constructor(e,t,r,n,i){this.backendApiClients=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.getSignerSignFunction=i}async sendSignatureTransactionIntentRequest(e,t=null,r=null,n=!1){if(await this.ensureInitialized(),!Br.getInstance())throw new mr("Configuration not found",pr.INVALID_CONFIGURATION);await this.validateAndRefreshToken();let i=r;if(!i){if(!t)throw new mr("No signableHash or signature provided",pr.OPERATION_NOT_SUPPORTED_ERROR);if(!this.getSignerSignFunction)throw new mr("In order to sign a transaction intent, a signer must be configured",pr.MISSING_SIGNER_ERROR);const e=await this.getSignerSignFunction();i=await e(t)}const s={id:e,signatureRequest:{signature:i,optimistic:n}};return gr(async()=>(await this.backendApiClients.transactionIntentsApi.signature(s)).data,{default:pr.INTERNAL_ERROR})}async sendSignatureSessionRequest(e,t,r){await this.ensureInitialized();const n={id:e,signatureRequest:{signature:t,optimistic:r}};return gr(async()=>(await this.backendApiClients.sessionsApi.signatureSession(n)).data,{default:pr.INTERNAL_ERROR})}},Vi=class{storage;authManager;validateAndRefreshToken;constructor(e,t,r){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r}async get(){await this.validateAndRefreshToken();const e=await fr.fromStorage(this.storage);if(!e)throw new mr("No access token found",pr.NOT_LOGGED_IN_ERROR);return await this.authManager.getUser(e)}};const Ji=new TextEncoder,Yi=new TextDecoder;class Qi extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Qi.code="ERR_JOSE_GENERIC";(class extends Qi{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n,this.payload=t}}).code="ERR_JWT_CLAIM_VALIDATION_FAILED";(class extends Qi{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n,this.payload=t}}).code="ERR_JWT_EXPIRED";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}).code="ERR_JOSE_ALG_NOT_ALLOWED";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}).code="ERR_JOSE_NOT_SUPPORTED";(class extends Qi{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}).code="ERR_JWE_DECRYPTION_FAILED";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}).code="ERR_JWE_INVALID";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}).code="ERR_JWS_INVALID";class $i extends Qi{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}$i.code="ERR_JWT_INVALID";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}).code="ERR_JWK_INVALID";(class extends Qi{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}).code="ERR_JWKS_INVALID";(class extends Qi{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}).code="ERR_JWKS_NO_MATCHING_KEY";(class extends Qi{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}).code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";(class extends Qi{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}).code="ERR_JWKS_TIMEOUT";(class extends Qi{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}).code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const Xi=e=>(e=>{let t=e;"string"==typeof t&&(t=Ji.encode(t));const r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Zi=e=>{let t=e;t instanceof Uint8Array&&(t=Yi.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r})(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};function es(e){if("string"!=typeof e)throw new $i("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(5===r)throw new $i("Only JWTs using Compact JWS serialization can be decoded");if(3!==r)throw new $i("Invalid JWT");if(!t)throw new $i("JWTs must contain a payload");let n,i;try{n=Zi(t)}catch{throw new $i("Failed to base64url decode the payload")}try{i=JSON.parse(Yi.decode(n))}catch{throw new $i("Failed to parse the decoded payload as JSON")}if(!function(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}(i))throw new $i("Invalid JWT Claims Set");return i}async function ts(e){const t=(new TextEncoder).encode(e),r=await async function(e,t){if(xr)return xr(e,t);if("undefined"!=typeof crypto&&crypto.subtle&&crypto.subtle.digest)return crypto.subtle.digest(e,t);throw new Error("No crypto digest function available. Please provide a crypto override for this environment.")}("SHA-256",t);return new Uint8Array(r)}function rs(e){const t=new Uint8Array(e);return crypto.getRandomValues(t),t}let ns=class e{decodedPayload;value;constructor(e){this.value=e;try{this.decodedPayload=es(e)}catch(e){throw new mr("Invalid token format",pr.AUTHENTICATION_ERROR)}}get subject(){return this.decodedPayload.sub}get expiration(){return this.decodedPayload.exp}get issuer(){return this.decodedPayload.iss}isExpired(e=30){return!this.expiration||(qr("Token expiration:",1e3*(this.expiration-e),"Current time:",Date.now()),Date.now()>=1e3*(this.expiration-e))}static parse(t){try{return new e(t)}catch{return null}}};class is{storage;constructor(e){this.storage=e}async savePKCEData(e){this.storage.save(dr.PKCE_STATE,e.state),this.storage.save(dr.PKCE_VERIFIER,e.verifier)}async getPKCEData(){const e=await this.storage.get(dr.PKCE_STATE),t=await this.storage.get(dr.PKCE_VERIFIER);return e&&t?{state:e,verifier:t}:null}async clearPKCEData(){this.storage.remove(dr.PKCE_STATE),this.storage.remove(dr.PKCE_VERIFIER)}}class ss{deviceCredentialsManager;backendApiClientsInstance;publishableKeyInstance;constructor(e){this.deviceCredentialsManager=new is(e)}setBackendApiClients(e,t){this.backendApiClientsInstance=e,this.publishableKeyInstance=t}get backendApiClients(){if(!this.backendApiClientsInstance)throw new mr("Backend API clients not initialized",pr.INTERNAL_ERROR);return this.backendApiClientsInstance}get publishableKey(){if(!this.publishableKeyInstance)throw new mr("Publishable key not initialized",pr.INTERNAL_ERROR);return this.publishableKeyInstance}async initOAuth(e,t,r){const n=t?.usePooling??!1,i=t?.skipBrowserRedirect??!1,{usePooling:s,skipBrowserRedirect:o,...a}=t||{},c={oAuthInitRequest:{provider:e,options:a,usePooling:n}},u=await gr(async()=>this.backendApiClients.authenticationApi.initOAuth(c,ss.getEcosystemGameOptsOrUndefined(r)),{default:pr.AUTHENTICATION_ERROR});return"undefined"==typeof window||i||window.location.assign(u.data.url),{url:u.data.url,key:u.data.key}}async registerGuest(){const e={};return gr(async()=>(await this.backendApiClients.authenticationApi.registerGuest(e)).data,{default:pr.USER_REGISTRATION_ERROR})}async poolOAuth(e){const t={key:e};for(let r=0;r<600;r++)try{const e=await gr(async()=>this.backendApiClients.authenticationApi.poolOAuth(t),{default:pr.AUTHENTICATION_ERROR});if(200===e.status)return e.data}catch(e){if(e.response&&404===e.response.status){await new Promise(e=>{setTimeout(e,500)});continue}throw e}throw new Error("Failed to pool OAuth, try again later")}async loginWithIdToken(e,t,r){const n={loginWithIdTokenRequest:{provider:e,token:t}};return gr(async()=>(await this.backendApiClients.authenticationApi.loginWithIdToken(n,ss.getEcosystemGameOptsOrUndefined(r))).data,{default:pr.AUTHENTICATION_ERROR,401:pr.AUTHENTICATION_ERROR,403:pr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{Qn.captureAxiosError("loginWithIdToken",e)})}async authenticateThirdParty(e,t,r,n){const i={thirdPartyOAuthRequest:{provider:e,token:t,tokenType:r}};return gr(async()=>(await this.backendApiClients.authenticationApi.thirdParty(i,ss.getEcosystemGameOptsOrUndefined(n))).data,{default:pr.AUTHENTICATION_ERROR,401:pr.AUTHENTICATION_ERROR,403:pr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{Qn.captureAxiosError("authenticateThirdParty",e)})}async initSIWE(e,t){const r={sIWERequest:{address:e}},n=await gr(async()=>this.backendApiClients.authenticationApi.initSIWE(r,ss.getEcosystemGameOptsOrUndefined(t)),{default:pr.AUTHENTICATION_ERROR});return{address:n.data.address,nonce:n.data.nonce,expiresAt:n.data.expiresAt}}async authenticateSIWE(e,t,r,n){const i={sIWEAuthenticateRequest:{signature:e,message:t,walletClientType:r,connectorType:n}};return gr(async()=>(await this.backendApiClients.authenticationApi.authenticateSIWE(i)).data,{default:pr.AUTHENTICATION_ERROR,401:pr.AUTHENTICATION_ERROR,403:pr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{Qn.captureAxiosError("authenticateSIWE",e)})}static getEcosystemGameOptsOrUndefined(e){if(e)return{headers:{"x-game":e}}}async loginEmailPassword(e,t,r){const n={loginRequest:{email:e,password:t}};return gr(async()=>(await this.backendApiClients.authenticationApi.loginEmailPassword(n,ss.getEcosystemGameOptsOrUndefined(r))).data,{default:pr.AUTHENTICATION_ERROR,401:pr.AUTHENTICATION_ERROR,403:pr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{Qn.captureAxiosError("loginEmailPassword",e)})}async requestResetPassword(e,t){const r=rs(32),n=Xi(r),i=await ts(n),s=Xi(i),o=rs(32),a=Xi(o);await this.deviceCredentialsManager.savePKCEData({state:a,verifier:n});const c={requestResetPasswordRequest:{email:e,redirectUrl:t,challenge:{codeChallenge:s,method:Rr.S256}}};await gr(async()=>{await this.backendApiClients.authenticationApi.requestResetPassword(c)},{default:pr.AUTHENTICATION_ERROR})}async resetPassword(e,t,r){return gr(async()=>{const n=await this.deviceCredentialsManager.getPKCEData();if(!n)throw new Error("No code verifier or state for PKCE");const i={resetPasswordRequest:{email:e,password:t,state:r,challenge:{codeVerifier:n.verifier}}};await this.backendApiClients.authenticationApi.resetPassword(i)},{default:pr.AUTHENTICATION_ERROR})}async requestEmailVerification(e,t){const r=rs(32),n=Xi(r),i=await ts(n),s=Xi(i),o=rs(32),a=Xi(o);await this.deviceCredentialsManager.savePKCEData({state:a,verifier:n});const c={requestVerifyEmailRequest:{email:e,redirectUrl:t,challenge:{codeChallenge:s,method:Rr.S256}}};await gr(async()=>{await this.backendApiClients.authenticationApi.requestEmailVerification(c)},{default:pr.AUTHENTICATION_ERROR})}async verifyEmail(e,t){return gr(async()=>{const r=await this.deviceCredentialsManager.getPKCEData();if(!r)throw new Error("No code verifier or state for PKCE");const n={verifyEmailRequest:{email:e,token:t,challenge:{codeVerifier:r.verifier}}};await this.backendApiClients.authenticationApi.verifyEmail(n)},{default:pr.AUTHENTICATION_ERROR})}async signupEmailPassword(e,t,r,n){const i={signupRequest:{email:e,password:t,name:r}};return gr(async()=>(await this.backendApiClients.authenticationApi.signupEmailPassword(i,ss.getEcosystemGameOptsOrUndefined(n))).data,{default:pr.USER_REGISTRATION_ERROR,401:pr.USER_REGISTRATION_ERROR,403:pr.USER_NOT_AUTHORIZED_ON_ECOSYSTEM},e=>{Qn.captureAxiosError("signupEmailPassword",e)})}async validateCredentials(e,t){if(!e.refreshToken)throw new mr("No refresh token provided",pr.AUTHENTICATION_ERROR);if(t)return this.refreshTokens(e.refreshToken,t);qr("Validating credentials with token:",e.token);const r=ns.parse(e.token);return r?r.isExpired()?(qr("Token expired, refreshing..."),this.refreshTokens(e.refreshToken)):{player:r.subject,accessToken:e.token,refreshToken:e.refreshToken}:this.refreshTokens(e.refreshToken)}async refreshTokens(e,t){const r={refreshTokenRequest:{refreshToken:e,forceRefresh:t}};return gr(async()=>{const e=await this.backendApiClients.authenticationApi.refresh(r);return{player:e.data.player.id,accessToken:e.data.token,refreshToken:e.data.refreshToken}},{default:pr.REFRESH_TOKEN_ERROR})}async logout(e,t){const r={logoutRequest:{refreshToken:t}};return gr(async()=>{await this.backendApiClients.authenticationApi.logout(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e}})},{default:pr.LOGOUT_ERROR})}async getUser(e){return gr(async()=>(await this.backendApiClients.authenticationApi.me({headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}})).data,{default:pr.AUTHENTICATION_ERROR})}async linkThirdParty(e,t,r,n,i){const s={thirdPartyLinkRequest:{provider:t,token:r,tokenType:n}};return gr(async()=>(await this.backendApiClients.authenticationApi.linkThirdParty(s,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider||void 0,"x-token-type":e.thirdPartyTokenType||void 0,"x-game":i||void 0}})).data,{default:pr.AUTHENTICATION_ERROR})}async linkOAuth(e,t,r,n){const i=r?.skipBrowserRedirect??!1;delete r?.skipBrowserRedirect;const s={oAuthInitRequest:{provider:t,options:r,usePooling:r?.usePooling||!1}},o=await gr(async()=>this.backendApiClients.authenticationApi.linkOAuth(s,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider||void 0,"x-token-type":e.thirdPartyTokenType||void 0,"x-game":n||void 0}}),{default:pr.AUTHENTICATION_ERROR});return"undefined"==typeof window||i||window.location.assign(o.data.url),{url:o.data.url,key:o.data.key}}async unlinkOAuth(e,t){const r={unlinkOAuthRequest:{provider:e}};return gr(async()=>(await this.backendApiClients.authenticationApi.unlinkOAuth(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:pr.AUTHENTICATION_ERROR})}async unlinkWallet(e,t){const r={sIWERequest:{address:e}};return gr(async()=>(await this.backendApiClients.authenticationApi.unlinkSIWE(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:pr.AUTHENTICATION_ERROR})}async linkWallet(e,t,r,n,i){const s={sIWEAuthenticateRequest:{signature:e,message:t,walletClientType:r,connectorType:n}};return gr(async()=>(await this.backendApiClients.authenticationApi.linkSIWE(s,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":i}})).data,{default:pr.AUTHENTICATION_ERROR})}async unlinkEmail(e,t){const r={unlinkEmailRequest:{email:e}};return gr(async()=>(await this.backendApiClients.authenticationApi.unlinkEmail(r,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t}})).data,{default:pr.AUTHENTICATION_ERROR})}async linkEmail(e,t,r,n){const i={loginRequest:{email:e,password:t}};return gr(async()=>(await this.backendApiClients.authenticationApi.linkEmail(i,{headers:{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r,"x-game":n||void 0}})).data,{default:pr.AUTHENTICATION_ERROR})}}let os=class{storage;scope;constructor(e,t){this.storage=e,this.scope=this.createScope(t)}createScope(e){return e.substring(8).substring(0,8)}scopeKey(e){return`${this.scope}.${e}`}async get(e){return this.storage.get(this.scopeKey(e))}save(e,t){this.storage.save(this.scopeKey(e),t)}remove(e){this.storage.remove(this.scopeKey(e))}flush(){for(const e of Object.values(dr))this.storage.remove(this.scopeKey(e))}};class as{storage;constructor(e){this.storage=e}async get(e){return Promise.resolve(this.storage.getItem(e))}save(e,t){this.storage.setItem(e,t)}remove(e){this.storage.removeItem(e)}flush(){for(const e of Object.values(dr))this.storage.removeItem(e)}}class cs{realStorage=null;customStorage;publishableKey;constructor(e,t){this.publishableKey=e,this.customStorage=t}getRealStorage(){if(!this.realStorage){let e;if(this.customStorage)e=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new mr("Storage not available. Please provide custom storage or use in browser environment.",pr.INVALID_CONFIGURATION);e=new as(localStorage)}this.realStorage=new os(e,this.publishableKey)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,t){this.getRealStorage().save(e,t)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}}const us={};class ls{storage;authManager;eventEmitter;constructor(e,t,r){this.storage=e,this.authManager=t,this.eventEmitter=r}async getThirdPartyAuthToken(){const e=Br.getInstance();if(!e?.thirdPartyAuth)throw new mr("No third party configuration found",pr.INTERNAL_ERROR);const{getAccessToken:t,provider:r}=e.thirdPartyAuth;if(!t||!r)throw new mr("Third party is not configured. Please configure getAccessToken and thirdPartyAuthProvider in your Openfort instance",pr.INVALID_CONFIGURATION);const n=await t();if(!n)throw new mr("Could not get access token",pr.AUTHENTICATION_ERROR);let i=(await fr.fromStorage(this.storage))?.player;if(!i){const e=await this.authManager.authenticateThirdParty(r,n,Er.ID_TOKEN);i=e?.id}return new fr("third_party",n,i,null,r,Er.ID_TOKEN).save(this.storage),n}async getAccessToken(){return Br.getInstance()?.thirdPartyAuth?this.getThirdPartyAuthToken():(await fr.fromStorage(this.storage))?.token??null}async validateAndRefreshToken(e){return((e,t)=>{let r=us[t];return r||(r=e().finally(()=>{delete us[t],r=null}),us[t]=r),r})(async()=>{if(Br.getInstance()?.thirdPartyAuth)return void await this.getThirdPartyAuthToken();const t=await fr.fromStorage(this.storage);if(!t)throw new mr("Must be logged in to validate and refresh token",pr.NOT_LOGGED_IN_ERROR);let r;qr("validating credentials...");try{r=await this.authManager.validateCredentials(t,e)}catch(e){throw fr.clear(this.storage),this.eventEmitter.emit(wr.ON_LOGOUT),e}if(!r.player)throw new mr("No user found in credentials",pr.INTERNAL_ERROR);r.accessToken!==t.token&&(qr("tokens refreshed"),new fr("jwt",r.accessToken,r.player,r.refreshToken).save(this.storage))},"openfort.validateAndRefreshToken")}}class hs{storage;iAuthManager=null;openfortInternal;initPromise;asyncInitPromise=null;authInstance;embeddedWalletInstance;userInstance;proxyInstance;configuration;eventEmitter;iPasskeyHandler;static globalEventEmitter=null;get auth(){if(!this.authInstance)throw new mr("Openfort SDK not initialized. Please await waitForInitialization() before accessing auth.",pr.INVALID_CONFIGURATION);return this.authInstance}get embeddedWallet(){if(!this.embeddedWalletInstance)throw new mr("Openfort SDK not initialized. Please await waitForInitialization() before accessing embeddedWallet.",pr.INVALID_CONFIGURATION);return this.embeddedWalletInstance}get user(){if(!this.userInstance)throw new mr("Openfort SDK not initialized. Please await waitForInitialization() before accessing user.",pr.INVALID_CONFIGURATION);return this.userInstance}get proxy(){if(!this.proxyInstance)throw new mr("Openfort SDK not initialized. Please await waitForInitialization() before accessing proxy.",pr.INVALID_CONFIGURATION);return this.proxyInstance}initializeSynchronously(){try{this.iAuthManager=new ss(this.storage),this.openfortInternal=new ls(this.storage,this.authManager,this.eventEmitter),this.authInstance=new Cr(this.storage,this.authManager,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter),this.embeddedWalletInstance=new zi(this.storage,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter,this.passkeyHandler),this.userInstance=new Vi(this.storage,this.authManager,this.validateAndRefreshToken.bind(this)),this.proxyInstance=new Wi(this.storage,this.backendApiClients,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),async()=>{if(!this.embeddedWalletInstance)throw new mr("Embedded wallet not initialized",pr.MISSING_SIGNER_ERROR);const e=this.embeddedWalletInstance;return t=>e.signMessage(t,{hashMessage:!0,arrayifyMessage:!0})})}catch(e){throw new mr("Openfort SDK synchronous initialization failed",pr.INVALID_CONFIGURATION)}}constructor(e){this.configuration=new Br(e),this.storage=new cs(this.configuration.baseConfiguration.publishableKey,this.configuration.storage),this.eventEmitter=new zr,hs.globalEventEmitter?["onAuthInit","onAuthSuccess","onAuthFailure","onLogout","onSwitchAccount","onSignedMessage","onEmbeddedWalletCreated","onEmbeddedWalletRecovered","onAuthFlowOpen","onAuthFlowClose","onAuthFlowCancel"].forEach(e=>{this.eventEmitter.on(e,(...t)=>{hs.globalEventEmitter?.emit(e,...t)})}):hs.globalEventEmitter=this.eventEmitter,this.iPasskeyHandler=new Mr({rpId:this.configuration.passkeyRpId,rpName:this.configuration.passkeyRpName,extractableKey:!0}),Yn.init({configuration:this.configuration}),this.initializeSynchronously(),this.initPromise=Promise.resolve()}static getEventEmitter(){return hs.globalEventEmitter||(hs.globalEventEmitter=new zr),hs.globalEventEmitter}async waitForInitialization(){await this.initPromise,await this.ensureAsyncInitialized()}async getAccessToken(){return await this.ensureInitialized(),this.openfortInternal.getAccessToken()}async validateAndRefreshToken(e){return await this.ensureInitialized(),await this.openfortInternal.validateAndRefreshToken(e)}get backendApiClients(){return new hr({basePath:this.configuration.backendUrl,accessToken:this.configuration.baseConfiguration.publishableKey,nativeAppIdentifier:this.configuration.nativeAppIdentifier,storage:this.storage,onLogout:()=>{this.eventEmitter.emit("onLogout")}})}get authManager(){if(!this.iAuthManager)throw new mr("AuthManager not initialized",pr.INTERNAL_ERROR);return this.iAuthManager}get passkeyHandler(){return this.iPasskeyHandler}static async isStorageAccessible(e){try{const t=dr.TEST,r="openfort_storage_test";e.save(t,r);const n=await e.get(t);return e.remove(t),n===r}catch(e){return!1}}async initializeAsync(){try{if(!await hs.isStorageAccessible(this.storage))throw new mr("Storage is not accessible",pr.INVALID_CONFIGURATION);this.authManager.setBackendApiClients(this.backendApiClients,this.configuration.baseConfiguration.publishableKey)}catch(e){throw new mr("Openfort SDK async initialization failed",pr.INTERNAL_ERROR)}}async ensureAsyncInitialized(){this.asyncInitPromise||(this.asyncInitPromise=this.initializeAsync()),await this.asyncInitPromise}async ensureInitialized(){await this.initPromise,await this.ensureAsyncInitialized()}}hs.getEventEmitter();var ds={exports:{}},fs=St(Object.freeze({__proto__:null,default:{}}));!function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:fs.Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function c(e,t,n,i){for(var s=0,o=0,a=Math.min(e.length,n),c=t;c<a;c++){var u=e.charCodeAt(c)-48;s*=i,o=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&o<i,"Invalid character"),s+=o}return s}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===n)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===n)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var h=1;for(u=c(e,l,e.length,t),l=0;l<o;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){u(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(e){i.prototype.inspect=l}else i.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),n=0!==s||o!==this.length-1?h[6-c.length]+c+n:c+n}for(0!==s&&(n=s.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],l=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(l).toString(e);n=(p=p.idivn(l)).isZero()?m+n:h[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,h=67108863&c,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;l+=(o=(i=0|e.words[p])*(s=0|t.words[f])+h)/67108864|0,h=67108863&o}r.words[u]=0|h,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),s=n||Math.max(1,i);r(i<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,u=0,l=0|o[0],h=8191&l,d=l>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,v=0|o[3],A=8191&v,b=v>>>13,E=0|o[4],_=8191&E,k=E>>>13,T=0|o[5],I=8191&T,R=T>>>13,S=0|o[6],N=8191&S,P=S>>>13,C=0|o[7],O=8191&C,x=C>>>13,M=0|o[8],D=8191&M,U=M>>>13,L=0|o[9],B=8191&L,F=L>>>13,q=0|a[0],G=8191&q,H=q>>>13,j=0|a[1],K=8191&j,z=j>>>13,W=0|a[2],V=8191&W,J=W>>>13,Y=0|a[3],Q=8191&Y,$=Y>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],he=8191&le,de=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(h,G))|0)+((8191&(i=(i=Math.imul(h,H))+Math.imul(d,G)|0))<<13)|0;u=((s=Math.imul(d,H))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,G),i=(i=Math.imul(p,H))+Math.imul(m,G)|0,s=Math.imul(m,H);var ye=(u+(n=n+Math.imul(h,K)|0)|0)+((8191&(i=(i=i+Math.imul(h,z)|0)+Math.imul(d,K)|0))<<13)|0;u=((s=s+Math.imul(d,z)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,G),i=(i=Math.imul(y,H))+Math.imul(w,G)|0,s=Math.imul(w,H),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,z)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,z)|0;var we=(u+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(d,V)|0))<<13)|0;u=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(A,G),i=(i=Math.imul(A,H))+Math.imul(b,G)|0,s=Math.imul(b,H),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,z)|0)+Math.imul(w,K)|0,s=s+Math.imul(w,z)|0,n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,J)|0;var ve=(u+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,$)|0)+Math.imul(d,Q)|0))<<13)|0;u=((s=s+Math.imul(d,$)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(_,G),i=(i=Math.imul(_,H))+Math.imul(k,G)|0,s=Math.imul(k,H),n=n+Math.imul(A,K)|0,i=(i=i+Math.imul(A,z)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,z)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(w,V)|0,s=s+Math.imul(w,J)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,$)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,$)|0;var Ae=(u+(n=n+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Z)|0))<<13)|0;u=((s=s+Math.imul(d,ee)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(I,G),i=(i=Math.imul(I,H))+Math.imul(R,G)|0,s=Math.imul(R,H),n=n+Math.imul(_,K)|0,i=(i=i+Math.imul(_,z)|0)+Math.imul(k,K)|0,s=s+Math.imul(k,z)|0,n=n+Math.imul(A,V)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,J)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,$)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,$)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,s=s+Math.imul(m,ee)|0;var be=(u+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((s=s+Math.imul(d,ne)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(N,G),i=(i=Math.imul(N,H))+Math.imul(P,G)|0,s=Math.imul(P,H),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,z)|0,n=n+Math.imul(_,V)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(k,V)|0,s=s+Math.imul(k,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,$)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,$)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(w,Z)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ne)|0;var Ee=(u+(n=n+Math.imul(h,se)|0)|0)+((8191&(i=(i=i+Math.imul(h,oe)|0)+Math.imul(d,se)|0))<<13)|0;u=((s=s+Math.imul(d,oe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(O,G),i=(i=Math.imul(O,H))+Math.imul(x,G)|0,s=Math.imul(x,H),n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,z)|0)+Math.imul(P,K)|0,s=s+Math.imul(P,z)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,$)|0)+Math.imul(k,Q)|0,s=s+Math.imul(k,$)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(b,Z)|0,s=s+Math.imul(b,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,oe)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,oe)|0;var _e=(u+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,ue)|0)+Math.imul(d,ce)|0))<<13)|0;u=((s=s+Math.imul(d,ue)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(D,G),i=(i=Math.imul(D,H))+Math.imul(U,G)|0,s=Math.imul(U,H),n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,z)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,z)|0,n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(P,V)|0,s=s+Math.imul(P,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,$)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,$)|0,n=n+Math.imul(_,Z)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(k,Z)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(b,re)|0,s=s+Math.imul(b,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,s=s+Math.imul(m,ue)|0;var ke=(u+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;u=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,G),i=(i=Math.imul(B,H))+Math.imul(F,G)|0,s=Math.imul(F,H),n=n+Math.imul(D,K)|0,i=(i=i+Math.imul(D,z)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,z)|0,n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(x,V)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,$)|0)+Math.imul(P,Q)|0,s=s+Math.imul(P,$)|0,n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(R,Z)|0,s=s+Math.imul(R,ee)|0,n=n+Math.imul(_,re)|0,i=(i=i+Math.imul(_,ne)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(A,se)|0,i=(i=i+Math.imul(A,oe)|0)+Math.imul(b,se)|0,s=s+Math.imul(b,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(w,ce)|0,s=s+Math.imul(w,ue)|0,n=n+Math.imul(p,he)|0,i=(i=i+Math.imul(p,de)|0)+Math.imul(m,he)|0,s=s+Math.imul(m,de)|0;var Te=(u+(n=n+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(d,pe)|0))<<13)|0;u=((s=s+Math.imul(d,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,K),i=(i=Math.imul(B,z))+Math.imul(F,K)|0,s=Math.imul(F,z),n=n+Math.imul(D,V)|0,i=(i=i+Math.imul(D,J)|0)+Math.imul(U,V)|0,s=s+Math.imul(U,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,$)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,$)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(P,Z)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(R,re)|0,s=s+Math.imul(R,ne)|0,n=n+Math.imul(_,se)|0,i=(i=i+Math.imul(_,oe)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,oe)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,ue)|0)+Math.imul(b,ce)|0,s=s+Math.imul(b,ue)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(w,he)|0,s=s+Math.imul(w,de)|0;var Ie=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((s=s+Math.imul(m,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,V),i=(i=Math.imul(B,J))+Math.imul(F,V)|0,s=Math.imul(F,J),n=n+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,$)|0)+Math.imul(U,Q)|0,s=s+Math.imul(U,$)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(x,Z)|0,s=s+Math.imul(x,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(R,se)|0,s=s+Math.imul(R,oe)|0,n=n+Math.imul(_,ce)|0,i=(i=i+Math.imul(_,ue)|0)+Math.imul(k,ce)|0,s=s+Math.imul(k,ue)|0,n=n+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(b,he)|0,s=s+Math.imul(b,de)|0;var Re=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((s=s+Math.imul(w,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,Q),i=(i=Math.imul(B,$))+Math.imul(F,Q)|0,s=Math.imul(F,$),n=n+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(U,Z)|0,s=s+Math.imul(U,ee)|0,n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(x,re)|0,s=s+Math.imul(x,ne)|0,n=n+Math.imul(N,se)|0,i=(i=i+Math.imul(N,oe)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,oe)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,ue)|0)+Math.imul(R,ce)|0,s=s+Math.imul(R,ue)|0,n=n+Math.imul(_,he)|0,i=(i=i+Math.imul(_,de)|0)+Math.imul(k,he)|0,s=s+Math.imul(k,de)|0;var Se=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((s=s+Math.imul(b,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(B,Z),i=(i=Math.imul(B,ee))+Math.imul(F,Z)|0,s=Math.imul(F,ee),n=n+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ne)|0)+Math.imul(U,re)|0,s=s+Math.imul(U,ne)|0,n=n+Math.imul(O,se)|0,i=(i=i+Math.imul(O,oe)|0)+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,n=n+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,ue)|0)+Math.imul(P,ce)|0,s=s+Math.imul(P,ue)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(R,he)|0,s=s+Math.imul(R,de)|0;var Ne=(u+(n=n+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,me)|0)+Math.imul(k,pe)|0))<<13)|0;u=((s=s+Math.imul(k,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(B,re),i=(i=Math.imul(B,ne))+Math.imul(F,re)|0,s=Math.imul(F,ne),n=n+Math.imul(D,se)|0,i=(i=i+Math.imul(D,oe)|0)+Math.imul(U,se)|0,s=s+Math.imul(U,oe)|0,n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(x,ce)|0,s=s+Math.imul(x,ue)|0,n=n+Math.imul(N,he)|0,i=(i=i+Math.imul(N,de)|0)+Math.imul(P,he)|0,s=s+Math.imul(P,de)|0;var Pe=(u+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((s=s+Math.imul(R,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,se),i=(i=Math.imul(B,oe))+Math.imul(F,se)|0,s=Math.imul(F,oe),n=n+Math.imul(D,ce)|0,i=(i=i+Math.imul(D,ue)|0)+Math.imul(U,ce)|0,s=s+Math.imul(U,ue)|0,n=n+Math.imul(O,he)|0,i=(i=i+Math.imul(O,de)|0)+Math.imul(x,he)|0,s=s+Math.imul(x,de)|0;var Ce=(u+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((s=s+Math.imul(P,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,ce),i=(i=Math.imul(B,ue))+Math.imul(F,ce)|0,s=Math.imul(F,ue),n=n+Math.imul(D,he)|0,i=(i=i+Math.imul(D,de)|0)+Math.imul(U,he)|0,s=s+Math.imul(U,de)|0;var Oe=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((s=s+Math.imul(x,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,he),i=(i=Math.imul(B,de))+Math.imul(F,he)|0,s=Math.imul(F,de);var xe=(u+(n=n+Math.imul(D,pe)|0)|0)+((8191&(i=(i=i+Math.imul(D,me)|0)+Math.imul(U,pe)|0))<<13)|0;u=((s=s+Math.imul(U,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863;var Me=(u+(n=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return u=((s=Math.imul(F,me))+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ge,c[1]=ye,c[2]=we,c[3]=ve,c[4]=Ae,c[5]=be,c[6]=Ee,c[7]=_e,c[8]=ke,c[9]=Te,c[10]=Ie,c[11]=Re,c[12]=Se,c[13]=Ne,c[14]=Pe,c[15]=Ce,c[16]=Oe,c[17]=xe,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),u=Math.max(0,s-e.length+1);u<=c;u++){var l=s-u,h=(0|e.words[l])*(0|t.words[u]),d=67108863&h;a=67108863&(d=d+a|0),i+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}Math.imul||(m=p),i.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):y(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),y(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&n);n>>=26,n+=s/67108864|0,n+=o>>>26,this.words[i]=67108863&o}return 0!==n&&(this.words[i]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var s=r.sqr();n<t.length;n++,s=s.sqr())0!==t[n]&&(r=r.mul(s));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,s=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=n;if(i-=o,i=Math.max(0,i),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-s|h>>>s,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,s,o=e.length+n;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+n])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&s}for(;i<this.length-n;i++)a=(s=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),s=e,o=0|s.words[s.length-1];0!==(r=26-this._countBits(o))&&(s=s.ushln(r),n.iushln(r),o=0|s.words[s.length-1]);var a,c=n.length-s.length;if("mod"!==t){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|n.words[s.length+h])+(0|n.words[s.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(s,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(s,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(s=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:s,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(s=a.div.neg()),{div:s,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var s,o,a},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(n*i+(0|this.words[s]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*n;this.words[i]=s/e|0,n=s%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new i(1),o=new i(0),a=new i(0),c=new i(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),h=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(l),o.isub(h)),s.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a),o.isub(c)):(n.isub(t),a.isub(s),c.isub(o))}return{a:a,b:c,gcd:n.iushln(u)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s,o=new i(1),a=new i(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,d=1;0===(n.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(n.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(s=0===t.cmpn(1)?o:a).cmpn(0)<0&&s.iadd(e),s},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var s=i,o=n;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new k(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(A,v),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(E,v),n(_,v),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new b;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return w[e]=t,t},k.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);r(!s.isZero());var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var h=this.pow(l,s),d=this.pow(e,s.addn(1).iushrn(1)),f=this.pow(e,s),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var y=this.pow(h,new i(1).iushln(p-g-1));d=d.redMul(y),h=y.redSqr(),f=f.redMul(h),p=g}return d},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var s=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var h=u>>l&1;s!==r[0]&&(s=this.sqr(s)),0!==h||0!==o?(o<<=1,o|=h,(4===++a||0===n&&0===l)&&(s=this.mul(s,r[o]),a=0,o=0)):a=0}c=26}return s},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new T(e)},n(T,k),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,It)}(ds);var ps=Rt(ds.exports);var ms=ps.BN;const gs=new pn("bignumber/5.8.0"),ys={},ws=9007199254740991;let vs=!1;class As{constructor(e,t){e!==ys&&gs.throwError("cannot call constructor directly; use BigNumber.from",pn.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Es(_s(this).fromTwos(e))}toTwos(e){return Es(_s(this).toTwos(e))}abs(){return"-"===this._hex[0]?As.from(this._hex.substring(1)):this}add(e){return Es(_s(this).add(_s(e)))}sub(e){return Es(_s(this).sub(_s(e)))}div(e){return As.from(e).isZero()&&ks("division-by-zero","div"),Es(_s(this).div(_s(e)))}mul(e){return Es(_s(this).mul(_s(e)))}mod(e){const t=_s(e);return t.isNeg()&&ks("division-by-zero","mod"),Es(_s(this).umod(t))}pow(e){const t=_s(e);return t.isNeg()&&ks("negative-power","pow"),Es(_s(this).pow(t))}and(e){const t=_s(e);return(this.isNegative()||t.isNeg())&&ks("unbound-bitwise-result","and"),Es(_s(this).and(t))}or(e){const t=_s(e);return(this.isNegative()||t.isNeg())&&ks("unbound-bitwise-result","or"),Es(_s(this).or(t))}xor(e){const t=_s(e);return(this.isNegative()||t.isNeg())&&ks("unbound-bitwise-result","xor"),Es(_s(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&ks("negative-width","mask"),Es(_s(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ks("negative-width","shl"),Es(_s(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ks("negative-width","shr"),Es(_s(this).shrn(e))}eq(e){return _s(this).eq(_s(e))}lt(e){return _s(this).lt(_s(e))}lte(e){return _s(this).lte(_s(e))}gt(e){return _s(this).gt(_s(e))}gte(e){return _s(this).gte(_s(e))}isNegative(){return"-"===this._hex[0]}isZero(){return _s(this).isZero()}toNumber(){try{return _s(this).toNumber()}catch(e){ks("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return gs.throwError("this platform does not support BigInt",pn.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?vs||(vs=!0,gs.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?gs.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",pn.errors.UNEXPECTED_ARGUMENT,{}):gs.throwError("BigNumber.toString does not accept parameters",pn.errors.UNEXPECTED_ARGUMENT,{})),_s(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof As)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new As(ys,bs(e)):e.match(/^-?[0-9]+$/)?new As(ys,bs(new ms(e))):gs.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&ks("underflow","BigNumber.from",e),(e>=ws||e<=-ws)&&ks("overflow","BigNumber.from",e),As.from(String(e));const t=e;if("bigint"==typeof t)return As.from(t.toString());if(An(t))return As.from(Rn(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return As.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Tn(e)||"-"===e[0]&&Tn(e.substring(1))))return As.from(e)}return gs.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function bs(e){if("string"!=typeof e)return bs(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&gs.throwArgumentError("invalid hex","value",e),"0x00"===(e=bs(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Es(e){return As.from(bs(e))}function _s(e){const t=As.from(e).toHexString();return"-"===t[0]?new ms("-"+t.substring(3),16):new ms(t.substring(2),16)}function ks(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),gs.throwError(e,pn.errors.NUMERIC_FAULT,n)}var Ts=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Is=new pn("properties/5.8.0");function Rs(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Ss(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Ns(e){return Ts(this,void 0,void 0,function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})})}function Ps(e,t){e&&"object"==typeof e||Is.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||Is.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function Cs(e){const t={};for(const r in e)t[r]=e[r];return t}const Os={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function xs(e){if(null==e||Os[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!xs(n))return!1}return!0}return Is.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Ms(e){if(xs(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>Ds(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&Rs(t,r,Ds(n))}return t}return Is.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Ds(e){return Ms(e)}class Us{constructor(e){for(const t in e)this[t]=Ds(e[t])}}const Ls="abi/5.8.0",Bs=new pn(Ls),Fs={};let qs={calldata:!0,memory:!0,storage:!0},Gs={calldata:!0,memory:!0};function Hs(e,t){if("bytes"===e||"string"===e){if(qs[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Gs[t])return!0;return(qs[t]||"payable"===t)&&Bs.throwArgumentError("invalid modifier","name",t),!1}function js(e,t){for(let r in t)Rs(e,r,t[r])}const Ks=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),zs=new RegExp(/^(.*)\[([0-9]*)\]$/);class Ws{constructor(e,t){e!==Fs&&Bs.throwError("use fromString",pn.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),js(this,t);let r=this.type.match(zs);js(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Ws.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Ks.sighash),Ks[e]||Bs.throwArgumentError("invalid format type","format",e),e===Ks.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Ks.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===Ks.full?", ":",")+")"):t+=this.type,e!==Ks.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Ks.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Ws.fromString(e,t):Ws.fromObject(e)}static fromObject(e){return Ws.isParamType(e)?e:new Ws(Fs,{name:e.name||null,type:Vs(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Ws.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){Bs.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},o=s;for(let r=0;r<e.length;r++){let s=e[r];switch(s){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=Vs(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),Hs(o.type,o.name)&&(o.name=""),o.type=Vs(o.type);let e=o;o=o.parent,o||n(r),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),Hs(o.type,o.name)&&(o.name=""),o.type=Vs(o.type);let a=i(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=Vs(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):Hs(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=s,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=s,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=s,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=s,delete o.state.allowArray):o.state.readArray?o.type+=s:n(r)}}return o.parent&&Bs.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===o.name?(t||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):Hs(o.type,o.name)&&(o.name=""),s.type=Vs(s.type),s}(e,!!t),Ws.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Vs(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const Js=new pn(Ls);class Ys{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){Js.throwArgumentError(e,this.localName,t)}}class Qs{constructor(e){Rs(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Pn(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(En(e._data))}writeBytes(e){let t=bn(e);const r=t.length%this.wordSize;return r&&(t=En([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=bn(As.from(e));return t.length>this.wordSize&&Js.throwError("value out-of-bounds",pn.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=En([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class $s{constructor(e,t,r,n){Rs(this,"_data",bn(e)),Rs(this,"wordSize",t||32),Rs(this,"_coerceFunc",r),Rs(this,"allowLoose",n),this._offset=0}get data(){return Rn(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):$s.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:Js.throwError("data out-of-bounds",pn.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new $s(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return As.from(this.readBytes(this.wordSize))}}const Xs=new pn("rlp/5.8.0");function Zs(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function eo(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function to(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(to(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=Zs(t.length);return r.unshift(247+r.length),r.concat(t)}wn(e)||Xs.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(bn(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Zs(t.length);return r.unshift(183+r.length),r.concat(t)}function ro(e){return Rn(to(e))}function no(e,t,r,n){const i=[];for(;r<t+1+n;){const s=io(e,r);i.push(s.result),(r+=s.consumed)>t+1+n&&Xs.throwError("child data too short",pn.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function io(e,t){if(0===e.length&&Xs.throwError("data too short",pn.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&Xs.throwError("data short segment too short",pn.errors.BUFFER_OVERRUN,{});const n=eo(e,t+1,r);return t+1+r+n>e.length&&Xs.throwError("data long segment too short",pn.errors.BUFFER_OVERRUN,{}),no(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&Xs.throwError("data array too short",pn.errors.BUFFER_OVERRUN,{}),no(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&Xs.throwError("data array too short",pn.errors.BUFFER_OVERRUN,{});const n=eo(e,t+1,r);t+1+r+n>e.length&&Xs.throwError("data array too short",pn.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:Rn(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&Xs.throwError("data too short",pn.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:Rn(e.slice(t+1,t+1+r))}}return{consumed:1,result:Rn(e[t])}}function so(e){const t=bn(e),r=io(t,0);return r.consumed!==t.length&&Xs.throwArgumentError("invalid rlp data","data",e),r.result}const oo=new pn("address/5.8.0");function ao(e){Tn(e,20)||oo.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=bn(Ln(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const co={};for(let e=0;e<10;e++)co[String(e)]=String(e);for(let e=0;e<26;e++)co[String.fromCharCode(65+e)]=String(10+e);const uo=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function lo(e){let t=null;if("string"!=typeof e&&oo.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=ao(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&oo.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>co[e]).join("");for(;t.length>=uo;){let e=t.substring(0,uo);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&oo.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new ms(r,36).toString(16);t.length<40;)t="0"+t;t=ao("0x"+t)}else oo.throwArgumentError("invalid address","address",e);var r;return t}class ho extends Ys{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=lo(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return lo(xn(e.readValue().toHexString(),20))}}class fo extends Ys{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const po=new pn(Ls);function mo(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||po.throwError("cannot encode object for signature with missing names",pn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&po.throwError("cannot encode object for signature with duplicate names",pn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else po.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&po.throwArgumentError("types/value length mismatch","tuple",r);let i=new Qs(e.wordSize),s=new Qs(e.wordSize),o=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();o.push(e=>{n(e+t)})}else e.encode(i,r)}),o.forEach(e=>{e(i.length)});let a=e.appendWriter(i);return a+=e.appendWriter(s),a}function go(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let i=null;if(t.dynamic){let r=e.readValue(),s=n.subReader(r.toNumber());try{i=t.decode(s)}catch(e){if(e.code===pn.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===pn.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)});const i=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const s=r[t];s instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw s}}):r[n]=s});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class yo extends Ys{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),po.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return mo(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&po.throwError("insufficient data length",pn.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new fo(this.coder));return e.coerce(this.name,go(e,r))}}class wo extends Ys{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class vo extends Ys{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=bn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Ao extends vo{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Rn(super.decode(e)))}}class bo extends Ys{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=bn(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,Rn(e.readBytes(this.size)))}}class Eo extends Ys{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const _o=As.from(-1),ko=As.from(0),To=As.from(1),Io=As.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ro extends Ys{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=As.from(t),n=Io.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(To).mul(_o)))&&this._throwError("value out-of-bounds",t)}else(r.lt(ko)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const So=new pn("strings/5.8.0");var No,Po;function Co(e,t,r,n,i){if(e===Po.BAD_PREFIX||e===Po.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Po.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(No||(No={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Po||(Po={}));const Oo=Object.freeze({error:function(e,t,r,n,i){return So.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Co,replace:function(e,t,r,n,i){return e===Po.OVERLONG?(n.push(i),0):(n.push(65533),Co(e,t,r))}});function xo(e,t){null==t&&(t=Oo.error),e=bn(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(!(i>>7)){r.push(i);continue}let s=null,o=null;if(192==(224&i))s=1,o=127;else if(224==(240&i))s=2,o=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?Po.UNEXPECTED_CONTINUE:Po.BAD_PREFIX,n-1,e,r);continue}s=3,o=65535}if(n-1+s>=e.length){n+=t(Po.OVERRUN,n-1,e,r);continue}let a=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[n];if(128!=(192&i)){n+=t(Po.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=t(Po.OUT_OF_RANGE,n-1-s,e,r,a):a>=55296&&a<=57343?n+=t(Po.UTF16_SURROGATE,n-1-s,e,r,a):a<=o?n+=t(Po.OVERLONG,n-1-s,e,r,a):r.push(a))}return r}function Mo(e,t=No.current){t!=No.current&&(So.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return bn(r)}function Do(e,t){return xo(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}class Uo extends vo{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Mo(t))}decode(e){return Do(super.decode(e))}}class Lo extends Ys{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)});super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))}),Object.freeze(e)}encode(e,t){return mo(e,this.coders,t)}decode(e){return e.coerce(this.name,go(e,this.coders))}}const Bo=new pn(Ls),Fo=new RegExp(/^bytes([0-9]*)$/),qo=new RegExp(/^(u?int)([0-9]*)$/);class Go{constructor(e){Rs(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new ho(e.name);case"bool":return new wo(e.name);case"string":return new Uo(e.name);case"bytes":return new Ao(e.name);case"array":return new yo(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Lo((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new Eo(e.name)}let t=e.type.match(qo);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&Bo.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Ro(r/8,"int"===t[1],e.name)}if(t=e.type.match(Fo),t){let r=parseInt(t[1]);return(0===r||r>32)&&Bo.throwArgumentError("invalid bytes length","param",e),new bo(r,e.name)}return Bo.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new $s(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Qs(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(Ws.from(e)));return new Lo(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&Bo.throwError("types/values length mismatch",pn.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(Ws.from(e))),n=new Lo(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map(e=>this._getCoder(Ws.from(e)));return new Lo(n,"_").decode(this._getReader(bn(t),r))}}const Ho=new Go;function jo(e){return Ln(Mo(e))}const Ko="hash/5.8.0";function zo(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return bn(t)}function Wo(e){e=bn(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Vo(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)})};return i(e,t),r}function Jo(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let o=r(),a=t;t+=o;let c=0,u=0;function l(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const h=Math.pow(2,31),d=h>>>1,f=d>>1,p=h-1;let m=0;for(let e=0;e<31;e++)m=m<<1|l();let g=[],y=0,w=h;for(;;){let e=Math.floor(((m-y+1)*i-1)/w),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;g.push(t);let o=y+Math.floor(w*s[t]/i),a=y+Math.floor(w*s[t+1]/i)-1;for(;0==((o^a)&d);)m=m<<1&p|l(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)m=m&d|m<<1&p>>>1|l(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,w=1+a-o}let v=n-4;return g.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(e))}function Yo(e){return 1&e?~e>>1:e>>1}function Qo(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function $o(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=Yo(t());return r}function Xo(e,t){let r=Qo(e(),e),n=e(),i=Qo(n,e),s=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<s[e];t++)r.push(i[e]+t);return t?r.map(e=>t[e]):r}function Zo(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let i=0;i<t;i++)$o(e,r).forEach((e,t)=>n[t].push(e));return n}function ea(e,t){let r=1+t(),n=t(),i=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Vo(Zo(i.length,1+e,t).map((e,t)=>{const s=e[0],o=e.slice(1);return Array(i[t]).fill(void 0).map((e,t)=>{let i=t*n;return[s+t*r,o.map(e=>e+i)]})}))}function ta(e,t){return Zo(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const ra=Jo(zo("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),na=new Set(Xo(ra)),ia=new Set(Xo(ra)),sa=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(ea(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(ta(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Vo(t))}(ra),oa=function(e){let t=Xo(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let i=Xo(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let i=e(),s=i%3;i=i/3|0;let o=!!(1&i);return i>>=1,{branches:n,valid:s,fe0f:o,save:1==i,check:2==i}}()}(ra);function aa(e){return function(e,t=No.current){return xo(Mo(e,t))}(e)}function ca(e){return e.filter(e=>65039!=e)}function ua(e){for(let t of e.split(".")){let e=aa(t);try{for(let t=e.lastIndexOf(95)-1;t>=0;t--)if(95!==e[t])throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&45===e[2]&&45===e[3])throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function la(e){return ua(function(e,t){let r=aa(e).reverse(),n=[];for(;r.length;){let e=ha(r);if(e){n.push(...t(e));continue}let i=r.pop();if(na.has(i)){n.push(i);continue}if(ia.has(i))continue;let s=sa[i];if(!s)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...s)}return ua(function(e){return e.normalize("NFC")}(String.fromCodePoint(...n)))}(e,ca))}function ha(e,t){var r;let n,i,s=oa,o=[],a=e.length;for(;a;){let t=e[--a];if(s=null===(r=s.branches.find(e=>e.set.has(t)))||void 0===r?void 0:r.node,!s)break;if(s.save)i=t;else if(s.check&&t===i)break;o.push(t),s.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),s.valid&&(n=o.slice(),2==s.valid&&n.splice(1,1),e.length=a)}return n}const da=new pn(Ko),fa=new Uint8Array(32);function pa(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function ma(e){const t=Mo(la(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++){46===t[e]&&(r.push(pa(t.slice(n,e))),n=e+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(pa(t.slice(n))),r}function ga(e){"string"!=typeof e&&da.throwArgumentError("invalid ENS name; not a string","name",e);let t=fa;const r=ma(e);for(;r.length;)t=Ln(En([t,Ln(r.pop())]));return Rn(t)}function ya(e){return Rn(En(ma(e).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}fa.fill(0);const wa="Ethereum Signed Message:\n";function va(e){return"string"==typeof e&&(e=Mo(e)),Ln(En([Mo(wa),Mo(String(e.length)),e]))}var Aa=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const ba=new pn(Ko),Ea=new Uint8Array(32);Ea.fill(0);const _a=As.from(-1),ka=As.from(0),Ta=As.from(1),Ia=As.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Ra=xn(Ta.toHexString(),32),Sa=xn(ka.toHexString(),32),Na={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Pa=["name","version","chainId","verifyingContract","salt"];function Ca(e){return function(t){return"string"!=typeof t&&ba.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Oa={name:Ca("name"),version:Ca("version"),chainId:function(e){try{return As.from(e).toString()}catch(e){}return ba.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return lo(e).toLowerCase()}catch(e){}return ba.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=bn(e);if(32!==t.length)throw new Error("bad length");return Rn(t)}catch(e){}return ba.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function xa(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&ba.throwArgumentError("invalid numeric width","type",e);const i=Ia.mask(r?n-1:n),s=r?i.add(Ta).mul(_a):ka;return function(t){const r=As.from(t);return(r.lt(s)||r.gt(i))&&ba.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),xn(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&ba.throwArgumentError("invalid bytes width","type",e),function(t){return bn(t).length!==r&&ba.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=bn(e),r=t.length%32;return r?Pn([t,Ea.slice(r)]):Rn(t)}(t)}}}switch(e){case"address":return function(e){return xn(lo(e),32)};case"bool":return function(e){return e?Ra:Sa};case"bytes":return function(e){return Ln(e)};case"string":return function(e){return jo(e)}}return null}function Ma(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class Da{constructor(e){Rs(this,"types",Object.freeze(Ds(e))),Rs(this,"_encoderCache",{}),Rs(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const i={};e[n].forEach(s=>{i[s.name]&&ba.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e),i[s.name]=!0;const o=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&ba.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e);xa(o)||(r[o]||ba.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",e),r[o].push(n),t[n][o]=!0)})}const i=Object.keys(r).filter(e=>0===r[e].length);0===i.length?ba.throwArgumentError("missing primary type","types",e):i.length>1&&ba.throwArgumentError(`ambiguous primary types or unused types: ${i.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),Rs(this,"primaryType",i[0]),function i(s,o){o[s]&&ba.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),o[s]=!0,Object.keys(t[s]).forEach(e=>{r[e]&&(i(e,o),Object.keys(o).forEach(t=>{n[t][e]=!0}))}),delete o[s]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=Ma(t,e[t])+r.map(t=>Ma(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=xa(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&ba.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(Ln)),Ln(Pn(i))}}const r=this.types[e];if(r){const t=jo(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?Ln(n):n});return n.unshift(t),Pn(n)}}return ba.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||ba.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Ln(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(xa(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&ba.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const i=this.types[e];return i?i.reduce((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e),{}):ba.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Da(e)}static getPrimaryType(e){return Da.from(e).primaryType}static hashStruct(e,t,r){return Da.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=Na[r];n||ba.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>Pa.indexOf(e.name)-Pa.indexOf(t.name)),Da.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Pn(["0x1901",Da.hashDomain(e),Da.from(t).hash(r)])}static hash(e,t,r){return Ln(Da.encode(e,t,r))}static resolveNames(e,t,r,n){return Aa(this,void 0,void 0,function*(){e=Cs(e);const i={};e.verifyingContract&&!Tn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=Da.from(t);s.visit(r,(e,t)=>("address"!==e||Tn(t,20)||(i[t]="0x"),t));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=s.visit(r,(e,t)=>"address"===e&&i[t]?i[t]:t),{domain:e,value:r}})}static getPayload(e,t,r){Da.hashDomain(e);const n={},i=[];Pa.forEach(t=>{const r=e[t];null!=r&&(n[t]=Oa[t](r),i.push({name:t,type:Na[t]}))});const s=Da.from(t),o=Cs(t);return o.EIP712Domain?ba.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return Rn(bn(t));if(e.match(/^u?int/))return As.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&ba.throwArgumentError("invalid string","value",t),t}return ba.throwArgumentError("unsupported type","type",e)})}}}var Ua=Object.freeze({__proto__:null,_TypedDataEncoder:Da,dnsEncode:ya,hashMessage:va,id:jo,messagePrefix:wa,namehash:ga}),La=Object.freeze({__proto__:null,AbiCoder:Go,FormatTypes:Ks,ParamType:Ws,defaultAbiCoder:Ho});var Ba=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Fa=new pn("abstract-provider/5.8.0");class qa extends Us{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Ga{constructor(){Fa.checkAbstract(new.target,Ga),Rs(this,"_isProvider",!0)}getFeeData(){return Ba(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ns({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)});let r=null,n=null,i=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,i=As.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var Ha=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const ja=new pn("abstract-signer/5.8.0"),Ka=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],za=[pn.errors.INSUFFICIENT_FUNDS,pn.errors.NONCE_EXPIRED,pn.errors.REPLACEMENT_UNDERPRICED];class Wa{constructor(){ja.checkAbstract(new.target,Wa),Rs(this,"_isSigner",!0)}getBalance(e){return Ha(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ha(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ha(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ns(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Ha(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Ns(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Ha(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Ha(this,void 0,void 0,function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ha(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ha(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ha(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===Ka.indexOf(t)&&ja.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=Cs(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&ja.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return Ha(this,void 0,void 0,function*(){const t=yield Ns(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>Ha(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&ja.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||ja.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):ja.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&ja.throwError("network does not support EIP-1559",pn.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):ja.throwError("failed to get consistent fee data",pn.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(za.indexOf(e.code)>=0)throw e;return ja.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pn.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&ja.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield Ns(t)})}_checkProvider(e){this.provider||ja.throwError("missing provider",pn.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}var Va={},Ja={},Ya=Qa;function Qa(e,t){if(!e)throw new Error(t||"Assertion failed")}Qa.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var $a={exports:{}};"function"==typeof Object.create?$a.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$a.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var Xa=$a.exports,Za=Ya,ec=Xa;function tc(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function rc(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function nc(e){return 1===e.length?"0"+e:e}function ic(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}Ja.inherits=ec,Ja.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):tc(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},Ja.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=nc(e[r].toString(16));return t},Ja.htonl=rc,Ja.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=rc(i)),r+=ic(i.toString(16))}return r},Ja.zero2=nc,Ja.zero8=ic,Ja.join32=function(e,t,r,n){var i=r-t;Za(i%4==0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=c>>>0}return s},Ja.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},Ja.rotr32=function(e,t){return e>>>t|e<<32-t},Ja.rotl32=function(e,t){return e<<t|e>>>32-t},Ja.sum32=function(e,t){return e+t>>>0},Ja.sum32_3=function(e,t,r){return e+t+r>>>0},Ja.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},Ja.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},Ja.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},Ja.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},Ja.sum64_lo=function(e,t,r,n){return t+n>>>0},Ja.sum64_4_hi=function(e,t,r,n,i,s,o,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+s>>>0)<s?1:0,e+r+i+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},Ja.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},Ja.sum64_5_hi=function(e,t,r,n,i,s,o,a,c,u){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+s>>>0)<s?1:0,l+=(h=h+a>>>0)<a?1:0,e+r+i+o+c+(l+=(h=h+u>>>0)<u?1:0)>>>0},Ja.sum64_5_lo=function(e,t,r,n,i,s,o,a,c,u){return t+n+s+a+u>>>0},Ja.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},Ja.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},Ja.shr64_hi=function(e,t,r){return e>>>r},Ja.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var sc={},oc=Ja,ac=Ya;function cc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}sc.BlockHash=cc,cc.prototype.update=function(e,t){if(e=oc.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=oc.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},cc.prototype.digest=function(e){return this.update(this._pad()),ac(null===this.pending),this._digest(e)},cc.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var uc={},lc={},hc=Ja.rotr32;function dc(e,t,r){return e&t^~e&r}function fc(e,t,r){return e&t^e&r^t&r}function pc(e,t,r){return e^t^r}lc.ft_1=function(e,t,r,n){return 0===e?dc(t,r,n):1===e||3===e?pc(t,r,n):2===e?fc(t,r,n):void 0},lc.ch32=dc,lc.maj32=fc,lc.p32=pc,lc.s0_256=function(e){return hc(e,2)^hc(e,13)^hc(e,22)},lc.s1_256=function(e){return hc(e,6)^hc(e,11)^hc(e,25)},lc.g0_256=function(e){return hc(e,7)^hc(e,18)^e>>>3},lc.g1_256=function(e){return hc(e,17)^hc(e,19)^e>>>10};var mc=Ja,gc=sc,yc=lc,wc=mc.rotl32,vc=mc.sum32,Ac=mc.sum32_5,bc=yc.ft_1,Ec=gc.BlockHash,_c=[1518500249,1859775393,2400959708,3395469782];function kc(){if(!(this instanceof kc))return new kc;Ec.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}mc.inherits(kc,Ec);var Tc=kc;kc.blockSize=512,kc.outSize=160,kc.hmacStrength=80,kc.padLength=64,kc.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=wc(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),l=Ac(wc(i,5),bc(u,s,o,a),c,r[n],_c[u]);c=a,a=o,o=wc(s,30),s=i,i=l}this.h[0]=vc(this.h[0],i),this.h[1]=vc(this.h[1],s),this.h[2]=vc(this.h[2],o),this.h[3]=vc(this.h[3],a),this.h[4]=vc(this.h[4],c)},kc.prototype._digest=function(e){return"hex"===e?mc.toHex32(this.h,"big"):mc.split32(this.h,"big")};var Ic=Ja,Rc=sc,Sc=lc,Nc=Ya,Pc=Ic.sum32,Cc=Ic.sum32_4,Oc=Ic.sum32_5,xc=Sc.ch32,Mc=Sc.maj32,Dc=Sc.s0_256,Uc=Sc.s1_256,Lc=Sc.g0_256,Bc=Sc.g1_256,Fc=Rc.BlockHash,qc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Gc(){if(!(this instanceof Gc))return new Gc;Fc.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=qc,this.W=new Array(64)}Ic.inherits(Gc,Fc);var Hc=Gc;Gc.blockSize=512,Gc.outSize=256,Gc.hmacStrength=192,Gc.padLength=64,Gc.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Cc(Bc(r[n-2]),r[n-7],Lc(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],l=this.h[6],h=this.h[7];for(Nc(this.k.length===r.length),n=0;n<r.length;n++){var d=Oc(h,Uc(c),xc(c,u,l),this.k[n],r[n]),f=Pc(Dc(i),Mc(i,s,o));h=l,l=u,u=c,c=Pc(a,d),a=o,o=s,s=i,i=Pc(d,f)}this.h[0]=Pc(this.h[0],i),this.h[1]=Pc(this.h[1],s),this.h[2]=Pc(this.h[2],o),this.h[3]=Pc(this.h[3],a),this.h[4]=Pc(this.h[4],c),this.h[5]=Pc(this.h[5],u),this.h[6]=Pc(this.h[6],l),this.h[7]=Pc(this.h[7],h)},Gc.prototype._digest=function(e){return"hex"===e?Ic.toHex32(this.h,"big"):Ic.split32(this.h,"big")};var jc=Ja,Kc=Hc;function zc(){if(!(this instanceof zc))return new zc;Kc.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}jc.inherits(zc,Kc);var Wc=zc;zc.blockSize=512,zc.outSize=224,zc.hmacStrength=192,zc.padLength=64,zc.prototype._digest=function(e){return"hex"===e?jc.toHex32(this.h.slice(0,7),"big"):jc.split32(this.h.slice(0,7),"big")};var Vc=Ja,Jc=sc,Yc=Ya,Qc=Vc.rotr64_hi,$c=Vc.rotr64_lo,Xc=Vc.shr64_hi,Zc=Vc.shr64_lo,eu=Vc.sum64,tu=Vc.sum64_hi,ru=Vc.sum64_lo,nu=Vc.sum64_4_hi,iu=Vc.sum64_4_lo,su=Vc.sum64_5_hi,ou=Vc.sum64_5_lo,au=Jc.BlockHash,cu=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function uu(){if(!(this instanceof uu))return new uu;au.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=cu,this.W=new Array(160)}Vc.inherits(uu,au);var lu=uu;function hu(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function du(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function fu(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function pu(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function mu(e,t){var r=Qc(e,t,28)^Qc(t,e,2)^Qc(t,e,7);return r<0&&(r+=4294967296),r}function gu(e,t){var r=$c(e,t,28)^$c(t,e,2)^$c(t,e,7);return r<0&&(r+=4294967296),r}function yu(e,t){var r=Qc(e,t,14)^Qc(e,t,18)^Qc(t,e,9);return r<0&&(r+=4294967296),r}function wu(e,t){var r=$c(e,t,14)^$c(e,t,18)^$c(t,e,9);return r<0&&(r+=4294967296),r}function vu(e,t){var r=Qc(e,t,1)^Qc(e,t,8)^Xc(e,t,7);return r<0&&(r+=4294967296),r}function Au(e,t){var r=$c(e,t,1)^$c(e,t,8)^Zc(e,t,7);return r<0&&(r+=4294967296),r}function bu(e,t){var r=Qc(e,t,19)^Qc(t,e,29)^Xc(e,t,6);return r<0&&(r+=4294967296),r}function Eu(e,t){var r=$c(e,t,19)^$c(t,e,29)^Zc(e,t,6);return r<0&&(r+=4294967296),r}uu.blockSize=1024,uu.outSize=512,uu.hmacStrength=192,uu.padLength=128,uu.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=bu(r[n-4],r[n-3]),s=Eu(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=vu(r[n-30],r[n-29]),u=Au(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=nu(i,s,o,a,c,u,l,h),r[n+1]=iu(i,s,o,a,c,u,l,h)}},uu.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],l=this.h[7],h=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],w=this.h[15];Yc(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var A=y,b=w,E=yu(h,d),_=wu(h,d),k=hu(h,d,f,p,m),T=du(h,d,f,p,m,g),I=this.k[v],R=this.k[v+1],S=r[v],N=r[v+1],P=su(A,b,E,_,k,T,I,R,S,N),C=ou(A,b,E,_,k,T,I,R,S,N);A=mu(n,i),b=gu(n,i),E=fu(n,i,s,o,a),_=pu(n,i,s,o,a,c);var O=tu(A,b,E,_),x=ru(A,b,E,_);y=m,w=g,m=f,g=p,f=h,p=d,h=tu(u,l,P,C),d=ru(l,l,P,C),u=a,l=c,a=s,c=o,s=n,o=i,n=tu(P,C,O,x),i=ru(P,C,O,x)}eu(this.h,0,n,i),eu(this.h,2,s,o),eu(this.h,4,a,c),eu(this.h,6,u,l),eu(this.h,8,h,d),eu(this.h,10,f,p),eu(this.h,12,m,g),eu(this.h,14,y,w)},uu.prototype._digest=function(e){return"hex"===e?Vc.toHex32(this.h,"big"):Vc.split32(this.h,"big")};var _u=Ja,ku=lu;function Tu(){if(!(this instanceof Tu))return new Tu;ku.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}_u.inherits(Tu,ku);var Iu=Tu;Tu.blockSize=1024,Tu.outSize=384,Tu.hmacStrength=192,Tu.padLength=128,Tu.prototype._digest=function(e){return"hex"===e?_u.toHex32(this.h.slice(0,12),"big"):_u.split32(this.h.slice(0,12),"big")},uc.sha1=Tc,uc.sha224=Wc,uc.sha256=Hc,uc.sha384=Iu,uc.sha512=lu;var Ru={},Su=Ja,Nu=sc,Pu=Su.rotl32,Cu=Su.sum32,Ou=Su.sum32_3,xu=Su.sum32_4,Mu=Nu.BlockHash;function Du(){if(!(this instanceof Du))return new Du;Mu.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Uu(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Lu(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Bu(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Su.inherits(Du,Mu),Ru.ripemd160=Du,Du.blockSize=512,Du.outSize=160,Du.hmacStrength=192,Du.padLength=64,Du.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],a=r,c=n,u=i,l=s,h=o,d=0;d<80;d++){var f=Cu(Pu(xu(r,Uu(d,n,i,s),e[Fu[d]+t],Lu(d)),Gu[d]),o);r=o,o=s,s=Pu(i,10),i=n,n=f,f=Cu(Pu(xu(a,Uu(79-d,c,u,l),e[qu[d]+t],Bu(d)),Hu[d]),h),a=h,h=l,l=Pu(u,10),u=c,c=f}f=Ou(this.h[1],i,l),this.h[1]=Ou(this.h[2],s,h),this.h[2]=Ou(this.h[3],o,a),this.h[3]=Ou(this.h[4],r,c),this.h[4]=Ou(this.h[0],n,u),this.h[0]=f},Du.prototype._digest=function(e){return"hex"===e?Su.toHex32(this.h,"little"):Su.split32(this.h,"little")};var Fu=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],qu=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Gu=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Hu=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],ju=Ja,Ku=Ya;function zu(e,t,r){if(!(this instanceof zu))return new zu(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(ju.toArray(t,r))}var Wu=zu;zu.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Ku(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},zu.prototype.update=function(e,t){return this.inner.update(e,t),this},zu.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=Ja,t.common=sc,t.sha=uc,t.ripemd=Ru,t.hmac=Wu,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Va);var Vu=Rt(Va);function Ju(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}var Yu=Qu;function Qu(e,t){if(!e)throw new Error(t||"Assertion failed")}Qu.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var $u=Ju(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,o=255&i;s?r.push(s,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}}),Xu=Ju(function(e,t){var r=t;r.assert=Yu,r.toArray=$u.toArray,r.zero2=$u.zero2,r.toHex=$u.toHex,r.encode=$u.encode,r.getNAF=function(e,t,r){var n,i=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<i.length;n+=1)i[n]=0;var s=1<<t+1,o=e.clone();for(n=0;n<i.length;n++){var a,c=o.andln(s-1);o.isOdd()?(a=c>(s>>1)-1?(s>>1)-c:c,o.isubn(a)):a=0,i[n]=a,o.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var o,a,c=e.andln(3)+i&3,u=t.andln(3)+s&3;3===c&&(c=-1),3===u&&(u=-1),o=1&c?3!==(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c:0,r[0].push(o),a=1&u?3!==(n=t.andln(7)+s&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*i===o+1&&(i=1-i),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new ps(e,"hex","le")}}),Zu=Xu.getNAF,el=Xu.getJSF,tl=Xu.assert;function rl(e,t){this.type=e,this.p=new ps(t.p,16),this.red=t.prime?ps.red(t.prime):ps.mont(this.p),this.zero=new ps(0).toRed(this.red),this.one=new ps(1).toRed(this.red),this.two=new ps(2).toRed(this.red),this.n=t.n&&new ps(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var nl=rl;function il(e,t){this.curve=e,this.type=t,this.precomputed=null}rl.prototype.point=function(){throw new Error("Not implemented")},rl.prototype.validate=function(){throw new Error("Not implemented")},rl.prototype._fixedNafMul=function(e,t){tl(e.precomputed);var r=e._getDoubles(),n=Zu(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,o,a=[];for(s=0;s<n.length;s+=r.step){o=0;for(var c=s+r.step-1;c>=s;c--)o=(o<<1)+n[c];a.push(o)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(s=0;s<a.length;s++)(o=a[s])===h?l=l.mixedAdd(r.points[s]):o===-h&&(l=l.mixedAdd(r.points[s].neg()));u=u.add(l)}return u.toP()},rl.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=Zu(t,r,this._bitLength),o=this.jpoint(null,null,null),a=s.length-1;a>=0;a--){for(var c=0;a>=0&&0===s[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var u=s[a];tl(0!==u),o="affine"===e.type?u>0?o.mixedAdd(i[u-1>>1]):o.mixedAdd(i[-u-1>>1].neg()):u>0?o.add(i[u-1>>1]):o.add(i[-u-1>>1].neg())}return"affine"===e.type?o.toP():o},rl.prototype._wnafMulAdd=function(e,t,r,n,i){var s,o,a,c=this._wnafT1,u=this._wnafT2,l=this._wnafT3,h=0;for(s=0;s<n;s++){var d=(a=t[s])._getNAFPoints(e);c[s]=d.wnd,u[s]=d.points}for(s=n-1;s>=1;s-=2){var f=s-1,p=s;if(1===c[f]&&1===c[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=el(r[f],r[p]);for(h=Math.max(y[0].length,h),l[f]=new Array(h),l[p]=new Array(h),o=0;o<h;o++){var w=0|y[0][o],v=0|y[1][o];l[f][o]=g[3*(w+1)+(v+1)],l[p][o]=0,u[f]=m}}else l[f]=Zu(r[f],c[f],this._bitLength),l[p]=Zu(r[p],c[p],this._bitLength),h=Math.max(l[f].length,h),h=Math.max(l[p].length,h)}var A=this.jpoint(null,null,null),b=this._wnafT4;for(s=h;s>=0;s--){for(var E=0;s>=0;){var _=!0;for(o=0;o<n;o++)b[o]=0|l[o][s],0!==b[o]&&(_=!1);if(!_)break;E++,s--}if(s>=0&&E++,A=A.dblp(E),s<0)break;for(o=0;o<n;o++){var k=b[o];0!==k&&(k>0?a=u[o][k-1>>1]:k<0&&(a=u[o][-k-1>>1].neg()),A="affine"===a.type?A.mixedAdd(a):A.add(a))}}for(s=0;s<n;s++)u[s]=null;return i?A:A.toP()},rl.BasePoint=il,il.prototype.eq=function(){throw new Error("Not implemented")},il.prototype.validate=function(){return this.curve.validate(this)},rl.prototype.decodePoint=function(e,t){e=Xu.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?tl(e[e.length-1]%2==0):7===e[0]&&tl(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},il.prototype.encodeCompressed=function(e){return this.encode(e,!0)},il.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},il.prototype.encode=function(e,t){return Xu.encode(this._encode(t),e)},il.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},il.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},il.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},il.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},il.prototype._getBeta=function(){return null},il.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var sl=Ju(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),ol=Xu.assert;function al(e){nl.call(this,"short",e),this.a=new ps(e.a,16).toRed(this.red),this.b=new ps(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}sl(al,nl);var cl=al;function ul(e,t,r,n){nl.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new ps(t,16),this.y=new ps(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ll(e,t,r,n){nl.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ps(0)):(this.x=new ps(t,16),this.y=new ps(r,16),this.z=new ps(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}al.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new ps(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new ps(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],ol(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new ps(e.a,16),b:new ps(e.b,16)}}):this._getEndoBasis(r)}}},al.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:ps.mont(e),r=new ps(2).toRed(t).redInvm(),n=r.redNeg(),i=new ps(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},al.prototype._getEndoBasis=function(e){for(var t,r,n,i,s,o,a,c,u,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,d=this.n.clone(),f=new ps(1),p=new ps(0),m=new ps(0),g=new ps(1),y=0;0!==h.cmpn(0);){var w=d.div(h);c=d.sub(w.mul(h)),u=m.sub(w.mul(f));var v=g.sub(w.mul(p));if(!n&&c.cmp(l)<0)t=a.neg(),r=f,n=c.neg(),i=u;else if(n&&2===++y)break;a=c,d=h,h=c,m=f,f=u,g=p,p=v}s=c.neg(),o=u;var A=n.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(A)>=0&&(s=t,o=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:n,b:i},{a:s,b:o}]},al.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),a=s.mul(n.a),c=i.mul(r.b),u=s.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(u).neg()}},al.prototype.pointFromX=function(e,t){(e=new ps(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},al.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},al.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*s]=a,n[2*s+1]=c,i[2*s]=o.k1,i[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,n,i,2*s,r),l=0;l<2*s;l++)n[l]=null,i[l]=null;return u},sl(ul,nl.BasePoint),al.prototype.point=function(e,t,r){return new ul(this,e,t,r)},al.prototype.pointFromJSON=function(e,t){return ul.fromJSON(this,e,t)},ul.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},ul.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},ul.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},ul.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},ul.prototype.isInfinity=function(){return this.inf},ul.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},ul.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},ul.prototype.getX=function(){return this.x.fromRed()},ul.prototype.getY=function(){return this.y.fromRed()},ul.prototype.mul=function(e){return e=new ps(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},ul.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},ul.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},ul.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},ul.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},ul.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},sl(ll,nl.BasePoint),al.prototype.jpoint=function(e,t,r){return new ll(this,e,t,r)},ll.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},ll.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ll.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),h=n.redMul(u),d=c.redSqr().redIAdd(l).redISub(h).redISub(h),f=c.redMul(h.redISub(d)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},ll.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=i.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),l=r.redMul(c),h=a.redSqr().redIAdd(u).redISub(l).redISub(l),d=a.redMul(l.redISub(h)).redISub(i.redMul(u)),f=this.z.redMul(o);return this.curve.jpoint(h,d,f)},ll.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var l=s.redSqr(),h=u.redSqr(),d=h.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(c)),p=s.redMul(h),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(d);var w=u.redMul(a);t+1<e&&(c=c.redMul(d)),s=m,a=w,u=y}return this.curve.jpoint(s,u.redMul(i),a)},ll.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ll.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(l).redISub(d);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},ll.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(s);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},ll.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(o),l=a.redSqr().redISub(u.redAdd(u)),h=u.redISub(l),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(h).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,f,p)},ll.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),l=t.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(a).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(h,d,f)},ll.prototype.mul=function(e,t){return e=new ps(e,t),this.curve._wnafMul(this,e)},ll.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},ll.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ll.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ll.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var hl=Ju(function(e,t){var r=t;r.base=nl,r.short=cl,r.mont=null,r.edwards=null}),dl=Ju(function(e,t){var r,n=t,i=Xu.assert;function s(e){"short"===e.type?this.curve=new hl.short(e):"edwards"===e.type?this.curve=new hl.edwards(e):this.curve=new hl.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Vu.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Vu.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Vu.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Vu.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Vu.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vu.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Vu.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Vu.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function fl(e){if(!(this instanceof fl))return new fl(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=$u.toArray(e.entropy,e.entropyEnc||"hex"),r=$u.toArray(e.nonce,e.nonceEnc||"hex"),n=$u.toArray(e.pers,e.persEnc||"hex");Yu(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var pl=fl;fl.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},fl.prototype._hmac=function(){return new Vu.hmac(this.hash,this.K)},fl.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},fl.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=$u.toArray(e,t),r=$u.toArray(r,n),Yu(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},fl.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=$u.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,$u.encode(s,t)};var ml=Xu.assert;function gl(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var yl=gl;gl.fromPublic=function(e,t,r){return t instanceof gl?t:new gl(e,{pub:t,pubEnc:r})},gl.fromPrivate=function(e,t,r){return t instanceof gl?t:new gl(e,{priv:t,privEnc:r})},gl.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},gl.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},gl.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},gl.prototype._importPrivate=function(e,t){this.priv=new ps(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},gl.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?ml(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||ml(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},gl.prototype.derive=function(e){return e.validate()||ml(e.validate(),"public point not validated"),e.mul(this.priv).getX()},gl.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},gl.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},gl.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var wl=Xu.assert;function vl(e,t){if(e instanceof vl)return e;this._importDER(e,t)||(wl(e.r&&e.s,"Signature without r or s"),this.r=new ps(e.r,16),this.s=new ps(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Al=vl;function bl(){this.place=0}function El(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var i=0,s=0,o=t.place;s<n;s++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function _l(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function kl(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}vl.prototype._importDER=function(e,t){e=Xu.toArray(e,t);var r=new bl;if(48!==e[r.place++])return!1;var n=El(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=El(e,r);if(!1===i)return!1;if(128&e[r.place])return!1;var s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var o=El(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,o+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new ps(s),this.s=new ps(a),this.recoveryParam=null,!0},vl.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=_l(t),r=_l(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];kl(n,t.length),(n=n.concat(t)).push(2),kl(n,r.length);var i=n.concat(r),s=[48];return kl(s,i.length),s=s.concat(i),Xu.encode(s,e)};var Tl=function(){throw new Error("unsupported")},Il=Xu.assert;function Rl(e){if(!(this instanceof Rl))return new Rl(e);"string"==typeof e&&(Il(Object.prototype.hasOwnProperty.call(dl,e),"Unknown curve "+e),e=dl[e]),e instanceof dl.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Sl=Rl;Rl.prototype.keyPair=function(e){return new yl(this,e)},Rl.prototype.keyFromPrivate=function(e,t){return yl.fromPrivate(this,e,t)},Rl.prototype.keyFromPublic=function(e,t){return yl.fromPublic(this,e,t)},Rl.prototype.genKeyPair=function(e){e||(e={});for(var t=new pl({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Tl(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new ps(2));;){var i=new ps(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Rl.prototype._truncateToN=function(e,t,r){var n;if(ps.isBN(e)||"number"==typeof e)n=(e=new ps(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new ps(e,16);else{var i=e.toString();n=i.length+1>>>1,e=new ps(i,16)}"number"!=typeof r&&(r=8*n);var s=r-this.n.bitLength();return s>0&&(e=e.ushrn(s)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Rl.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!ps.isBN(e)){Il("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),Il(e.length>>>0===e.length);for(var i=0;i<e.length;i++)Il((255&e[i])===e[i])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),Il(!e.isNeg(),"Can not sign a negative message");var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),a=e.toArray("be",s);Il(new ps(a).eq(e),"Can not sign message");for(var c=new pl({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new ps(1)),l=0;;l++){var h=n.k?n.k(l):new ps(c.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(u)>=0)){var d=this.g.mul(h);if(!d.isInfinity()){var f=d.getX(),p=f.umod(this.n);if(0!==p.cmpn(0)){var m=h.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(d.getY().isOdd()?1:0)|(0!==f.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new Al({r:p,s:m,recoveryParam:g})}}}}}},Rl.prototype.verify=function(e,t,r,n,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,n);var s=(t=new Al(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),u=c.mul(e).umod(this.n),l=c.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),l)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(u,r.getPublic(),l)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},Rl.prototype.recoverPubKey=function(e,t,r,n){Il((3&r)===r,"The recovery param is more than two bits"),t=new Al(t,n);var i=this.n,s=new ps(e),o=t.r,a=t.s,c=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var l=t.r.invm(i),h=i.sub(s).mul(l).umod(i),d=a.mul(l).umod(i);return this.g.mulAdd(h,o,d)},Rl.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Al(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Nl=Ju(function(e,t){var r=t;r.version="6.6.1",r.utils=Xu,r.rand=function(){throw new Error("unsupported")},r.curve=hl,r.curves=dl,r.ec=Sl,r.eddsa=null}).ec;const Pl=new pn("signing-key/5.8.0");let Cl=null;function Ol(){return Cl||(Cl=new Nl("secp256k1")),Cl}class xl{constructor(e){Rs(this,"curve","secp256k1"),Rs(this,"privateKey",Rn(e)),32!==Sn(this.privateKey)&&Pl.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Ol().keyFromPrivate(bn(this.privateKey));Rs(this,"publicKey","0x"+t.getPublic(!1,"hex")),Rs(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),Rs(this,"_isSigningKey",!0)}_addPoint(e){const t=Ol().keyFromPublic(bn(this.publicKey)),r=Ol().keyFromPublic(bn(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Ol().keyFromPrivate(bn(this.privateKey)),r=bn(e);32!==r.length&&Pl.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return Mn({recoveryParam:n.recoveryParam,r:xn("0x"+n.r.toString(16),32),s:xn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Ol().keyFromPrivate(bn(this.privateKey)),r=Ol().keyFromPublic(bn(Ml(e)));return xn("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function Ml(e,t){const r=bn(e);if(32===r.length){return new xl(r).publicKey}return 33===r.length?"0x"+Ol().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?Rn(r):Pl.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Dl=new pn("transactions/5.8.0");var Ul;function Ll(e){return"0x"===e?null:lo(e)}function Bl(e){return"0x"===e?ko:As.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Ul||(Ul={}));const Fl=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],ql={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Gl(e){return lo(Nn(Ln(Nn(Ml(e),1)),12))}function Hl(e,t){return Gl(function(e,t){const r=Mn(t),n={r:bn(r.r),s:bn(r.s)};return"0x"+Ol().recoverPubKey(bn(e),n,r.recoveryParam).encode("hex",!1)}(bn(e),t))}function jl(e,t){const r=_n(As.from(e).toHexString());return r.length>32&&Dl.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Kl(e,t){return{address:lo(e),storageKeys:(t||[]).map((t,r)=>(32!==Sn(t)&&Dl.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function zl(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&Dl.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),Kl(e[0],e[1])):Kl(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return Kl(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function Wl(e){return zl(e).map(e=>[e.address,e.storageKeys])}function Vl(e,t){if(null!=e.gasPrice){const t=As.from(e.gasPrice),r=As.from(e.maxFeePerGas||0);t.eq(r)||Dl.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[jl(e.chainId||0,"chainId"),jl(e.nonce||0,"nonce"),jl(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),jl(e.maxFeePerGas||0,"maxFeePerGas"),jl(e.gasLimit||0,"gasLimit"),null!=e.to?lo(e.to):"0x",jl(e.value||0,"value"),e.data||"0x",Wl(e.accessList||[])];if(t){const e=Mn(t);r.push(jl(e.recoveryParam,"recoveryParam")),r.push(_n(e.r)),r.push(_n(e.s))}return Pn(["0x02",ro(r)])}function Jl(e,t){const r=[jl(e.chainId||0,"chainId"),jl(e.nonce||0,"nonce"),jl(e.gasPrice||0,"gasPrice"),jl(e.gasLimit||0,"gasLimit"),null!=e.to?lo(e.to):"0x",jl(e.value||0,"value"),e.data||"0x",Wl(e.accessList||[])];if(t){const e=Mn(t);r.push(jl(e.recoveryParam,"recoveryParam")),r.push(_n(e.r)),r.push(_n(e.s))}return Pn(["0x01",ro(r)])}function Yl(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&Dl.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){Ps(e,ql);const r=[];Fl.forEach(function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=bn(Rn(n,i)),t.length&&n.length!==t.length&&n.length>0&&Dl.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=_n(n),n.length>t.maxLength&&Dl.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(Rn(n))});let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&Dl.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!wn(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(Rn(n)),r.push("0x"),r.push("0x")),!t)return ro(r);const i=Mn(t);let s=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),s+=2*n+8,i.v>28&&i.v!==s&&Dl.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==s&&Dl.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(Rn(s)),r.push(_n(bn(i.r))),r.push(_n(bn(i.s))),ro(r)}(e,t);switch(e.type){case 1:return Jl(e,t);case 2:return Vl(e,t)}return Dl.throwError(`unsupported transaction type: ${e.type}`,pn.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function Ql(e,t,r){try{const r=Bl(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){Dl.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=xn(t[1],32),e.s=xn(t[2],32);try{const t=Ln(r(e));e.from=Hl(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function $l(e){const t=bn(e);if(t[0]>127)return function(e){const t=so(e);9!==t.length&&6!==t.length&&Dl.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:Bl(t[0]).toNumber(),gasPrice:Bl(t[1]),gasLimit:Bl(t[2]),to:Ll(t[3]),value:Bl(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=As.from(t[6]).toNumber()}catch(e){return r}if(r.r=xn(t[7],32),r.s=xn(t[8],32),As.from(r.r).isZero()&&As.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(Rn(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const s=Ln(ro(i));try{r.from=Hl(s,{r:Rn(r.r),s:Rn(r.s),recoveryParam:n})}catch(e){}r.hash=Ln(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=so(e.slice(1));8!==t.length&&11!==t.length&&Dl.throwArgumentError("invalid component count for transaction type: 1","payload",Rn(e));const r={type:1,chainId:Bl(t[0]).toNumber(),nonce:Bl(t[1]).toNumber(),gasPrice:Bl(t[2]),gasLimit:Bl(t[3]),to:Ll(t[4]),value:Bl(t[5]),data:t[6],accessList:zl(t[7])};return 8===t.length||(r.hash=Ln(e),Ql(r,t.slice(8),Jl)),r}(t);case 2:return function(e){const t=so(e.slice(1));9!==t.length&&12!==t.length&&Dl.throwArgumentError("invalid component count for transaction type: 2","payload",Rn(e));const r=Bl(t[2]),n=Bl(t[3]),i={type:2,chainId:Bl(t[0]).toNumber(),nonce:Bl(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Bl(t[4]),to:Ll(t[5]),value:Bl(t[6]),data:t[7],accessList:zl(t[8])};return 9===t.length||(i.hash=Ln(e),Ql(i,t.slice(9),Vl)),i}(t)}return Dl.throwError(`unsupported transaction type: ${t[0]}`,pn.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var Xl=Object.freeze({__proto__:null,get TransactionTypes(){return Ul},accessListify:zl,computeAddress:Gl,parse:$l,recoverAddress:Hl,serialize:Yl});class Zl{constructor(e){Rs(this,"alphabet",e),Rs(this,"base",e.length),Rs(this,"_alphabetMap",{}),Rs(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=bn(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return bn(new Uint8Array(t.reverse()))}}new Zl("abcdefghijklmnopqrstuvwxyz234567");const eh=new Zl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var th;!function(e){e.sha256="sha256",e.sha512="sha512"}(th||(th={}));const rh=new pn("sha2/5.8.0");function nh(e){return"0x"+Vu.sha256().update(bn(e)).digest("hex")}function ih(e,t,r){return th[e]||rh.throwError("unsupported algorithm "+e,pn.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Vu.hmac(Vu[e],bn(t)).update(bn(r)).digest("hex")}function sh(e,t,r,n,i){let s;e=bn(e),t=bn(t);let o=1;const a=new Uint8Array(n),c=new Uint8Array(t.length+4);let u,l;c.set(t);for(let h=1;h<=o;h++){c[t.length]=h>>24&255,c[t.length+1]=h>>16&255,c[t.length+2]=h>>8&255,c[t.length+3]=255&h;let d=bn(ih(i,e,c));s||(s=d.length,l=new Uint8Array(s),o=Math.ceil(n/s),u=n-(o-1)*s),l.set(d);for(let t=1;t<r;t++){d=bn(ih(i,e,d));for(let e=0;e<s;e++)l[e]^=d[e]}const f=(h-1)*s,p=h===o?u:s;a.set(bn(l).slice(0,p),f)}return Rn(a)}const oh=new pn("wordlists/5.8.0");class ah{constructor(e){oh.checkAbstract(new.target,ah),Rs(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return jo(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let ch=null;function uh(e){if(null==ch&&(ch="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==ah.check(e)))throw ch=null,new Error("BIP39 Wordlist for en (English) FAILED")}const lh=new class extends ah{constructor(){super("en")}getWord(e){return uh(this),ch[e]}getWordIndex(e){return uh(this),ch.indexOf(e)}};ah.register(lh);const hh={en:lh},dh=new pn("hdnode/5.8.0"),fh=As.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ph=Mo("Bitcoin seed"),mh=2147483648;function gh(e){return(1<<e)-1<<8-e}function yh(e){return(1<<e)-1}function wh(e){return xn(Rn(e),32)}function vh(e){return eh.encode(En([e,Nn(nh(nh(e)),0,4)]))}function Ah(e){if(null==e)return hh.en;if("string"==typeof e){const t=hh[e];return null==t&&dh.throwArgumentError("unknown locale","wordlist",e),t}return e}const bh={},Eh="m/44'/60'/0'/0/0";class _h{constructor(e,t,r,n,i,s,o,a){if(e!==bh)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new xl(t);Rs(this,"privateKey",e.privateKey),Rs(this,"publicKey",e.compressedPublicKey)}else Rs(this,"privateKey",null),Rs(this,"publicKey",Rn(r));var c;Rs(this,"parentFingerprint",n),Rs(this,"fingerprint",Nn((c=nh(this.publicKey),"0x"+Vu.ripemd160().update(bn(c)).digest("hex")),0,4)),Rs(this,"address",Gl(this.publicKey)),Rs(this,"chainCode",i),Rs(this,"index",s),Rs(this,"depth",o),null==a?(Rs(this,"mnemonic",null),Rs(this,"path",null)):"string"==typeof a?(Rs(this,"mnemonic",null),Rs(this,"path",a)):(Rs(this,"mnemonic",a),Rs(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return vh(En([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",Rn(this.depth),this.parentFingerprint,xn(Rn(this.index),4),this.chainCode,null!=this.privateKey?En(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new _h(bh,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));const r=new Uint8Array(37);if(e&mh){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(bn(this.privateKey),1),t&&(t+="'")}else r.set(bn(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=bn(ih(th.sha512,this.chainCode,r)),i=n.slice(0,32),s=n.slice(32);let o=null,a=null;if(this.privateKey)o=wh(As.from(i).add(this.privateKey).mod(fh));else{a=new xl(Rn(i))._addPoint(this.publicKey)}let c=t;const u=this.mnemonic;return u&&(c=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new _h(bh,o,a,this.fingerprint,wh(s),e,this.depth+1,c)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=mh)throw new Error("invalid path index - "+n);r=r._derive(mh+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=mh)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=bn(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=bn(ih(th.sha512,ph,r));return new _h(bh,wh(n.slice(0,32)),null,"0x00000000",wh(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=Th(kh(e,r=Ah(r)),r),_h._fromSeed(function(e,t){t||(t="");const r=Mo("mnemonic"+t,No.NFKD);return sh(Mo(e,No.NFKD),r,2048,64,"sha512")}(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return _h._fromSeed(e,null)}static fromExtendedKey(e){const t=eh.decode(e);82===t.length&&vh(t.slice(0,78))===e||dh.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=Rn(t.slice(5,9)),i=parseInt(Rn(t.slice(9,13)).substring(2),16),s=Rn(t.slice(13,45)),o=t.slice(45,78);switch(Rn(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new _h(bh,null,Rn(o),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new _h(bh,Rn(o.slice(1)),null,n,s,i,r,null)}return dh.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function kh(e,t){t=Ah(t),dh.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=bn(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));if(-1===s)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)s&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,o=gh(r.length/3);if((bn(nh(n.slice(0,s/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return Rn(n.slice(0,s/8))}function Th(e,t){if(t=Ah(t),(e=bn(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&yh(8-n)),n+=3);const i=e.length/4,s=bn(nh(e))[0]&gh(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,t.join(r.map(e=>t.getWord(e)))}const Ih=new pn("random/5.8.0");const Rh=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();let Sh=Rh.crypto||Rh.msCrypto;function Nh(e){(e<=0||e>1024||e%1||e!=e)&&Ih.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return Sh.getRandomValues(t),bn(t)}Sh&&Sh.getRandomValues||(Ih.warn("WARNING: Missing strong random number source"),Sh={getRandomValues:function(e){return Ih.throwError("no secure random source avaialble",pn.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var Ph={exports:{}};!function(e){!function(){function t(e){return parseInt(e)===e}function r(e){if(!t(e.length))return!1;for(var r=0;r<e.length;r++)if(!t(e[r])||e[r]<0||e[r]>255)return!1;return!0}function n(e,n){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return n&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!r(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(t(e.length)&&r(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function i(e){return new Uint8Array(e)}function s(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var o,a={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var i=e.charCodeAt(r++);37===i?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(i)}return n(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},c=(o="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(o[(240&n)>>4]+o[15&n])}return t.join("")}}),u={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],f=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],_=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],k=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function T(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var I=function(e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(e,!0)}),this._prepare()};I.prototype._prepare=function(){var e=u[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,s=T(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=s[t],this._Kd[e-r][t%4]=s[t];for(var o,a=0,c=i;c<n;){if(o=s[i-1],s[0]^=h[o>>16&255]<<24^h[o>>8&255]<<16^h[255&o]<<8^h[o>>24&255]^l[a]<<24,a+=1,8!=i)for(t=1;t<i;t++)s[t]^=s[t-1];else{for(t=1;t<i/2;t++)s[t]^=s[t-1];o=s[i/2-1],s[i/2]^=h[255&o]^h[o>>8&255]<<8^h[o>>16&255]<<16^h[o>>24&255]<<24;for(t=i/2+1;t<i;t++)s[t]^=s[t-1]}for(t=0;t<i&&c<n;)d=c>>2,f=c%4,this._Ke[d][f]=s[t],this._Kd[e-d][f]=s[t++],c++}for(var d=1;d<e;d++)for(var f=0;f<4;f++)o=this._Kd[d][f],this._Kd[d][f]=b[o>>24&255]^E[o>>16&255]^_[o>>8&255]^k[255&o]},I.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=T(e),s=0;s<4;s++)n[s]^=this._Ke[0][s];for(var o=1;o<t;o++){for(s=0;s<4;s++)r[s]=f[n[s]>>24&255]^p[n[(s+1)%4]>>16&255]^m[n[(s+2)%4]>>8&255]^g[255&n[(s+3)%4]]^this._Ke[o][s];n=r.slice()}var a,c=i(16);for(s=0;s<4;s++)a=this._Ke[t][s],c[4*s]=255&(h[n[s]>>24&255]^a>>24),c[4*s+1]=255&(h[n[(s+1)%4]>>16&255]^a>>16),c[4*s+2]=255&(h[n[(s+2)%4]>>8&255]^a>>8),c[4*s+3]=255&(h[255&n[(s+3)%4]]^a);return c},I.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=T(e),s=0;s<4;s++)n[s]^=this._Kd[0][s];for(var o=1;o<t;o++){for(s=0;s<4;s++)r[s]=y[n[s]>>24&255]^w[n[(s+3)%4]>>16&255]^v[n[(s+2)%4]>>8&255]^A[255&n[(s+1)%4]]^this._Kd[o][s];n=r.slice()}var a,c=i(16);for(s=0;s<4;s++)a=this._Kd[t][s],c[4*s]=255&(d[n[s]>>24&255]^a>>24),c[4*s+1]=255&(d[n[(s+3)%4]>>16&255]^a>>16),c[4*s+2]=255&(d[n[(s+2)%4]>>8&255]^a>>8),c[4*s+3]=255&(d[255&n[(s+1)%4]]^a);return c};var R=function(e){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new I(e)};R.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),o=0;o<e.length;o+=16)s(e,r,0,o,o+16),s(r=this._aes.encrypt(r),t,o);return t},R.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),o=0;o<e.length;o+=16)s(e,r,0,o,o+16),s(r=this._aes.decrypt(r),t,o);return t};var S=function(e,t){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=i(16);this._lastCipherblock=n(t,!0),this._aes=new I(e)};S.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),o=0;o<e.length;o+=16){s(e,r,0,o,o+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,t,o)}return t},S.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=i(e.length),r=i(16),o=0;o<e.length;o+=16){s(e,r,0,o,o+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[o+a]=r[a]^this._lastCipherblock[a];s(e,this._lastCipherblock,0,o,o+16)}return t};var N=function(e,t,r){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=i(16);r||(r=1),this.segmentSize=r,this._shiftRegister=n(t,!0),this._aes=new I(e)};N.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[i+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r},N.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[i+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(e,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r};var P=function(e,t){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=i(16);this._lastPrecipher=n(t,!0),this._lastPrecipherIndex=16,this._aes=new I(e)};P.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},P.prototype.decrypt=P.prototype.encrypt;var C=function(e){if(!(this instanceof C))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=i(16),this.setValue(e)):this.setBytes(e)};C.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},C.prototype.setBytes=function(e){if(16!=(e=n(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},C.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof C||(t=new C(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new I(e)};O.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},O.prototype.decrypt=O.prototype.encrypt;var x={AES:I,Counter:C,ModeOfOperation:{ecb:R,cbc:S,cfb:N,ofb:P,ctr:O},utils:{hex:c,utf8:a},padding:{pkcs7:{pad:function(e){var t=16-(e=n(e,!0)).length%16,r=i(e.length+t);s(e,r);for(var o=e.length;o<r.length;o++)r[o]=t;return r},strip:function(e){if((e=n(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,o=0;o<t;o++)if(e[r+o]!==t)throw new Error("PKCS#7 invalid padding byte");var a=i(r);return s(e,a,0,0,r),a}}},_arrayTest:{coerceArray:n,createArray:i,copyArray:s}};e.exports=x}()}(Ph);var Ch=Rt(Ph.exports);const Oh="json-wallets/5.8.0";function xh(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),bn(e)}function Mh(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Dh(e){return"string"==typeof e?Mo(e,No.NFKC):bn(e)}function Uh(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r)if(i.toLowerCase()===n[e]){t=r[i];break}if(null===t)return null;r=t}return r}function Lh(e){const t=bn(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=Rn(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Bh=new pn(Oh);class Fh extends Us{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function qh(e,t){const r=JSON.parse(e);t=Dh(t);const n=lo(Uh(r,"ethaddr")),i=xh(Uh(r,"encseed"));i&&i.length%16==0||Bh.throwArgumentError("invalid encseed","json",e);const s=bn(sh(t,t,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),c=new Ch.ModeOfOperation.cbc(s,o),u=Ch.padding.pkcs7.strip(bn(c.decrypt(a)));let l="";for(let e=0;e<u.length;e++)l+=String.fromCharCode(u[e]);const h=Ln(Mo(l));return new Fh({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function Gh(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function Hh(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}var jh={exports:{}};!function(e){!function(){const t=2147483647;function r(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762,o=1359893119,a=2600822924,c=528734635,u=1541459225;const l=new Uint32Array(64);function h(e){let h=0,d=e.length;for(;d>=64;){let f,p,m,g,y,w=r,v=n,A=i,b=s,E=o,_=a,k=c,T=u;for(p=0;p<16;p++)m=h+4*p,l[p]=(255&e[m])<<24|(255&e[m+1])<<16|(255&e[m+2])<<8|255&e[m+3];for(p=16;p<64;p++)f=l[p-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=l[p-15],y=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,l[p]=(g+l[p-7]|0)+(y+l[p-16]|0)|0;for(p=0;p<64;p++)g=(((E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7))+(E&_^~E&k)|0)+(T+(t[p]+l[p]|0)|0)|0,y=((w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10))+(w&v^w&A^v&A)|0,T=k,k=_,_=E,E=b+g|0,b=A,A=v,v=w,w=g+y|0;r=r+w|0,n=n+v|0,i=i+A|0,s=s+b|0,o=o+E|0,a=a+_|0,c=c+k|0,u=u+T|0,h+=64,d-=64}}h(e);let d,f=e.length%64,p=e.length/536870912|0,m=e.length<<3,g=f<56?56:120,y=e.slice(e.length-f,e.length);for(y.push(128),d=f+1;d<g;d++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(m>>>24&255),y.push(m>>>16&255),y.push(m>>>8&255),y.push(m>>>0&255),h(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function n(e,t,n){e=e.length<=64?e:r(e);const i=64+t.length+4,s=new Array(i),o=new Array(64);let a,c=[];for(a=0;a<64;a++)s[a]=54;for(a=0;a<e.length;a++)s[a]^=e[a];for(a=0;a<t.length;a++)s[64+a]=t[a];for(a=i-4;a<i;a++)s[a]=0;for(a=0;a<64;a++)o[a]=92;for(a=0;a<e.length;a++)o[a]^=e[a];function u(){for(let e=i-1;e>=i-4;e--){if(s[e]++,s[e]<=255)return;s[e]=0}}for(;n>=32;)u(),c=c.concat(r(o.concat(r(s)))),n-=32;return n>0&&(u(),c=c.concat(r(o.concat(r(s))).slice(0,n))),c}function i(e,t,r,n,i){let s;for(c(e,16*(2*r-1),i,0,16),s=0;s<2*r;s++)a(e,16*s,i,16),o(i,n),c(i,0,e,t+16*s,16);for(s=0;s<r;s++)c(e,t+2*s*16,e,16*s,16);for(s=0;s<r;s++)c(e,t+16*(2*s+1),e,16*(s+r),16)}function s(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=s(t[0]+t[12],7),t[8]^=s(t[4]+t[0],9),t[12]^=s(t[8]+t[4],13),t[0]^=s(t[12]+t[8],18),t[9]^=s(t[5]+t[1],7),t[13]^=s(t[9]+t[5],9),t[1]^=s(t[13]+t[9],13),t[5]^=s(t[1]+t[13],18),t[14]^=s(t[10]+t[6],7),t[2]^=s(t[14]+t[10],9),t[6]^=s(t[2]+t[14],13),t[10]^=s(t[6]+t[2],18),t[3]^=s(t[15]+t[11],7),t[7]^=s(t[3]+t[15],9),t[11]^=s(t[7]+t[3],13),t[15]^=s(t[11]+t[7],18),t[1]^=s(t[0]+t[3],7),t[2]^=s(t[1]+t[0],9),t[3]^=s(t[2]+t[1],13),t[0]^=s(t[3]+t[2],18),t[6]^=s(t[5]+t[4],7),t[7]^=s(t[6]+t[5],9),t[4]^=s(t[7]+t[6],13),t[5]^=s(t[4]+t[7],18),t[11]^=s(t[10]+t[9],7),t[8]^=s(t[11]+t[10],9),t[9]^=s(t[8]+t[11],13),t[10]^=s(t[9]+t[8],18),t[12]^=s(t[15]+t[14],7),t[13]^=s(t[12]+t[15],9),t[14]^=s(t[13]+t[12],13),t[15]^=s(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function a(e,t,r,n){for(let i=0;i<n;i++)r[i]^=e[t+i]}function c(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function u(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function l(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function h(e,r,s,o,h,d,f){if(s=l(s,"N"),o=l(o,"r"),h=l(h,"p"),d=l(d,"dkLen"),0===s||s&s-1)throw new Error("N must be power of 2");if(s>t/128/o)throw new Error("N too large");if(o>t/128/h)throw new Error("r too large");if(!u(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!u(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let p=n(e,r,128*h*o);const m=new Uint32Array(32*h*o);for(let e=0;e<m.length;e++){const t=4*e;m[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|255&p[t+0]}const g=new Uint32Array(64*o),y=new Uint32Array(32*o*s),w=32*o,v=new Uint32Array(16),A=new Uint32Array(16),b=h*s*2;let E,_,k=0,T=null,I=!1,R=0,S=0;const N=f?parseInt(1e3/o):4294967295,P="undefined"!=typeof setImmediate?setImmediate:setTimeout,C=function(){if(I)return f(new Error("cancelled"),k/b);let t;switch(R){case 0:_=32*S*o,c(m,_,g,0,w),R=1,E=0;case 1:t=s-E,t>N&&(t=N);for(let e=0;e<t;e++)c(g,0,y,(E+e)*w,w),i(g,w,o,v,A);if(E+=t,k+=t,f){const e=parseInt(1e3*k/b);if(e!==T){if(I=f(null,k/b),I)break;T=e}}if(E<s)break;E=0,R=2;case 2:t=s-E,t>N&&(t=N);for(let e=0;e<t;e++){const e=g[16*(2*o-1)]&s-1;a(y,e*w,g,w),i(g,w,o,v,A)}if(E+=t,k+=t,f){const e=parseInt(1e3*k/b);if(e!==T){if(I=f(null,k/b),I)break;T=e}}if(E<s)break;if(c(g,0,m,_,w),S++,S<h){R=0;break}p=[];for(let e=0;e<m.length;e++)p.push(255&m[e]),p.push(m[e]>>8&255),p.push(m[e]>>16&255),p.push(m[e]>>24&255);const r=n(e,p,d);return f&&f(null,1,r),r}f&&P(C)};if(!f)for(;;){const e=C();if(null!=e)return e}C()}const d={scrypt:function(e,t,r,n,i,s,o){return new Promise(function(a,c){let u=0;o&&o(0),h(e,t,r,n,i,s,function(e,t,r){if(e)c(e);else if(r)o&&1!==u&&o(1),a(new Uint8Array(r));else if(o&&t!==u)return u=t,o(t)})})},syncScrypt:function(e,t,r,n,i,s){return new Uint8Array(h(e,t,r,n,i,s))}};e.exports=d}()}(jh);var Kh=Rt(jh.exports),zh=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Wh=new pn(Oh);function Vh(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class Jh extends Us{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function Yh(e,t){const r=xh(Uh(e,"crypto/ciphertext"));if(Rn(Ln(En([t.slice(16,32),r]))).substring(2)!==Uh(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===Uh(e,"crypto/cipher")){const n=xh(Uh(e,"crypto/cipherparams/iv")),i=new Ch.Counter(n);return bn(new Ch.ModeOfOperation.ctr(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||Wh.throwError("unsupported cipher",pn.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=t.slice(32,64),s=Gl(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),lo(t)!==s)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:s,privateKey:Rn(n)};if("0.1"===Uh(e,"x-ethers/version")){const t=xh(Uh(e,"x-ethers/mnemonicCiphertext")),r=xh(Uh(e,"x-ethers/mnemonicCounter")),n=new Ch.Counter(r),s=new Ch.ModeOfOperation.ctr(i,n),a=Uh(e,"x-ethers/path")||Eh,c=Uh(e,"x-ethers/locale")||"en",u=bn(s.decrypt(t));try{const e=Th(u,c),t=_h.fromMnemonic(e,null,c).derivePath(a);if(t.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=t.mnemonic}catch(e){if(e.code!==pn.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new Jh(o)}function Qh(e,t,r,n,i){return bn(sh(e,t,r,n,i))}function $h(e,t,r,n,i){return Promise.resolve(Qh(e,t,r,n,i))}function Xh(e,t,r,n,i){const s=Dh(t),o=Uh(e,"crypto/kdf");if(o&&"string"==typeof o){const t=function(e,t){return Wh.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===o.toLowerCase()){const r=xh(Uh(e,"crypto/kdfparams/salt")),a=parseInt(Uh(e,"crypto/kdfparams/n")),c=parseInt(Uh(e,"crypto/kdfparams/r")),u=parseInt(Uh(e,"crypto/kdfparams/p"));a&&c&&u||t("kdf",o),a&a-1&&t("N",a);const l=parseInt(Uh(e,"crypto/kdfparams/dklen"));return 32!==l&&t("dklen",l),n(s,r,a,c,u,64,i)}if("pbkdf2"===o.toLowerCase()){const n=xh(Uh(e,"crypto/kdfparams/salt"));let i=null;const o=Uh(e,"crypto/kdfparams/prf");"hmac-sha256"===o?i="sha256":"hmac-sha512"===o?i="sha512":t("prf",o);const a=parseInt(Uh(e,"crypto/kdfparams/c")),c=parseInt(Uh(e,"crypto/kdfparams/dklen"));return 32!==c&&t("dklen",c),r(s,n,a,c,i)}}return Wh.throwArgumentError("unsupported key-derivation function","kdf",o)}function Zh(e,t,r){if(Gh(e)){r&&r(0);const n=qh(e,t);return r&&r(1),Promise.resolve(n)}return Hh(e)?function(e,t,r){return zh(this,void 0,void 0,function*(){const n=JSON.parse(e);return Yh(n,yield Xh(n,t,$h,Kh.scrypt,r))})}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function ed(e,t){if(Gh(e))return qh(e,t);if(Hh(e))return function(e,t){const r=JSON.parse(e);return Yh(r,Xh(r,t,Qh,Kh.syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}var td=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const rd=new pn("wallet/5.8.0");class nd extends Wa{constructor(e,t){if(super(),null!=(r=e)&&Tn(r.privateKey,32)&&null!=r.address){const t=new xl(e.privateKey);if(Rs(this,"_signingKey",()=>t),Rs(this,"address",Gl(this.publicKey)),this.address!==lo(e.address)&&rd.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;Rs(this,"_mnemonic",()=>({phrase:t.phrase,path:t.path||Eh,locale:t.locale||"en"}));const r=this.mnemonic;Gl(_h.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&rd.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Rs(this,"_mnemonic",()=>null)}else{if(xl.isSigningKey(e))"secp256k1"!==e.curve&&rd.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Rs(this,"_signingKey",()=>e);else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new xl(e);Rs(this,"_signingKey",()=>t)}Rs(this,"_mnemonic",()=>null),Rs(this,"address",Gl(this.publicKey))}var r;t&&!Ga.isProvider(t)&&rd.throwArgumentError("invalid provider","provider",t),Rs(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new nd(this,e)}signTransaction(e){return Ns(e).then(t=>{null!=t.from&&(lo(t.from)!==this.address&&rd.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(Ln(Yl(t)));return Yl(t,r)})}signMessage(e){return td(this,void 0,void 0,function*(){return Dn(this._signingKey().signDigest(va(e)))})}_signTypedData(e,t,r){return td(this,void 0,void 0,function*(){const n=yield Da.resolveNames(e,t,r,e=>(null==this.provider&&rd.throwError("cannot resolve ENS names without a provider",pn.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e)));return Dn(this._signingKey().signDigest(Da.hash(n.domain,t,n.value)))})}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(lo(e.address)!==Gl(e.privateKey))throw new Error("address/privateKey mismatch");if(Vh(e)){const t=e.mnemonic;if(_h.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||Eh).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=bn(e.privateKey),s=Dh(t);let o=null,a=null,c=null;if(Vh(e)){const t=e.mnemonic;o=bn(kh(t.phrase,t.locale||"en")),a=t.path||Eh,c=t.locale||"en"}let u=r.client;u||(u="ethers.js");let l=null;l=r.salt?bn(r.salt):Nh(32);let h=null;if(r.iv){if(h=bn(r.iv),16!==h.length)throw new Error("invalid iv")}else h=Nh(16);let d=null;if(r.uuid){if(d=bn(r.uuid),16!==d.length)throw new Error("invalid uuid")}else d=Nh(16);let f=1<<17,p=8,m=1;return r.scrypt&&(r.scrypt.N&&(f=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(m=r.scrypt.p)),Kh.scrypt(s,l,f,p,m,64,n).then(t=>{const r=(t=bn(t)).slice(0,16),n=t.slice(16,32),s=t.slice(32,64),g=new Ch.Counter(h),y=bn(new Ch.ModeOfOperation.ctr(r,g).encrypt(i)),w=Ln(En([n,y])),v={address:e.address.substring(2).toLowerCase(),id:Lh(d),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Rn(h).substring(2)},ciphertext:Rn(y).substring(2),kdf:"scrypt",kdfparams:{salt:Rn(l).substring(2),n:f,dklen:32,p:m,r:p},mac:w.substring(2)}};if(o){const e=Nh(16),t=new Ch.Counter(e),r=bn(new Ch.ModeOfOperation.ctr(s,t).encrypt(o)),n=new Date,i=n.getUTCFullYear()+"-"+Mh(n.getUTCMonth()+1,2)+"-"+Mh(n.getUTCDate(),2)+"T"+Mh(n.getUTCHours(),2)+"-"+Mh(n.getUTCMinutes(),2)+"-"+Mh(n.getUTCSeconds(),2)+".0Z";v["x-ethers"]={client:u,gethFilename:"UTC--"+i+"--"+v.address,mnemonicCounter:Rn(e).substring(2),mnemonicCiphertext:Rn(r).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(v)})}(this,e,t,r)}static createRandom(e){let t=Nh(16);e||(e={}),e.extraEntropy&&(t=bn(Nn(Ln(En([t,e.extraEntropy])),0,16)));const r=Th(t,e.locale);return nd.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return Zh(e,t,r).then(e=>new nd(e))}static fromEncryptedJsonSync(e,t){return new nd(ed(e,t))}static fromMnemonic(e,t,r){return t||(t=Eh),new nd(_h.fromMnemonic(e,null,r).derivePath(t))}}const id=new pn("networks/5.8.0");function sd(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new t.PocketProvider(e,r.pocket);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],s=new t.AnkrProvider(e,r.ankr);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return sd(e)},t}function od(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return od(e,t)},r}const ad={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:sd("homestead")},cd={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:sd("ropsten")},ud={chainId:63,name:"classicMordor",_defaultProvider:od("https://www.ethercluster.com/mordor","classicMordor")},ld={unspecified:{chainId:0,name:"unspecified"},homestead:ad,mainnet:ad,morden:{chainId:2,name:"morden"},ropsten:cd,testnet:cd,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:sd("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:sd("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:sd("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:sd("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:sd("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:od("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:ud,classicTestnet:ud,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:od("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:sd("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:sd("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:sd("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function hd(e){if(null==e)return null;if("number"==typeof e){for(const t in ld){const r=ld[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=ld[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=ld[e.name];if(!t)return"number"!=typeof e.chainId&&id.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&id.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}var dd=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};function fd(e,t){return dd(this,void 0,void 0,function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((e,t)=>{s[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{s[e.toLowerCase()]=n.headers.get(e)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:bn(new Uint8Array(i))}})}var pd=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const md=new pn("web/5.8.0");function gd(e){return new Promise(t=>{setTimeout(t,e)})}function yd(e,t){if(null==e)return null;if("string"==typeof e)return e;if(wn(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Do(e)}catch(e){}return Rn(e)}return e}function wd(e,t,r){let n=null;if(null!=t){n=Mo(t);const r="string"==typeof e?{url:e}:Cs(e);if(r.headers){0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length||(r.headers=Cs(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};e=r}return function(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;md.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,s="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;md.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o="object"==typeof e&&!!e.errorPassThrough,a={};let c=null;const u={method:"GET"};let l=!1,h=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null!=e&&null!=e.url||md.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"==typeof e.timeout&&e.timeout>0&&(h=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(l=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&md.throwError("basic authentication requires a secure https url",pn.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+Wo(Mo(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=Cs(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=c?c.match(d):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?zo(f[3]):(p=f[3],Mo(p.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){md.throwError("processing response error",pn.errors.SERVER_ERROR,{body:yd(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:c})}var p;t&&(u.method="POST",u.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(a).forEach(e=>{const t=a[e];m[t.key]=t.value}),u.headers=m;const g=function(){let e=null;return{promise:new Promise(function(t,r){h&&(e=setTimeout(()=>{null!=e&&(e=null,r(md.makeError("timeout",pn.errors.TIMEOUT,{requestBody:yd(u.body,m["content-type"]),requestMethod:u.method,timeout:h,url:c})))},h))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return pd(this,void 0,void 0,function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield fd(c,u),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):s*parseInt(String(Math.random()*Math.pow(2,e))),yield gd(r);continue}}}catch(e){t=e.response,null==t&&(g.cancel(),md.throwError("missing response",pn.errors.SERVER_ERROR,{requestBody:yd(u.body,m["content-type"]),requestMethod:u.method,serverError:e,url:c}))}let a=t.body;if(l&&304===t.statusCode?a=null:!o&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),md.throwError("bad response",pn.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:yd(a,t.headers?t.headers["content-type"]:null),requestBody:yd(u.body,m["content-type"]),requestMethod:u.method,url:c})),r)try{const e=yield r(a,t);return g.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,c)),t){const t=s*parseInt(String(Math.random()*Math.pow(2,e)));yield gd(t);continue}}g.cancel(),md.throwError("processing response error",pn.errors.SERVER_ERROR,{body:yd(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:yd(u.body,m["content-type"]),requestMethod:u.method,url:c})}return g.cancel(),a}return md.throwError("failed response",pn.errors.SERVER_ERROR,{requestBody:yd(u.body,m["content-type"]),requestMethod:u.method,url:c})})}();return Promise.race([g.promise,y])}(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Do(e))}catch(t){md.throwError("invalid JSON",pn.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function vd(e,t){return t||(t={}),null==(t=Cs(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>!s&&(s=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let c=0;!function i(){return e().then(function(e){if(void 0!==e)o()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!s){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null},function(e){o()&&n(e)})}()})}for(var Ad="qpzry9x8gf2tvdw0s3jn54khce6mua7l",bd={},Ed=0;Ed<32;Ed++){var _d=Ad.charAt(Ed);if(void 0!==bd[_d])throw new TypeError(_d+" is ambiguous");bd[_d]=Ed}function kd(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function Td(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=kd(t)^n>>5}for(t=kd(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=kd(t)^31&i}return t}function Id(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var i=(e=r).lastIndexOf("1");if(-1===i)return"No separator character for "+e;if(0===i)return"Missing prefix for "+e;var s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)return"Data too short";var a=Td(s);if("string"==typeof a)return a;for(var c=[],u=0;u<o.length;++u){var l=o.charAt(u),h=bd[l];if(void 0===h)return"Unknown character "+l;a=kd(a)^h,u+6>=o.length||c.push(h)}return 1!==a?"Invalid checksum for "+e:{prefix:s,words:c}}function Rd(e,t,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c)for(i=i<<t|e[c],s+=t;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=t)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}var Sd={decodeUnsafe:function(){var e=Id.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=Id.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=Td(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=e+"1",s=0;s<t.length;++s){var o=t[s];if(o>>5)throw new Error("Non 5-bit word");n=kd(n)^o,i+=Ad.charAt(o)}for(s=0;s<6;++s)n=kd(n);for(n^=1,s=0;s<6;++s){i+=Ad.charAt(n>>5*(5-s)&31)}return i},toWordsUnsafe:function(e){var t=Rd(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=Rd(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=Rd(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=Rd(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}},Nd=Rt(Sd);const Pd="providers/5.8.0",Cd=new pn(Pd);class Od{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:s,type:c,accessList:Od.allowNull(this.accessList.bind(this),null),blockHash:Od.allowNull(s,null),blockNumber:Od.allowNull(a,null),transactionIndex:Od.allowNull(a,null),confirmations:Od.allowNull(a,null),from:t,gasPrice:Od.allowNull(r),maxPriorityFeePerGas:Od.allowNull(r),maxFeePerGas:Od.allowNull(r),gasLimit:r,to:Od.allowNull(t,null),value:r,nonce:a,data:i,r:Od.allowNull(this.uint256),s:Od.allowNull(this.uint256),v:Od.allowNull(a),creates:Od.allowNull(t,null),raw:Od.allowNull(i)},e.transactionRequest={from:Od.allowNull(t),nonce:Od.allowNull(a),gasLimit:Od.allowNull(r),gasPrice:Od.allowNull(r),maxPriorityFeePerGas:Od.allowNull(r),maxFeePerGas:Od.allowNull(r),to:Od.allowNull(t),value:Od.allowNull(r),data:Od.allowNull(e=>this.data(e,!0)),type:Od.allowNull(a),accessList:Od.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:s,address:t,topics:Od.arrayOf(s),data:i,logIndex:a,blockHash:s},e.receipt={to:Od.allowNull(this.address,null),from:Od.allowNull(this.address,null),contractAddress:Od.allowNull(t,null),transactionIndex:a,root:Od.allowNull(o),gasUsed:r,logsBloom:Od.allowNull(i),blockHash:s,transactionHash:s,logs:Od.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Od.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:Od.allowNull(r),status:Od.allowNull(a),type:c},e.block={hash:Od.allowNull(s),parentHash:s,number:a,timestamp:a,nonce:Od.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Od.allowNull(t),extraData:i,transactions:Od.allowNull(Od.arrayOf(s)),baseFeePerGas:Od.allowNull(r)},e.blockWithTransactions=Cs(e.block),e.blockWithTransactions.transactions=Od.allowNull(Od.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Od.allowNull(n,void 0),toBlock:Od.allowNull(n,void 0),blockHash:Od.allowNull(s,void 0),address:Od.allowNull(t,void 0),topics:Od.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Od.allowNull(a),blockHash:Od.allowNull(s),transactionIndex:a,removed:Od.allowNull(this.boolean.bind(this)),address:t,data:Od.allowFalsish(i,"0x"),topics:Od.arrayOf(s),transactionHash:s,logIndex:a},e}accessList(e){return zl(e||[])}number(e){return"0x"===e?0:As.from(e).toNumber()}type(e){return"0x"===e||null==e?0:As.from(e).toNumber()}bigNumber(e){return As.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),Tn(e))?e.toLowerCase():Cd.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return lo(e)}callAddress(e){if(!Tn(e,32))return null;const t=lo(Nn(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return function(e){let t=null;try{t=lo(e.from)}catch(t){oo.throwArgumentError("missing from address","transaction",e)}return lo(Nn(Ln(ro([t,_n(bn(As.from(e.nonce).toHexString()))])),12))}(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Tn(e))return Cn(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==Sn(r)?Cd.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=As.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!Tn(e))throw new Error("invalid uint256");return xn(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=Od.check(t,e);return n._difficulty=null==r?null:As.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Od.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&As.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=Od.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;Tn(r)&&(r=As.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),Tn(r)&&(r=As.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return $l(e)}receiptLog(e){return Od.check(this.formats.receiptLog,e)}receipt(e){const t=Od.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=As.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Cd.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Cd.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Cd.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return Od.check(this.formats.filter,e)}filterLog(e){return Od.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(t){r.push(e(t))}),r}}}function xd(e){return e&&"function"==typeof e.isCommunityResource}function Md(e){return xd(e)&&e.isCommunityResource()}let Dd=!1;function Ud(){Dd||(Dd=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var Ld=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Bd=new pn(Pd);function Fd(e){return null==e?"null":(32!==Sn(e)&&Bd.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function qd(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[Fd(e)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return Fd(e)}).join("&")}function Gd(e){if("string"==typeof e){if(32===Sn(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+qd(e);if(qa.isForkEvent(e))throw Bd.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+qd(e.topics||[])}throw new Error("invalid event - "+e)}function Hd(){return(new Date).getTime()}function jd(e){return new Promise(t=>{setTimeout(t,e)})}const Kd=["block","network","pending","poll"];let zd=class{constructor(e,t,r){Rs(this,"tag",e),Rs(this,"listener",t),Rs(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t});var n;const i={};return r.length>0&&(i.topics=r),t&&"*"!==t&&(i.address=t),i}pollable(){return this.tag.indexOf(":")>=0||Kd.indexOf(this.tag)>=0}};const Wd={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Vd(e){return xn(As.from(e).toHexString(),32)}function Jd(e){return eh.encode(En([e,Nn(nh(nh(e)),0,4)]))}const Yd=new RegExp("^(ipfs)://(.*)$","i"),Qd=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Yd,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function $d(e,t){try{return Do(Xd(e,t))}catch(e){}return null}function Xd(e,t){if("0x"===e)return null;const r=As.from(Nn(e,t,t+32)).toNumber(),n=As.from(Nn(e,r,r+32)).toNumber();return Nn(e,r+32,r+32+n)}function Zd(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Bd.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function ef(e){const t=bn(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function tf(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function rf(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const i=bn(e[n]);t[n]=ef(r),t.push(ef(i.length)),t.push(tf(i)),r+=32+32*Math.ceil(i.length/32)}return Pn(t)}class nf{constructor(e,t,r,n){Rs(this,"provider",e),Rs(this,"name",r),Rs(this,"address",e.formatter.address(t)),Rs(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>As.from(e).eq(1)).catch(e=>{if(e.code===pn.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return Ld(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Pn([e,ga(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=Pn(["0x9061b923",rf([ya(this.name),r.data])]));try{let e=yield this.provider.call(r);return bn(e).length%32==4&&Bd.throwError("resolver threw error",pn.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=Xd(e,0)),e}catch(e){if(e.code===pn.errors.CALL_EXCEPTION)return null;throw e}})}_fetchBytes(e,t){return Ld(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return null!=r?Xd(r,0):null})}_getAddress(e,t){const r=Wd[String(e)];if(null==r&&Bd.throwError(`unsupported coin type: ${e}`,pn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=bn(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Jd(En([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Jd(En([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=Nd.toWords(n.slice(2));return e.unshift(t),Nd.encode(r.prefix,e)}}return null}getAddress(e){return Ld(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===pn.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",Vd(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&Bd.throwError("invalid or unsupported coin data",pn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return Ld(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Qd.length;r++){const n=t.match(Qd[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:Zd(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=xn(As.from(o[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:Pn(["0x6352211e",c])}));if(s!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=As.from(yield this.provider.call({to:a,data:Pn(["0x00fdd58e",xn(s,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(o[0]),data:Pn([r,c])};let l=$d(yield this.provider.call(u),0);if(null==l)return null;e.push({type:"metadata-url-base",content:l}),"erc1155"===i&&(l=l.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=Zd(l)),e.push({type:"metadata-url",content:l});const h=yield wd(l);if(!h)return null;e.push({type:"metadata",content:JSON.stringify(h)});let d=h.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match(Yd))return null;e.push({type:"url-ipfs",content:d}),d=Zd(d)}return e.push({type:"url",content:d}),{linkage:e,url:d}}}}}catch(e){}return null})}getContentHash(){return Ld(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+eh.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+eh.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"},t=Wo("0x"+i[1]).replace(/[=+\/]/g,t=>e[t]);return"sia://"+t}return Bd.throwError("invalid or unsupported content hash data",pn.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Ld(this,void 0,void 0,function*(){let t=Mo(e);t=En([Vd(64),Vd(t.length),t]),t.length%32!=0&&(t=En([t,xn("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Rn(t));return null==r||"0x"===r?null:Do(r)})}}let sf=null,of=1;class af extends Ga{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Rs(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{const t=Ss(new.target,"getNetwork")(e);t?(Rs(this,"_network",t),this.emit("network",t,null)):Bd.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Ld(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||Bd.throwError("no network detected",pn.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:Rs(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return vd(()=>this._ready().then(e=>e,e=>{if(e.code!==pn.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==sf&&(sf=new Od),sf}static getNetwork(e){return hd(null==e?"homestead":e)}ccipReadFetch(e,t,r){return Ld(this,void 0,void 0,function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let e=0;e<r.length;e++){const t=r[e],o=t.replace("{sender}",n).replace("{data}",i),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),c=yield wd({url:o,errorPassThrough:!0},a,(e,t)=>(e.status=t.statusCode,e));if(c.data)return c.data;const u=c.message||"unknown error";if(c.status>=400&&c.status<500)return Bd.throwError(`response not found during CCIP fetch: ${u}`,pn.errors.SERVER_ERROR,{url:t,errorMessage:u});s.push(u)}return Bd.throwError(`error encountered during CCIP fetch: ${s.map(e=>JSON.stringify(e)).join(", ")}`,pn.errors.SERVER_ERROR,{urls:r,errorMessages:s})})}_getInternalBlockNumber(e){return Ld(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(Hd()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=Hd(),r=Ns({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Hd();return(e=As.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}});return this._internalBlockNumber=r,r.catch(e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Ld(this,void 0,void 0,function*(){const e=of++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Bd.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Bd.makeError("network block skew detected",pn.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const s=this.getLogs(n).then(t=>{e._inflight=!1,0!==t.length&&t.forEach(t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)})}).catch(t=>{this.emit("error",t),e._inflight=!1});t.push(s)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Ld(this,void 0,void 0,function*(){return Bd.throwError("provider does not support network detection",pn.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Ld(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield jd(0),this._network;const r=Bd.makeError("underlying network changed",pn.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Hd();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Hd(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Ld(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return Ld(this,void 0,void 0,function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise((i,s)=>{const o=[];let a=!1;const c=function(){return!!a||(a=!0,o.forEach(e=>{e()}),!1)},u=e=>{e.confirmations<t||c()||i(e)};if(this.on(e,u),o.push(()=>{this.removeListener(e,u)}),n){let r=n.startBlock,i=null;const u=o=>Ld(this,void 0,void 0,function*(){a||(yield jd(1e3),this.getTransactionCount(n.from).then(l=>Ld(this,void 0,void 0,function*(){if(!a){if(l<=n.nonce)r=o;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=o;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const o=r.transactions[i];if(o.hash===e)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,t);if(c())return;let i="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?i="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(i="cancelled"),void s(Bd.makeError("transaction was replaced",pn.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(o),hash:e,receipt:r}))}}i++}}a||this.once("block",u)}}),e=>{a||this.once("block",u)}))});if(a)return;this.once("block",u),o.push(()=>{this.removeListener("block",u)})}if("number"==typeof r&&r>0){const e=setTimeout(()=>{c()||s(Bd.makeError("timeout exceeded",pn.errors.TIMEOUT,{timeout:r}))},r);e.unref&&e.unref(),o.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return Ld(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return As.from(e)}catch(t){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return As.from(n)}catch(e){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return As.from(n).toNumber()}catch(e){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ns({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return Rn(n)}catch(e){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ns({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>Cn(e))}),i=yield this.perform("getStorageAt",n);try{return Rn(i)}catch(e){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==Sn(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&Bd.throwError("Transaction hash mismatch from Provider.sendTransaction.",pn.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>Ld(this,void 0,void 0,function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const s=yield this._waitForTransaction(e.hash,t,n,i);return null==s&&0===t?null:(this._emitted["t:"+e.hash]=s.blockNumber,0===s.status&&Bd.throwError("transaction failed",pn.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:s}),s)}),n}sendTransaction(e){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>Rn(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}})}_getTransactionRequest(e){return Ld(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?As.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?Rn(e):null))}),this.formatter.transactionRequest(yield Ns(r))})}_getFilter(e){return Ld(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Ns(t))})}_call(e,t,r){return Ld(this,void 0,void 0,function*(){r>=10&&Bd.throwError("CCIP read exceeded maximum redirections",pn.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&Sn(i)%32==4)try{const s=Nn(i,4),o=Nn(s,0,32);As.from(o).eq(n)||Bd.throwError("CCIP Read sender did not match",pn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const a=[],c=As.from(Nn(s,32,64)).toNumber(),u=As.from(Nn(s,c,c+32)).toNumber(),l=Nn(s,c+32);for(let t=0;t<u;t++){const r=$d(l,32*t);null==r&&Bd.throwError("CCIP Read contained corrupt URL string",pn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),a.push(r)}const h=Xd(s,64);As.from(Nn(s,100,128)).isZero()||Bd.throwError("CCIP Read callback selector included junk",pn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const d=Nn(s,96,100),f=Xd(s,128),p=yield this.ccipReadFetch(e,h,a);null==p&&Bd.throwError("CCIP Read disabled or provided no URLs",pn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const m={to:n,data:Pn([d,rf([p,f])])};return this._call(m,t,r+1)}catch(e){if(e.code===pn.errors.SERVER_ERROR)throw e}try{return Rn(i)}catch(r){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}})}call(e,t){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ns({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ns({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return As.from(r)}catch(e){return Bd.throwError("bad result from backend",pn.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return Ld(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&Bd.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&Bd.throwError("ENS name not configured",pn.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Ld(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(Tn(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),Tn(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){Bd.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return vd(()=>Ld(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map(e=>this._wrapTransaction(e)),r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Ld(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return vd(()=>Ld(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return Ld(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return vd(()=>Ld(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}),{oncePoll:this})})}getLogs(e){return Ld(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ns({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),Od.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Ld(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Ld(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&Bd.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Ld(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new nf(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return Ld(this,void 0,void 0,function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||Bd.throwError("network does not support ENS",pn.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+ga(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return Ld(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(Tn(e))throw t}"string"!=typeof e&&Bd.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Ld(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=$d(yield this.call({to:r,data:"0x691f3431"+ga(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return Ld(this,void 0,void 0,function*(){let t=null;if(Tn(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new nf(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==pn.errors.CALL_EXCEPTION)throw e}try{const e=$d(yield this.call({to:n,data:"0x691f3431"+ga(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==pn.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url})}perform(e,t){return Bd.throwError(e+" not implemented",pn.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new zd(Gd(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=Gd(e);return this._events=this._events.filter(e=>e.tag!==i||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(n.push(e),!1))),n.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=Gd(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=Gd(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=Gd(e);return this._events=this._events.filter(e=>e.tag!==i||e.listener!=t||(!!n||(n=!0,r.push(e),!1))),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Gd(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var cf=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const uf=new pn(Pd),lf=["call","estimateGas"];function hf(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=Tn(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=hf(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return hf(JSON.parse(e),t)}catch(e){}return null}function df(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=hf(t,!0);if(e)return e.data;uf.throwError("missing revert data in call exception; Transaction reverted without a reason string",pn.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=hf(t.body,!1);null==r&&(r=hf(t,!1)),r&&uf.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pn.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let i=t.message;throw t.code===pn.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?i=t.error.message:"string"==typeof t.body?i=t.body:"string"==typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&uf.throwError("insufficient funds for intrinsic transaction cost",pn.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),i.match(/nonce (is )?too low/i)&&uf.throwError("nonce has already been used",pn.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&uf.throwError("replacement fee too low",pn.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),i.match(/only replay-protected/i)&&uf.throwError("legacy pre-eip-155 transactions not supported",pn.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),lf.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&uf.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pn.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function ff(e){return new Promise(function(t){setTimeout(t,e)})}function pf(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function mf(e){return e?e.toLowerCase():e}const gf={};class yf extends Wa{constructor(e,t,r){if(super(),e!==gf)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Rs(this,"provider",t),null==r&&(r=0),"string"==typeof r?(Rs(this,"_address",this.provider.formatter.address(r)),Rs(this,"_index",null)):"number"==typeof r?(Rs(this,"_index",r),Rs(this,"_address",null)):uf.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return uf.throwError("cannot alter JSON-RPC Signer connection",pn.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new wf(gf,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&uf.throwError("unknown account #"+this._index,pn.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Cs(e);const t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){const r=Cs(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>cf(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&uf.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),Ns({tx:Ns(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&uf.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&uf.throwError("user rejected transaction",pn.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),df("sendTransaction",e,n)))})}signTransaction(e){return uf.throwError("signing transactions is unsupported",pn.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return cf(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield vd(()=>cf(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}})}signMessage(e){return cf(this,void 0,void 0,function*(){const t="string"==typeof e?Mo(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Rn(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&uf.throwError("user rejected signing",pn.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}})}_legacySignMessage(e){return cf(this,void 0,void 0,function*(){const t="string"==typeof e?Mo(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Rn(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&uf.throwError("user rejected signing",pn.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}})}_signTypedData(e,t,r){return cf(this,void 0,void 0,function*(){const n=yield Da.resolveNames(e,t,r,e=>this.provider.resolveName(e)),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Da.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&uf.throwError("user rejected signing",pn.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}}),e}})}unlock(e){return cf(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class wf extends yf{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const vf={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Af extends af{constructor(e,t){let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=Ss(this.constructor,"defaultUrl")()),Rs(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Cs(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return cf(this,void 0,void 0,function*(){yield ff(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=Ss(this.constructor,"getNetwork");try{return t(As.from(e).toNumber())}catch(t){return uf.throwError("could not detect network",pn.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return uf.throwError("could not detect network",pn.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new yf(gf,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Ds(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=wd(this.connection,JSON.stringify(r),pf).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return n&&(this._cache[e]=i,setTimeout(()=>{this._cache[e]=null},0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[mf(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[mf(t.address),t.blockTag]];case"getCode":return["eth_getCode",[mf(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[mf(t.address),xn(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Ss(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Ss(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=mf(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return cf(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&As.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Cs(t)).transaction=Cs(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&uf.throwError(e+" not implemented",pn.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return df(e,r,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return ff(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Cs(vf);if(t)for(const e in t)t[e]&&(r[e]=!0);Ps(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;const r=Cn(As.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=Rn(e[t]))}),e.accessList&&(n.accessList=zl(e.accessList)),n}}let bf=null;try{if(bf=WebSocket,null==bf)throw new Error("inject please")}catch(e){const t=new pn(Pd);bf=function(){t.throwError("WebSockets not supported in this environment",pn.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ef=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const _f=new pn(Pd);let kf=1;class Tf extends Af{constructor(e,t){"any"===t&&_f.throwError("WebSocketProvider does not support 'any' network yet",pn.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,Rs(this,"_websocket","string"==typeof e?new bf(this.connection.url):e),Rs(this,"_requests",{}),Rs(this,"_subs",{}),Rs(this,"_subIds",{}),Rs(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(e=>{this.websocket.send(this._requests[e].payload)})},this.websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),Rs(e,"code",r.error.code||null),Rs(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){_f.throwError("cannot reset events block on WebSocketProvider",pn.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){_f.throwError("cannot set polling interval on WebSocketProvider",pn.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ef(this,void 0,void 0,function*(){return null})}set polling(e){e&&_f.throwError("cannot set polling on WebSocketProvider",pn.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=kf++;return new Promise((n,i)=>{const s=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(s),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?i(e):n(t)},payload:s},this._wsReady&&this.websocket.send(s)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Ef(this,void 0,void 0,function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then(e=>this.send("eth_subscribe",e)),this._subIds[e]=n);const i=yield n;this._subs[i]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],e=>{const t=As.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then(e=>{e&&this.emit(t,e)})};t(e),this._subscribe("tx",["newHeads"],e=>{this._events.filter(e=>"tx"===e.type).forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter(e=>"tx"===e.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then(e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))}))}destroy(){return Ef(this,void 0,void 0,function*(){this.websocket.readyState===bf.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var If=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Rf=new pn(Pd);class Sf extends Af{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return If(this,void 0,void 0,function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||Rf.throwError("no network detected",pn.errors.UNKNOWN_ERROR,{}),null==this._network&&(Rs(this,"_network",t),this.emit("network",t,null))),t})}}class Nf extends Sf{constructor(e,t){Rf.checkAbstract(new.target,Nf),e=Ss(new.target,"getNetwork")(e),t=Ss(new.target,"getApiKey")(t);super(Ss(new.target,"getUrl")(e,t),e),"string"==typeof t?Rs(this,"apiKey",t):null!=t&&Object.keys(t).forEach(e=>{Rs(this,e,t[e])})}_startPending(){Rf.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Rf.throwError("API provider does not support signing",pn.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return Rf.throwError("not implemented; sub-classes must override getUrl",pn.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Pf=new pn(Pd),Cf="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Of extends Tf{constructor(e,t){const r=new xf(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),Rs(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Cf}}class xf extends Nf{static getWebSocketProvider(e,t){return new Of(e,t)}static getApiKey(e){return null==e?Cf:(e&&"string"!=typeof e&&Pf.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"sepolia":r="eth-sepolia.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"arbitrum-sepolia":r="arb-sepolia.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;case"optimism-sepolia":r="opt-sepolia.g.alchemy.com/v2/";break;default:Pf.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===Cf&&Ud(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Cf}}const Mf=new pn(Pd),Df="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Uf(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"sepolia":return"rpc.ankr.com/eth_sepolia/";case"matic":return"rpc.ankr.com/polygon/";case"maticmum":return"rpc.ankr.com/polygon_mumbai/";case"optimism":return"rpc.ankr.com/optimism/";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet/";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Mf.throwArgumentError("unsupported network","name",e)}class Lf extends Nf{isCommunityResource(){return this.apiKey===Df}static getApiKey(e){return null==e?Df:e}static getUrl(e,t){null==t&&(t=Df);const r={allowGzip:!0,url:"https://"+Uf(e.name)+t,throttleCallback:(e,r)=>(t.apiKey===Df&&Ud(),Promise.resolve(!0))};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r}}var Bf=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ff=new pn(Pd);class qf extends Nf{static getApiKey(e){return null!=e&&Ff.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;if("homestead"===e.name)r="https://cloudflare-eth.com/";else Ff.throwArgumentError("unsupported network","network",arguments[0]);return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Bf(this,void 0,void 0,function*(){if("getBlockNumber"===e){return(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number}return r.perform.call(this,e,t)})}}var Gf=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Hf=new pn(Pd);function jf(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?Cn(Rn(n)):"accessList"===r?"["+zl(n).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]":Rn(n),t[r]=n)}return t}function Kf(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function zf(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function Wf(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function Vf(e,t,r){if("call"===e&&t.code===pn.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),Tn(r))return r;Hf.throwError("missing revert data in call exception",pn.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===pn.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&Hf.throwError("insufficient funds for intrinsic transaction cost",pn.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&Hf.throwError("nonce has already been used",pn.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&Hf.throwError("replacement fee too low",pn.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&Hf.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",pn.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class Jf extends af{constructor(e,t){super(e),Rs(this,"baseUrl",this.getBaseUrl()),Rs(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return Hf.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e},""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return Gf(this,void 0,void 0,function*(){const n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,s="proxy"===e?zf:Kf;this.emit("debug",{action:"request",request:n,provider:this});const o={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&Ud(),Promise.resolve(!0))};let a=null;i&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(i).map(e=>`${e}=${i[e]}`).join("&"));const c=yield wd(o,a,s||zf);return this.emit("debug",{action:"response",request:n,response:Ds(c),provider:this}),c})}detectNetwork(){return Gf(this,void 0,void 0,function*(){return this.network})}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return Gf(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(e=>Vf("sendTransaction",e,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=jf(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return Vf("call",e,t.transaction)}}case"estimateGas":{const e=jf(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return Vf("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=Wf(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=Wf(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&Hf.throwError("unsupported topic count",pn.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||Hf.throwError("unsupported topic format",pn.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return Gf(this,void 0,void 0,function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map(e=>{["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t})})}isCommunityResource(){return null==this.apiKey}}var Yf=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Qf=new pn(Pd);function $f(){return(new Date).getTime()}function Xf(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||Qf.throwArgumentError("provider mismatch","networks",e):t=n}return t}function Zf(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function ep(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(As.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map(e=>ep(e)));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map(t=>{let r=e[t];return r="function"==typeof r?"[function]":ep(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let tp=1;function rp(e){let t=null,r=null,n=new Promise(n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)});return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const np=[pn.errors.CALL_EXCEPTION,pn.errors.INSUFFICIENT_FUNDS,pn.errors.NONCE_EXPIRED,pn.errors.REPLACEMENT_UNDERPRICED,pn.errors.UNPREDICTABLE_GAS_LIMIT],ip=["address","args","errorArgs","errorSignature","method","transaction"];function sp(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function op(e,t,r){let n=ep;switch(t){case"getBlockNumber":return function(t){const r=t.map(e=>e.result);let n=Zf(t.map(e=>e.result),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map(e=>e.result);return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return Zf(e.map(e=>e.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=Cs(e)).confirmations=-1,ep(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=Cs(e)).transactions=e.transactions.map(e=>((e=Cs(e)).confirmations=-1,e)),ep(e))}:function(e){return null==e?null:ep(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach(t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++});const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}function ap(e,t){return Yf(this,void 0,void 0,function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:vd(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function cp(e,t,r,n){return Yf(this,void 0,void 0,function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&Tn(n.blockTag)&&(i=yield ap(e,t)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&Tn(n.blockTag)&&(i=yield ap(e,t)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&Tn(n.blockTag)&&(i=yield ap(e,t)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&Tn(n.blockTag)&&(i=yield ap(e,t)),"call"===r&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&Tn(r.fromBlock)||r.toBlock&&Tn(r.toBlock))&&(i=yield ap(e,t)),i.getLogs(r)}}return Qf.throwError("unknown method error",pn.errors.UNKNOWN_ERROR,{method:r,params:n})})}class up extends af{constructor(e,t){0===e.length&&Qf.throwArgumentError("missing providers","providers",e);const r=e.map((e,t)=>{if(Ga.isProvider(e)){const t=Md(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=Cs(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=Md(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&Qf.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)}),n=r.reduce((e,t)=>e+t.weight,0);null==t?t=n/2:t>n&&Qf.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=Xf(r.map(e=>e.provider.network));null==i&&(i=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(e,t)},0)})),super(i),Rs(this,"providerConfigs",Object.freeze(r)),Rs(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Yf(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()));return Xf(e)})}perform(e,t){return Yf(this,void 0,void 0,function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map(e=>e.provider.sendTransaction(t.signedTransaction).then(e=>e.hash,e=>e)));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=op(this,e,t),n=function(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(this.providerConfigs.map(Cs));n.sort((e,t)=>e.priority-t.priority);const i=this._highestBlockNumber;let s=0,o=!0;for(;;){const a=$f();let c=n.filter(e=>e.runner&&a-e.start<e.stallTimeout).reduce((e,t)=>e+t.weight,0);for(;c<this.quorum&&s<n.length;){const r=n[s++],o=tp++;r.start=$f(),r.staller=rp(r.stallTimeout),r.staller.wait(()=>{r.staller=null}),r.runner=cp(r,i,e,t).then(n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:sp(r,$f()),request:{method:e,params:Ds(t)},provider:this})},n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:sp(r,$f()),request:{method:e,params:Ds(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:o,backend:sp(r,null),request:{method:e,params:Ds(t)},provider:this}),c+=r.weight}const u=[];n.forEach(e=>{!e.done&&e.runner&&(u.push(e.runner),e.staller&&u.push(e.staller.getPromise()))}),u.length&&(yield Promise.race(u));const l=n.filter(e=>e.done&&null==e.error);if(l.length>=this.quorum){const e=r(l);if(void 0!==e)return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),e;o||(yield rp(100).getPromise()),o=!1}const h=n.reduce((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return np.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e},{});if(Object.keys(h).forEach(e=>{const t=h[e];if(t.weight<this.quorum)return;n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0});const r=t.error,i={};ip.forEach(e=>{null!=r[e]&&(i[e]=r[e])}),Qf.throwError(r.reason||r.message,e,i)}),0===n.filter(e=>!e.done).length)break}return n.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),Qf.throwError("failed to meet quorum",pn.errors.SERVER_ERROR,{method:e,params:t,results:n.map(e=>sp(e)),provider:this})})}}const lp=new pn(Pd),hp="84842078b09946638c03157f83405213";class dp extends Tf{constructor(e,t){const r=new fp(e,t),n=r.connection;n.password&&lp.throwError("INFURA WebSocket project secrets unsupported",pn.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),Rs(this,"apiKey",r.projectId),Rs(this,"projectId",r.projectId),Rs(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===hp}}class fp extends Nf{static getWebSocketProvider(e,t){return new dp(e,t)}static getApiKey(e){const t={apiKey:hp,projectId:hp,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(lp.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),lp.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"optimism-sepolia":r="optimism-sepolia.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;case"arbitrum-sepolia":r="arbitrum-sepolia.infura.io";break;default:lp.throwError("unsupported network",pn.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===hp&&Ud(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===hp}}const pp=new pn(Pd);class mp extends Nf{static getApiKey(e){return e&&"string"!=typeof e&&pp.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){pp.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:pp.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const gp=new pn(Pd),yp="62e1ad51b37b8e00394bda3b";class wp extends Nf{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=yp:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:gp.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:gp.throwError("unsupported network",pn.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===yp}}const vp=new pn(Pd);class Ap extends Nf{static getApiKey(e){return e&&"string"!=typeof e&&vp.throwArgumentError("invalid apiKey","apiKey",e),e||"919b412a057b5e9c9b6dce193c5a60242d6efadb"}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="ethers.quiknode.pro";break;case"goerli":r="ethers.ethereum-goerli.quiknode.pro";break;case"sepolia":r="ethers.ethereum-sepolia.quiknode.pro";break;case"holesky":r="ethers.ethereum-holesky.quiknode.pro";break;case"arbitrum":r="ethers.arbitrum-mainnet.quiknode.pro";break;case"arbitrum-goerli":r="ethers.arbitrum-goerli.quiknode.pro";break;case"arbitrum-sepolia":r="ethers.arbitrum-sepolia.quiknode.pro";break;case"base":r="ethers.base-mainnet.quiknode.pro";break;case"base-goerli":r="ethers.base-goerli.quiknode.pro";break;case"base-spolia":r="ethers.base-sepolia.quiknode.pro";break;case"bnb":r="ethers.bsc.quiknode.pro";break;case"bnbt":r="ethers.bsc-testnet.quiknode.pro";break;case"matic":r="ethers.matic.quiknode.pro";break;case"maticmum":r="ethers.matic-testnet.quiknode.pro";break;case"optimism":r="ethers.optimism.quiknode.pro";break;case"optimism-goerli":r="ethers.optimism-goerli.quiknode.pro";break;case"optimism-sepolia":r="ethers.optimism-sepolia.quiknode.pro";break;case"xdai":r="ethers.xdai.quiknode.pro";break;default:vp.throwArgumentError("unsupported network","network",arguments[0])}return"https://"+r+"/"+t}}const bp=new pn(Pd);let Ep=1;function _p(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:Ep++,jsonrpc:"2.0"};return new Promise((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:Ds(i),provider:this}),t(i,(t,s)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this}),s.error){const e=new Error(s.error.message);return e.code=s.error.code,e.data=s.error.data,n(e)}e(s.result)})})}}class kp extends Af{constructor(e,t){null==e&&bp.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Ds(n),provider:this}),e.request(n).then(e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e})}}(e)):e.sendAsync?n=_p(0,e.sendAsync.bind(e)):e.send?n=_p(0,e.send.bind(e)):bp.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),Rs(this,"jsonRpcFetchFunc",n),Rs(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Tp=new pn(Pd);var Ip,Rp,Sp=Object.freeze({__proto__:null,AlchemyProvider:xf,AlchemyWebSocketProvider:Of,AnkrProvider:Lf,BaseProvider:af,CloudflareProvider:qf,EtherscanProvider:Jf,FallbackProvider:up,Formatter:Od,InfuraProvider:fp,InfuraWebSocketProvider:dp,IpcProvider:null,JsonRpcBatchProvider:class extends Af{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise((e,t)=>{n.resolve=e,n.reject=t});return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map(e=>e.request);return this.emit("debug",{action:"requestBatch",request:Ds(t),provider:this}),wd(this.connection,JSON.stringify(t)).then(r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)})},r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach(e=>{e.reject(r)})})},10)),i}},JsonRpcProvider:Af,JsonRpcSigner:yf,NodesmithProvider:mp,PocketProvider:wp,Provider:Ga,QuickNodeProvider:Ap,Resolver:nf,StaticJsonRpcProvider:Sf,UrlJsonRpcProvider:Nf,Web3Provider:kp,WebSocketProvider:Tf,getDefaultProvider:function(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new Af(e);case"ws":case"wss":return new Tf(e);default:Tp.throwArgumentError("unsupported URL scheme","network",e)}}const r=hd(e);return r&&r._defaultProvider||Tp.throwError("unsupported getDefaultProvider network",pn.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:up,AlchemyProvider:xf,AnkrProvider:Lf,CloudflareProvider:qf,EtherscanProvider:Jf,InfuraProvider:fp,JsonRpcProvider:Af,NodesmithProvider:mp,PocketProvider:wp,QuickNodeProvider:Ap,Web3Provider:kp,IpcProvider:null},t)},getNetwork:hd,isCommunityResourcable:xd,isCommunityResource:Md,showThrottleMessage:Ud}),Np="init",Pp="logout",Cp="getEthereumProvider",Op="configureEmbeddedWallet",xp="createEmbeddedWallet",Mp="recoverEmbeddedWallet",Dp="listWallets",Up="getWallet",Lp="logInWithEmailPassword",Bp="signUpWithEmailPassword",Fp="signUpGuest",qp="linkEmailPassword",Gp="unlinkEmailPassword",Hp="requestEmailVerification",jp="resetPassword",Kp="requestResetPassword",zp="verifyEmail",Wp="initOAuth",Vp="initLinkOAuth",Jp="unlinkOAuth",Yp="poolOAuth",Qp="initSIWE",$p="authenticateWithSIWE",Xp="linkWallet",Zp="unlinkWallet",em="storeCredentials",tm="sendSignatureTransactionIntentRequest",rm="signMessage",nm="signTypedData",im="getEmbeddedState",sm="getAccessToken",om="getUser",am="validateAndRefreshToken",cm="setThirdPartyToken",um={},lm=function(e){var t=JSON.stringify(e);console.log("callbackToGame: ".concat(t)),console.log(t),void 0!==window.ue?void 0===window.ue.jsconnector?console.error("Unreal JSConnector not defined"):window.ue.jsconnector.sendtogame(t):"undefined"!=typeof blu_event?blu_event("sendtogame",t):"undefined"!=typeof UnityPostMessage?UnityPostMessage(t):void 0!==window.parent.unityWebView?window.parent.unityWebView.sendMessage("WebViewObject",t):void 0!==window.Unity?window.Unity.call(t):console.error("No available game callbacks to call from OpenfortSDK platform-bridge")};window.requestAccessToken=function(){return new Promise(function(e,t){var r=Date.now()+Math.random();um[r]={resolve:e,reject:t},lm({responseFor:cm,requestId:r,success:!0})})},window.onAccessTokenReceived=function(e,t){um[e]&&(um[e].resolve(t),delete um[e])},window.callFunction=function(n){return t(void 0,void 0,void 0,function(){var i,s,o,a,c,u,l,h,d,f,p,m,g,y,w,v,A,b,E,_,k,T,I,R;return r(this,function(S){switch(S.label){case 0:console.log("Call function ".concat(n)),i=null,s=null,S.label=1;case 1:switch(S.trys.push([1,70,,71]),o=JSON.parse(n),i=o.fxName,s=o.requestId,a=o.data,i){case Np:return[3,2];case Wp:return[3,3];case Pp:return[3,5];case Vp:return[3,7];case Jp:return[3,9];case Yp:return[3,11];case Qp:return[3,13];case $p:return[3,15];case Xp:return[3,17];case Zp:return[3,19];case em:return[3,21];case tm:return[3,23];case rm:return[3,25];case nm:return[3,27];case im:return[3,29];case am:return[3,31];case xp:return[3,33];case Mp:return[3,35];case Up:return[3,37];case Dp:return[3,39];case Op:return[3,41];case Kp:return[3,43];case jp:return[3,45];case Hp:return[3,47];case zp:return[3,49];case Gp:return[3,51];case qp:return[3,53];case Lp:return[3,55];case Fp:return[3,57];case Bp:return[3,59];case sm:return[3,61];case om:return[3,63];case Cp:return[3,65];case cm:return[3,67]}return[3,68];case 2:return E=JSON.parse(a),Ip||(c={baseConfiguration:{publishableKey:E.publishableKey,nativeAppIdentifier:E.nativeAppIdentifier},shieldConfiguration:E.shieldPublishableKey?{shieldPublishableKey:E.shieldPublishableKey,shieldDebug:null!==(k=E.shieldDebug)&&void 0!==k&&k}:void 0,thirdPartyAuth:(null===(T=E.thirdPartyAuth)||void 0===T?void 0:T.provider)?{provider:E.thirdPartyAuth.provider,getAccessToken:function(){return t(void 0,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,window.requestAccessToken()];case 1:return[2,e.sent()]}})})}}:void 0,overrides:{backendUrl:null!==(I=null==E?void 0:E.backendUrl)&&void 0!==I?I:"https://api.openfort.io",iframeUrl:null==E?void 0:E.iframeUrl,shieldUrl:null!==(R=null==E?void 0:E.shieldUrl)&&void 0!==R?R:"https://shield.openfort.io"}},Ip=new hs(c),console.log("Openfort client initialized")),nd.createRandom(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 3:return E=JSON.parse(a),[4,Ip.auth.initOAuth({provider:E.provider,options:e(e({},E.options),{usePooling:E.usePooling})})];case 4:return u=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},u)),[3,69];case 5:return[4,Ip.auth.logout()];case 6:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 7:return E=JSON.parse(a),[4,Ip.auth.initLinkOAuth({authToken:E.authToken,provider:E.provider,options:E.options})];case 8:return l=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},l)),[3,69];case 9:return E=JSON.parse(a),[4,Ip.auth.unlinkOAuth({authToken:E.authToken,provider:E.provider})];case 10:return A=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},A)),[3,69];case 11:return E=JSON.parse(a),[4,Ip.auth.poolOAuth(E.key)];case 12:return d=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},d)),[3,69];case 13:return E=JSON.parse(a),[4,Ip.auth.initSIWE({address:E.address})];case 14:return h=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},h)),[3,69];case 15:return E=JSON.parse(a),[4,Ip.auth.authenticateWithSIWE({connectorType:E.connectorType,message:E.message,signature:E.signature,walletClientType:E.walletClientType})];case 16:return d=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},d)),[3,69];case 17:return E=JSON.parse(a),[4,Ip.auth.linkWallet({authToken:E.authToken,connectorType:E.connectorType,message:E.message,signature:E.signature,walletClientType:E.walletClientType})];case 18:return A=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},A)),[3,69];case 19:return E=JSON.parse(a),[4,Ip.auth.unlinkWallet({address:E.address,authToken:E.authToken})];case 20:return A=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},A)),[3,69];case 21:return E=JSON.parse(a),[4,Ip.auth.storeCredentials({accessToken:E.accessToken,refreshToken:E.refreshToken,player:E.player})];case 22:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 23:return E=JSON.parse(a),[4,Ip.proxy.sendSignatureTransactionIntentRequest(E.transactionIntentId,E.userOperationHash,E.signature,E.optimistic)];case 24:return f=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},f)),[3,69];case 25:return E=JSON.parse(a),[4,Ip.embeddedWallet.signMessage(E.message,E.options)];case 26:return p=S.sent(),lm({responseFor:i,requestId:s,success:!0,result:p}),[3,69];case 27:return E=JSON.parse(a),[4,Ip.embeddedWallet.signTypedData(E.domain,E.types,E.value)];case 28:return p=S.sent(),lm({responseFor:i,requestId:s,success:!0,result:p}),[3,69];case 29:return[4,Ip.embeddedWallet.getEmbeddedState()];case 30:return m=S.sent(),lm({responseFor:i,requestId:s,success:!0,result:m}),[3,69];case 31:return E=JSON.parse(a),[4,Ip.validateAndRefreshToken(E.forceRefresh)];case 32:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 33:return E=JSON.parse(a),[4,Ip.embeddedWallet.create({chainType:E.chainType,accountType:E.accountType,recoveryParams:E.recoveryParams})];case 34:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 35:return E=JSON.parse(a),[4,Ip.embeddedWallet.recover({account:E.accountAddress,recoveryParams:E.recoveryParams})];case 36:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 37:return[4,Ip.embeddedWallet.get()];case 38:return g=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},g)),[3,69];case 39:return E=JSON.parse(a),[4,Ip.embeddedWallet.list(e({},E))];case 40:return y=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},y)),[3,69];case 41:return E=JSON.parse(a),[4,Ip.embeddedWallet.configure({chainId:E.chainId,recoveryParams:E.recoveryParams})];case 42:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 43:return E=JSON.parse(a),[4,Ip.auth.requestResetPassword({email:E.email,redirectUrl:E.redirectUrl})];case 44:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 45:return E=JSON.parse(a),[4,Ip.auth.resetPassword({email:E.email,password:E.password,state:E.state})];case 46:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 47:return E=JSON.parse(a),[4,Ip.auth.requestEmailVerification({email:E.email,redirectUrl:E.redirectUrl})];case 48:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 49:return E=JSON.parse(a),[4,Ip.auth.verifyEmail({email:E.email,state:E.state})];case 50:return S.sent(),lm({responseFor:i,requestId:s,success:!0}),[3,69];case 51:return E=JSON.parse(a),[4,Ip.auth.unlinkEmailPassword({email:E.email,authToken:E.authToken})];case 52:return w=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},w)),[3,69];case 53:return E=JSON.parse(a),[4,Ip.auth.linkEmailPassword({email:E.email,password:E.password,authToken:E.authToken})];case 54:return w=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},w)),[3,69];case 55:return E=JSON.parse(a),[4,Ip.auth.logInWithEmailPassword({email:E.email,password:E.password})];case 56:return w=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},w)),[3,69];case 57:return[4,Ip.auth.signUpGuest()];case 58:return w=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},w)),[3,69];case 59:return E=JSON.parse(a),[4,Ip.auth.signUpWithEmailPassword({email:E.email,password:E.password,options:E.options})];case 60:return w=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},w)),[3,69];case 61:return[4,Ip.getAccessToken()];case 62:return v=S.sent(),lm({responseFor:i,requestId:s,success:!0,result:v}),[3,69];case 63:return[4,Ip.user.get()];case 64:return A=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},A)),[3,69];case 65:return[4,Ip.embeddedWallet.getEthereumProvider()];case 66:return b=S.sent(),lm(e({responseFor:i,requestId:s,success:!0},b)),[3,69];case 67:return E=JSON.parse(a),window.onAccessTokenReceived(s,E.token),[3,69];case 68:return[3,69];case 69:return[3,71];case 70:return _=S.sent(),console.log(_),lm({responseFor:i,requestId:s,success:!1,error:_.message,errorType:_ instanceof mr?_.type:null}),[3,71];case 71:return[2]}})})},console.log("index.ts loaded"),Rp=function(){lm({responseFor:"init",requestId:"1",success:!0})},"complete"===document.readyState?Rp():window.addEventListener("load",Rp);const hm="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,dm=globalThis,fm="9.47.1";function pm(){return mm(dm),dm}function mm(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||fm,t[fm]=t[fm]||{}}function gm(e,t,r=dm){const n=r.__SENTRY__=r.__SENTRY__||{},i=n[fm]=n[fm]||{};return i[e]||(i[e]=t())}const ym={};function wm(e){if(!("console"in dm))return e();const t=dm.console,r={},n=Object.keys(ym);n.forEach(e=>{const n=ym[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}function vm(){return bm().enabled}function Am(e,...t){hm&&vm()&&wm(()=>{dm.console[e](`Sentry Logger [${e}]:`,...t)})}function bm(){return hm?gm("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Em={enable:function(){bm().enabled=!0},disable:function(){bm().enabled=!1},isEnabled:vm,log:function(...e){Am("log",...e)},warn:function(...e){Am("warn",...e)},error:function(...e){Am("error",...e)}},_m="?",km=/\(error: (.*)\)/,Tm=/captureMessage|captureException/;function Im(e){return e[e.length-1]||{}}const Rm="<anonymous>";const Sm=Object.prototype.toString;function Nm(e){switch(Sm.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Bm(e,Error)}}function Pm(e,t){return Sm.call(e)===`[object ${t}]`}function Cm(e){return Pm(e,"ErrorEvent")}function Om(e){return Pm(e,"DOMError")}function xm(e){return Pm(e,"String")}function Mm(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Dm(e){return Pm(e,"Object")}function Um(e){return"undefined"!=typeof Event&&Bm(e,Event)}function Lm(e){return Boolean(e?.then&&"function"==typeof e.then)}function Bm(e,t){try{return e instanceof t}catch{return!1}}const Fm=dm;function qm(e,t){const r=e,n=[];if(!r?.tagName)return"";if(Fm.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const i=t?.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(i?.length)i.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const e=r.className;if(e&&xm(e)){const t=e.split(/\s+/);for(const e of t)n.push(`.${e}`)}}const s=["aria-label","type","name","title","alt"];for(const e of s){const t=r.getAttribute(e);t&&n.push(`[${e}="${t}"]`)}return n.join("")}function Gm(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Hm(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{hm&&Em.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function jm(e){if(Nm(e))return{message:e.message,name:e.name,stack:e.stack,...zm(e)};if(Um(e)){const t={type:e.type,target:Km(e.target),currentTarget:Km(e.currentTarget),...zm(e)};return"undefined"!=typeof CustomEvent&&Bm(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Km(e){try{return t=e,"undefined"!=typeof Element&&Bm(t,Element)?function(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&s++<n&&(u=qm(r,l),!("html"===u||s>1&&o+i.length*c+u.length>=h));)i.push(u),o+=u.length,r=r.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function zm(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function Wm(e=function(){const e=dm;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function Vm(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Jm(e,t){const r=function(e){return e.exception?.values?.[0]}(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n?.data,...t.data};r.mechanism.data=e}}function Ym(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Hm(e,"__sentry_captured__",!0)}catch{}return!1}function Qm(){return Date.now()/1e3}let $m;function Xm(){return($m??($m=function(){const{performance:e}=dm;if(!e?.now||!e.timeOrigin)return Qm;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function Zm(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Xm(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Wm()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function eg(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;const n={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=eg(n[e],t[e],r-1));return n}function tg(){return Wm()}function rg(){return Wm().substring(16)}const ng="_sentrySpan";function ig(e,t){t?Hm(e,ng,t):delete e[ng]}function sg(e){return e[ng]}class og{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:tg(),sampleRand:Math.random()}}clone(){const e=new og;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,ig(e,sg(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Zm(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,r=t instanceof og?t.getScopeData():Dm(t)?e:void 0,{tags:n,extra:i,user:s,contexts:o,level:a,fingerprint:c=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...i},this._contexts={...this._contexts,...o},s&&Object.keys(s).length&&(this._user=s),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ig(this,void 0),this._attachments=[],this.setPropagationContext({traceId:tg(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:Qm(),...e,message:e.message?Gm(e.message,2048):e.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:sg(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=eg(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t?.event_id||Wm();if(!this._client)return hm&&Em.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r?.event_id||Wm();if(!this._client)return hm&&Em.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t?.event_id||Wm();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(hm&&Em.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class ag{constructor(e,t){let r,n;r=e||new og,n=t||new og,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(e){throw this._popScope(),e}return Lm(r)?r.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function cg(){const e=mm(pm());return e.stack=e.stack||new ag(gm("defaultCurrentScope",()=>new og),gm("defaultIsolationScope",()=>new og))}function ug(e){return cg().withScope(e)}function lg(e,t){const r=cg();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function hg(e){return cg().withScope(()=>e(cg().getIsolationScope()))}function dg(e){const t=mm(e);return t.acs?t.acs:{withIsolationScope:hg,withScope:ug,withSetScope:lg,withSetIsolationScope:(e,t)=>hg(t),getCurrentScope:()=>cg().getScope(),getIsolationScope:()=>cg().getIsolationScope()}}function fg(){return dg(pm()).getCurrentScope()}function pg(){return dg(pm()).getIsolationScope()}function mg(){return gm("globalScope",()=>new og)}function gg(){return fg().getClient()}function yg(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:i}=t,s={trace_id:r,span_id:i||rg()};return n&&(s.parent_span_id=n),s}const wg="sentry.source",vg="sentry.sample_rate",Ag="sentry.op",bg="sentry.origin",Eg="sentry.profile_id",_g="sentry.exclusive_time";function kg(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}const Tg=/^sentry-/;function Ig(e){const t=function(e){if(!e||!xm(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const r=Rg(t);return Object.entries(r).forEach(([t,r])=>{e[t]=r}),e},{});return Rg(e)}(e);if(!t)return;const r=Object.entries(t).reduce((e,[t,r])=>{if(t.match(Tg)){e[t.slice(7)]=r}return e},{});return Object.keys(r).length>0?r:void 0}function Rg(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}let Sg=!1;function Ng(e){const{spanId:t,traceId:r,isRemote:n}=e.spanContext(),i=n?t:xg(e).parent_span_id,s=kg(e).scope;return{parent_span_id:i,span_id:n?s?.getPropagationContext().propagationSpanId||rg():t,trace_id:r}}function Pg(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:r,...n},attributes:i})=>({span_id:e,trace_id:t,sampled:1===r,attributes:i,...n})):void 0}function Cg(e){return"number"==typeof e?Og(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Og(e.getTime()):Xm()}function Og(e){return e>9999999999?e/1e3:e}function xg(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:n,startTime:i,name:s,endTime:o,status:a,links:c}=e;return{span_id:t,trace_id:r,data:n,description:s,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Cg(i),timestamp:Cg(o)||void 0,status:Mg(a),op:n[Ag],origin:n[bg],links:Pg(c)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Mg(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function Dg(e){return e._sentryRootSpan||e}function Ug(){Sg||(wm(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Sg=!0)}const Lg="production",Bg=/^o(\d+)\./,Fg=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qg(e,t=!1){const{host:r,path:n,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${s?`:${s}`:""}/${n?`${n}/`:n}${o}`}function Gg(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Hg(e){const t="string"==typeof e?function(e){const t=Fg.exec(e);if(!t)return void wm(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[r,n,i="",s="",o="",a=""]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Gg({host:s,pass:i,path:c,projectId:u,port:o,protocol:r,publicKey:n})}(e):Gg(e);if(t&&function(e){if(!hm)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(Em.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(Em.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Em.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(Em.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}function jg(e,t){const r=t.getOptions(),{publicKey:n,host:i}=t.getDsn()||{};let s;r.orgId?s=String(r.orgId):i&&(s=function(e){const t=e.match(Bg);return t?.[1]}(i));const o={environment:r.environment||Lg,release:r.release,public_key:n,trace_id:e,org_id:s};return t.emit("createDsc",o),o}function Kg(e){const t=gg();if(!t)return{};const r=Dg(e),n=xg(r),i=n.data,s=r.spanContext().traceState,o=s?.get("sentry.sample_rate")??i[vg]??i["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof o&&"string"!=typeof o||(e.sample_rate=`${o}`),e}const c=r._frozenDsc;if(c)return a(c);const u=s?.get("sentry.dsc"),l=u&&Ig(u);if(l)return a(l);const h=jg(e.spanContext().traceId,t),d=i[wg],f=n.description;return"url"!==d&&f&&(h.transaction=f),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||gg()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(h.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r)),h.sample_rand=s?.get("sentry.sample_rand")??kg(r).scope?.getPropagationContext().sampleRand.toString()),a(h),t.emit("createDsc",h,r),h}function zg(e,t=100,r=1/0){try{return Vg("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Wg(e,t=3,r=102400){const n=zg(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?Wg(e,t-1,r):n;var i}function Vg(e,t,r=1/0,n=1/0,i=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}()){const[s,o]=i;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if("object"==typeof(r=t)&&null!==r&&(r.__isVue||r._isVue))return"[VueViewModel]";if(function(e){return Dm(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${function(e){try{return e&&"function"==typeof e&&e.name||Rm}catch{return Rm}}(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===c)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Vg("",u.toJSON(),c-1,n,i)}catch{}const l=Array.isArray(t)?[]:{};let h=0;const d=jm(t);for(const e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;if(h>=n){l[e]="[MaxProperties ~]";break}const t=d[e];l[e]=Vg(e,t,c-1,n,i),h++}return o(t),l}function Jg(e,t=[]){return[e,t]}function Yg(e,t){const[r,n]=e;return[r,[...n,t]]}function Qg(e,t){const r=e[1];for(const e of r){if(t(e,e[0].type))return!0}return!1}function $g(e){const t=mm(dm);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function Xg(e){const[t,r]=e;let n=JSON.stringify(t);function i(e){"string"==typeof n?n="string"==typeof e?n+e:[$g(n),e]:n.push("string"==typeof e?$g(e):e)}for(const e of r){const[t,r]=e;if(i(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)i(r);else{let e;try{e=JSON.stringify(r)}catch{e=JSON.stringify(zg(r))}i(e)}}return"string"==typeof n?n:function(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(n)}function Zg(e){const t="string"==typeof e.data?$g(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const ey={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function ty(e){return ey[e]}function ry(e){if(!e?.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function ny(e,t,r,n){const i=ry(r),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r?.sdk);const o=function(e,t,r,n){const i=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:qg(n)},...i&&{trace:i}}}(e,i,n,t);delete e.sdkProcessingMetadata;return Jg(o,[[{type:s},e]])}function iy(e){return new oy(t=>{t(e)})}function sy(e){return new oy((t,r)=>{r(e)})}class oy{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new oy((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new oy((t,r)=>{let n,i;return this.then(t=>{i=!1,n=t,e&&e()},t=>{i=!0,n=t,e&&e()}).then(()=>{i?r(n):t(n)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&(Lm(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(1,e)},n=e=>{t(2,e)};try{e(r,n)}catch(e){n(e)}}}function ay(e,t,r,n=0){return new oy((i,s)=>{const o=e[n];if(null===t||"function"!=typeof o)i(t);else{const a=o({...t},r);hm&&o.id&&null===a&&Em.log(`Event processor "${o.id}" dropped event`),Lm(a)?a.then(t=>ay(e,t,r,n+1).then(i)).then(null,s):ay(e,a,r,n+1).then(i).then(null,s)}})}function cy(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:s}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:s,level:o,transactionName:a}=t;Object.keys(r).length&&(e.extra={...r,...e.extra});Object.keys(n).length&&(e.tags={...n,...e.tags});Object.keys(i).length&&(e.user={...i,...e.user});Object.keys(s).length&&(e.contexts={...s,...e.contexts});o&&(e.level=o);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:Ng(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Kg(t),...e.sdkProcessingMetadata};const r=Dg(t),n=xg(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,s)}function uy(e,t){const{extra:r,tags:n,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:h,propagationContext:d,transactionName:f,span:p}=t;ly(e,"extra",r),ly(e,"tags",n),ly(e,"user",i),ly(e,"contexts",s),e.sdkProcessingMetadata=eg(e.sdkProcessingMetadata,a,2),o&&(e.level=o),f&&(e.transactionName=f),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...d}}function ly(e,t,r){e[t]=eg(e[t],r,1)}let hy,dy,fy;function py(e,t,r,n,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||Wm(),timestamp:t.timestamp||Qm()},u=r.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:s=250}=t;e.environment=e.environment||r||Lg,!e.release&&n&&(e.release=n);!e.dist&&i&&(e.dist=i);const o=e.request;o?.url&&(o.url=Gm(o.url,s))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),i&&i.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const r=function(e){const t=dm._sentryDebugIds;if(!t)return{};const r=Object.keys(t);return fy&&r.length===dy||(dy=r.length,fy=r.reduce((r,n)=>{hy||(hy={});const i=hy[n];if(i)r[i[0]]=i[1];else{const i=e(n);for(let e=i.length-1;e>=0;e--){const s=i[e],o=s?.filename,a=t[n];if(o&&a){r[o]=a,hy[n]=[o,a];break}}}return r},{})),fy}(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}(c,e.stackParser);const l=function(e,t){if(!t)return e;const r=e?e.clone():new og;return r.update(t),r}(n,r.captureContext);r.mechanism&&Jm(c,r.mechanism);const h=i?i.getEventProcessors():[],d=mg().getScopeData();if(s){uy(d,s.getScopeData())}if(l){uy(d,l.getScopeData())}const f=[...r.attachments||[],...d.attachments];f.length&&(r.attachments=f),cy(c,d);return ay([...h,...d.eventProcessors],c,r).then(e=>(e&&function(e){const t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:zg(e.data,t,r)}}))},...e.user&&{user:zg(e.user,t,r)},...e.contexts&&{contexts:zg(e.contexts,t,r)},...e.extra&&{extra:zg(e.extra,t,r)}};e.contexts?.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=zg(e.contexts.trace.data,t,r)));e.spans&&(n.spans=e.spans.map(e=>({...e,...e.data&&{data:zg(e.data,t,r)}})));e.contexts?.flags&&n.contexts&&(n.contexts.flags=zg(e.contexts.flags,3,r));return n}(e,o,a):e))}function my(e,t,r){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}const gy=[];function yy(e,t){for(const r of t)r?.afterAllSetup&&r.afterAllSetup(e)}function wy(e,t,r){if(r[t.name])hm&&Em.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===gy.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),gy.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,n)=>r(t,n,e))}if("function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign((t,n)=>r(t,n,e),{id:t.name});e.addEventProcessor(n)}hm&&Em.log(`Integration installed: ${t.name}`)}}const vy="Not capturing exception because it's already been captured.",Ay="Discarded session because of missing or non-string release",by=Symbol.for("SentryInternalError"),Ey=Symbol.for("SentryDoNotSendEventError");function _y(e){return{message:e,[by]:!0}}function ky(e){return{message:e,[Ey]:!0}}function Ty(e){return!!e&&"object"==typeof e&&by in e}function Iy(e){return!!e&&"object"==typeof e&&Ey in e}class Ry{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Hg(e.dsn):hm&&Em.warn("No DSN provided, client will not send events."),this._dsn){const t=my(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const n=Wm();if(Ym(e))return hm&&Em.log(vy),n;const i={event_id:n,...t};return this._process(this.eventFromException(e,i).then(e=>this._captureEvent(e,i,r))),i.event_id}captureMessage(e,t,r,n){const i={event_id:Wm(),...r},s=Mm(e)?e:String(e),o=null===(a=e)||Mm(a)||"object"!=typeof a&&"function"!=typeof a?this.eventFromMessage(s,t,i):this.eventFromException(e,i);var a;return this._process(o.then(e=>this._captureEvent(e,i,n))),i.event_id}captureEvent(e,t,r){const n=Wm();if(t?.originalException&&Ym(t.originalException))return hm&&Em.log(vy),n;const i={event_id:n,...t},s=e.sdkProcessingMetadata||{},o=s.capturedSpanScope,a=s.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,o||r,a)),i.event_id}captureSession(e){this.sendSession(e),Zm(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):iy(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];wy(this,e,this._integrations),t||yy(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=ny(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=Yg(r,Zg(e));const n=this.sendEnvelope(r);n&&n.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:t,environment:r=Lg}=this._options;if("aggregates"in e){const n=e.attrs||{};if(!n.release&&!t)return void(hm&&Em.warn(Ay));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(hm&&Em.warn(Ay));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);const n=function(e,t,r,n){const i=ry(r);return Jg({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:qg(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,t,r=1){if(this._options.sendClientReports){const n=`${e}:${t}`;hm&&Em.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(hm&&Em.error("Error while sending envelope:",e),e)):(hm&&Em.error("Transport disabled"),iy({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach(t=>{t&&wy(e,t,r)}),r}(this,e),yy(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,n=!1;const i=t.exception?.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(!1===t?.handled){r=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&r)&&(Zm(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new oy(t=>{let r=0;const n=setInterval(()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){const i=this.getOptions(),s=Object.keys(this._integrations);return!t.integrations&&s?.length&&(t.integrations=s),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),py(i,e,t,r,this,n).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:yg(r),...e.contexts};const n=function(e,t){const r=t.getPropagationContext();return r.dsc||jg(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:n,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},r=fg(),n=pg()){return hm&&Sy(e)&&Em.log(`Captured error event \`${function(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r?.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}(e)[0]||"<unknown>"}\``),this._processEvent(e,t,r,n).then(e=>e.event_id,e=>{hm&&(Iy(e)?Em.log(e.message):Ty(e)?Em.warn(e.message):Em.warn(e))})}_processEvent(e,t,r,n){const i=this.getOptions(),{sampleRate:s}=i,o=Ny(e),a=Sy(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===s?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(s);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),sy(ky(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));const h="replay_event"===c?"replay":c;return this._prepareEvent(e,t,r,n).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",h),ky("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const r=function(e,t,r,n){const{beforeSend:i,beforeSendTransaction:s,beforeSendSpan:o}=t;let a=r;if(Sy(a)&&i)return i(a,n);if(Ny(a)){if(o){const e=o(function(e){const{trace_id:t,parent_span_id:r,span_id:n,status:i,origin:s,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:e.start_timestamp??0,status:i,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:o?.[Eg],exclusive_time:o?.[_g],measurements:e.measurements,is_segment:!0}}(a));if(e?a=eg(r,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Eg]:c.profile_id},...c.exclusive_time&&{[_g]:c.exclusive_time}}}},measurements:c.measurements}):Ug(),a.spans){const e=[];for(const t of a.spans){const r=o(t);r?e.push(r):(Ug(),e.push(t))}a.spans=e}}if(s){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return s(a,n)}}var c;return a}(0,i,e,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(Lm(e))return e.then(e=>{if(!Dm(e)&&null!==e)throw _y(r);return e},e=>{throw _y(`${t} rejected with ${e}`)});if(!Dm(e)&&null!==e)throw _y(r);return e}(r,u)}).then(i=>{if(null===i){if(this.recordDroppedEvent("before_send",h),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw ky(`${u} returned \`null\`, will not send event.`)}const s=r.getSession()||n.getSession();if(a&&s&&this._updateSessionFromEvent(s,i),o){const e=(i.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(i.spans?i.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=i.transaction_info;if(o&&c&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...c,source:e}}return this.sendEvent(i,t),i}).then(null,e=>{if(Iy(e)||Ty(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),_y(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[r,n]=e.split(":");return{reason:r,category:n,quantity:t}})}_flushOutcomes(){hm&&Em.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(hm&&Em.log("No outcomes to send"));if(!this._dsn)return void(hm&&Em.log("No dsn provided, will not send outcomes"));hm&&Em.log("Sending outcomes:",e);const t=(r=e,Jg((n=this._options.tunnel&&qg(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:Qm(),discarded_events:r}]]));var r,n;this.sendEnvelope(t)}}function Sy(e){return void 0===e.type}function Ny(e){return"transaction"===e.type}function Py(e,t){const r=function(e){return Cy().get(e)}(e)??[];if(0===r.length)return;const n=e.getOptions(),i=function(e,t,r,n){const i={};return t?.sdk&&(i.sdk={name:t.sdk.name,version:t.sdk.version}),r&&n&&(i.dsn=qg(n)),Jg(i,[(s=e,[{type:"log",item_count:s.length,content_type:"application/vnd.sentry.items.log+json"},{items:s}])]);var s}(r,n._metadata,n.tunnel,e.getDsn());Cy().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function Cy(){return gm("clientToLogBufferMap",()=>new WeakMap)}const Oy=Symbol.for("SentryBufferFullError");function xy(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return sy(Oy);const i=n();return-1===t.indexOf(i)&&t.push(i),i.then(()=>r(i)).then(null,()=>r(i).then(null,()=>{})),i},drain:function(e){return new oy((r,n)=>{let i=t.length;if(!i)return r(!0);const s=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{iy(e).then(()=>{--i||(clearTimeout(s),r(!0))},n)})})}}}function My(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},s=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,r,,,s]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))"metric_bucket"===e&&s&&!s.split(";").includes("custom")||(i[e]=n+a);else i.all=n+a}else o?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(o,n):429===t&&(i.all=n+6e4);return i}function Dy(e,t,r=xy(e.bufferSize||64)){let n={};return{send:function(i){const s=[];if(Qg(i,(t,r)=>{const i=ty(r);!function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)?s.push(t):e.recordDroppedEvent("ratelimit_backoff",i)}),0===s.length)return iy({});const o=Jg(i[0],s),a=t=>{Qg(o,(r,n)=>{e.recordDroppedEvent(t,ty(n))})};return r.add(()=>t({body:Xg(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&hm&&Em.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=My(n,e),e),e=>{throw a("network_error"),hm&&Em.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===Oy)return hm&&Em.error("Skipped sending event because buffer is full."),a("queue_overflow"),iy({});throw e})},flush:e=>r.drain(e)}}function Uy(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function Ly(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}const By=dm;function Fy(e,t){const r=Hy(e,t),n={type:zy(t),value:Wy(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function qy(e,t,r,n){const i=gg(),s=i?.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}return}(t),a={__serialized__:Wg(t,s)};if(o)return{exception:{values:[Fy(e,o)]},extra:a};const c={exception:{values:[{type:Um(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:Qy(t,{isUnhandledRejection:n})}]},extra:a};if(r){const t=Hy(e,r);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Gy(e,t){return{exception:{values:[Fy(e,t)]}}}function Hy(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e&&jy.test(e.message))return 1;return 0}(t),i=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,i)}catch{}return[]}const jy=/Minified React error #\d+;/i;function Ky(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function zy(e){const t=e?.name;if(!t&&Ky(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function Wy(e){const t=e?.message;return Ky(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Vy(e,t,r,n){const i=function(e,t,r,n,i){let s;if(Cm(t)&&t.error){return Gy(e,t.error)}if(Om(t)||(o=t,Pm(o,"DOMException"))){const i=t;if("stack"in t)s=Gy(e,t);else{const t=i.name||(Om(i)?"DOMError":"DOMException"),o=i.message?`${t}: ${i.message}`:t;s=Yy(e,o,r,n),Vm(s,o)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":`${i.code}`}),s}var o;if(Nm(t))return Gy(e,t);if(Dm(t)||Um(t)){return s=qy(e,t,r,i),Jm(s,{synthetic:!0}),s}return s=Yy(e,t,r,n),Vm(s,`${t}`),Jm(s,{synthetic:!0}),s}(e,t,r?.syntheticException||void 0,n);return Jm(i),i.level="error",r?.event_id&&(i.event_id=r.event_id),iy(i)}function Jy(e,t,r="info",n,i){const s=Yy(e,t,n?.syntheticException||void 0,i);return s.level=r,n?.event_id&&(s.event_id=n.event_id),iy(s)}function Yy(e,t,r,n){const i={};if(n&&r){const n=Hy(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]}),Jm(i,{synthetic:!0})}if(Mm(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function Qy(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(jm(e));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return Gm(n,t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:Gm(n,t)}return""}(e),n="exception";if(Cm(e))return`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``;if(Um(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${r}`}const $y="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Xy=dm,Zy={};function ew(e){Zy[e]=void 0}function tw(e,t,r,n){const i={filename:e,function:"<anonymous>"===t?_m:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const rw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,nw=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,iw=/\((\S*)(?::(\d+))(?::(\d+))\)/,sw=[30,e=>{const t=rw.exec(e);if(t){const[,e,r,n]=t;return tw(e,_m,+r,+n)}const r=nw.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=iw.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=hw(r[1]||_m,r[2]);return tw(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],ow=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,aw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,cw=[50,e=>{const t=ow.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=aw.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||_m;return[r,e]=hw(r,e),tw(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],uw=[sw,cw],lw=function(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,r=0,n=0)=>{const i=[],s=e.split("\n");for(let e=r;e<s.length;e++){const r=s[e];if(r.length>1024)continue;const o=km.test(r)?r.replace(km,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){i.push(t);break}}if(i.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Im(t).function||"")&&t.pop();t.reverse(),Tm.test(Im(t).function||"")&&(t.pop(),Tm.test(Im(t).function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||Im(t).filename,function:e.function||_m}))}(i.slice(n))}}(...uw),hw=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:_m,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var dw=Object.freeze({__proto__:null,BrowserClient:class extends Ry{constructor(e){const t=(r=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:By.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...r});var r;!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map(e=>({name:`${n}:@sentry/${e}`,version:fm})),version:fm}),e._metadata=i}(t,"browser",["browser"],By.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:n,sendClientReports:i,enableLogs:s,_experiments:o}=this._options,a=s??o?.enableLogs;By.document&&(i||a)&&By.document.addEventListener("visibilitychange",()=>{"hidden"===By.document.visibilityState&&(i&&this._flushOutcomes(),a&&Py(this))}),a&&(this.on("flush",()=>{Py(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Py(this)},5e3)})),n&&(this.on("postprocessEvent",Uy),this.on("beforeSendSession",Ly))}eventFromException(e,t){return Vy(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return Jy(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}},SDK_VERSION:fm,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ag,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:bg,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:vg,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:wg,Scope:og,WINDOW:By,chromeStackLineParser:sw,createTransport:Dy,defaultStackLineParsers:uw,defaultStackParser:lw,eventFromException:Vy,eventFromMessage:Jy,exceptionFromError:Fy,geckoStackLineParser:cw,getClient:gg,getCurrentScope:fg,getGlobalScope:mg,getIsolationScope:pg,getRootSpan:Dg,makeFetchTransport:function(e,t=function(e){const t=Zy[e];if(t)return t;let r=Xy[e];if((n=r)&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString()))return Zy[e]=r.bind(Xy);var n;const i=Xy.document;if(i&&"function"==typeof i.createElement)try{const t=i.createElement("iframe");t.hidden=!0,i.head.appendChild(t);const n=t.contentWindow;n?.[e]&&(r=n[e]),i.head.removeChild(t)}catch(t){$y&&Em.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return r?Zy[e]=r.bind(Xy):r}("fetch")){let r=0,n=0;return Dy(e,function(i){const s=i.body.length;r+=s,n++;const o={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};if(!t)return ew("fetch"),sy("No fetch implementation available");try{return t(e.url,o).then(e=>(r-=s,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return ew("fetch"),r-=s,n--,sy(e)}})},spanToJSON:xg})}();

    </script>
</head>
<body>
    <h1>Bridge Running</h1>
</body>
</html>