<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Platform Bridge</title>
    <script>
!function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},e.apply(this,arguments)};function t(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})}function r(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(s=i.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){i.label=a[1];break}if(6===a[0]&&i.label<s[1]){i.label=s[1],s=a;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(a);break}s[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function n(e,t){return function(){return e.apply(t,arguments)}}"function"==typeof SuppressedError&&SuppressedError;const{toString:s}=Object.prototype,{getPrototypeOf:i}=Object,{iterator:o,toStringTag:a}=Symbol,c=(u=Object.create(null),e=>{const t=s.call(e);return u[t]||(u[t]=t.slice(8,-1).toLowerCase())});var u;const h=e=>(e=e.toLowerCase(),t=>c(t)===e),l=e=>t=>typeof t===e,{isArray:d}=Array,f=l("undefined");function p(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m=h("ArrayBuffer");const g=l("string"),y=l("function"),w=l("number"),v=e=>null!==e&&"object"==typeof e,A=e=>{if("object"!==c(e))return!1;const t=i(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||a in e||o in e)},b=h("Date"),E=h("File"),S=h("Blob"),_=h("FileList"),P=h("URLSearchParams"),[k,I,R,T]=["ReadableStream","Request","Response","Headers"].map(h);function N(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,s;if("object"!=typeof e&&(e=[e]),d(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(p(e))return;const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function O(e,t){if(p(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,x=e=>!f(e)&&e!==C;const M=(U="undefined"!=typeof Uint8Array&&i(Uint8Array),e=>U&&e instanceof U);var U;const D=h("HTMLFormElement"),L=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),B=h("RegExp"),F=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};N(r,(r,s)=>{let i;!1!==(i=t(r,s,e))&&(n[s]=i||r)}),Object.defineProperties(e,n)};const q=h("AsyncFunction"),G=(j="function"==typeof setImmediate,H=y(C.postMessage),j?setImmediate:H?(z=`axios@${Math.random()}`,K=[],C.addEventListener("message",({source:e,data:t})=>{e===C&&t===z&&K.length&&K.shift()()},!1),e=>{K.push(e),C.postMessage(z,"*")}):e=>setTimeout(e));var j,H,z,K;const V="undefined"!=typeof queueMicrotask?queueMicrotask.bind(C):"undefined"!=typeof process&&process.nextTick||G;var W={isArray:d,isArrayBuffer:m,isBuffer:p,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=c(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer),t},isString:g,isNumber:w,isBoolean:e=>!0===e||!1===e,isObject:v,isPlainObject:A,isEmptyObject:e=>{if(!v(e)||p(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:k,isRequest:I,isResponse:R,isHeaders:T,isUndefined:f,isDate:b,isFile:E,isBlob:S,isRegExp:B,isFunction:y,isStream:e=>v(e)&&y(e.pipe),isURLSearchParams:P,isTypedArray:M,isFileList:_,forEach:N,merge:function e(){const{caseless:t,skipUndefined:r}=x(this)&&this||{},n={},s=(s,i)=>{const o=t&&O(n,i)||i;A(n[o])&&A(s)?n[o]=e(n[o],s):A(s)?n[o]=e({},s):d(s)?n[o]=s.slice():r&&f(s)||(n[o]=s)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&N(arguments[e],s);return n},extend:(e,t,r,{allOwnKeys:s}={})=>(N(t,(t,s)=>{r&&y(t)?Object.defineProperty(e,s,{value:n(t,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,s,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,o,a;const c={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],n&&!n(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==r&&i(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:h,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!w(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[o]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:D,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:F,freezeMethods:e=>{F(e,(t,r)=>{if(y(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];y(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return d(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:O,global:C,isContextDefined:x,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[a]&&e[o])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(v(e)){if(t.indexOf(e)>=0)return;if(p(e))return e;if(!("toJSON"in e)){t[n]=e;const s=d(e)?[]:{};return N(e,(e,t)=>{const i=r(e,n+1);!f(i)&&(s[t]=i)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:q,isThenable:e=>e&&(v(e)||y(e))&&y(e.then)&&y(e.catch),setImmediate:G,asap:V,isIterable:e=>null!=e&&y(e[o])};let J=class e extends Error{static from(t,r,n,s,i,o){const a=new e(t.message,r||t.code,n,s,i);return a.cause=t,a.name=t.name,o&&Object.assign(a,o),a}constructor(e,t,r,n,s){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}};J.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",J.ERR_BAD_OPTION="ERR_BAD_OPTION",J.ECONNABORTED="ECONNABORTED",J.ETIMEDOUT="ETIMEDOUT",J.ERR_NETWORK="ERR_NETWORK",J.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",J.ERR_DEPRECATED="ERR_DEPRECATED",J.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",J.ERR_BAD_REQUEST="ERR_BAD_REQUEST",J.ERR_CANCELED="ERR_CANCELED",J.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",J.ERR_INVALID_URL="ERR_INVALID_URL";function Y(e){return W.isPlainObject(e)||W.isArray(e)}function Q(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function $(e,t,r){return e?e.concat(t).map(function(e,t){return e=Q(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const X=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function Z(e,t,r){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=W.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!W.isUndefined(t[e])})).metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(W.isDate(e))return e.toISOString();if(W.isBoolean(e))return e.toString();if(!a&&W.isBlob(e))throw new J("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(e)||W.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(W.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(W.isArray(e)&&function(e){return W.isArray(e)&&!e.some(Y)}(e)||(W.isFileList(e)||W.endsWith(r,"[]"))&&(a=W.toArray(e)))return r=Q(r),a.forEach(function(e,n){!W.isUndefined(e)&&null!==e&&t.append(!0===o?$([r],n,i):null===o?r:r+"[]",c(e))}),!1;return!!Y(e)||(t.append($(s,r,i),c(e)),!1)}const h=[],l=Object.assign(X,{defaultVisitor:u,convertValue:c,isVisitable:Y});if(!W.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!W.isUndefined(r)){if(-1!==h.indexOf(r))throw Error("Circular reference detected in "+n.join("."));h.push(r),W.forEach(r,function(r,i){!0===(!(W.isUndefined(r)||null===r)&&s.call(t,r,W.isString(i)?i.trim():i,n,l))&&e(r,n?n.concat(i):[i])}),h.pop()}}(e),t}function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const re=te.prototype;function ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function se(e,t,r){if(!t)return e;const n=r&&r.encode||ne,s=W.isFunction(r)?{serialize:r}:r,i=s&&s.serialize;let o;if(o=i?i(t,s):W.isURLSearchParams(t)?t.toString():new te(t,s).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}re.append=function(e,t){this._pairs.push([e,t])},re.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class ie{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(t){null!==t&&e(t)})}}var oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ae={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:te,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ce="undefined"!=typeof window&&"undefined"!=typeof document,ue="object"==typeof navigator&&navigator||void 0,he=ce&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),le="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,de=ce&&window.location.href||"http://localhost";var fe={...Object.freeze({__proto__:null,hasBrowserEnv:ce,hasStandardBrowserEnv:he,hasStandardBrowserWebWorkerEnv:le,navigator:ue,origin:de}),...ae};function pe(e){function t(e,r,n,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&W.isArray(n)?n.length:i,a)return W.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o;n[i]&&W.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],s)&&W.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o}if(W.isFormData(e)&&W.isFunction(e.entries)){const r={};return W.forEachEntry(e,(e,n)=>{t(function(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const me={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=W.isObject(e);s&&W.isHTMLForm(e)&&(e=new FormData(e));if(W.isFormData(e))return n?JSON.stringify(pe(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new fe.classes.URLSearchParams,{visitor:function(e,t,r,n){return fe.isNode&&W.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=W.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||me.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(e){if(r){if("SyntaxError"===e.name)throw J.from(e,J.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{me.headers[e]={}});const ge=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ye=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function ve(e){return!1===e||null==e?e:W.isArray(e)?e.map(ve):String(e)}function Ae(e,t,r,n,s){return W.isFunction(n)?n.call(this,t,r):(s&&(t=r),W.isString(t)?W.isString(n)?-1!==t.indexOf(n):W.isRegExp(n)?n.test(t):void 0:void 0)}let be=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=we(t);if(!s)throw new Error("header name must be a non-empty string");const i=W.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=ve(e))}const i=(e,t)=>W.forEach(e,(e,r)=>s(e,r,t));if(W.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(W.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&ge[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(W.isObject(e)&&W.isIterable(e)){let r,n,s={};for(const t of e){if(!W.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?W.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=we(e)){const r=W.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(W.isFunction(t))return t.call(this,e,r);if(W.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e)){const r=W.findKey(this,e);return!(!r||void 0===this[r]||t&&!Ae(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=we(e)){const s=W.findKey(r,e);!s||t&&!Ae(0,r[s],s,t)||(delete r[s],n=!0)}}return W.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!Ae(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return W.forEach(this,(n,s)=>{const i=W.findKey(r,s);if(i)return t[i]=ve(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();o!==s&&delete t[s],t[o]=ve(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&W.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[ye]=this[ye]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=we(e);t[n]||(!function(e,t){const r=W.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return W.isArray(e)?e.forEach(n):n(e),this}};function Ee(e,t){const r=this||me,n=t||r,s=be.from(n.headers);let i=n.data;return W.forEach(e,function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Se(e){return!(!e||!e.__CANCEL__)}be.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),W.reduceDescriptors(be.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),W.freezeMethods(be);let _e=class extends J{constructor(e,t,r){super(null==e?"canceled":e,J.ERR_CANCELED,t,r),this.name="CanceledError",this.__CANCEL__=!0}};function Pe(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new J("Request failed with status code "+r.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const ke=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=n[o];s||(s=c),r[i]=a,n[i]=c;let h=o,l=0;for(;h!==i;)l+=r[h++],h%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-s<t)return;const d=u&&c-u;return d?Math.round(1e3*l/d):void 0}}(50,250);return function(e,t){let r,n,s=0,i=1e3/t;const o=(t,i=Date.now())=>{s=i,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=i?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},i-a)))},()=>r&&o(r)]}(r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-n,c=s(a);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},Ie=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Re=e=>(...t)=>W.asap(()=>e(...t));var Te=fe.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fe.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Ne=fe.hasStandardBrowserEnv?{write(e,t,r,n,s,i,o){if("undefined"==typeof document)return;const a=[`${e}=${encodeURIComponent(t)}`];W.isNumber(r)&&a.push(`expires=${new Date(r).toUTCString()}`),W.isString(n)&&a.push(`path=${n}`),W.isString(s)&&a.push(`domain=${s}`),!0===i&&a.push("secure"),W.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Oe(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ce=e=>e instanceof be?{...e}:e;function xe(e,t){t=t||{};const r={};function n(e,t,r,n){return W.isPlainObject(e)&&W.isPlainObject(t)?W.merge.call({caseless:n},e,t):W.isPlainObject(t)?W.merge({},t):W.isArray(t)?t.slice():t}function s(e,t,r,s){return W.isUndefined(t)?W.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function i(e,t){if(!W.isUndefined(t))return n(void 0,t)}function o(e,t){return W.isUndefined(t)?W.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(Ce(e),Ce(t),0,!0)};return W.forEach(Object.keys({...e,...t}),function(n){const i=c[n]||s,o=i(e[n],t[n],n);W.isUndefined(o)&&i!==a||(r[n]=o)}),r}var Me=e=>{const t=xe({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=be.from(o),t.url=se(Oe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),W.isFormData(r))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(W.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}if(fe.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(t)),n||!1!==n&&Te(t.url))){const e=s&&i&&Ne.read(i);e&&o.set(s,e)}return t};var Ue="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=Me(e);let s=n.data;const i=be.from(n.headers).normalize();let o,a,c,u,h,{responseType:l,onUploadProgress:d,onDownloadProgress:f}=n;function p(){u&&u(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=be.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Pe(function(e){t(e),p()},function(e){r(e),p()},{data:l&&"text"!==l&&"json"!==l?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new J("Request aborted",J.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new J(n,J.ERR_NETWORK,e,m);s.event=t||null,r(s),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||oe;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new J(t,s.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&W.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),W.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),l&&"json"!==l&&(m.responseType=n.responseType),f&&([c,h]=ke(f,!0),m.addEventListener("progress",c)),d&&m.upload&&([a,u]=ke(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(o=t=>{m&&(r(!t||t.type?new _e(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===fe.protocols.indexOf(y)?r(new J("Unsupported protocol "+y+":",J.ERR_BAD_REQUEST,e)):m.send(s||null)})};const De=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof J?t:new _e(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new J(`timeout of ${t}ms exceeded`,J.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=n;return a.unsubscribe=()=>W.asap(o),a}},Le=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},Be=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Fe=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of Be(e))yield*Le(r,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:qe}=W,Ge=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:je,TextEncoder:He}=W.global,ze=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Ke=e=>{e=W.merge.call({skipUndefined:!0},Ge,e);const{fetch:t,Request:r,Response:n}=e,s=t?qe(t):"function"==typeof fetch,i=qe(r),o=qe(n);if(!s)return!1;const a=s&&qe(je),c=s&&("function"==typeof He?(u=new He,e=>u.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var u;const h=i&&a&&ze(()=>{let e=!1;const t=new r(fe.origin,{body:new je,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),l=o&&a&&ze(()=>W.isReadableStream(new n("").body)),d={stream:l&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new J(`Response type '${e}' is not supported`,J.ERR_NOT_SUPPORT,r)})});const f=async(e,t)=>{const n=W.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(W.isBlob(e))return e.size;if(W.isSpecCompliantForm(e)){const t=new r(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return W.isArrayBufferView(e)||W.isArrayBuffer(e)?e.byteLength:(W.isURLSearchParams(e)&&(e+=""),W.isString(e)?(await c(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:o,data:a,signal:c,cancelToken:u,timeout:p,onDownloadProgress:m,onUploadProgress:g,responseType:y,headers:w,withCredentials:v="same-origin",fetchOptions:A}=Me(e),b=t||fetch;y=y?(y+"").toLowerCase():"text";let E=De([c,u&&u.toAbortSignal()],p),S=null;const _=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let P;try{if(g&&h&&"get"!==o&&"head"!==o&&0!==(P=await f(w,a))){let e,t=new r(s,{method:"POST",body:a,duplex:"half"});if(W.isFormData(a)&&(e=t.headers.get("content-type"))&&w.setContentType(e),t.body){const[e,r]=Ie(P,ke(Re(g)));a=Fe(t.body,65536,e,r)}}W.isString(v)||(v=v?"include":"omit");const t=i&&"credentials"in r.prototype,c={...A,signal:E,method:o.toUpperCase(),headers:w.normalize().toJSON(),body:a,duplex:"half",credentials:t?v:void 0};S=i&&new r(s,c);let u=await(i?b(S,A):b(s,c));const p=l&&("stream"===y||"response"===y);if(l&&(m||p&&_)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=u[t]});const t=W.toFiniteNumber(u.headers.get("content-length")),[r,s]=m&&Ie(t,ke(Re(m),!0))||[];u=new n(Fe(u.body,65536,r,()=>{s&&s(),_&&_()}),e)}y=y||"text";let k=await d[W.findKey(d,y)||"text"](u,e);return!p&&_&&_(),await new Promise((t,r)=>{Pe(t,r,{data:k,headers:be.from(u.headers),status:u.status,statusText:u.statusText,config:e,request:S})})}catch(t){if(_&&_(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new J("Network Error",J.ERR_NETWORK,e,S),{cause:t.cause||t});throw J.from(t,t&&t.code,e,S)}}},Ve=new Map,We=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o,a,c=i.length,u=Ve;for(;c--;)o=i[c],a=u.get(o),void 0===a&&u.set(o,a=c?new Map:Ke(t)),u=a;return a};We();const Je={http:null,xhr:Ue,fetch:{get:We}};W.forEach(Je,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const Ye=e=>`- ${e}`,Qe=e=>W.isFunction(e)||null===e||!1===e;var $e={getAdapter:function(e,t){e=W.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){let r;if(n=e[o],s=n,!Qe(n)&&(s=Je[(r=String(n)).toLowerCase()],void 0===s))throw new J(`Unknown adapter '${r}'`);if(s&&(W.isFunction(s)||(s=s.get(t))))break;i[r||"#"+o]=s}if(!s){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=r?e.length>1?"since :\n"+e.map(Ye).join("\n"):" "+Ye(e[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:Je};function Xe(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new _e(null,e)}function Ze(e){Xe(e),e.headers=be.from(e.headers),e.data=Ee.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return $e.getAdapter(e.adapter||me.adapter,e)(e).then(function(t){return Xe(e),t.data=Ee.call(e,e.transformResponse,t),t.headers=be.from(t.headers),t},function(t){return Se(t)||(Xe(e),t&&t.response&&(t.response.data=Ee.call(e,e.transformResponse,t.response),t.response.headers=be.from(t.response.headers))),Promise.reject(t)})}const et="1.13.4",tt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tt[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const rt={};tt.transitional=function(e,t,r){function n(e,t){return"[Axios v"+et+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,i)=>{if(!1===e)throw new J(n(s," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!rt[s]&&(rt[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,i)}},tt.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};var nt={assertOptions:function(e,t,r){if("object"!=typeof e)throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new J("option "+i+" must be "+r,J.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new J("Unknown option "+i,J.ERR_BAD_OPTION)}},validators:tt};const st=nt.validators;let it=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=xe(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&nt.assertOptions(r,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),null!=n&&(W.isFunction(n)?t.paramsSerializer={serialize:n}:nt.assertOptions(n,{encode:st.function,serialize:st.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),nt.assertOptions(t,{baseUrl:st.spelling("baseURL"),withXsrfToken:st.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&W.merge(s.common,s[t.method]);s&&W.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=be.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const c=[];let u;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let h,l=0;if(!a){const e=[Ze.bind(this),void 0];for(e.unshift(...o),e.push(...c),h=e.length,u=Promise.resolve(t);l<h;)u=u.then(e[l++],e[l++]);return u}h=o.length;let d=t;for(;l<h;){const e=o[l++],t=o[l++];try{d=e(d)}catch(e){t.call(this,e);break}}try{u=Ze.call(this,d)}catch(e){return Promise.reject(e)}for(l=0,h=c.length;l<h;)u=u.then(c[l++],c[l++]);return u}getUri(e){return se(Oe((e=xe(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){it.prototype[e]=function(t,r){return this.request(xe(r||{},{method:e,url:t,data:(r||{}).data}))}}),W.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(xe(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}it.prototype[e]=t(),it.prototype[e+"Form"]=t(!0)});const ot={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ot).forEach(([e,t])=>{ot[t]=e});const at=function e(t){const r=new it(t),s=n(it.prototype.request,r);return W.extend(s,it.prototype,r,{allOwnKeys:!0}),W.extend(s,r,null,{allOwnKeys:!0}),s.create=function(r){return e(xe(t,r))},s}(me);at.Axios=it,at.CanceledError=_e,at.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new _e(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;const r=new e(function(e){t=e});return{token:r,cancel:t}}},at.isCancel=Se,at.VERSION=et,at.toFormData=Z,at.AxiosError=J,at.Cancel=at.CanceledError,at.all=function(e){return Promise.all(e)},at.spread=function(e){return function(t){return e.apply(null,t)}},at.isAxiosError=function(e){return W.isObject(e)&&!0===e.isAxiosError},at.mergeConfig=xe,at.AxiosHeaders=be,at.formToJSON=e=>pe(W.isHTMLForm(e)?new FormData(e):e),at.getAdapter=$e.getAdapter,at.HttpStatusCode=ot,at.default=at;const{Axios:ct,AxiosError:ut,CanceledError:ht,isCancel:lt,CancelToken:dt,VERSION:ft,all:pt,Cancel:mt,isAxiosError:gt,spread:yt,toFormData:wt,AxiosHeaders:vt,HttpStatusCode:At,formToJSON:bt,getAdapter:Et,mergeConfig:St}=at;var _t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function kt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}const It=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var Rt=e=>!It.has(e&&e.code),Tt=Pt(Rt);const Nt="axios-retry";function Ot(e){return!e.response&&(!!e.code&&(!["ERR_CANCELED","ECONNABORTED"].includes(e.code)&&Tt(e)))}const Ct=["get","head","options"],xt=Ct.concat(["put","delete"]);function Mt(e){return"ECONNABORTED"!==e.code&&(!e.response||429===e.response.status||e.response.status>=500&&e.response.status<=599)}function Ut(e){return!!e.config?.method&&(Mt(e)&&-1!==xt.indexOf(e.config.method))}function Dt(e){return Ot(e)||Ut(e)}function Lt(e=void 0){const t=e?.response?.headers["retry-after"];if(!t)return 0;let r=1e3*(Number(t)||0);return 0===r&&(r=(new Date(t).valueOf()||0)-Date.now()),Math.max(0,r)}const Bt={retries:3,retryCondition:Dt,retryDelay:function(e=0,t=void 0){return Math.max(0,Lt(t))},shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function Ft(e,t,r=!1){const n=function(e,t){return{...Bt,...t,...e[Nt]}}(e,t||{});return n.retryCount=n.retryCount||0,n.lastRequestTime&&!r||(n.lastRequestTime=Date.now()),e[Nt]=n,n}const qt=(e,t)=>{const r=e.interceptors.request.use(e=>(Ft(e,t,!0),e[Nt]?.validateResponse&&(e.validateStatus=()=>!1),e)),n=e.interceptors.response.use(null,async r=>{const{config:n}=r;if(!n)return Promise.reject(r);const s=Ft(n,t);return r.response&&s.validateResponse?.(r.response)?r.response:await async function(e,t){const{retries:r,retryCondition:n}=e,s=(e.retryCount||0)<r&&n(t);if("object"==typeof s)try{return!1!==await s}catch(e){return!1}return s}(s,r)?async function(e,t,r,n){t.retryCount+=1;const{retryDelay:s,shouldResetTimeout:i,onRetry:o}=t,a=s(t.retryCount,r);if(function(e,t){e.defaults.agent===t.agent&&delete t.agent,e.defaults.httpAgent===t.httpAgent&&delete t.httpAgent,e.defaults.httpsAgent===t.httpsAgent&&delete t.httpsAgent}(e,n),!i&&n.timeout&&t.lastRequestTime){const e=Date.now()-t.lastRequestTime,s=n.timeout-e-a;if(s<=0)return Promise.reject(r);n.timeout=s}return n.transformRequest=[e=>e],await o(t.retryCount,r,n),n.signal?.aborted?Promise.resolve(e(n)):new Promise(t=>{const r=()=>{clearTimeout(s),t(e(n))},s=setTimeout(()=>{t(e(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",r)},a);n.signal?.addEventListener&&n.signal.addEventListener("abort",r,{once:!0})})}(e,s,r,n):(await async function(e,t){e.retryCount>=e.retries&&await e.onMaxRetryTimesExceeded(t,e.retryCount)}(s,r),Promise.reject(r))});return{requestInterceptorId:r,responseInterceptorId:n}};qt.isNetworkError=Ot,qt.isSafeRequestError=function(e){return!!e.config?.method&&(Mt(e)&&-1!==Ct.indexOf(e.config.method))},qt.isIdempotentRequestError=Ut,qt.isNetworkOrIdempotentRequestError=Dt,qt.exponentialDelay=function(e=0,t=void 0,r=100){const n=2**e*r,s=Math.max(n,Lt(t));return s+.2*s*Math.random()},qt.linearDelay=function(e=100){return(t=0,r=void 0)=>{const n=t*e;return Math.max(n,Lt(r))}},qt.isRetryableError=Mt;const Gt="https://api.openfort.io".replace(/\/+$/,"");let jt=class{basePath;axios;configuration;constructor(e,t=Gt,r=at){this.basePath=t,this.axios=r,e&&(this.configuration=e,this.basePath=e.basePath||this.basePath)}},Ht=class extends Error{field;constructor(e,t){super(t),this.field=e,this.name="RequiredError"}};const zt="https://example.com",Kt=function(e,t,r){if(null==r)throw new Ht(t,`Required parameter ${t} was null or undefined when calling ${e}.`)},Vt=async function(e,t){if(t&&t.accessToken){const r="function"==typeof t.accessToken?await t.accessToken():await t.accessToken;e.Authorization="Bearer "+r}};function Wt(e,t,r=""){null!=t&&("object"==typeof t?Array.isArray(t)?t.forEach(t=>Wt(e,t,r)):Object.keys(t).forEach(n=>Wt(e,t[n],`${r}${""!==r?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}const Jt=function(e,...t){const r=new URLSearchParams(e.search);Wt(r,t),e.search=r.toString()},Yt=function(e,t,r){const n="string"!=typeof e;return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(void 0!==e?e:{}):e||""},Qt=function(e){return e.pathname+e.search+e.hash},$t=function(e,t,r,n){return(s=t,i=r)=>{const o={...e.options,url:(n?.basePath||s.defaults.baseURL||i)+e.url};return s.request(o)}},Xt=function(e){const t=function(e){return{cancelTransferOwnership:async(t,r,n={})=>{Kt("cancelTransferOwnership","id",t),Kt("cancelTransferOwnership","cancelTransferOwnershipRequest",r);const s="/v1/accounts/{id}/cancel_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},completeRecovery:async(t,r,n={})=>{Kt("completeRecovery","id",t),Kt("completeRecovery","completeRecoveryRequest",r);const s="/v1/accounts/{id}/complete_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},createAccount:async(t,r={})=>{Kt("createAccount","createAccountRequest",t);const n=new URL("/v1/accounts",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},deployAccount:async(t,r,n={})=>{Kt("deployAccount","id",t),Kt("deployAccount","deployRequest",r);const s="/v1/accounts/{id}/deploy".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},disableAccount:async(t,r={})=>{Kt("disableAccount","id",t);const n="/v1/accounts/{id}/disable".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}},getAccount:async(t,r,n={})=>{Kt("getAccount","id",t);const s="/v1/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Vt(c,e),r&&(u.expand=r),Jt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Qt(i),options:a}},getAccounts:async(t,r,n,s,i,o,a,c={})=>{const u=new URL("/v1/accounts",zt);let h;e&&(h=e.baseOptions);const l={method:"GET",...h,...c},d={},f={};await Vt(d,e),void 0!==t&&(f.limit=t),void 0!==r&&(f.skip=r),void 0!==n&&(f.order=n),void 0!==s&&(f.chainId=s),void 0!==i&&(f.player=i),void 0!==o&&(f.address=o),a&&(f.expand=a),Jt(u,f);let p=h&&h.headers?h.headers:{};return l.headers={...d,...p,...c.headers},{url:Qt(u),options:l}},requestTransferOwnership:async(t,r,n={})=>{Kt("requestTransferOwnership","id",t),Kt("requestTransferOwnership","transferOwnershipRequest",r);const s="/v1/accounts/{id}/request_transfer_ownership".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},signPayload:async(t,r,n={})=>{Kt("signPayload","id",t),Kt("signPayload","signPayloadRequest",r);const s="/v1/accounts/{id}/sign_payload".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},startRecovery:async(t,r,n={})=>{Kt("startRecovery","id",t),Kt("startRecovery","startRecoveryRequest",r);const s="/v1/accounts/{id}/start_recovery".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},syncAccount:async(t,r={})=>{Kt("syncAccount","id",t);const n="/v1/accounts/{id}/sync".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}}}}(e);return{async cancelTransferOwnership(r,n,s){const i=await t.cancelTransferOwnership(r,n,s);return $t(i,at,Gt,e)},async completeRecovery(r,n,s){const i=await t.completeRecovery(r,n,s);return $t(i,at,Gt,e)},async createAccount(r,n){const s=await t.createAccount(r,n);return $t(s,at,Gt,e)},async deployAccount(r,n,s){const i=await t.deployAccount(r,n,s);return $t(i,at,Gt,e)},async disableAccount(r,n){const s=await t.disableAccount(r,n);return $t(s,at,Gt,e)},async getAccount(r,n,s){const i=await t.getAccount(r,n,s);return $t(i,at,Gt,e)},async getAccounts(r,n,s,i,o,a,c,u){const h=await t.getAccounts(r,n,s,i,o,a,c,u);return $t(h,at,Gt,e)},async requestTransferOwnership(r,n,s){const i=await t.requestTransferOwnership(r,n,s);return $t(i,at,Gt,e)},async signPayload(r,n,s){const i=await t.signPayload(r,n,s);return $t(i,at,Gt,e)},async startRecovery(r,n,s){const i=await t.startRecovery(r,n,s);return $t(i,at,Gt,e)},async syncAccount(r,n){const s=await t.syncAccount(r,n);return $t(s,at,Gt,e)}}};class Zt extends jt{cancelTransferOwnership(e,t){return Xt(this.configuration).cancelTransferOwnership(e.id,e.cancelTransferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}completeRecovery(e,t){return Xt(this.configuration).completeRecovery(e.id,e.completeRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}createAccount(e,t){return Xt(this.configuration).createAccount(e.createAccountRequest,t).then(e=>e(this.axios,this.basePath))}deployAccount(e,t){return Xt(this.configuration).deployAccount(e.id,e.deployRequest,t).then(e=>e(this.axios,this.basePath))}disableAccount(e,t){return Xt(this.configuration).disableAccount(e.id,t).then(e=>e(this.axios,this.basePath))}getAccount(e,t){return Xt(this.configuration).getAccount(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getAccounts(e={},t){return Xt(this.configuration).getAccounts(e.limit,e.skip,e.order,e.chainId,e.player,e.address,e.expand,t).then(e=>e(this.axios,this.basePath))}requestTransferOwnership(e,t){return Xt(this.configuration).requestTransferOwnership(e.id,e.transferOwnershipRequest,t).then(e=>e(this.axios,this.basePath))}signPayload(e,t){return Xt(this.configuration).signPayload(e.id,e.signPayloadRequest,t).then(e=>e(this.axios,this.basePath))}startRecovery(e,t){return Xt(this.configuration).startRecovery(e.id,e.startRecoveryRequest,t).then(e=>e(this.axios,this.basePath))}syncAccount(e,t){return Xt(this.configuration).syncAccount(e.id,t).then(e=>e(this.axios,this.basePath))}}const er=function(e){const t=function(e){return{createAccountV2:async(t,r={})=>{Kt("createAccountV2","createAccountRequestV2",t);const n=new URL("/v2/accounts",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},getAccountV2:async(t,r={})=>{Kt("getAccountV2","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}},getAccountsV2:async(t,r,n,s,i,o,a,c,u,h={})=>{const l=new URL("/v2/accounts",zt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...h},p={},m={};await Vt(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),void 0!==s&&(m.chainId=s),void 0!==i&&(m.user=i),void 0!==o&&(m.chainType=o),void 0!==a&&(m.accountType=a),void 0!==c&&(m.custody=c),void 0!==u&&(m.address=u),Jt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...h.headers},{url:Qt(l),options:f}},getSignerIdByAddress:async(t,r={})=>{Kt("getSignerIdByAddress","address",t);const n=new URL("/v2/accounts/signer",zt);let s;e&&(s=e.baseOptions);const i={method:"GET",...s,...r},o={},a={};await Vt(o,e),void 0!==t&&(a.address=t),Jt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Qt(n),options:i}},removeAccount:async(t,r={})=>{Kt("removeAccount","id",t);const n="/v2/accounts/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"DELETE",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}},switchChainV2:async(t,r={})=>{Kt("switchChainV2","switchChainQueriesV2",t);const n=new URL("/v2/accounts/switch-chain",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}}}}(e);return{async createAccountV2(r,n){const s=await t.createAccountV2(r,n);return $t(s,at,Gt,e)},async getAccountV2(r,n){const s=await t.getAccountV2(r,n);return $t(s,at,Gt,e)},async getAccountsV2(r,n,s,i,o,a,c,u,h,l){const d=await t.getAccountsV2(r,n,s,i,o,a,c,u,h,l);return $t(d,at,Gt,e)},async getSignerIdByAddress(r,n){const s=await t.getSignerIdByAddress(r,n);return $t(s,at,Gt,e)},async removeAccount(r,n){const s=await t.removeAccount(r,n);return $t(s,at,Gt,e)},async switchChainV2(r,n){const s=await t.switchChainV2(r,n);return $t(s,at,Gt,e)}}};let tr=class extends jt{createAccountV2(e,t){return er(this.configuration).createAccountV2(e.createAccountRequestV2,t).then(e=>e(this.axios,this.basePath))}getAccountV2(e,t){return er(this.configuration).getAccountV2(e.id,t).then(e=>e(this.axios,this.basePath))}getAccountsV2(e={},t){return er(this.configuration).getAccountsV2(e.limit,e.skip,e.order,e.chainId,e.user,e.chainType,e.accountType,e.custody,e.address,t).then(e=>e(this.axios,this.basePath))}getSignerIdByAddress(e,t){return er(this.configuration).getSignerIdByAddress(e.address,t).then(e=>e(this.axios,this.basePath))}removeAccount(e,t){return er(this.configuration).removeAccount(e.id,t).then(e=>e(this.axios,this.basePath))}switchChainV2(e,t){return er(this.configuration).switchChainV2(e.switchChainQueriesV2,t).then(e=>e(this.axios,this.basePath))}};const rr=function(e){const t=function(e){return{authenticateSIWE:async(t,r={})=>{Kt("authenticateSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/authenticate",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},getJwks:async(t,r={})=>{Kt("getJwks","publishableKey",t);const n="/iam/v1/{publishable_key}/jwks.json".replace("{publishable_key}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r};Jt(s,{});let a=i&&i.headers?i.headers:{};return o.headers={...a,...r.headers},{url:Qt(s),options:o}},initOAuth:async(t,r,n={})=>{Kt("initOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},initSIWE:async(t,r,n={})=>{Kt("initSIWE","sIWERequest",t);const s=new URL("/iam/v1/siwe/init",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},linkEmail:async(t,r,n={})=>{Kt("linkEmail","loginRequest",t);const s=new URL("/iam/v1/password/link",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},linkOAuth:async(t,r,n={})=>{Kt("linkOAuth","oAuthInitRequest",t);const s=new URL("/iam/v1/oauth/init_link",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},linkSIWE:async(t,r={})=>{Kt("linkSIWE","sIWEAuthenticateRequest",t);const n=new URL("/iam/v1/siwe/link",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},linkThirdParty:async(t,r,n={})=>{Kt("linkThirdParty","thirdPartyLinkRequest",t);const s=new URL("/iam/v1/oauth/link",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},loginEmailPassword:async(t,r,n={})=>{Kt("loginEmailPassword","loginRequest",t);const s=new URL("/iam/v1/password/login",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},loginOIDC:async(t,r,n={})=>{Kt("loginOIDC","loginOIDCRequest",t);const s=new URL("/iam/v1/oidc/login",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},loginWithIdToken:async(t,r={})=>{Kt("loginWithIdToken","loginWithIdTokenRequest",t);const n=new URL("/iam/v1/oauth/login_id_token",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},logout:async(t,r={})=>{Kt("logout","logoutRequest",t);const n=new URL("/iam/v1/sessions/logout",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},me:async(t={})=>{const r=new URL("/iam/v1/me",zt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},poolOAuth:async(t,r={})=>{Kt("poolOAuth","key",t);const n=new URL("/iam/v1/oauth/pool",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={},a={};await Vt(o,e),void 0!==t&&(a.key=t),Jt(n,a);let c=s&&s.headers?s.headers:{};return i.headers={...o,...c,...r.headers},{url:Qt(n),options:i}},refresh:async(t,r={})=>{Kt("refresh","refreshTokenRequest",t);const n=new URL("/iam/v1/sessions",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},registerGuest:async(t,r={})=>{const n=new URL("/iam/v1/guest",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),null!=t&&(o["x-game"]=String(t)),Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},{url:Qt(n),options:i}},requestEmailVerification:async(t,r={})=>{Kt("requestEmailVerification","requestVerifyEmailRequest",t);const n=new URL("/iam/v1/password/request_email_verification",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},requestResetPassword:async(t,r={})=>{Kt("requestResetPassword","requestResetPasswordRequest",t);const n=new URL("/iam/v1/password/request_reset",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},resetPassword:async(t,r={})=>{Kt("resetPassword","resetPasswordRequest",t);const n=new URL("/iam/v1/password/reset",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signupEmailPassword:async(t,r,n={})=>{Kt("signupEmailPassword","signupRequest",t);const s=new URL("/iam/v1/password/signup",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},thirdParty:async(t,r,n={})=>{Kt("thirdParty","thirdPartyOAuthRequest",t);const s=new URL("/iam/v1/oauth/third_party",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["x-game"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},unlinkEmail:async(t,r={})=>{Kt("unlinkEmail","unlinkEmailRequest",t);const n=new URL("/iam/v1/password/unlink",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},unlinkOAuth:async(t,r={})=>{Kt("unlinkOAuth","unlinkOAuthRequest",t);const n=new URL("/iam/v1/oauth/unlink",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},unlinkSIWE:async(t,r={})=>{Kt("unlinkSIWE","sIWERequest",t);const n=new URL("/iam/v1/siwe/unlink",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},verifyEmail:async(t,r={})=>{Kt("verifyEmail","verifyEmailRequest",t);const n=new URL("/iam/v1/password/verify_email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},verifyOAuthToken:async(t,r={})=>{Kt("verifyOAuthToken","authenticateOAuthRequest",t);const n=new URL("/iam/v1/oauth/verify",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}}}}(e);return{async authenticateSIWE(r,n){const s=await t.authenticateSIWE(r,n);return $t(s,at,Gt,e)},async getJwks(r,n){const s=await t.getJwks(r,n);return $t(s,at,Gt,e)},async initOAuth(r,n,s){const i=await t.initOAuth(r,n,s);return $t(i,at,Gt,e)},async initSIWE(r,n,s){const i=await t.initSIWE(r,n,s);return $t(i,at,Gt,e)},async linkEmail(r,n,s){const i=await t.linkEmail(r,n,s);return $t(i,at,Gt,e)},async linkOAuth(r,n,s){const i=await t.linkOAuth(r,n,s);return $t(i,at,Gt,e)},async linkSIWE(r,n){const s=await t.linkSIWE(r,n);return $t(s,at,Gt,e)},async linkThirdParty(r,n,s){const i=await t.linkThirdParty(r,n,s);return $t(i,at,Gt,e)},async loginEmailPassword(r,n,s){const i=await t.loginEmailPassword(r,n,s);return $t(i,at,Gt,e)},async loginOIDC(r,n,s){const i=await t.loginOIDC(r,n,s);return $t(i,at,Gt,e)},async loginWithIdToken(r,n){const s=await t.loginWithIdToken(r,n);return $t(s,at,Gt,e)},async logout(r,n){const s=await t.logout(r,n);return $t(s,at,Gt,e)},async me(r){const n=await t.me(r);return $t(n,at,Gt,e)},async poolOAuth(r,n){const s=await t.poolOAuth(r,n);return $t(s,at,Gt,e)},async refresh(r,n){const s=await t.refresh(r,n);return $t(s,at,Gt,e)},async registerGuest(r,n){const s=await t.registerGuest(r,n);return $t(s,at,Gt,e)},async requestEmailVerification(r,n){const s=await t.requestEmailVerification(r,n);return $t(s,at,Gt,e)},async requestResetPassword(r,n){const s=await t.requestResetPassword(r,n);return $t(s,at,Gt,e)},async resetPassword(r,n){const s=await t.resetPassword(r,n);return $t(s,at,Gt,e)},async signupEmailPassword(r,n,s){const i=await t.signupEmailPassword(r,n,s);return $t(i,at,Gt,e)},async thirdParty(r,n,s){const i=await t.thirdParty(r,n,s);return $t(i,at,Gt,e)},async unlinkEmail(r,n){const s=await t.unlinkEmail(r,n);return $t(s,at,Gt,e)},async unlinkOAuth(r,n){const s=await t.unlinkOAuth(r,n);return $t(s,at,Gt,e)},async unlinkSIWE(r,n){const s=await t.unlinkSIWE(r,n);return $t(s,at,Gt,e)},async verifyEmail(r,n){const s=await t.verifyEmail(r,n);return $t(s,at,Gt,e)},async verifyOAuthToken(r,n){const s=await t.verifyOAuthToken(r,n);return $t(s,at,Gt,e)}}};let nr=class extends jt{authenticateSIWE(e,t){return rr(this.configuration).authenticateSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}getJwks(e,t){return rr(this.configuration).getJwks(e.publishableKey,t).then(e=>e(this.axios,this.basePath))}initOAuth(e,t){return rr(this.configuration).initOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}initSIWE(e,t){return rr(this.configuration).initSIWE(e.sIWERequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkEmail(e,t){return rr(this.configuration).linkEmail(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkOAuth(e,t){return rr(this.configuration).linkOAuth(e.oAuthInitRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}linkSIWE(e,t){return rr(this.configuration).linkSIWE(e.sIWEAuthenticateRequest,t).then(e=>e(this.axios,this.basePath))}linkThirdParty(e,t){return rr(this.configuration).linkThirdParty(e.thirdPartyLinkRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginEmailPassword(e,t){return rr(this.configuration).loginEmailPassword(e.loginRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginOIDC(e,t){return rr(this.configuration).loginOIDC(e.loginOIDCRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}loginWithIdToken(e,t){return rr(this.configuration).loginWithIdToken(e.loginWithIdTokenRequest,t).then(e=>e(this.axios,this.basePath))}logout(e,t){return rr(this.configuration).logout(e.logoutRequest,t).then(e=>e(this.axios,this.basePath))}me(e){return rr(this.configuration).me(e).then(e=>e(this.axios,this.basePath))}poolOAuth(e,t){return rr(this.configuration).poolOAuth(e.key,t).then(e=>e(this.axios,this.basePath))}refresh(e,t){return rr(this.configuration).refresh(e.refreshTokenRequest,t).then(e=>e(this.axios,this.basePath))}registerGuest(e={},t){return rr(this.configuration).registerGuest(e.xGame,t).then(e=>e(this.axios,this.basePath))}requestEmailVerification(e,t){return rr(this.configuration).requestEmailVerification(e.requestVerifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}requestResetPassword(e,t){return rr(this.configuration).requestResetPassword(e.requestResetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}resetPassword(e,t){return rr(this.configuration).resetPassword(e.resetPasswordRequest,t).then(e=>e(this.axios,this.basePath))}signupEmailPassword(e,t){return rr(this.configuration).signupEmailPassword(e.signupRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}thirdParty(e,t){return rr(this.configuration).thirdParty(e.thirdPartyOAuthRequest,e.xGame,t).then(e=>e(this.axios,this.basePath))}unlinkEmail(e,t){return rr(this.configuration).unlinkEmail(e.unlinkEmailRequest,t).then(e=>e(this.axios,this.basePath))}unlinkOAuth(e,t){return rr(this.configuration).unlinkOAuth(e.unlinkOAuthRequest,t).then(e=>e(this.axios,this.basePath))}unlinkSIWE(e,t){return rr(this.configuration).unlinkSIWE(e.sIWERequest,t).then(e=>e(this.axios,this.basePath))}verifyEmail(e,t){return rr(this.configuration).verifyEmail(e.verifyEmailRequest,t).then(e=>e(this.axios,this.basePath))}verifyOAuthToken(e,t){return rr(this.configuration).verifyOAuthToken(e.authenticateOAuthRequest,t).then(e=>e(this.axios,this.basePath))}};const sr=function(e){const t=function(e){return{accountInfoPost:async(t,r={})=>{Kt("accountInfoPost","accountInfoPostRequest",t);const n=new URL("/account-info",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},changeEmailPost:async(t,r={})=>{Kt("changeEmailPost","changeEmailPostRequest",t);const n=new URL("/change-email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},changePasswordPost:async(t,r={})=>{Kt("changePasswordPost","changePasswordPostRequest",t);const n=new URL("/change-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},checkVerificationOtp:async(t,r={})=>{Kt("checkVerificationOtp","checkVerificationOtpRequest",t);const n=new URL("/email-otp/check-verification-otp",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},emailOtpResetPasswordPost:async(t,r={})=>{Kt("emailOtpResetPasswordPost","emailOtpResetPasswordPostRequest",t);const n=new URL("/email-otp/reset-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},emailOtpSendVerificationOtpPost:async(t,r={})=>{Kt("emailOtpSendVerificationOtpPost","emailOtpSendVerificationOtpPostRequest",t);const n=new URL("/email-otp/send-verification-otp",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},emailOtpVerifyEmailPost:async(t,r={})=>{Kt("emailOtpVerifyEmailPost","emailOtpVerifyEmailPostRequest",t);const n=new URL("/email-otp/verify-email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},forgetPasswordEmailOtpPost:async(t,r={})=>{Kt("forgetPasswordEmailOtpPost","forgetPasswordEmailOtpPostRequest",t);const n=new URL("/forget-password/email-otp",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},forgetPasswordPost:async(t,r={})=>{Kt("forgetPasswordPost","forgetPasswordPostRequest",t);const n=new URL("/forget-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},getAccessTokenPost:async(t,r={})=>{Kt("getAccessTokenPost","refreshTokenPostRequest",t);const n=new URL("/get-access-token",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},getSessionGet:async(t,r,n={})=>{const s=new URL("/get-session",zt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...n},a={},c={};void 0!==r&&(c.disableCookieCache=r),null!=t&&(a["x-project-key"]=String(t)),Jt(s,c);let u=i&&i.headers?i.headers:{};return o.headers={...a,...u,...n.headers},{url:Qt(s),options:o}},linkSiweListWalletsGet:async(t={})=>{const r=new URL("/link-siwe/list-wallets",zt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},linkSiweNoncePost:async(t,r={})=>{Kt("linkSiweNoncePost","siweNoncePostRequest",t);const n=new URL("/link-siwe/nonce",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},linkSiweUnlinkPost:async(t,r={})=>{Kt("linkSiweUnlinkPost","linkSiweUnlinkPostRequest",t);const n=new URL("/link-siwe/unlink",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},linkSiweVerifyPost:async(t,r={})=>{Kt("linkSiweVerifyPost","siweVerifyPostRequest",t);const n=new URL("/link-siwe/verify",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},linkSocialPost:async(t,r={})=>{Kt("linkSocialPost","linkSocialPostRequest",t);const n=new URL("/link-social",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},listAccountsGet:async(t={})=>{const r=new URL("/list-accounts",zt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},listSessionsGet:async(t={})=>{const r=new URL("/list-sessions",zt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},phoneNumberForgetPasswordPost:async(t,r={})=>{Kt("phoneNumberForgetPasswordPost","phoneNumberForgetPasswordPostRequest",t);const n=new URL("/phone-number/forget-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},phoneNumberRequestPasswordResetPost:async(t,r={})=>{Kt("phoneNumberRequestPasswordResetPost","phoneNumberRequestPasswordResetPostRequest",t);const n=new URL("/phone-number/request-password-reset",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},phoneNumberResetPasswordPost:async(t,r={})=>{Kt("phoneNumberResetPasswordPost","phoneNumberResetPasswordPostRequest",t);const n=new URL("/phone-number/reset-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},phoneNumberSendOtpPost:async(t,r={})=>{Kt("phoneNumberSendOtpPost","phoneNumberSendOtpPostRequest",t);const n=new URL("/phone-number/send-otp",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},phoneNumberVerifyPost:async(t,r={})=>{Kt("phoneNumberVerifyPost","phoneNumberVerifyPostRequest",t);const n=new URL("/phone-number/verify",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},refreshTokenPost:async(t,r={})=>{Kt("refreshTokenPost","refreshTokenPostRequest",t);const n=new URL("/refresh-token",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},requestPasswordResetPost:async(t,r={})=>{Kt("requestPasswordResetPost","forgetPasswordPostRequest",t);const n=new URL("/request-password-reset",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},resetPasswordPost:async(t,r={})=>{Kt("resetPasswordPost","resetPasswordPostRequest",t);const n=new URL("/reset-password",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},resetPasswordTokenGet:async(t,r,n={})=>{Kt("resetPasswordTokenGet","token",t);const s="/reset-password/{token}".replace("{token}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={};void 0!==r&&(c.callbackURL=r),Jt(i,c);let u=o&&o.headers?o.headers:{};return a.headers={...u,...n.headers},{url:Qt(i),options:a}},revokeOtherSessionsPost:async(t,r={})=>{const n=new URL("/revoke-other-sessions",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},revokeSessionPost:async(t,r={})=>{const n=new URL("/revoke-session",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},revokeSessionsPost:async(t,r={})=>{const n=new URL("/revoke-sessions",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},sendVerificationEmailPost:async(t,r={})=>{const n=new URL("/send-verification-email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signInAnonymousPost:async(t={})=>{const r=new URL("/sign-in/anonymous",zt);let n;e&&(n=e.baseOptions);const s={method:"POST",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},signInEmailOtpPost:async(t,r={})=>{Kt("signInEmailOtpPost","signInEmailOtpPostRequest",t);const n=new URL("/sign-in/email-otp",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signInEmailPost:async(t,r={})=>{Kt("signInEmailPost","signInEmailPostRequest",t);const n=new URL("/sign-in/email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signInPhoneNumberPost:async(t,r={})=>{Kt("signInPhoneNumberPost","signInPhoneNumberPostRequest",t);const n=new URL("/sign-in/phone-number",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signOutPost:async(t,r={})=>{const n=new URL("/sign-out",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},signUpEmailPost:async(t,r={})=>{const n=new URL("/sign-up/email",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},siweNoncePost:async(t,r={})=>{Kt("siweNoncePost","siweNoncePostRequest",t);const n=new URL("/siwe/nonce",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},siweVerifyPost:async(t,r={})=>{Kt("siweVerifyPost","siweVerifyPostRequest",t);const n=new URL("/siwe/verify",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},socialSignIn:async(t,r={})=>{Kt("socialSignIn","socialSignInRequest",t);const n=new URL("/sign-in/social",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},unlinkAccountPost:async(t,r={})=>{Kt("unlinkAccountPost","unlinkAccountPostRequest",t);const n=new URL("/unlink-account",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},verifyEmailGet:async(t,r,n={})=>{Kt("verifyEmailGet","token",t);const s=new URL("/verify-email",zt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...n},a={};void 0!==t&&(a.token=t),void 0!==r&&(a.callbackURL=r),Jt(s,a);let c=i&&i.headers?i.headers:{};return o.headers={...c,...n.headers},{url:Qt(s),options:o}}}}(e);return{async accountInfoPost(r,n){const s=await t.accountInfoPost(r,n);return $t(s,at,Gt,e)},async changeEmailPost(r,n){const s=await t.changeEmailPost(r,n);return $t(s,at,Gt,e)},async changePasswordPost(r,n){const s=await t.changePasswordPost(r,n);return $t(s,at,Gt,e)},async checkVerificationOtp(r,n){const s=await t.checkVerificationOtp(r,n);return $t(s,at,Gt,e)},async emailOtpResetPasswordPost(r,n){const s=await t.emailOtpResetPasswordPost(r,n);return $t(s,at,Gt,e)},async emailOtpSendVerificationOtpPost(r,n){const s=await t.emailOtpSendVerificationOtpPost(r,n);return $t(s,at,Gt,e)},async emailOtpVerifyEmailPost(r,n){const s=await t.emailOtpVerifyEmailPost(r,n);return $t(s,at,Gt,e)},async forgetPasswordEmailOtpPost(r,n){const s=await t.forgetPasswordEmailOtpPost(r,n);return $t(s,at,Gt,e)},async forgetPasswordPost(r,n){const s=await t.forgetPasswordPost(r,n);return $t(s,at,Gt,e)},async getAccessTokenPost(r,n){const s=await t.getAccessTokenPost(r,n);return $t(s,at,Gt,e)},async getSessionGet(r,n,s){const i=await t.getSessionGet(r,n,s);return $t(i,at,Gt,e)},async linkSiweListWalletsGet(r){const n=await t.linkSiweListWalletsGet(r);return $t(n,at,Gt,e)},async linkSiweNoncePost(r,n){const s=await t.linkSiweNoncePost(r,n);return $t(s,at,Gt,e)},async linkSiweUnlinkPost(r,n){const s=await t.linkSiweUnlinkPost(r,n);return $t(s,at,Gt,e)},async linkSiweVerifyPost(r,n){const s=await t.linkSiweVerifyPost(r,n);return $t(s,at,Gt,e)},async linkSocialPost(r,n){const s=await t.linkSocialPost(r,n);return $t(s,at,Gt,e)},async listAccountsGet(r){const n=await t.listAccountsGet(r);return $t(n,at,Gt,e)},async listSessionsGet(r){const n=await t.listSessionsGet(r);return $t(n,at,Gt,e)},async phoneNumberForgetPasswordPost(r,n){const s=await t.phoneNumberForgetPasswordPost(r,n);return $t(s,at,Gt,e)},async phoneNumberRequestPasswordResetPost(r,n){const s=await t.phoneNumberRequestPasswordResetPost(r,n);return $t(s,at,Gt,e)},async phoneNumberResetPasswordPost(r,n){const s=await t.phoneNumberResetPasswordPost(r,n);return $t(s,at,Gt,e)},async phoneNumberSendOtpPost(r,n){const s=await t.phoneNumberSendOtpPost(r,n);return $t(s,at,Gt,e)},async phoneNumberVerifyPost(r,n){const s=await t.phoneNumberVerifyPost(r,n);return $t(s,at,Gt,e)},async refreshTokenPost(r,n){const s=await t.refreshTokenPost(r,n);return $t(s,at,Gt,e)},async requestPasswordResetPost(r,n){const s=await t.requestPasswordResetPost(r,n);return $t(s,at,Gt,e)},async resetPasswordPost(r,n){const s=await t.resetPasswordPost(r,n);return $t(s,at,Gt,e)},async resetPasswordTokenGet(r,n,s){const i=await t.resetPasswordTokenGet(r,n,s);return $t(i,at,Gt,e)},async revokeOtherSessionsPost(r,n){const s=await t.revokeOtherSessionsPost(r,n);return $t(s,at,Gt,e)},async revokeSessionPost(r,n){const s=await t.revokeSessionPost(r,n);return $t(s,at,Gt,e)},async revokeSessionsPost(r,n){const s=await t.revokeSessionsPost(r,n);return $t(s,at,Gt,e)},async sendVerificationEmailPost(r,n){const s=await t.sendVerificationEmailPost(r,n);return $t(s,at,Gt,e)},async signInAnonymousPost(r){const n=await t.signInAnonymousPost(r);return $t(n,at,Gt,e)},async signInEmailOtpPost(r,n){const s=await t.signInEmailOtpPost(r,n);return $t(s,at,Gt,e)},async signInEmailPost(r,n){const s=await t.signInEmailPost(r,n);return $t(s,at,Gt,e)},async signInPhoneNumberPost(r,n){const s=await t.signInPhoneNumberPost(r,n);return $t(s,at,Gt,e)},async signOutPost(r,n){const s=await t.signOutPost(r,n);return $t(s,at,Gt,e)},async signUpEmailPost(r,n){const s=await t.signUpEmailPost(r,n);return $t(s,at,Gt,e)},async siweNoncePost(r,n){const s=await t.siweNoncePost(r,n);return $t(s,at,Gt,e)},async siweVerifyPost(r,n){const s=await t.siweVerifyPost(r,n);return $t(s,at,Gt,e)},async socialSignIn(r,n){const s=await t.socialSignIn(r,n);return $t(s,at,Gt,e)},async unlinkAccountPost(r,n){const s=await t.unlinkAccountPost(r,n);return $t(s,at,Gt,e)},async verifyEmailGet(r,n,s){const i=await t.verifyEmailGet(r,n,s);return $t(i,at,Gt,e)}}};let ir=class extends jt{accountInfoPost(e,t){return sr(this.configuration).accountInfoPost(e.accountInfoPostRequest,t).then(e=>e(this.axios,this.basePath))}changeEmailPost(e,t){return sr(this.configuration).changeEmailPost(e.changeEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}changePasswordPost(e,t){return sr(this.configuration).changePasswordPost(e.changePasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}checkVerificationOtp(e,t){return sr(this.configuration).checkVerificationOtp(e.checkVerificationOtpRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpResetPasswordPost(e,t){return sr(this.configuration).emailOtpResetPasswordPost(e.emailOtpResetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpSendVerificationOtpPost(e,t){return sr(this.configuration).emailOtpSendVerificationOtpPost(e.emailOtpSendVerificationOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}emailOtpVerifyEmailPost(e,t){return sr(this.configuration).emailOtpVerifyEmailPost(e.emailOtpVerifyEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}forgetPasswordEmailOtpPost(e,t){return sr(this.configuration).forgetPasswordEmailOtpPost(e.forgetPasswordEmailOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}forgetPasswordPost(e,t){return sr(this.configuration).forgetPasswordPost(e.forgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}getAccessTokenPost(e,t){return sr(this.configuration).getAccessTokenPost(e.refreshTokenPostRequest,t).then(e=>e(this.axios,this.basePath))}getSessionGet(e={},t){return sr(this.configuration).getSessionGet(e.xProjectKey,e.disableCookieCache,t).then(e=>e(this.axios,this.basePath))}linkSiweListWalletsGet(e){return sr(this.configuration).linkSiweListWalletsGet(e).then(e=>e(this.axios,this.basePath))}linkSiweNoncePost(e,t){return sr(this.configuration).linkSiweNoncePost(e.siweNoncePostRequest,t).then(e=>e(this.axios,this.basePath))}linkSiweUnlinkPost(e,t){return sr(this.configuration).linkSiweUnlinkPost(e.linkSiweUnlinkPostRequest,t).then(e=>e(this.axios,this.basePath))}linkSiweVerifyPost(e,t){return sr(this.configuration).linkSiweVerifyPost(e.siweVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}linkSocialPost(e,t){return sr(this.configuration).linkSocialPost(e.linkSocialPostRequest,t).then(e=>e(this.axios,this.basePath))}listAccountsGet(e){return sr(this.configuration).listAccountsGet(e).then(e=>e(this.axios,this.basePath))}listSessionsGet(e){return sr(this.configuration).listSessionsGet(e).then(e=>e(this.axios,this.basePath))}phoneNumberForgetPasswordPost(e,t){return sr(this.configuration).phoneNumberForgetPasswordPost(e.phoneNumberForgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberRequestPasswordResetPost(e,t){return sr(this.configuration).phoneNumberRequestPasswordResetPost(e.phoneNumberRequestPasswordResetPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberResetPasswordPost(e,t){return sr(this.configuration).phoneNumberResetPasswordPost(e.phoneNumberResetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberSendOtpPost(e,t){return sr(this.configuration).phoneNumberSendOtpPost(e.phoneNumberSendOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}phoneNumberVerifyPost(e,t){return sr(this.configuration).phoneNumberVerifyPost(e.phoneNumberVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}refreshTokenPost(e,t){return sr(this.configuration).refreshTokenPost(e.refreshTokenPostRequest,t).then(e=>e(this.axios,this.basePath))}requestPasswordResetPost(e,t){return sr(this.configuration).requestPasswordResetPost(e.forgetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}resetPasswordPost(e,t){return sr(this.configuration).resetPasswordPost(e.resetPasswordPostRequest,t).then(e=>e(this.axios,this.basePath))}resetPasswordTokenGet(e,t){return sr(this.configuration).resetPasswordTokenGet(e.token,e.callbackURL,t).then(e=>e(this.axios,this.basePath))}revokeOtherSessionsPost(e={},t){return sr(this.configuration).revokeOtherSessionsPost(e.body,t).then(e=>e(this.axios,this.basePath))}revokeSessionPost(e={},t){return sr(this.configuration).revokeSessionPost(e.revokeSessionPostRequest,t).then(e=>e(this.axios,this.basePath))}revokeSessionsPost(e={},t){return sr(this.configuration).revokeSessionsPost(e.body,t).then(e=>e(this.axios,this.basePath))}sendVerificationEmailPost(e={},t){return sr(this.configuration).sendVerificationEmailPost(e.sendVerificationEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}signInAnonymousPost(e){return sr(this.configuration).signInAnonymousPost(e).then(e=>e(this.axios,this.basePath))}signInEmailOtpPost(e,t){return sr(this.configuration).signInEmailOtpPost(e.signInEmailOtpPostRequest,t).then(e=>e(this.axios,this.basePath))}signInEmailPost(e,t){return sr(this.configuration).signInEmailPost(e.signInEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}signInPhoneNumberPost(e,t){return sr(this.configuration).signInPhoneNumberPost(e.signInPhoneNumberPostRequest,t).then(e=>e(this.axios,this.basePath))}signOutPost(e={},t){return sr(this.configuration).signOutPost(e.body,t).then(e=>e(this.axios,this.basePath))}signUpEmailPost(e={},t){return sr(this.configuration).signUpEmailPost(e.signUpEmailPostRequest,t).then(e=>e(this.axios,this.basePath))}siweNoncePost(e,t){return sr(this.configuration).siweNoncePost(e.siweNoncePostRequest,t).then(e=>e(this.axios,this.basePath))}siweVerifyPost(e,t){return sr(this.configuration).siweVerifyPost(e.siweVerifyPostRequest,t).then(e=>e(this.axios,this.basePath))}socialSignIn(e,t){return sr(this.configuration).socialSignIn(e.socialSignInRequest,t).then(e=>e(this.axios,this.basePath))}unlinkAccountPost(e,t){return sr(this.configuration).unlinkAccountPost(e.unlinkAccountPostRequest,t).then(e=>e(this.axios,this.basePath))}verifyEmailGet(e,t){return sr(this.configuration).verifyEmailGet(e.token,e.callbackURL,t).then(e=>e(this.axios,this.basePath))}};const or=function(e){const t=function(e){return{handleChainRpcRequest:async(t,r,n={})=>{Kt("handleChainRpcRequest","chainId",t),Kt("handleChainRpcRequest","jsonRpcRequest",r);const s="/rpc/{chainId}".replace("{chainId}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}},handleRpcRequest:async(t,r={})=>{Kt("handleRpcRequest","jsonRpcRequest",t);const n=new URL("/rpc",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r};Jt(n,{});let o=s&&s.headers?s.headers:{};return i.headers={"Content-Type":"application/json",...o,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}}}}(e);return{async handleChainRpcRequest(r,n,s){const i=await t.handleChainRpcRequest(r,n,s);return $t(i,at,Gt,e)},async handleRpcRequest(r,n){const s=await t.handleRpcRequest(r,n);return $t(s,at,Gt,e)}}};let ar=class extends jt{handleChainRpcRequest(e,t){return or(this.configuration).handleChainRpcRequest(e.chainId,e.jsonRpcRequest,t).then(e=>e(this.axios,this.basePath))}handleRpcRequest(e,t){return or(this.configuration).handleRpcRequest(e.jsonRpcRequest,t).then(e=>e(this.axios,this.basePath))}};const cr=function(e){const t=function(e){return{createSession:async(t,r,n={})=>{Kt("createSession","createSessionRequest",t);const s=new URL("/v1/sessions",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},getPlayerSessions:async(t,r,n,s,i,o={})=>{Kt("getPlayerSessions","player",t);const a=new URL("/v1/sessions",zt);let c;e&&(c=e.baseOptions);const u={method:"GET",...c,...o},h={},l={};await Vt(h,e),void 0!==r&&(l.limit=r),void 0!==n&&(l.skip=n),void 0!==s&&(l.order=s),void 0!==t&&(l.player=t),i&&(l.expand=i),Jt(a,l);let d=c&&c.headers?c.headers:{};return u.headers={...h,...d,...o.headers},{url:Qt(a),options:u}},getSession:async(t,r,n={})=>{Kt("getSession","id",t);const s="/v1/sessions/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Vt(c,e),r&&(u.expand=r),Jt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Qt(i),options:a}},revokeSession:async(t,r,n={})=>{Kt("revokeSession","revokeSessionRequest",t);const s=new URL("/v1/sessions/revoke",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},signatureSession:async(t,r,n={})=>{Kt("signatureSession","id",t),Kt("signatureSession","signatureRequest",r);const s="/v1/sessions/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}}}}(e);return{async createSession(r,n,s){const i=await t.createSession(r,n,s);return $t(i,at,Gt,e)},async getPlayerSessions(r,n,s,i,o,a){const c=await t.getPlayerSessions(r,n,s,i,o,a);return $t(c,at,Gt,e)},async getSession(r,n,s){const i=await t.getSession(r,n,s);return $t(i,at,Gt,e)},async revokeSession(r,n,s){const i=await t.revokeSession(r,n,s);return $t(i,at,Gt,e)},async signatureSession(r,n,s){const i=await t.signatureSession(r,n,s);return $t(i,at,Gt,e)}}};class ur extends jt{createSession(e,t){return cr(this.configuration).createSession(e.createSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}getPlayerSessions(e,t){return cr(this.configuration).getPlayerSessions(e.player,e.limit,e.skip,e.order,e.expand,t).then(e=>e(this.axios,this.basePath))}getSession(e,t){return cr(this.configuration).getSession(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}revokeSession(e,t){return cr(this.configuration).revokeSession(e.revokeSessionRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}signatureSession(e,t){return cr(this.configuration).signatureSession(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const hr=function(e){const t=function(e){return{createTransactionIntent:async(t,r,n={})=>{Kt("createTransactionIntent","createTransactionIntentRequest",t);const s=new URL("/v1/transaction_intents",zt);let i;e&&(i=e.baseOptions);const o={method:"POST",...i,...n},a={};await Vt(a,e),null!=r&&(a["X-Behalf-Of-Project"]=String(r)),a["Content-Type"]="application/json",Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...n.headers},o.data=Yt(t,o,e),{url:Qt(s),options:o}},estimateTransactionIntentCost:async(t,r={})=>{Kt("estimateTransactionIntentCost","createTransactionIntentRequest",t);const n=new URL("/v1/transaction_intents/estimate_gas_cost",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},getTransactionIntent:async(t,r,n={})=>{Kt("getTransactionIntent","id",t);const s="/v1/transaction_intents/{id}".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"GET",...o,...n},c={},u={};await Vt(c,e),r&&(u.expand=r),Jt(i,u);let h=o&&o.headers?o.headers:{};return a.headers={...c,...h,...n.headers},{url:Qt(i),options:a}},getTransactionIntents:async(t,r,n,s,i,o,a,c,u,h={})=>{const l=new URL("/v1/transaction_intents",zt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...h},p={},m={};await Vt(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),s&&(m.expand=s),void 0!==i&&(m.chainId=i),o&&(m.account=o),a&&(m.player=a),void 0!==c&&(m.status=c),u&&(m.policy=u),Jt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...h.headers},{url:Qt(l),options:f}},signature:async(t,r,n={})=>{Kt("signature","id",t),Kt("signature","signatureRequest",r);const s="/v1/transaction_intents/{id}/signature".replace("{id}",encodeURIComponent(String(t))),i=new URL(s,zt);let o;e&&(o=e.baseOptions);const a={method:"POST",...o,...n},c={};await Vt(c,e),await Vt(c,e),c["Content-Type"]="application/json",Jt(i,{});let u=o&&o.headers?o.headers:{};return a.headers={...c,...u,...n.headers},a.data=Yt(r,a,e),{url:Qt(i),options:a}}}}(e);return{async createTransactionIntent(r,n,s){const i=await t.createTransactionIntent(r,n,s);return $t(i,at,Gt,e)},async estimateTransactionIntentCost(r,n){const s=await t.estimateTransactionIntentCost(r,n);return $t(s,at,Gt,e)},async getTransactionIntent(r,n,s){const i=await t.getTransactionIntent(r,n,s);return $t(i,at,Gt,e)},async getTransactionIntents(r,n,s,i,o,a,c,u,h,l){const d=await t.getTransactionIntents(r,n,s,i,o,a,c,u,h,l);return $t(d,at,Gt,e)},async signature(r,n,s){const i=await t.signature(r,n,s);return $t(i,at,Gt,e)}}};class lr extends jt{createTransactionIntent(e,t){return hr(this.configuration).createTransactionIntent(e.createTransactionIntentRequest,e.xBehalfOfProject,t).then(e=>e(this.axios,this.basePath))}estimateTransactionIntentCost(e,t){return hr(this.configuration).estimateTransactionIntentCost(e.createTransactionIntentRequest,t).then(e=>e(this.axios,this.basePath))}getTransactionIntent(e,t){return hr(this.configuration).getTransactionIntent(e.id,e.expand,t).then(e=>e(this.axios,this.basePath))}getTransactionIntents(e={},t){return hr(this.configuration).getTransactionIntents(e.limit,e.skip,e.order,e.expand,e.chainId,e.account,e.player,e.status,e.policy,t).then(e=>e(this.axios,this.basePath))}signature(e,t){return hr(this.configuration).signature(e.id,e.signatureRequest,t).then(e=>e(this.axios,this.basePath))}}const dr=function(e){const t=function(e){return{deleteUser:async(t,r={})=>{Kt("deleteUser","id",t);const n="/v2/users/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"DELETE",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}},getAuthUser:async(t,r={})=>{Kt("getAuthUser","id",t);const n="/v2/users/{id}".replace("{id}",encodeURIComponent(String(t))),s=new URL(n,zt);let i;e&&(i=e.baseOptions);const o={method:"GET",...i,...r},a={};await Vt(a,e),Jt(s,{});let c=i&&i.headers?i.headers:{};return o.headers={...a,...c,...r.headers},{url:Qt(s),options:o}},getAuthUsers:async(t,r,n,s,i,o,a,c,u,h={})=>{const l=new URL("/v2/users",zt);let d;e&&(d=e.baseOptions);const f={method:"GET",...d,...h},p={},m={};await Vt(p,e),void 0!==t&&(m.limit=t),void 0!==r&&(m.skip=r),void 0!==n&&(m.order=n),void 0!==s&&(m.name=s),void 0!==i&&(m.externalUserId=i),void 0!==o&&(m.email=o),void 0!==a&&(m.phoneNumber=a),void 0!==c&&(m.authProviderId=c),void 0!==u&&(m.walletClientType=u),Jt(l,m);let g=d&&d.headers?d.headers:{};return f.headers={...p,...g,...h.headers},{url:Qt(l),options:f}},meV2:async(t={})=>{const r=new URL("/iam/v2/me",zt);let n;e&&(n=e.baseOptions);const s={method:"GET",...n,...t};Jt(r,{});let i=n&&n.headers?n.headers:{};return s.headers={...i,...t.headers},{url:Qt(r),options:s}},pregenerateUserV2:async(t,r={})=>{Kt("pregenerateUserV2","pregenerateUserRequestV2",t);const n=new URL("/v2/users/pregenerate",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}},thirdPartyV2:async(t,r={})=>{Kt("thirdPartyV2","thirdPartyOAuthRequest",t);const n=new URL("/iam/v2/user/third_party",zt);let s;e&&(s=e.baseOptions);const i={method:"POST",...s,...r},o={};await Vt(o,e),o["Content-Type"]="application/json",Jt(n,{});let a=s&&s.headers?s.headers:{};return i.headers={...o,...a,...r.headers},i.data=Yt(t,i,e),{url:Qt(n),options:i}}}}(e);return{async deleteUser(r,n){const s=await t.deleteUser(r,n);return $t(s,at,Gt,e)},async getAuthUser(r,n){const s=await t.getAuthUser(r,n);return $t(s,at,Gt,e)},async getAuthUsers(r,n,s,i,o,a,c,u,h,l){const d=await t.getAuthUsers(r,n,s,i,o,a,c,u,h,l);return $t(d,at,Gt,e)},async meV2(r){const n=await t.meV2(r);return $t(n,at,Gt,e)},async pregenerateUserV2(r,n){const s=await t.pregenerateUserV2(r,n);return $t(s,at,Gt,e)},async thirdPartyV2(r,n){const s=await t.thirdPartyV2(r,n);return $t(s,at,Gt,e)}}};let fr=class extends jt{deleteUser(e,t){return dr(this.configuration).deleteUser(e.id,t).then(e=>e(this.axios,this.basePath))}getAuthUser(e,t){return dr(this.configuration).getAuthUser(e.id,t).then(e=>e(this.axios,this.basePath))}getAuthUsers(e={},t){return dr(this.configuration).getAuthUsers(e.limit,e.skip,e.order,e.name,e.externalUserId,e.email,e.phoneNumber,e.authProviderId,e.walletClientType,t).then(e=>e(this.axios,this.basePath))}meV2(e){return dr(this.configuration).meV2(e).then(e=>e(this.axios,this.basePath))}pregenerateUserV2(e,t){return dr(this.configuration).pregenerateUserV2(e.pregenerateUserRequestV2,t).then(e=>e(this.axios,this.basePath))}thirdPartyV2(e,t){return dr(this.configuration).thirdPartyV2(e.thirdPartyOAuthRequest,t).then(e=>e(this.axios,this.basePath))}},pr=class{apiKey;username;password;accessToken;basePath;baseOptions;formDataCtor;constructor(e={}){this.apiKey=e.apiKey,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}};const mr=({basePath:e,accessToken:t,nativeAppIdentifier:r})=>{if(!e.trim())throw Error("basePath can not be empty");const n={basePath:e,accessToken:t,baseOptions:{headers:{...r&&{"x-native-app-identifier":r},Cookie:null},withCredentials:!1}};return new pr(n)};let gr=class{config;transactionIntentsApi;accountsApi;accountsV2Api;rpcApi;sessionsApi;authApi;userApi;authenticationApi;storage;onLogout;axiosInstance;constructor(e){this.storage=e.storage,this.onLogout=e.onLogout,this.axiosInstance=at.create(),qt(this.axiosInstance,{retries:3,retryDelay:qt.exponentialDelay,retryCondition:qt.isRetryableError}),this.setupInterceptors();const t={basePath:e.basePath,accessToken:e.accessToken,nativeAppIdentifier:e.nativeAppIdentifier};this.config={backend:mr(t)};const r={basePath:`${e.basePath}/iam/v2/auth`,accessToken:e.accessToken,nativeAppIdentifier:e.nativeAppIdentifier},n=mr(r);this.authenticationApi=new nr(this.config.backend,void 0,this.axiosInstance),this.authApi=new ir(n,void 0,this.axiosInstance),this.userApi=new fr(this.config.backend,void 0,this.axiosInstance),this.transactionIntentsApi=new lr(this.config.backend,void 0,this.axiosInstance),this.accountsApi=new Zt(this.config.backend,void 0,this.axiosInstance),this.accountsV2Api=new tr(this.config.backend,void 0,this.axiosInstance),this.sessionsApi=new ur(this.config.backend,void 0,this.axiosInstance),this.rpcApi=new ar(this.config.backend,void 0,this.axiosInstance)}setupInterceptors(){this.axiosInstance.interceptors.response.use(e=>e,async e=>(401===e.response?.status&&(await this.clearAuthenticationState(),this.emitLogoutEvent()),Promise.reject(e)))}async clearAuthenticationState(){if(this.storage)try{this.storage.remove("openfort.authentication"),this.storage.remove("openfort.account"),this.storage.remove("openfort.session"),this.storage.remove("openfort.pkce_state"),this.storage.remove("openfort.pkce_verifier")}catch(e){}}emitLogoutEvent(){if(this.onLogout)try{this.onLogout()}catch(e){}}};var yr;!function(e){e.AUTHENTICATION="openfort.authentication",e.CONFIGURATION="openfort.configuration",e.ACCOUNT="openfort.account",e.TEST="openfort.test",e.SESSION="openfort.session"}(yr||(yr={}));let wr=class e{type;token;userId;thirdPartyProvider;thirdPartyTokenType;constructor(e,t,r,n,s){this.type=e,this.token=t,this.userId=r,this.thirdPartyProvider=n,this.thirdPartyTokenType=s}static thirdPartyAuthToken;get provider(){return this.thirdPartyProvider}get tokenType(){return this.thirdPartyTokenType}save(t){const r="third_party"===this.type;r&&(e.thirdPartyAuthToken=this.token),t.save(yr.AUTHENTICATION,JSON.stringify({type:this.type,token:r?void 0:this.token,userId:this.userId,thirdPartyProvider:this.thirdPartyProvider,thirdPartyTokenType:this.thirdPartyTokenType}))}static clear(t){e.thirdPartyAuthToken="",t.remove(yr.AUTHENTICATION)}static async fromStorage(t){const r=await t.get(yr.AUTHENTICATION);if(!r)return null;try{const t=JSON.parse(r);return"third_party"===t.type&&(t.token=e.thirdPartyAuthToken),new e(t.type,t.token,t.userId||t.player,t.thirdPartyProvider,t.thirdPartyTokenType)}catch{return null}}};const vr={PROVIDER_DISABLED:"PROVIDER_DISABLED",INVALID_CREDENTIALS:"INVALID_EMAIL_OR_PASSWORD",INVALID_EMAIL:"INVALID_EMAIL",INVALID_PASSWORD:"INVALID_PASSWORD",INVALID_TOKEN:"INVALID_TOKEN",USER_NOT_FOUND:"USER_NOT_FOUND",USER_ALREADY_EXISTS:"USER_ALREADY_EXISTS",EMAIL_ALREADY_IN_USE:"USER_ALREADY_EXISTS",USER_EMAIL_NOT_FOUND:"USER_EMAIL_NOT_FOUND",FAILED_TO_CREATE_USER:"FAILED_TO_CREATE_USER",FAILED_TO_UPDATE_USER:"FAILED_TO_UPDATE_USER",PASSWORD_TOO_SHORT:"PASSWORD_TOO_SHORT",PASSWORD_TOO_LONG:"PASSWORD_TOO_LONG",EMAIL_NOT_VERIFIED:"EMAIL_NOT_VERIFIED",EMAIL_CANNOT_BE_UPDATED:"EMAIL_CAN_NOT_BE_UPDATED",SESSION_EXPIRED:"SESSION_EXPIRED",SESSION_CREATION_FAILED:"FAILED_TO_CREATE_SESSION",SESSION_RETRIEVAL_FAILED:"FAILED_TO_GET_SESSION",SOCIAL_ACCOUNT_ALREADY_LINKED:"SOCIAL_ACCOUNT_ALREADY_LINKED",OAUTH_PROVIDER_NOT_FOUND:"PROVIDER_NOT_FOUND",OAUTH_TOKEN_INVALID:"ID_TOKEN_NOT_SUPPORTED",OAUTH_USER_INFO_FAILED:"FAILED_TO_GET_USER_INFO",CANNOT_UNLINK_LAST_ACCOUNT:"FAILED_TO_UNLINK_LAST_ACCOUNT",ACCOUNT_NOT_FOUND:"ACCOUNT_NOT_FOUND",CREDENTIAL_ACCOUNT_NOT_FOUND:"CREDENTIAL_ACCOUNT_NOT_FOUND",USER_ALREADY_HAS_PASSWORD:"USER_ALREADY_HAS_PASSWORD",OTP_INVALID:"INVALID_OTP",OTP_EXPIRED:"OTP_EXPIRED",OTP_SEND_FAILED:"OTP_SEND_FAILED",INVALID_CONFIGURATION:"INVALID_CONFIGURATION",NOT_LOGGED_IN:"NOT_LOGGED_IN",ALREADY_LOGGED_IN:"ALREADY_LOGGED_IN",REFRESH_TOKEN_ERROR:"REFRESH_TOKEN_ERROR",MISSING_SIGNER:"MISSING_SIGNER",NOT_CONFIGURED:"NOT_CONFIGURED",MISSING_RECOVERY_PASSWORD:"MISSING_RECOVERY_PASSWORD",WRONG_RECOVERY_PASSWORD:"WRONG_RECOVERY_PASSWORD",MISSING_PASSKEY:"MISSING_PASSKEY",INCORRECT_PASSKEY:"INCORRECT_PASSKEY",MISSING_PROJECT_ENTROPY:"MISSING_PROJECT_ENTROPY",MISSING_USER_ENTROPY:"MISSING_USER_ENTROPY",INCORRECT_USER_ENTROPY:"INCORRECT_USER_ENTROPY",USER_NOT_AUTHORIZED:"USER_NOT_AUTHORIZED",OTP_REQUIRED:"OTP_REQUIRED",INTERNAL_ERROR:"INTERNAL_ERROR",REQUEST_ERROR:"REQUEST_ERROR",OPERATION_NOT_SUPPORTED:"OPERATION_NOT_SUPPORTED",LOGOUT_ERROR:"LOGOUT_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},Ar=vr,br=vr;let Er=class e extends Error{error;error_description;constructor(t,r){super(r),this.name="OpenfortError",this.error=t,this.error_description=r,Object.setPrototypeOf(this,e.prototype)}static fromPayload({error:t,error_description:r,message:n,code:s}){let i,o;return"object"==typeof t&&null!==t?(i=t.code||"unknown_error",o=t.message||n||r||"An unknown error occurred"):(i=s||t||"unknown_error",o=r||n||"An unknown error occurred"),new e(i,o)}},Sr=class e extends Er{statusCode;constructor(t,r,n){super(t,r),this.statusCode=n,this.name="AuthenticationError",Object.setPrototypeOf(this,e.prototype)}},_r=class e extends Er{audience;scope;constructor(t,r,n,s){super(t,r),this.audience=n,this.scope=s,this.name="SessionError",Object.setPrototypeOf(this,e.prototype)}},Pr=class e extends Er{constructor(t){super("invalid_configuration",t),this.name="ConfigurationError",Object.setPrototypeOf(this,e.prototype)}},kr=class e extends Er{accountId;constructor(t,r,n){super(t,r),this.accountId=n,this.name="SignerError",Object.setPrototypeOf(this,e.prototype)}},Ir=class e extends Er{userId;constructor(t,r,n){super(t,r),this.userId=n,this.name="UserError",Object.setPrototypeOf(this,e.prototype)}},Rr=class e extends Er{constructor(t,r){super(t,r),this.name="OTPError",Object.setPrototypeOf(this,e.prototype)}},Tr=class e extends Er{provider;constructor(t,r,n){super(t,r),this.provider=n,this.name="OAuthError",Object.setPrototypeOf(this,e.prototype)}},Nr=class e extends Er{constructor(t="User not authorized to access this ecosystem"){super("user_not_authorized",t),this.name="AuthorizationError",Object.setPrototypeOf(this,e.prototype)}},Or=class e extends Er{recoveryMethod;constructor(t,r,n){super(t,r),this.recoveryMethod=n,this.name="RecoveryError",Object.setPrototypeOf(this,e.prototype)}},Cr=class e extends Er{statusCode;constructor(t,r){super("request_error",t),this.statusCode=r,this.name="RequestError",Object.setPrototypeOf(this,e.prototype)}};var xr,Mr,Ur,Dr,Lr,Br,Fr,qr,Gr,jr,Hr,zr,Kr;!function(e){e[e.NONE=0]="NONE",e[e.UNAUTHENTICATED=1]="UNAUTHENTICATED",e[e.EMBEDDED_SIGNER_NOT_CONFIGURED=2]="EMBEDDED_SIGNER_NOT_CONFIGURED",e[e.CREATING_ACCOUNT=3]="CREATING_ACCOUNT",e[e.READY=4]="READY"}(xr||(xr={})),function(e){e.ON_AUTH_INIT="onAuthInit",e.ON_AUTH_SUCCESS="onAuthSuccess",e.ON_OTP_REQUEST="onOtpRequest",e.ON_OTP_FAILURE="onOtpFailure",e.ON_AUTH_FAILURE="onAuthFailure",e.ON_LOGOUT="onLogout",e.ON_SWITCH_ACCOUNT="onSwitchAccount",e.ON_SIGNED_MESSAGE="onSignedMessage",e.ON_EMBEDDED_WALLET_CREATED="onEmbeddedWalletCreated",e.ON_EMBEDDED_WALLET_RECOVERED="onEmbeddedWalletRecovered"}(Mr||(Mr={})),function(e){e.PASSWORD="password",e.AUTOMATIC="automatic",e.PASSKEY="passkey"}(Ur||(Ur={})),function(e){e.ERC6551V1="ERC6551V1",e.UPGRADEABLE_V5="UpgradeableV5",e.UPGRADEABLE_V4="UpgradeableV4",e.UPGRADEABLE_V6="UpgradeableV6",e.ZKSYNC_UPGRADEABLE_V1="ZKSyncUpgradeableV1",e.ZKSYNC_UPGRADEABLE_V2="ZKSyncUpgradeableV2",e.SIMPLE="Simple",e.CALIBUR="Calibur"}(Dr||(Dr={})),function(e){e.OPENFORT="openfort",e.THIRD_PARTY="thirdParty"}(Lr||(Lr={})),function(e){e.ID_TOKEN="idToken",e.CUSTOM_TOKEN="customToken"}(Br||(Br={})),function(e){e.ACCELBYTE="accelbyte",e.FIREBASE="firebase",e.BETTER_AUTH="better-auth",e.LOOTLOCKER="lootlocker",e.PLAYFAB="playfab",e.SUPABASE="supabase",e.CUSTOM="custom",e.OIDC="oidc"}(Fr||(Fr={})),function(e){e.EMAIL="email",e.WALLET="wallet"}(qr||(qr={})),function(e){e.GOOGLE="google",e.TWITTER="twitter",e.APPLE="apple",e.FACEBOOK="facebook",e.DISCORD="discord",e.EPIC_GAMES="epic_games",e.LINE="line"}(Gr||(Gr={})),function(e){e.ACTION_VERIFY_EMAIL="verify_email"}(jr||(jr={})),function(e){e.EOA="Externally Owned Account",e.SMART_ACCOUNT="Smart Account",e.DELEGATED_ACCOUNT="Delegated Account"}(Hr||(Hr={})),function(e){e.EVM="EVM",e.SVM="SVM"}(zr||(zr={})),function(e){e.ASC="asc",e.DESC="desc"}(Kr||(Kr={}));let Vr=class{storage;authManager;validateAndRefreshToken;ensureInitialized;eventEmitter;constructor(e,t,r,n,s){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.eventEmitter=s}async logInWithEmailPassword({email:e,password:t}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"email"});try{const r=await this.authManager.loginEmailPassword(e,t);return null===r?.token||(new wr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async signUpGuest(){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"guest"});try{const e=await this.authManager.registerGuest();return new wr("session",e.token,e.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,e),e}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async signUpWithEmailPassword({email:e,password:t,name:r,callbackURL:n}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"email"});try{const s=r||e,i=await this.authManager.signupEmailPassword(e,t,s,n);return i instanceof Object&&"action"in i||(new wr("session",i.token,i.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,i)),i}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async initOAuth({provider:e,redirectTo:t,options:r}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"oauth",provider:e});try{return await this.authManager.initOAuth(e,t,r)}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async logInWithIdToken({provider:e,token:t}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"idToken",provider:e});try{const r=await this.authManager.loginWithIdToken(e,t);return new wr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,r),r}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async storeCredentials({token:e,userId:t}){if(await this.ensureInitialized(),!t)throw new Pr("User ID is required to store credentials");const r=encodeURIComponent(e);new wr("session",r,t).save(this.storage)}async logout(){const e=await wr.fromStorage(this.storage);if(e){try{"third_party"!==e.type&&await this.authManager.logout(e)}catch(e){}wr.clear(this.storage),this.eventEmitter.emit(Mr.ON_LOGOUT)}}async requestEmailOtp({email:e}){await this.ensureInitialized();const t=await wr.fromStorage(this.storage);this.eventEmitter.emit(Mr.ON_OTP_REQUEST,{method:"email"});const r=!!t&&(await this.authManager.getUser(t)).isAnonymous;try{await this.authManager.requestEmailOTP(e,t?.token&&!r?"email-verification":"sign-in")}catch(e){throw this.eventEmitter.emit(Mr.ON_OTP_FAILURE,e),e}}async logInWithEmailOtp({email:e,otp:t}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"email"});try{const r=await this.authManager.loginWithEmailOTP(e,t);return null===r?.token||(new wr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async requestPhoneOtp({phoneNumber:e}){await this.ensureInitialized(),this.eventEmitter.emit(Mr.ON_OTP_REQUEST,{method:"phone",provider:"phone"});try{await this.authManager.requestPhoneOtp(e)}catch(e){throw this.eventEmitter.emit(Mr.ON_OTP_FAILURE,e),e}}async linkPhoneOtp({phoneNumber:e,otp:t}){await this.ensureInitialized(),this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"phone"});const r=await wr.fromStorage(this.storage);if(!r)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");try{const n=await this.authManager.linkSMSOTP(e,t,r);return null===n?.token||(new wr("session",n.token,n.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,n)),n}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async logInWithPhoneOtp({phoneNumber:e,otp:t}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"phone"});try{const r=await this.authManager.loginWithSMSOTP(e,t);return null===r?.token||(new wr("session",r.token,r.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,r)),r}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async requestResetPassword({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestResetPassword(e,t)}async resetPassword({password:e,token:t}){await this.ensureInitialized(),await this.authManager.resetPassword(e,t)}async requestEmailVerification({email:e,redirectUrl:t}){await this.ensureInitialized(),await this.authManager.requestEmailVerification(e,t)}async verifyEmail({token:e,callbackURL:t}){await this.ensureInitialized(),await this.authManager.verifyEmail(e,t)}async verifyEmailOtp({email:e,otp:t}){await this.ensureInitialized(),await this.authManager.verifyEmailOtp(e,t)}async initLinkOAuth({provider:e,redirectTo:t,options:r}){await this.validateAndRefreshToken();const n=await wr.fromStorage(this.storage);if(!n)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");return this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"oauth",provider:e}),(await this.authManager.getUser(n)).isAnonymous?this.authManager.linkOAuthToAnonymous(n,e,t):await this.authManager.linkOAuth(n,e,t,r)}async unlinkOAuth({provider:e}){await this.validateAndRefreshToken();const t=await wr.fromStorage(this.storage);if(!t)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");return await this.authManager.unlinkOAuth(e,t)}async initSiwe({address:e}){return await this.ensureInitialized(),await this.authManager.initSIWE(e)}async initLinkSiwe({address:e}){await this.ensureInitialized();const t=await wr.fromStorage(this.storage);if(!t)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");return await this.authManager.linkSIWE(e,t)}async loginWithSiwe({signature:e,message:t,walletClientType:r,connectorType:n,address:s}){if(await this.ensureInitialized(),await wr.fromStorage(this.storage))throw new _r(Ar.ALREADY_LOGGED_IN,"Already logged in");this.eventEmitter.emit(Mr.ON_AUTH_INIT,{method:"siwe"});try{const i=await this.authManager.authenticateSIWE(e,t,r,n,s);return new wr("session",i.token,i.user?.id).save(this.storage),this.eventEmitter.emit(Mr.ON_AUTH_SUCCESS,i),i}catch(e){throw this.eventEmitter.emit(Mr.ON_AUTH_FAILURE,e),e}}async linkWithSiwe({signature:e,message:t,walletClientType:r,connectorType:n,address:s,chainId:i}){await this.validateAndRefreshToken();const o=await wr.fromStorage(this.storage);if(!o)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");return await this.authManager.linkWallet(e,t,r,n,s,i,o)}async unlinkWallet({address:e,chainId:t}){await this.validateAndRefreshToken();const r=await wr.fromStorage(this.storage);if(!r)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");return await this.authManager.unlinkWallet(e,t,r)}async addEmail(e){await this.validateAndRefreshToken();const t=await wr.fromStorage(this.storage);if(!t)throw new _r(Ar.NOT_LOGGED_IN,"No authentication found");if((await this.authManager.getUser(t)).email)throw new Pr("User already has an email");return await this.authManager.addEmail(e.email,e.callbackURL,t)}};var Wr={};!function(e){var t=_t&&_t.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};function r(e){return e[Math.floor(Math.random()*e.length)]}function n(e){return e.reduce(function(e,t){return e.length>t.length?e:t})}function s(e){return e.reduce(function(e,t){return e.length<t.length?e:t})}function i(n){void 0===n&&(n={}),"string"==typeof n&&(n={separator:n}),"boolean"==typeof n&&(n={capitalize:n});var s=n.separator,i=void 0===s?"":s,o=n.capitalize,a=void 0===o||o,c=n.adjectiveCount,u=void 0===c?1:c,h=n.addAdverb,l=void 0!==h&&h,d=t(t(t([],t([],Array(u),!0).map(function(t){return r(e.adjectives)}),!0),[r(e.nouns),r(e.verbs)],!1),l?[r(e.adverbs)]:[],!0);return a&&(d=d.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)})),d.join(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.minLength=e.maxLength=e.poolSize=e.humanId=e.adverbs=e.verbs=e.nouns=e.adjectives=void 0,e.adjectives=["afraid","all","beige","better","big","blue","bold","brave","breezy","bright","brown","bumpy","busy","calm","chatty","chilly","chubby","clean","clear","clever","cold","common","cool","cozy","crisp","cuddly","curly","curvy","cute","cyan","dark","deep","dirty","dry","dull","eager","early","easy","eight","eighty","eleven","empty","every","fair","famous","fancy","fast","few","fiery","fifty","fine","five","flat","floppy","fluffy","forty","four","frank","free","fresh","fruity","full","funky","funny","fuzzy","gentle","giant","gold","good","goofy","great","green","grumpy","happy","heavy","hip","honest","hot","huge","humble","hungry","icy","itchy","jolly","khaki","kind","large","late","lazy","legal","lemon","light","little","long","loose","loud","lovely","lucky","major","many","metal","mighty","modern","moody","neat","new","nice","nine","ninety","odd","old","olive","open","orange","perky","petite","pink","plain","plenty","polite","pretty","proud","public","puny","purple","quick","quiet","rare","ready","real","red","rich","ripe","salty","seven","shaggy","shaky","sharp","shiny","short","shy","silent","silly","silver","six","sixty","slick","slimy","slow","small","smart","smooth","social","soft","solid","some","sour","sparkly","spicy","spotty","stale","strict","strong","sunny","sweet","swift","tall","tame","tangy","tasty","ten","tender","thick","thin","thirty","three","tidy","tiny","tired","tough","tricky","true","twelve","twenty","two","upset","vast","violet","wacky","warm","wet","whole","wicked","wide","wild","wise","witty","yellow","young","yummy"],e.nouns=["actors","ads","adults","aliens","animals","ants","apes","apples","areas","baboons","badgers","bags","balloons","bananas","banks","bars","baths","bats","beans","bears","beds","beers","bees","berries","bikes","birds","boats","bobcats","books","bottles","boxes","breads","brooms","buckets","bugs","buses","bushes","buttons","camels","cameras","candies","candles","canyons","carpets","carrots","cars","cases","cats","chairs","chefs","chicken","cities","clocks","cloths","clouds","clowns","clubs","coats","cobras","coins","colts","comics","cooks","corners","cougars","cows","crabs","crews","cups","cycles","dancers","days","deer","deserts","dingos","dodos","dogs","dolls","donkeys","donuts","doodles","doors","dots","dragons","drinks","dryers","ducks","eagles","ears","eels","eggs","emus","ends","experts","eyes","facts","falcons","fans","feet","files","flies","flowers","forks","foxes","friends","frogs","games","garlics","geckos","geese","ghosts","gifts","glasses","goats","grapes","groups","guests","hairs","hands","hats","heads","hoops","hornets","horses","hotels","hounds","houses","humans","icons","ideas","impalas","insects","islands","items","jars","jeans","jobs","jokes","keys","kids","kings","kiwis","knives","lamps","lands","laws","lemons","lies","lights","lilies","lines","lions","lizards","llamas","loops","mails","mammals","mangos","maps","masks","meals","melons","memes","meteors","mice","mirrors","moles","moments","monkeys","months","moons","moose","mugs","nails","needles","news","nights","numbers","olives","onions","oranges","otters","owls","pandas","pans","pants","papayas","papers","parents","parks","parrots","parts","paths","paws","peaches","pears","peas","pens","pets","phones","pianos","pigs","pillows","places","planes","planets","plants","plums","poems","poets","points","pots","pugs","pumas","queens","rabbits","radios","rats","ravens","readers","regions","results","rice","rings","rivers","rockets","rocks","rooms","roses","rules","sails","schools","seals","seas","sheep","shirts","shoes","showers","shrimps","sides","signs","singers","sites","sloths","snails","snakes","socks","spiders","spies","spoons","squids","stamps","stars","states","steaks","streets","suits","suns","swans","symbols","tables","taxes","taxis","teams","teeth","terms","things","ties","tigers","times","tips","tires","toes","tools","towns","toys","trains","trams","trees","turkeys","turtles","vans","views","walls","wasps","waves","ways","webs","weeks","windows","wings","wolves","wombats","words","worlds","worms","yaks","years","zebras","zoos"],e.verbs=["accept","act","add","admire","agree","allow","appear","argue","arrive","ask","attack","attend","bake","bathe","battle","beam","beg","begin","behave","bet","boil","bow","brake","brush","build","burn","buy","call","camp","care","carry","change","cheat","check","cheer","chew","clap","clean","cough","count","cover","crash","create","cross","cry","cut","dance","decide","deny","design","dig","divide","do","double","doubt","draw","dream","dress","drive","drop","drum","eat","end","enjoy","enter","exist","fail","fall","feel","fetch","film","find","fix","flash","float","flow","fly","fold","follow","fry","give","glow","go","grab","greet","grin","grow","guess","hammer","hang","happen","heal","hear","help","hide","hope","hug","hunt","invent","invite","itch","jam","jog","join","joke","judge","juggle","jump","kick","kiss","kneel","knock","know","laugh","lay","lead","learn","leave","lick","lie","like","listen","live","look","lose","love","make","march","marry","mate","matter","melt","mix","move","nail","notice","obey","occur","open","own","pay","peel","pick","play","poke","post","press","prove","pull","pump","punch","push","raise","read","refuse","relate","relax","remain","repair","repeat","reply","report","rescue","rest","retire","return","rhyme","ring","roll","rule","run","rush","say","scream","search","see","sell","send","serve","shake","share","shave","shine","shop","shout","show","sin","sing","sink","sip","sit","sleep","slide","smash","smell","smile","smoke","sneeze","sniff","sort","speak","spend","stand","stare","start","stay","stick","stop","strive","study","swim","switch","take","talk","tan","tap","taste","teach","tease","tell","thank","think","throw","tickle","tie","trade","train","travel","try","turn","type","unite","vanish","visit","wait","walk","warn","wash","watch","wave","wear","win","wink","wish","wonder","work","worry","write","yawn","yell"],e.adverbs=["bravely","brightly","busily","daily","freely","hungrily","joyously","knowingly","lazily","noisily","oddly","politely","quickly","quietly","rapidly","safely","sleepily","slowly","truly","yearly"],e.humanId=i,e.poolSize=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,s=t.addAdverb,i=void 0!==s&&s;return e.adjectives.length*n*e.nouns.length*e.verbs.length*(i?e.adverbs.length:1)},e.maxLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,s=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return n(e.adjectives).length*s+s*c.length+n(e.nouns).length+c.length+n(e.verbs).length+(o?n(e.adverbs).length+c.length:0)},e.minLength=function(t){void 0===t&&(t={});var r=t.adjectiveCount,n=void 0===r?1:r,i=t.addAdverb,o=void 0!==i&&i,a=t.separator,c=void 0===a?"":a;return s(e.adjectives).length*n+n*c.length+s(e.nouns).length+c.length+s(e.verbs).length+(o?s(e.adverbs).length+c.length:0)},e.default=i}(Wr);let Jr=class{iValidByteLengths=[16,24,32];rpId;rpName;timeoutMillis;derivedKeyLengthBytes;extractableKey;constructor({rpId:e,rpName:t,timeoutMillis:r,derivedKeyLengthBytes:n,extractableKey:s}){if(this.rpId=e,this.rpName=t,this.timeoutMillis=r??6e4,this.derivedKeyLengthBytes=n??32,this.extractableKey=s??!0,!this.iValidByteLengths.includes(this.derivedKeyLengthBytes))throw new Error(`Invalid key byte length ${this.derivedKeyLengthBytes}`)}static randomPasskeyName(){return Wr.humanId({capitalize:!0,separator:" "})}getChallengeBytes(){return crypto.getRandomValues(new Uint8Array(32))}async deriveFromAssertion(e){const t=e.getClientExtensionResults();if(!t)throw new Error("Passkey fetch failed");const r=t.prf;if(!r||!r.results)throw new Error("PRF extension not supported or missing results");const n=r.results.first;return await crypto.subtle.importKey("raw",n,{name:"AES-CBC",length:this.derivedKeyLengthBytes},this.extractableKey,["encrypt","decrypt"])}async createPasskey({id:e,displayName:t,seed:r}){const n={challenge:this.getChallengeBytes(),rp:{id:this.rpId,name:this.rpName},user:{id:(new TextEncoder).encode(e),name:e,displayName:t},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{residentKey:"required",userVerification:"required"},extensions:{prf:{eval:{first:(new TextEncoder).encode(r)}}},timeout:this.timeoutMillis,attestation:"direct"},s=await navigator.credentials.create({publicKey:n});if(s)return{id:btoa(String.fromCharCode(...new Uint8Array(s.rawId))),displayName:t,key:new Uint8Array(await crypto.subtle.exportKey("raw",await this.deriveFromAssertion(s)))};throw new Error("could not create passkey")}base64ToArrayBuffer(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}async deriveKey({id:e,seed:t}){const r=e,n=await navigator.credentials.get({publicKey:{challenge:this.getChallengeBytes(),rpId:this.rpId,allowCredentials:[{id:this.base64ToArrayBuffer(r),type:"public-key"}],userVerification:"required",extensions:{prf:{eval:{first:(new TextEncoder).encode(t)}}}}});return this.deriveFromAssertion(n)}async deriveAndExportKey({id:e,seed:t}){if(!this.extractableKey)throw new Error("Derived keys cannot be exported if extractableKey is not set to true");const r=await this.deriveKey({id:e,seed:t});return new Uint8Array(await crypto.subtle.exportKey("raw",r))}};function Yr(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128,[...e].map((e,t)=>{const r=e.toString(16).padStart(2,"0");return[4,6,8,10].includes(t)?`-${r}`:r}).join("")}function Qr(e){return`0x${e.toString(16)}`}function $r(e){let t="";const r=e.startsWith("0x")?e.slice(2):e;for(let e=0;e<r.length;e+=2){const n=parseInt(r.substring(e,e+2),16);0!==n&&(t+=String.fromCharCode(n))}return t}let Xr=class e{baseConfiguration;shieldConfiguration;thirdPartyAuth;shieldUrl;iframeUrl;backendUrl;storage;passkeyRpId;passkeyRpName;nativeAppIdentifier;debug;static instance=null;constructor({baseConfiguration:t,shieldConfiguration:r,overrides:n,thirdPartyAuth:s,debug:i}){this.shieldConfiguration=r,this.baseConfiguration=t,this.backendUrl=n?.backendUrl||"https://api.openfort.io",this.iframeUrl=n?.iframeUrl||"https://embed.openfort.io",this.iframeUrl=`${this.iframeUrl}/iframe/${this.baseConfiguration.publishableKey}`,this.debug=i,r?.debug&&(this.iframeUrl=`${this.iframeUrl}?debug=true`),this.shieldUrl=n?.shieldUrl||"https://shield.openfort.io",this.storage=n?.storage,this.thirdPartyAuth=s,this.passkeyRpId=r?.passkeyRpId,this.passkeyRpName=r?.passkeyRpName,this.nativeAppIdentifier=t.nativeAppIdentifier,n?.crypto?.digest&&n.crypto.digest,e.instance=this}static getInstance(){return e.instance}},Zr=class e{constructor(e){this.id=e.id,this.chainType=e.chainType,this.address=e.address,this.accountType=e.accountType,this.chainId=e.chainId,this.createdAt=e.createdAt,this.implementationAddress=e.implementationAddress,this.implementationType=e.implementationType,this.factoryAddress=e.factoryAddress,this.recoveryMethod=e.recoveryMethod,this.recoveryMethodDetails=e.recoveryMethodDetails,this.salt=e.salt,this.ownerAddress=e.ownerAddress,this.type=e.type}id;chainType;address;accountType;chainId;ownerAddress;factoryAddress;implementationAddress;salt;createdAt;implementationType;recoveryMethod;recoveryMethodDetails;type;save(e){e.save(yr.ACCOUNT,JSON.stringify({id:this.id,chainType:this.chainType,address:this.address,accountType:this.accountType,chainId:this.chainId,ownerAddress:this.ownerAddress,createdAt:this.createdAt,implementationType:this.implementationType,factoryAddress:this.factoryAddress,implementationAddress:this.implementationAddress,salt:this.salt,recoveryMethod:this.recoveryMethod,recoveryMethodDetails:this.recoveryMethodDetails}))}static parseRecoveryMethod=e=>{switch(e){case"user":case Ur.PASSWORD:return Ur.PASSWORD;case"project":case Ur.AUTOMATIC:return Ur.AUTOMATIC;case"passkey":case Ur.PASSKEY:return Ur.PASSKEY;default:return}};static async fromStorage(t){const r=await t.get(yr.ACCOUNT);if(!r)return null;try{const t=JSON.parse(r);return new e(t)}catch{return null}}};const en="https://64a03e4967fb4dad3ecb914918c777b6@o4504593015242752.ingest.us.sentry.io/4509292415287296";let tn=class e{static sentryInstance;static queuedCalls=[];static baseTags;static set sentry(t){const r=t.getDsn();if(!r)throw new Error("Sentry DSN is not set");if(r.projectId!==en.split("https://")[1].split("/")[1]||r.host!==en.split("@")[1].split("/")[0]||r.publicKey!==en.split("@")[0].split("https://")[1])throw new Error("Sentry DSN is not valid");t.captureAxiosError=(r,n,s,i)=>{if(n instanceof ut){if(400===n.response?.status||401===n.response?.status)return;n.name=r,t.captureException(n,{...s,captureContext:{...s?.captureContext,extra:{errorResponseData:n.response?.data,errorStatus:n.response?.status,errorHeaders:n.response?.headers,errorRequest:n.request},tags:{...e.baseTags,method:r}}})}else t.captureException(n,s,i)},t.captureError=(r,n,s,i)=>{const o=n.statusCode;if(400===o||401===o)return;const a=n,c=a.error,u=a.error_description,h=s?.captureContext;t.captureException(n,{...s,captureContext:{...h,extra:{...h?.extra,errorCode:c,errorDescription:u,errorClass:n.constructor.name,...a.statusCode&&{statusCode:a.statusCode},...a.audience&&{audience:a.audience},...a.scope&&{scope:a.scope},...a.accountId&&{accountId:a.accountId},...a.userId&&{userId:a.userId},...a.provider&&{provider:a.provider},...a.recoveryMethod&&{recoveryMethod:a.recoveryMethod}},tags:{...e.baseTags,context:r,errorClass:n.constructor.name}}})},e.sentryInstance=t}static get sentry(){return e.proxy}static async init({sentry:t,configuration:r}){if(t)return void(e.sentry=t);const n=await Promise.resolve().then(function(){return yy});e.sentry=new n.BrowserClient({dsn:en,integrations:[],stackParser:n.defaultStackParser,transport:n.makeFetchTransport}),e.baseTags={projectId:r?.baseConfiguration.publishableKey??"",sdk:"@openfort/openfort-js",sdkVersion:"1.1.2"},e.processQueuedCalls()}static proxy=new Proxy({},{get:(t,r)=>e.sentryInstance&&"function"==typeof e.sentryInstance[r]?(...t)=>e.sentryInstance[r](...t):(...t)=>{e.queuedCalls.push({fn:r,args:t})}});static processQueuedCalls(){e.sentryInstance&&(e.queuedCalls.forEach(({fn:t,args:r})=>{"function"==typeof e.sentryInstance[t]&&e.sentryInstance[t](...r)}),e.queuedCalls=[])}};const{sentry:rn}=tn;async function nn(e,t={}){const{context:r,onError:n,skipSentry:s=!1}=t;try{return await e()}catch(e){let t;throw t=gt(e)?function(e){const t=e.response?.data,r=e.response?.status;let n,s;return t?.error&&"object"==typeof t.error?(n=t.error.code||Ar.REQUEST_ERROR,s=t.error.message||e.message):t?.error&&"string"==typeof t.error?(n=t.code||t.error,s=t.error_description||t.message||e.message):t?.message||t?.code?(n=t.code||Ar.REQUEST_ERROR,s=t.message||t.error_description||e.message):(n=Ar.REQUEST_ERROR,s=e.message),function(e,t,r){return[Ar.INVALID_CREDENTIALS,Ar.INVALID_EMAIL,Ar.INVALID_PASSWORD,Ar.INVALID_TOKEN,Ar.PROVIDER_DISABLED,Ar.EMAIL_NOT_VERIFIED].includes(e)?new Sr(e,t,r):[Ar.SESSION_EXPIRED,Ar.SESSION_CREATION_FAILED,Ar.SESSION_RETRIEVAL_FAILED,Ar.NOT_LOGGED_IN,Ar.ALREADY_LOGGED_IN,Ar.REFRESH_TOKEN_ERROR].includes(e)?new _r(e,t):[Ar.SOCIAL_ACCOUNT_ALREADY_LINKED,Ar.OAUTH_PROVIDER_NOT_FOUND,Ar.OAUTH_TOKEN_INVALID,Ar.OAUTH_USER_INFO_FAILED].includes(e)?new Tr(e,t):[Ar.USER_NOT_FOUND,Ar.USER_ALREADY_EXISTS,Ar.EMAIL_ALREADY_IN_USE,Ar.USER_EMAIL_NOT_FOUND,Ar.FAILED_TO_CREATE_USER,Ar.FAILED_TO_UPDATE_USER,Ar.PASSWORD_TOO_SHORT,Ar.PASSWORD_TOO_LONG,Ar.USER_ALREADY_HAS_PASSWORD].includes(e)?new Ir(e,t):[Ar.OTP_INVALID,Ar.OTP_EXPIRED,Ar.OTP_SEND_FAILED,Ar.OTP_REQUIRED].includes(e)?new Rr(e,t):[Ar.MISSING_SIGNER,Ar.NOT_CONFIGURED].includes(e)?new kr(e,t):[Ar.MISSING_RECOVERY_PASSWORD,Ar.WRONG_RECOVERY_PASSWORD,Ar.MISSING_PASSKEY,Ar.INCORRECT_PASSKEY,Ar.MISSING_PROJECT_ENTROPY,Ar.MISSING_USER_ENTROPY,Ar.INCORRECT_USER_ENTROPY].includes(e)?new Or(e,t):e===Ar.USER_NOT_AUTHORIZED||403===r?new Nr(t):new Er(e,t)}(n,s,r)}(e):e instanceof Er?e:new Cr(e?.message||"An unexpected error occurred"),n?n(t):r&&!s&&rn.captureError(r,t),t}}function sn(...e){const t=Xr.getInstance();t?.debug&&console.log(`${(new Date).toISOString()} [SDK]`,...e)}let on=class{iframeManager;storage;backendApiClients;passkeyHandler;eventEmitter;constructor(e,t,r,n,s){this.iframeManager=e,this.storage=t,this.backendApiClients=r,this.passkeyHandler=n,this.eventEmitter=s}async createPasskey(e){const t=await this.passkeyHandler.createPasskey({id:Jr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:e});return{id:t.id,key:t.key}}async configure(e){const t=await wr.fromStorage(this.storage);if(!t)throw new _r(Ar.NOT_LOGGED_IN,"No access token found");const r=Xr.getInstance();if(!r)throw new Pr("Configuration not found");const n=await Zr.fromStorage(this.storage);let s;if(n){const t={account:n.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===n.recoveryMethod&&{passkey:{id:n.recoveryMethodDetails?.passkeyId,env:n.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(n.recoveryMethodDetails?.passkeyId??"")}}}}},r=await this.iframeManager.recover(t);s=r.account}else{const n=await this.backendApiClients.accountsV2Api.getAccountsV2({accountType:e.accountType,chainType:e.chainType},{headers:t.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:{authorization:`Bearer ${t.token}`,"x-project-key":r.baseConfiguration.publishableKey}});if(0===n.data.data.length){const r=e.entropy?.passkey?await this.createPasskey(t.userId):void 0,n={accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},...e.entropy.passkey&&{passkey:r}}}},i=await this.iframeManager.create(n);s=i.account}else{const t=n.data.data,r=t.find(t=>t.chainId===e.chainId),i=r||t[0],o={account:i.id,...e.entropy&&{entropy:{...e.entropy.recoveryPassword&&{recoveryPassword:e.entropy.recoveryPassword},...e.entropy.encryptionSession&&{encryptionSession:e.entropy.encryptionSession},..."passkey"===i.recoveryMethod&&{passkey:{id:i.recoveryMethodDetails?.passkeyId,env:i.recoveryMethodDetails?.passkeyEnv,key:await e.getPasskeyKeyFn(i.recoveryMethodDetails?.passkeyId??"")}}}}},a=await this.iframeManager.recover(o);if(s=a.account,!r){const t=await this.iframeManager.switchChain(e.chainId);s=t.account}}}return nn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:s},{headers:t.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:{authorization:`Bearer ${t.token}`,"x-project-key":r.baseConfiguration.publishableKey}}),n=new Zr({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Zr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return n.save(this.storage),this.eventEmitter.emit(Mr.ON_SWITCH_ACCOUNT,e.data.address),n},{context:"configure"})}async sign(e,t,r,n){const s=await this.iframeManager.sign(e,t,r,n);return this.eventEmitter.emit(Mr.ON_SIGNED_MESSAGE,{message:e,signature:s}),s}async export(){return await this.iframeManager.export()}async switchChain({chainId:e}){const t=await Zr.fromStorage(this.storage);if(t?.accountType===Hr.EOA)new Zr({...t,chainId:e}).save(this.storage);else{const r=await this.iframeManager.switchChain(e);new Zr({...t,id:r.account,chainId:e}).save(this.storage)}}async create(e){const t=await this.iframeManager.create(e),r=await wr.fromStorage(this.storage);if(!r)throw new _r(Ar.NOT_LOGGED_IN,"No access token found");const n=Xr.getInstance();if(!n)throw new Pr("Configuration not found");return nn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:t.account},{headers:r.thirdPartyProvider?{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":n.baseConfiguration.publishableKey}}),s=new Zr({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,implementationAddress:e.data.smartAccount?.implementationAddress,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Zr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(Mr.ON_SWITCH_ACCOUNT,e.data.address),s},{context:"create"})}async recover(e){const t=await this.iframeManager.recover(e),r=await wr.fromStorage(this.storage);if(!r)throw new _r(Ar.NOT_LOGGED_IN,"No access token found");const n=Xr.getInstance();if(!n)throw new Pr("Configuration not found");return nn(async()=>{const e=await this.backendApiClients.accountsV2Api.getAccountV2({id:t.account},{headers:r.thirdPartyProvider?{authorization:`Bearer ${n.baseConfiguration.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":n.baseConfiguration.publishableKey}}),s=new Zr({chainType:e.data.chainType,id:e.data.id,address:e.data.address,ownerAddress:e.data.ownerAddress,accountType:e.data.accountType,createdAt:e.data.createdAt,implementationAddress:e.data.smartAccount?.implementationAddress,implementationType:e.data.smartAccount?.implementationType,chainId:e.data.chainId,salt:e.data.smartAccount?.salt,factoryAddress:e.data.smartAccount?.factoryAddress,recoveryMethod:Zr.parseRecoveryMethod(e.data.recoveryMethod),recoveryMethodDetails:e.data.recoveryMethodDetails});return s.save(this.storage),this.eventEmitter.emit(Mr.ON_SWITCH_ACCOUNT,e.data.address),s},{context:"recover"})}async setRecoveryMethod({recoveryMethod:e,recoveryPassword:t,encryptionSession:r,passkeyInfo:n}){await this.iframeManager.setRecoveryMethod(e,t,r,n?.passkeyKey,n?.passkeyId)}async disconnect(){await this.iframeManager.disconnect(),this.storage.remove(yr.ACCOUNT)}};const an={1:"https://cloudflare-eth.com",10:"https://optimism-rpc.publicnode.com",56:"https://bsc.publicnode.com",97:"https://bsc-testnet.publicnode.com",137:"https://polygon-rpc.com",1946:"https://rpc.minato.soneium.org",3008:"https://kl1-testnet.kiooverse.xyz/rpc",4337:"https://build.onbeam.com/rpc",5611:"https://opbnb-testnet-rpc.bnbchain.org",8453:"https://mainnet.base.org",10143:"https://testnet-rpc.monad.xyz",13337:"https://build.onbeam.com/rpc/testnet",42161:"https://arb1.arbitrum.io/rpc",42170:"https://nova.arbitrum.io/rpc",43113:"https://api.avax-test.network/ext/bc/C/rpc",43114:"https://api.avax.network/ext/bc/C/rpc",80002:"https://polygon-amoy-bor-rpc.publicnode.com",84358:"https://subnets.avax.network/titan/mainnet/rpc",84532:"https://sepolia.base.org",421614:"https://sepolia-rollup.arbitrum.io/rpc",510525:"https://rpc.clankermon.com",510530:"https://open-loot.rpc.syndicate.io",510531:"https://open-loot.rpc.testnet.syndicate.io",7225878:"https://rpc.saakuru.network",7777777:"https://rpc.zora.energy",11155111:"https://ethereum-sepolia-rpc.publicnode.com",11155420:"https://optimism-sepolia-rpc.publicnode.com",28122024:"https://rpcv2-testnet.ancient8.gg",666666666:"https://rpc.degen.tips",888888888:"https://rpc.ancient8.gg",999999999:"https://sepolia.rpc.zora.energy"};var cn={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,s),!0;case 5:return h.fn.call(h.context,t,n,s,i),!0;case 6:return h.fn.call(h.context,t,n,s,i,o),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,n);break;case 4:h[u].fn.call(h[u].context,t,n,s);break;default:if(!c)for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||s&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(cn);var un=Pt(cn.exports);let hn=class{emitter=new un;on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}emit(e,...t){return this.emitter.emit(e,...t)}once(e,t){return this.emitter.once(e,t),this}removeAllListeners(e){return this.emitter.removeAllListeners(e),this}listenerCount(e){return this.emitter.listenerCount(e)}listeners(e){return this.emitter.listeners(e)}};var ln,dn;!function(e){e[e.UNAUTHORIZED=4100]="UNAUTHORIZED",e[e.UNSUPPORTED_METHOD=4200]="UNSUPPORTED_METHOD"}(ln||(ln={})),function(e){e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",e[e.TRANSACTION_REJECTED=-32003]="TRANSACTION_REJECTED"}(dn||(dn={}));let fn=class extends Error{message;code;constructor(e,t){super(t),this.message=t,this.code=e}};const pn=["chainId","chainName","nativeCurrency"],mn=async({params:e,rpcProvider:t,storage:r})=>{if(!e||!Array.isArray(e)||0===e.length)throw new fn(dn.INVALID_PARAMS,"Invalid parameters for wallet_addEthereumChain");const n=(e=>{if(!e||"object"!=typeof e)throw new fn(dn.INVALID_PARAMS,"Invalid chain parameter: expected an object");if(!(e=>pn.every(t=>t in e))(e))throw new fn(dn.INVALID_PARAMS,`Invalid chain parameter. The following properties are required: ${pn.join(", ")}`);if(!e.chainName||""===e.chainName.trim())throw new fn(dn.INVALID_PARAMS,"chainName cannot be empty");if(!((t=e.nativeCurrency)&&"object"==typeof t&&"name"in t&&"symbol"in t&&"decimals"in t&&"string"==typeof t.name&&"string"==typeof t.symbol&&"number"==typeof t.decimals&&Number.isInteger(t.decimals)))throw new fn(dn.INVALID_PARAMS,"Invalid nativeCurrency object");var t;if(0===e.rpcUrls?.length)throw new fn(dn.INVALID_PARAMS,"At least one RPC URL must be provided");if(!/^0x[0-9a-fA-F]+$/.test(e.chainId))throw new fn(dn.INVALID_PARAMS,"chainId must be a valid hex string");return{chainId:e.chainId,blockExplorerUrls:e.blockExplorerUrls||[],chainName:e.chainName,iconUrls:e.iconUrls||[],rpcUrls:e.rpcUrls||[],nativeCurrency:e.nativeCurrency}})(e[0]),s=parseInt(n.chainId,16),{chainId:i}=await t.detectNetwork();return s!==i&&null},gn=async e=>{const{hash:t,signer:r,ownerAddress:n,factoryAddress:s,salt:i,chainId:o,address:a,implementationType:c}=e;let u=t;if([Dr.UPGRADEABLE_V5,Dr.UPGRADEABLE_V6,Dr.ZKSYNC_UPGRADEABLE_V1,Dr.ZKSYNC_UPGRADEABLE_V2].includes(c)){const e={name:"Openfort",version:"0.5",chainId:Number(o),verifyingContract:a},t={OpenfortMessage:[{name:"hashedMessage",type:"bytes32"}]},r={hashedMessage:u},{_TypedDataEncoder:n}=await Promise.resolve().then(function(){return ja});u=n.hash(e,t,r)}const h=await r.sign(u,!1,!1);if(s&&i&&[Dr.UPGRADEABLE_V5,Dr.UPGRADEABLE_V6].includes(c)){const{id:e}=await Promise.resolve().then(function(){return ja}),{defaultAbiCoder:t}=await Promise.resolve().then(function(){return Ha}),{hexConcat:r}=await Promise.resolve().then(function(){return es}),o=r([e("createAccountWithNonce(address,bytes32,bool)").slice(0,10),t.encode(["address","bytes32","bool"],[n,i,!1])]);return r([t.encode(["address","bytes","bytes"],[s,o,h]),"0x6492649264926492649264926492649264926492649264926492649264926492"])}return h};function yn(e){return{data:(()=>{if("token-allowance"===e.type)throw new fn(dn.INVALID_PARAMS,"token-allowance policy is not supported with this account implementation.");if("gas-limit"===e.type)throw new fn(dn.INVALID_PARAMS,"gas-limit policy is not supported with this account implementation.");if("rate-limit"===e.type)throw new fn(dn.INVALID_PARAMS,"rate-limit policy is not supported with this account implementation.");return e.data})(),type:e.type.custom}}function wn(e){if("native-token-transfer"===e.type)throw new fn(dn.INVALID_PARAMS,"native-token-transfer permission is not supported with this account implementation.");if("rate-limit"===e.type)throw new fn(dn.INVALID_PARAMS,"rate-limit permission is not supported with this account implementation.");if("gas-limit"===e.type)throw new fn(dn.INVALID_PARAMS,"gas-limit permission is not supported with this account implementation.");return{...e,policies:e?.policies?.map(yn),required:e.required??!1,type:"string"==typeof e.type?e.type:e.type.custom}}function vn(e){return{expiry:e.validUntil?Number(e.validUntil):0,grantedPermissions:e.whitelist?e.whitelist.map(t=>({type:"contract-call",data:{address:t,calls:[]},policies:[{data:{limit:e.limit},type:{custom:"usage-limit"}}]})):[],permissionsContext:e.id}}var An,bn={exports:{}};
/**
     * [js-sha3]{@link https://github.com/emn178/js-sha3}
     *
     * @version 0.8.0
     * @author Chen, Yi-Cyuan [emn178@gmail.com]
     * @copyright Chen, Yi-Cyuan 2015-2018
     * @license MIT
     */An=bn,function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=_t:n&&(r=self);var s=!r.JS_SHA3_NO_COMMON_JS&&An.exports,i=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),a=[4,1024,262144,67108864],c=[0,8,16,24],u=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],l=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],f={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!i||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,r){return function(n){return new T(e,t,e).update(n)[r]()}},m=function(e,t,r){return function(n,s){return new T(e,t,s).update(n)[r]()}},g=function(e,t,r){return function(t,n,s,i){return b["cshake"+e].update(t,n,s,i)[r]()}},y=function(e,t,r){return function(t,n,s,i){return b["kmac"+e].update(t,n,s,i)[r]()}},w=function(e,t,r,n){for(var s=0;s<d.length;++s){var i=d[s];e[i]=t(r,n,i)}return e},v=function(e,t){var r=p(e,t,"hex");return r.create=function(){return new T(e,t,e)},r.update=function(e){return r.create().update(e)},w(r,p,e,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:l,createMethod:function(e,t){var r=m(e,t,"hex");return r.create=function(r){return new T(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},w(r,m,e,t)}},{name:"cshake",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=g(e,0,"hex");return n.create=function(n,s,i){return s||i?new T(e,t,n).bytepad([s,i],r):b["shake"+e].create(n)},n.update=function(e,t,r,s){return n.create(t,r,s).update(e)},w(n,g,e,t)}},{name:"kmac",padding:a,bits:l,createMethod:function(e,t){var r=f[e],n=y(e,0,"hex");return n.create=function(n,s,i){return new N(e,t,s).bytepad(["KMAC",i],r).bytepad([n],r)},n.update=function(e,t,r,s){return n.create(e,r,s).update(t)},w(n,y,e,t)}}],b={},E=[],S=0;S<A.length;++S)for(var _=A[S],P=_.bits,k=0;k<P.length;++k){var I=_.name+"_"+P[k];if(E.push(I),b[I]=_.createMethod(P[k],_.padding),"sha3"!==_.name){var R=_.name+P[k];E.push(R),b[R]=b[I]}}function T(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function N(e,t,r){T.call(this,e,t,r)}T.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var s,o,a=this.blocks,u=this.byteCount,h=t.length,l=this.blockCount,d=0,f=this.s;d<h;){if(this.reset)for(this.reset=!1,a[0]=this.block,s=1;s<l+1;++s)a[s]=0;if(r)for(s=this.start;d<h&&s<u;++d)a[s>>2]|=t[d]<<c[3&s++];else for(s=this.start;d<h&&s<u;++d)(o=t.charCodeAt(d))<128?a[s>>2]|=o<<c[3&s++]:o<2048?(a[s>>2]|=(192|o>>6)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):o<55296||o>=57344?(a[s>>2]|=(224|o>>12)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]):(o=65536+((1023&o)<<10|1023&t.charCodeAt(++d)),a[s>>2]|=(240|o>>18)<<c[3&s++],a[s>>2]|=(128|o>>12&63)<<c[3&s++],a[s>>2]|=(128|o>>6&63)<<c[3&s++],a[s>>2]|=(128|63&o)<<c[3&s++]);if(this.lastByteIndex=s,s>=u){for(this.start=s-u,this.block=a[l],s=0;s<l;++s)f[s]^=a[s];O(f),this.reset=!0}else this.start=s}return this},T.prototype.encode=function(e,t){var r=255&e,n=1,s=[r];for(r=255&(e>>=8);r>0;)s.unshift(r),r=255&(e>>=8),++n;return t?s.push(n):s.unshift(n),this.update(s),s.length},T.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var s=0,o=t.length;if(r)s=o;else for(var a=0;a<t.length;++a){var c=t.charCodeAt(a);c<128?s+=1:c<2048?s+=2:c<55296||c>=57344?s+=3:(c=65536+((1023&c)<<10|1023&t.charCodeAt(++a)),s+=4)}return s+=this.encode(8*s),this.update(t),s},T.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var s=t-r%t,i=[];return i.length=s,this.update(i),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];O(n)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,a=0,c="";a<n;){for(i=0;i<t&&a<n;++i,++a)e=r[i],c+=o[e>>4&15]+o[15&e]+o[e>>12&15]+o[e>>8&15]+o[e>>20&15]+o[e>>16&15]+o[e>>28&15]+o[e>>24&15];a%t===0&&(O(r),i=0)}return s&&(e=r[i],c+=o[e>>4&15]+o[15&e],s>1&&(c+=o[e>>12&15]+o[e>>8&15]),s>2&&(c+=o[e>>20&15]+o[e>>16&15])),c},T.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,s=this.extraBytes,i=0,o=0,a=this.outputBits>>3;e=s?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);o<n;){for(i=0;i<t&&o<n;++i,++o)c[o]=r[i];o%t===0&&O(r)}return s&&(c[i]=r[i],e=e.slice(0,a)),e},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,s=this.outputBlocks,i=this.extraBytes,o=0,a=0,c=[];a<s;){for(o=0;o<r&&a<s;++o,++a)e=a<<2,t=n[o],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&O(n)}return i&&(e=a<<2,t=n[o],c[e]=255&t,i>1&&(c[e+1]=t>>8&255),i>2&&(c[e+2]=t>>16&255)),c},N.prototype=new T,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var O=function(e){var t,r,n,s,i,o,a,c,h,l,d,f,p,m,g,y,w,v,A,b,E,S,_,P,k,I,R,T,N,O,C,x,M,U,D,L,B,F,q,G,j,H,z,K,V,W,J,Y,Q,$,X,Z,ee,te,re,ne,se,ie,oe,ae,ce,ue,he;for(n=0;n<48;n+=2)s=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],h=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(o<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|o>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=s^(c<<1|h>>>31),r=i^(h<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=o^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|p>>>31),r=h^(p<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(s<<1|i>>>31),r=d^(i<<1|s>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],g=e[1],W=e[11]<<4|e[10]>>>28,J=e[10]<<4|e[11]>>>28,T=e[20]<<3|e[21]>>>29,N=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,U=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,w=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,Q=e[23]<<10|e[22]>>>22,O=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,he=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,B=e[15]<<6|e[14]>>>26,v=e[25]<<11|e[24]>>>21,A=e[24]<<11|e[25]>>>21,$=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,x=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,P=e[6]<<28|e[7]>>>4,k=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,se=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,q=e[27]<<25|e[26]>>>7,b=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,Z=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,K=e[8]<<27|e[9]>>>5,V=e[9]<<27|e[8]>>>5,I=e[18]<<20|e[19]>>>12,R=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,oe=e[28]<<7|e[29]>>>25,G=e[38]<<8|e[39]>>>24,j=e[39]<<8|e[38]>>>24,S=e[48]<<14|e[49]>>>18,_=e[49]<<14|e[48]>>>18,e[0]=m^~y&v,e[1]=g^~w&A,e[10]=P^~I&T,e[11]=k^~R&N,e[20]=U^~L&F,e[21]=D^~B&q,e[30]=K^~W&Y,e[31]=V^~J&Q,e[40]=te^~ne&ie,e[41]=re^~se&oe,e[2]=y^~v&b,e[3]=w^~A&E,e[12]=I^~T&O,e[13]=R^~N&C,e[22]=L^~F&G,e[23]=B^~q&j,e[32]=W^~Y&$,e[33]=J^~Q&X,e[42]=ne^~ie&ae,e[43]=se^~oe&ce,e[4]=v^~b&S,e[5]=A^~E&_,e[14]=T^~O&x,e[15]=N^~C&M,e[24]=F^~G&H,e[25]=q^~j&z,e[34]=Y^~$&Z,e[35]=Q^~X&ee,e[44]=ie^~ae&ue,e[45]=oe^~ce&he,e[6]=b^~S&m,e[7]=E^~_&g,e[16]=O^~x&P,e[17]=C^~M&k,e[26]=G^~H&U,e[27]=j^~z&D,e[36]=$^~Z&K,e[37]=X^~ee&V,e[46]=ae^~ue&te,e[47]=ce^~he&re,e[8]=S^~m&y,e[9]=_^~g&w,e[18]=x^~P&I,e[19]=M^~k&R,e[28]=H^~U&L,e[29]=z^~D&B,e[38]=Z^~K&W,e[39]=ee^~V&J,e[48]=ue^~te&ne,e[49]=he^~re&se,e[0]^=u[n],e[1]^=u[n+1]};if(s)An.exports=b;else for(S=0;S<E.length;++S)r[E[S]]=b[E[S]]}();var En=Pt(bn.exports);let Sn=!1,_n=!1;const Pn={debug:1,default:2,info:2,warning:3,error:4,off:5};let kn=Pn.default,In=null;const Rn=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Tn,Nn;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Tn||(Tn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Nn||(Nn={}));const On="0123456789abcdef";class Cn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Pn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),kn>Pn[r]||console.log.apply(console,t)}debug(...e){this._log(Cn.levels.DEBUG,e)}info(...e){this._log(Cn.levels.INFO,e)}warn(...e){this._log(Cn.levels.WARNING,e)}makeError(e,t,r){if(_n)return this.makeError("censored error",t,{});t||(t=Cn.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach(e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=On[t[e]>>4],r+=On[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}),n.push(`code=${t}`),n.push(`version=${this.version}`);const s=e;let i="";switch(t){case Nn.NUMERIC_FAULT:{i="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":i+="-"+t;break;case"negative-power":case"negative-width":i+="-unsupported";break;case"unbound-bitwise-result":i+="-unbound-result"}break}case Nn.CALL_EXCEPTION:case Nn.INSUFFICIENT_FUNDS:case Nn.MISSING_NEW:case Nn.NONCE_EXPIRED:case Nn.REPLACEMENT_UNDERPRICED:case Nn.TRANSACTION_REPLACED:case Nn.UNPREDICTABLE_GAS_LIMIT:i=t}i&&(e+=" [ See: https://links.ethers.org/v5-errors-"+i+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Cn.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){Rn&&this.throwError("platform missing String.prototype.normalize",Cn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Rn})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Cn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Cn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Cn.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Cn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Cn.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Cn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Cn.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return In||(In=new Cn("logger/5.8.0")),In}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Cn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Sn){if(!e)return;this.globalLogger().throwError("error censorship permanent",Cn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_n=!!e,Sn=!!t}static setLogLevel(e){const t=Pn[e.toLowerCase()];null!=t?kn=t:Cn.globalLogger().warn("invalid log level - "+e)}static from(e){return new Cn(e)}}Cn.errors=Nn,Cn.levels=Tn;const xn=new Cn("bytes/5.8.0");function Mn(e){return!!e.toHexString}function Un(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Un(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Dn(e){return Hn(e)&&!(e.length%2)||Bn(e)}function Ln(e){return"number"==typeof e&&e==e&&e%1==0}function Bn(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Ln(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Ln(r)||r<0||r>=256)return!1}return!0}function Fn(e,t){if(t||(t={}),"number"==typeof e){xn.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Un(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Mn(e)&&(e=e.toHexString()),Hn(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":xn.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Un(new Uint8Array(n))}return Bn(e)?Un(new Uint8Array(e)):xn.throwArgumentError("invalid arrayify value","value",e)}function qn(e){const t=e.map(e=>Fn(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),Un(n)}function Gn(e){let t=Fn(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function jn(e,t){(e=Fn(e)).length>t&&xn.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Un(r)}function Hn(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const zn="0123456789abcdef";function Kn(e,t){if(t||(t={}),"number"==typeof e){xn.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=zn[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Mn(e))return e.toHexString();if(Hn(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":xn.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Bn(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=zn[(240&n)>>4]+zn[15&n]}return t}return xn.throwArgumentError("invalid hexlify value","value",e)}function Vn(e){if("string"!=typeof e)e=Kn(e);else if(!Hn(e)||e.length%2)return null;return(e.length-2)/2}function Wn(e,t,r){return"string"!=typeof e?e=Kn(e):(!Hn(e)||e.length%2)&&xn.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Jn(e){let t="0x";return e.forEach(e=>{t+=Kn(e).substring(2)}),t}function Yn(e){const t=Qn(Kn(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function Qn(e){"string"!=typeof e&&(e=Kn(e)),Hn(e)||xn.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function $n(e,t){for("string"!=typeof e?e=Kn(e):Hn(e)||xn.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&xn.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Xn(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Dn(e)){let r=Fn(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Kn(r.slice(0,32)),t.s=Kn(r.slice(32,64))):65===r.length?(t.r=Kn(r.slice(0,32)),t.s=Kn(r.slice(32,64)),t.v=r[64]):xn.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:xn.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Kn(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=jn(Fn(t._vs),32);t._vs=Kn(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&xn.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const s=Kn(r);null==t.s?t.s=s:t.s!==s&&xn.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?xn.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&xn.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Hn(t.r)?t.r=$n(t.r,32):xn.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Hn(t.s)?t.s=$n(t.s,32):xn.throwArgumentError("signature missing or invalid s","signature",e);const r=Fn(t.s);r[0]>=128&&xn.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Kn(r);t._vs&&(Hn(t._vs)||xn.throwArgumentError("signature invalid _vs","signature",e),t._vs=$n(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&xn.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Zn(e){return Kn(qn([(e=Xn(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var es=Object.freeze({__proto__:null,arrayify:Fn,concat:qn,hexConcat:Jn,hexDataLength:Vn,hexDataSlice:Wn,hexStripZeros:Qn,hexValue:Yn,hexZeroPad:$n,hexlify:Kn,isBytes:Bn,isBytesLike:Dn,isHexString:Hn,joinSignature:Zn,splitSignature:Xn,stripZeros:Gn,zeroPad:jn});function ts(e){return"0x"+En.keccak_256(Fn(e))}var rs=Object.freeze({__proto__:null,keccak256:ts});async function ns(e){const{authorization:t,signer:r}=e,n=function(e){const{address:t,chainId:r,nonce:n}=e,s=function(e,t,r){const n=(e,t)=>{if(e<56)return(t+e).toString(16).padStart(2,"0");const r=e.toString(16),n=Math.ceil(r.length/2);return(t+55+n).toString(16).padStart(2,"0")+r.padStart(2*n,"0")},s=[e,t,r].map(e=>{if("number"==typeof e){if(0===e)return"80";e=`0x${e.toString(16)}`}let t=e.startsWith("0x")?e.slice(2):e;return t.length%2!=0&&(t=`0${t}`),0===t.length?"80":2===t.length&&parseInt(t,16)<128?t:n(t.length/2,128)+t}).join(""),i=s.length/2;return`0x${n(i,192)}${s}`}(r,t,n);return ts(`0x05${s.slice(2)}`)}(t),s=await r.sign(n,!1,!1),i=s.startsWith("0x")?s.slice(2):s,o=`0x${i.slice(0,64)}`,a=`0x${i.slice(64,128)}`,c=i.slice(128,130),u=parseInt(c,16);let h;h=27===u||0===u||"1b"===c?0:28===u||1===u||"1c"===c?1:u>=35?u%2==0?1:0:u%2;const l=0===h?27:28;return{...t,r:o,s:a,v:l,yParity:h}}const ss=e=>{const t=e?.logs?.[0];return{blockHash:t?.blockHash,blockNumber:e?.blockNumber?.toString(),contractAddress:void 0,cumulativeGasUsed:e?.gasUsed,effectiveGasPrice:e?.gasFee,from:void 0,gasUsed:e?.gasUsed,logs:e?.logs||[],logsBloom:void 0,status:1===e?.status?"success":0===e?.status?"reverted":void 0,to:e?.to,transactionHash:e?.transactionHash,transactionIndex:t?.transactionIndex,type:"eip1559",blobGasPrice:void 0,blobGasUsed:void 0,root:void 0}};async function is(e,t){try{const r=await e.getCode(t);return"0x"!==r&&r.length>2}catch{return!1}}const os=async({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})=>{const a=e[0]?.capabilities?.paymasterService?.policy??o;let c;if(r.accountType===Hr.DELEGATED_ACCOUNT){const[e,n]=await Promise.all([is(i,r.address),i.getTransactionCount(r.address)]);if(!e){const e=await async function(e){const{signer:t,contractAddress:r,chainId:n,nonce:s}=e;if(!r)throw new Error("contractAddress is required");if(void 0===n)throw new Error("chainId is required. Please provide it or fetch it from your RPC provider using eth_chainId");if(void 0===s)throw new Error("nonce is required. Please provide it or fetch it from your RPC provider using eth_getTransactionCount");return ns({authorization:{address:r,chainId:n,nonce:s},signer:t})}({signer:t,accountAddress:r.address,contractAddress:r.implementationAddress,chainId:r.chainId,nonce:n});c=function(e){const{r:t,s:r,yParity:n}=e,s=t.startsWith("0x")?t.slice(2):t,i=r.startsWith("0x")?r.slice(2):r;return`0x${s.padStart(64,"0")}${i.padStart(64,"0")}${n.toString(16).padStart(2,"0")}`}(e)}}const u=await(async(e,t,r,n,s,i)=>{const o=e.map(e=>{if(!e.to)throw new fn(dn.INVALID_PARAMS,'wallet_sendCalls requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return nn(async()=>(await t.transactionIntentsApi.createTransactionIntent({createTransactionIntentRequest:{account:r.id,policy:s,signedAuthorization:i,chainId:r.chainId,interactions:o}},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,s,r,n,a,c).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});if(u.response?.error.reason)throw new fn(dn.TRANSACTION_REJECTED,u.response?.error.reason);if(u?.nextAction?.payload?.signableHash){let e;e=[300,324].includes(r.chainId)||r.implementationType&&[Dr.CALIBUR].includes(r.implementationType)?await t.sign(u.nextAction.payload.signableHash,!1,!1):await t.sign(u.nextAction.payload.signableHash);const n=await nn(async()=>await s.transactionIntentsApi.signature({id:u.id,signatureRequest:{signature:e}}),{context:"operation"}).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});if(0===n.data.response?.status)throw new fn(dn.TRANSACTION_REJECTED,n.data.response?.error.reason);if(!n.data.response)throw new fn(dn.TRANSACTION_REJECTED,"No transaction response received");return{id:u.id,receipt:ss(n.data.response)}}if(!u.response)throw new fn(dn.TRANSACTION_REJECTED,"No transaction response received");return{id:u.id,receipt:ss(u.response)}},as=["types","domain","primaryType","message"],cs=async({params:e,method:t,signer:r,implementationType:n,rpcProvider:s,account:i})=>{const o=e[0],a=e[1];if(!o||!a)throw new fn(dn.INVALID_PARAMS,`${t} requires an address and a typed data JSON`);const{chainId:c}=await s.detectNetwork(),u=((e,t)=>{let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){throw new fn(dn.INVALID_PARAMS,`Failed to parse typed data JSON: ${e}`)}else{if("object"!=typeof e)throw new fn(dn.INVALID_PARAMS,`Invalid typed data argument: ${e}`);r=e}if(!(e=>as.every(t=>t in e))(r))throw new fn(dn.INVALID_PARAMS,`Invalid typed data argument. The following properties are required: \n      ${as.join(", ")}`);const n=r.domain?.chainId;if(n&&("string"==typeof n&&(n.startsWith("0x")?r.domain.chainId=parseInt(n,16):r.domain.chainId=parseInt(n,10)),r.domain.chainId!==t))throw new fn(dn.INVALID_PARAMS,`Invalid chainId, expected ${t}`);return r})(a,c),h={...u.types};delete h.EIP712Domain;const{_TypedDataEncoder:l}=await Promise.resolve().then(function(){return ja}),d=l.hash(u.domain,h,u.message);return await gn({hash:d,implementationType:n,chainId:c,signer:r,address:o,ownerAddress:i.ownerAddress,factoryAddress:i.factoryAddress,salt:i.salt})};var us;!function(e){e.ACCOUNTS_CHANGED="accountsChanged",e.ACCOUNTS_CONNECT="connect"}(us||(us={}));let hs=class{#e;#t;#r;#n;updatePolicy(e){this.#t=e}#s;#i;#o=null;#a;isOpenfort=!0;#c;constructor({storage:e,backendApiClients:t,openfortEventEmitter:r,policyId:n,ensureSigner:s,chains:i,validateAndRefreshSession:o}){this.#c=s,this.#e=e,this.#r=i,this.#t=n,this.#s=o,this.#a=t,this.#i=new hn,r.on(Mr.ON_LOGOUT,this.#u),r.on(Mr.ON_SWITCH_ACCOUNT,this.#h)}#l=async()=>(this.#n||(this.#n=await this.#c()),this.#n);#u=async()=>{this.#n=void 0,this.#i.emit(us.ACCOUNTS_CHANGED,[])};#h=async e=>{this.#i.emit(us.ACCOUNTS_CHANGED,[e])};async getRpcProvider(){if(!this.#o){const e=await Zr.fromStorage(this.#e),t=e?.chainId||8453;await Promise.resolve().then(function(){return If}).then(e=>{const r=this.#r?this.#r[t]:void 0;this.#o=new e.StaticJsonRpcProvider(r??an[t])})}if(!this.#o)throw new Error("RPC provider not initialized");return this.#o}async#d(e){switch(e.method){case"eth_accounts":{const e=await Zr.fromStorage(this.#e);return e?[e.address]:[]}case"eth_requestAccounts":{const e=await Zr.fromStorage(this.#e);if(e)return this.#i.emit(us.ACCOUNTS_CONNECT,{chainId:String(e.chainId)}),[e.address];throw new fn(ln.UNAUTHORIZED,"Unauthorized - must be authenticated and configured with a signer.")}case"eth_signTransaction":{const t=await Zr.fromStorage(this.#e),r=await this.#l(),n=await wr.fromStorage(this.#e);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const s=await this.getRpcProvider(),{chainId:i}=await s.detectNetwork(),[o]=e.params||[];o.chainId||(o.chainId=i.toString());const a=function({from:e,...t}){return{to:t.to,data:t.data,accessList:t.accessList,chainId:(s=t.chainId,s.startsWith("0x")?parseInt(s,16):parseInt(s,10)),type:t.type&&{"0x0":"legacy","0x1":"eip2930","0x2":"eip1559"}[t.type]||"eip1559",maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,value:(r=t.value,n=BigInt,void 0!==r?n(r):0n),nonce:t.nonce?parseInt(t.nonce.toString(),16):void 0,gas:t.gas?BigInt(t.gas):void 0};var r,n,s}(o),{serialize:c}=await Promise.resolve().then(function(){return sl}),u=e=>({legacy:0,eip2930:1,eip1559:2}[e]),{gas:h,...l}=a,d={...l,gasLimit:h,to:a.to??void 0,type:u(a.type)},f=c(d),{keccak256:p}=await Promise.resolve().then(function(){return rs}),m=p(f);await this.#s();const g=await r.sign(m,!1,!1),{splitSignature:y}=await Promise.resolve().then(function(){return es});return c(d,y(g))}case"eth_sendTransaction":{const[t,r,n]=await Promise.all([Zr.fromStorage(this.#e),this.#l(),wr.fromStorage(this.#e)]);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(await this.#s(),t?.accountType===Hr.EOA){const[r]=e.params||[],n=await this.getRpcProvider(),s=await async function(e,t,r){const n={...e};if(!n.nonce){const e=await t.getTransactionCount(r,"pending");n.nonce=`0x${e.toString(16)}`}if(!n.gas)try{const e=await t.estimateGas({from:r,to:n.to,data:n.data,value:n.value});n.gas=e.toHexString()}catch{n.gas="0x5208"}const s=n.maxFeePerGas&&n.maxPriorityFeePerGas,i=n.gasPrice;if(!s&&!i){const e=await t.getBlock("latest");if(null!==e.baseFeePerGas&&void 0!==e.baseFeePerGas){const r=e.baseFeePerGas,s=r.mul(12).div(10),i=await t.getGasPrice();let o=i.sub(r);o.lt(0)&&(o=i.mul(0));const a=s.add(o);n.maxFeePerGas=a.toHexString(),n.maxPriorityFeePerGas=o.toHexString(),n.type="0x2",delete n.gasPrice}else{const e=(await t.getGasPrice()).mul(12).div(10);n.gasPrice=e.toHexString(),n.type="0x0",delete n.maxFeePerGas,delete n.maxPriorityFeePerGas}}return n}(r,n,t.address),i=await this.#d({method:"eth_signTransaction",params:[s]});return this.#d({method:"eth_sendRawTransaction",params:[i]})}return(await os({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})).receipt.transactionHash}case"eth_sendRawTransactionSync":{const[t,r,n]=await Promise.all([Zr.fromStorage(this.#e),this.#l(),wr.fromStorage(this.#e)]);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");if(t?.accountType===Hr.EOA)throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);return await this.#s(),await os({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"eth_estimateGas":{const t=await Zr.fromStorage(this.#e),r=await wr.fromStorage(this.#e);if(!t||!r)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,account:t,authentication:r,backendClient:n,policyId:s})=>{const i=await(async(e,t,r,n,s)=>{const i=e.map(e=>{if(!e.to)throw new fn(dn.INVALID_PARAMS,'eth_estimateGas requires a "to" field');return{to:String(e.to),data:e.data?String(e.data):void 0,value:e.value?String(e.value):void 0}});return nn(async()=>(await t.transactionIntentsApi.estimateTransactionIntentCost({createTransactionIntentRequest:{policy:s,chainId:r.chainId,interactions:i}},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,n,t,r,s).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});return i.estimatedTXGas})({params:e.params||[],account:t,authentication:r,backendClient:this.#a,policyId:this.#t})}case"eth_signTypedData":case"eth_signTypedData_v4":{const t=await Zr.fromStorage(this.#e),r=await this.#l();if(!t)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");await this.#s();const n=await this.getRpcProvider();return await cs({method:e.method,params:e.params||[],signer:r,implementationType:t.implementationType||t.type,rpcProvider:n,account:t})}case"personal_sign":{const t=await Zr.fromStorage(this.#e);if(!t)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");const r=await this.#l();return await this.#s(),await(async({params:e,signer:t,account:r})=>{const n=e[0],s=e[1];if(!s||!n)throw new fn(dn.INVALID_PARAMS,"personal_sign requires an address and a message");if(s.toLowerCase()!==r.address.toLowerCase())throw new fn(dn.INVALID_PARAMS,"personal_sign requires the signer to be the from address");const{hashMessage:i}=await Promise.resolve().then(function(){return ja});return await gn({hash:i($r(n)),implementationType:r.implementationType||r.type,chainId:Number(r.chainId),signer:t,address:s,salt:r.salt,factoryAddress:r.factoryAddress,ownerAddress:r.ownerAddress})})({params:e.params||[],signer:r,account:t})}case"eth_chainId":{const e=await this.getRpcProvider(),{chainId:t}=await e.detectNetwork();return Qr(t)}case"wallet_switchEthereumChain":{const t=await this.#l();if(!e.params||!Array.isArray(e.params)||0===e.params.length)throw new fn(dn.INVALID_PARAMS,"Invalid parameters for wallet_switchEthereumChain");await this.#s();try{const r=parseInt(e.params[0].chainId,16);await t.switchChain({chainId:r}),await Promise.resolve().then(function(){return If}).then(e=>{const t=this.#r?this.#r[r]:void 0;this.#o=new e.StaticJsonRpcProvider(t??an[r])})}catch(e){const t=e;throw new fn(dn.INTERNAL_ERROR,`Failed to switch chain: ${t.message}`)}return null}case"wallet_addEthereumChain":{await this.#l();const t=await this.getRpcProvider();return await mn({params:e.params||[],rpcProvider:t,storage:this.#e})}case"wallet_showCallsStatus":return null;case"wallet_getCallsStatus":{const t=await Zr.fromStorage(this.#e);if(t?.accountType===Hr.EOA)throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await wr.fromStorage(this.#e);if(!t||!r)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,authentication:t,backendClient:r})=>{const n=await(async(e,t,r)=>nn(async()=>(await t.transactionIntentsApi.getTransactionIntent({id:e},{headers:r.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"}))(e[0],r,t).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});return{status:n.response?"CONFIRMED":"PENDING",receipts:n.response?[{status:0===n.response.status?"reverted":"success",logs:n.response.logs?.map(e=>({address:e.address,data:e.data,topics:e.topics}))||[],blockHash:n.response.transactionHash||"",blockNumber:BigInt(n.response.blockNumber||0),gasUsed:BigInt(n.response.gasUsed||0),transactionHash:n.response.transactionHash||""}]:void 0}})({params:e.params||{},authentication:r,backendClient:this.#a})}case"wallet_sendCalls":{const[t,r,n]=await Promise.all([Zr.fromStorage(this.#e),this.#l(),wr.fromStorage(this.#e)]);if(t?.accountType===Hr.EOA)throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})=>(await os({params:e,signer:t,account:r,authentication:n,backendClient:s,rpcProvider:i,policyId:o})).id)({params:e.params?e.params[0].calls:[],signer:r,account:t,authentication:n,backendClient:this.#a,rpcProvider:await this.getRpcProvider(),policyId:this.#t})}case"wallet_grantPermissions":{const t=await Zr.fromStorage(this.#e);if(t?.accountType===Hr.EOA)throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.#l(),n=await wr.fromStorage(this.#e);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=await(async(e,t,r,n,s)=>{const i=e[0],o=Math.floor(Date.now()/1e3),a=Math.floor(new Date(Date.now()+1e3*i.expiry).getTime()/1e3),c=i.permissions.map(wn),u=c.filter(e=>"contract-call"===e.type||"erc20-token-transfer"===e.type||"erc721-token-transfer"===e.type||"erc1155-token-transfer"===e.type).map(e=>e.data.address);let h,l=c.find(e=>"call-limit"===e.type)?.data;if(l=c[0]?.policies?.find(e=>"call-limit"===e.type)?.data?.limit,"signer"in i&&i.signer){if("keys"===i.signer.type)throw new fn(dn.INVALID_PARAMS,"Multi-key signers are not supported for session creation");"key"!==i.signer.type&&"account"!==i.signer.type||(h=i.signer.data.id)}else"account"in i&&i.account&&(h=i.account);if(!h)throw new fn(dn.INVALID_PARAMS,"Failed to request permissions - missing session address");const d=((e,t,r,n,s,i=!1,o,a,c)=>{const u={address:e,chainId:t,validAfter:r,validUntil:n,optimistic:i,whitelist:o,account:c};return s&&(u.policy=s),a&&(u.limit=a),u})(h,r.chainId,o,a,s,!1,u,l,r.id);return nn(async()=>(await t.sessionsApi.createSession({createSessionRequest:d},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(e,s,r,n,i).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});if(o?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[Dr.CALIBUR].includes(r.implementationType)?await t.sign(o.nextAction.payload.signableHash,!1,!1):await t.sign(o.nextAction.payload.signableHash),vn(await nn(async()=>(await s.sessionsApi.signatureSession({id:o.id,signatureRequest:{signature:e}})).data,{context:"operation"}).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)}))}if(!1===o.isActive)throw new fn(dn.TRANSACTION_REJECTED,"Failed to grant permissions");return vn(o)})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_revokePermissions":{const t=await Zr.fromStorage(this.#e),r=await this.#l(),n=await wr.fromStorage(this.#e);if(!t||!n)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,signer:t,account:r,authentication:n,backendClient:s,policyId:i})=>{const o=e[0];if(!o.permissionContext)return await t.disconnect(),{};const a=await(async(e,t,r,n,s)=>{const i=((e,t,r,n)=>{const s={address:e,chainId:t,account:n};return r&&(s.policy=r),s})(e.permissionContext,r.chainId,s,r.id);return nn(async()=>(await t.sessionsApi.revokeSession({revokeSessionRequest:i},{headers:n.thirdPartyProvider?{authorization:`Bearer ${t.config.backend.accessToken}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":String(t.config.backend.accessToken)}})).data,{context:"operation"})})(o,s,r,n,i).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)});if(a?.nextAction?.payload?.signableHash){let e;return e=[300,324].includes(r.chainId)||r.implementationType&&[Dr.CALIBUR].includes(r.implementationType)?await t.sign(a.nextAction.payload.signableHash,!1,!1):await t.sign(a.nextAction.payload.signableHash),(await s.sessionsApi.signatureSession({id:a.id,signatureRequest:{signature:e}}).catch(e=>{throw new fn(dn.TRANSACTION_REJECTED,e.message)})).data}return a})({params:e.params||[],signer:r,account:t,authentication:n,backendClient:this.#a,policyId:this.#t})}case"wallet_getCapabilities":{const t=await Zr.fromStorage(this.#e);if(t?.accountType===Hr.EOA)throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`);const r=await this.getRpcProvider(),{chainId:n}=await r.detectNetwork();return{[Qr(n)]:{permissions:{supported:!0,signerTypes:["account","key"],keyTypes:["secp256k1"],permissionTypes:["contract-calls"]},paymasterService:{supported:!0},atomicBatch:{supported:!0}}}}case"wallet_getAssets":{const t=await Zr.fromStorage(this.#e),r=await wr.fromStorage(this.#e);if(!t||!r)throw new fn(ln.UNAUTHORIZED,"Unauthorized - call eth_requestAccounts first");return await this.#s(),await(async({params:e,account:t,authentication:r,backendClient:n})=>{const s=await(async(e,t,r,n)=>nn(async()=>(await e.rpcApi.handleRpcRequest({jsonRpcRequest:{method:"wallet_getAssets",params:{account:t.address,chainFilter:n?.chainFilter,assetFilter:n?.assetFilter,assetTypeFilter:n?.assetTypeFilter},id:1,jsonrpc:"2.0"}},{headers:r.thirdPartyProvider?{authorization:`Bearer ${e.config.backend.accessToken}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:{authorization:`Bearer ${r.token}`,"x-project-key":String(e.config.backend.accessToken)}})).data,{context:"operation"}))(n,t,r,e).catch(e=>{throw new fn(dn.INTERNAL_ERROR,e.message)});return s.result})({params:e.params?.[0],account:t,authentication:r,backendClient:this.#a})}case"eth_gasPrice":case"eth_getBalance":case"eth_sendRawTransaction":case"eth_getCode":case"eth_getStorageAt":case"eth_call":case"eth_blockNumber":case"eth_getBlockByHash":case"eth_getBlockByNumber":case"eth_getTransactionByHash":case"eth_getTransactionReceipt":case"eth_getTransactionCount":return(await this.getRpcProvider()).send(e.method,e.params||[]);default:throw new fn(ln.UNSUPPORTED_METHOD,`${e.method}: Method not supported`)}}async request(e){try{return this.#d(e)}catch(e){if(e instanceof fn)throw e;if(e instanceof Error)throw new fn(dn.INTERNAL_ERROR,e.message);throw new fn(dn.INTERNAL_ERROR,"Internal error")}}on(e,t){this.#i.on(e,t)}removeListener(e,t){this.#i.off(e,t)}};const ls={icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" viewBox="597.32 331.34 171.36 105.32" ><g><rect x="673.9" y="404.26" width="18.2" height="32.4" /><polygon points="768.68,331.36 768.68,331.36 768.68,331.34 610.78,331.34 610.78,331.36 597.32,331.36 597.32,436.64    615.52,436.64 615.52,349.54 750.48,349.54 750.48,436.64 768.68,436.64  " /><polygon points="732.16,367.79 633.83,367.79 633.83,370.19 633.79,370.19 633.79,436.64 651.99,436.64 651.99,385.99    713.9,385.99 713.9,436.64 732.09,436.64 732.09,385.99 732.16,385.99  " /></g></svg>',name:"Openfort",rdns:"xyz.openfort",uuid:Yr()};let ds=class extends Error{code;constructor(e,t){super(t),this.name="PenpalError",this.code=e}};var fs="penpal";const ps=e=>"object"==typeof e&&null!==e,ms=e=>"function"==typeof e,gs=e=>"SYN"===e.type,ys=e=>"ACK1"===e.type,ws=e=>"ACK2"===e.type,vs=e=>"CALL"===e.type,As=e=>"REPLY"===e.type;let bs=class extends Error{constructor(e){super(`You've hit a bug in Penpal. Please file an issue with the following information: ${e}`)}};const Es="deprecated-penpal";var Ss,_s;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(Ss||(Ss={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(_s||(_s={}));const Ps=e=>e.split("."),ks=e=>e.join("."),Is=e=>new bs(`Unexpected message to translate: ${JSON.stringify(e)}`);let Rs=class{messagePoster;handlers=new Set;isInitialized=!1;hasBeenUsed=!1;validateMessage;messageBuffer=[];nextNumericId=1;stringToNumericId=new Map;numericToStringId=new Map;constructor(e){if(this.messagePoster=e,!e||"function"!=typeof e.postMessage)throw new ds("CONNECTION_DESTROYED","Invalid message poster provided");sn("ReactNativeMessenger created")}initialize(e){if(this.isInitialized)return void sn("ReactNativeMessenger already initialized");if(this.hasBeenUsed)throw new ds("CONNECTION_DESTROYED","A messenger can only be used for a single connection");this.validateMessage=e?.validateReceivedMessage,this.isInitialized=!0,this.hasBeenUsed=!0,sn(`ReactNativeMessenger initialized, processing ${this.messageBuffer.length} buffered messages`);const t=[...this.messageBuffer];this.messageBuffer=[],t.forEach(e=>{this.processMessage(e)})}sendMessage(e,t){if(!this.isInitialized)throw new ds("CONNECTION_DESTROYED","ReactNativeMessenger not initialized");t&&t.length>0&&sn("React Native: Ignoring transferables (not supported)"),sn("ReactNativeMessenger sending message:",e);try{let t=e;"penpal"===e?.namespace&&(t=this.convertToDeprecatedFormat(e),sn("React Native: Converted message:",t));const r=JSON.stringify(t);this.messagePoster.postMessage(r)}catch(e){throw new ds("TRANSMISSION_FAILED",`Failed to send message through React Native WebView: ${e instanceof Error?e.message:String(e)}`)}}addMessageHandler(e){this.handlers.add(e),sn(`Message handler added, total handlers: ${this.handlers.size}`)}removeMessageHandler(e){this.handlers.delete(e),sn(`Message handler removed, total handlers: ${this.handlers.size}`)}handleMessage(e){if(sn("[HANDSHAKE DEBUG] ReactNativeMessenger.handleMessage called with:",e),!this.isInitialized){return sn(`[HANDSHAKE DEBUG] ReactNativeMessenger: Message received but not initialized, buffering message (${this.messageBuffer.length+1} total)`),void this.messageBuffer.push(e)}sn("[HANDSHAKE DEBUG] ReactNativeMessenger is initialized, processing message"),this.processMessage(e)}processMessage(e){sn("[HANDSHAKE DEBUG] ReactNativeMessenger processing message:",e);const t=this.convertFromDeprecatedFormat(e);if(sn("[HANDSHAKE DEBUG] Message after conversion:",t),this.validateMessage&&!this.validateMessage(t))return void sn("[HANDSHAKE DEBUG] Message validation failed:",t);sn(`[HANDSHAKE DEBUG] Routing message to ${this.handlers.size} handlers`);let r=0;this.handlers.forEach(e=>{r++;try{sn(`[HANDSHAKE DEBUG] Calling handler ${r}/${this.handlers.size}`),e(t),sn(`[HANDSHAKE DEBUG] Handler ${r} completed successfully`)}catch(e){sn(`[HANDSHAKE DEBUG] Error in handler ${r}:`,e)}})}convertToDeprecatedFormat(e){if("penpal"!==e?.namespace)return e;switch(e.type){case"SYN":return sn("React Native: Converting SYN to deprecated format to avoid MessagePorts",{originalMessage:e}),{penpal:"syn",participantId:e.participantId};case"ACK1":return sn("React Native: Converting ACK1 to deprecated format",{originalMessage:e}),{penpal:"synAck",methodNames:e.methodPaths||[]};case"ACK2":return sn("React Native: Converting ACK2 to deprecated format",{originalMessage:e}),{penpal:"ack"};case"REPLY":{sn("React Native: Converting REPLY to deprecated format",{originalMessage:e});const t=this.getNumericId(e.callId);return e.isError?{penpal:"reply",id:t,resolution:"rejected",returnValue:e.value,returnValueIsError:e.isSerializedErrorInstance||!1}:{penpal:"reply",id:t,resolution:"fulfilled",returnValue:e.value}}case"CALL":return sn("React Native: Converting CALL to deprecated format",{originalMessage:e}),{penpal:"call",id:this.getNumericId(e.id),methodName:e.methodPath.join("."),args:e.args};case"DESTROY":return{namespace:"penpal",type:"DESTROY"};default:return e}}convertFromDeprecatedFormat(e){if(e?.penpal)switch(e.penpal){case"syn":{sn("[HANDSHAKE DEBUG] React Native: Converting deprecated SYN to modern format",{originalMessage:e});const t={namespace:"penpal",type:"SYN",participantId:e.participantId};return sn("[HANDSHAKE DEBUG] Converted SYN:",t),t}case"synAck":{sn("[HANDSHAKE DEBUG] React Native: Converting deprecated synAck to modern ACK1 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK1",methodPaths:e.methodNames?.map(e=>e.split("."))||[],channel:void 0};return sn("[HANDSHAKE DEBUG] Converted ACK1:",t),t}case"ack":{sn("[HANDSHAKE DEBUG] React Native: Converting deprecated ack to modern ACK2 format",{originalMessage:e});const t={namespace:"penpal",type:"ACK2",channel:void 0};return sn("[HANDSHAKE DEBUG] Converted ACK2:",t),t}case"reply":{sn("React Native: Converting deprecated reply to modern REPLY format",{originalMessage:e});const t=this.getStringId(e.id);t||sn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`);const r=t||String(e.id);return"fulfilled"===e.resolution?{namespace:"penpal",type:"REPLY",callId:r,value:e.returnValue}:{namespace:"penpal",type:"REPLY",callId:r,isError:!0,value:e.returnValue,isSerializedErrorInstance:e.returnValueIsError||!1}}case"call":{sn("React Native: Converting deprecated call to modern CALL format",{originalMessage:e});const t=this.getStringId(e.id);return t||sn(`Warning: No string ID mapping found for numeric ID ${e.id}, using as-is`),{namespace:"penpal",type:"CALL",id:t||String(e.id),methodPath:e.methodName.split("."),args:e.args}}default:return sn("React Native: Unknown deprecated penpal message type:",e.penpal),e}return e}setupMessagePort(e){sn("React Native: setupMessagePort called but ignored (MessagePort not supported)")}destroy(){this.isInitialized&&(this.handlers.clear(),this.messageBuffer=[],this.stringToNumericId.clear(),this.numericToStringId.clear(),this.nextNumericId=1,this.isInitialized=!1,this.hasBeenUsed=!1,sn("ReactNativeMessenger destroyed and ready for reuse"))}reset(){sn("ReactNativeMessenger reset for reuse"),this.handlers.clear(),this.messageBuffer=[],this.isInitialized=!1,this.hasBeenUsed=!1,this.nextNumericId=1,this.stringToNumericId.clear(),this.numericToStringId.clear()}getNumericId(e){let t=this.stringToNumericId.get(e);return t||(t=this.nextNumericId++,this.stringToNumericId.set(e,t),this.numericToStringId.set(t,e),sn(`ID mapping created: "${e}" -> ${t}`)),t}getStringId(e){return this.numericToStringId.get(e)}};const Ts=e=>({name:e.name,message:e.message,stack:e.stack,penpalCode:e instanceof ds?e.code:void 0}),Ns=(e,t=[])=>{const r=[];for(const n of Object.keys(e)){const s=e[n];ms(s)?r.push([...t,n]):ps(s)&&r.push(...Ns(s,[...t,n]))}return r},Os=e=>e.join(".");let Cs=class{value;transferables;constructor(e,t){this.value=e,this.transferables=t?.transferables}};const xs=(e,t,r)=>({namespace:fs,channel:e,type:"REPLY",callId:t,isError:!0,...r instanceof Error?{value:Ts(r),isSerializedErrorInstance:!0}:{value:r}}),Ms=(e,t,r,n)=>{let s=!1;const i=async i=>{if(s)return;if(!vs(i))return;n?.(`Received ${Os(i.methodPath)}() call`,i);const{methodPath:o,args:a,id:c}=i;let u,h;try{const e=((e,t)=>{const r=e.reduce((e,t)=>ps(e)?e[t]:void 0,t);return ms(r)?r:void 0})(o,t);if(!e)throw new ds("METHOD_NOT_FOUND",`Method \`${Os(o)}\` is not found.`);let n=await e(...a);n instanceof Cs&&(h=n.transferables,n=await n.value),u={namespace:fs,channel:r,type:"REPLY",callId:c,value:n}}catch(e){u=xs(r,c,e)}if(!s)try{n?.(`Sending ${Os(o)}() reply`,u),e.sendMessage(u,h)}catch(t){throw"DataCloneError"===t.name&&(u=xs(r,c,t),n?.(`Sending ${Os(o)}() reply`,u),e.sendMessage(u)),t}};return e.addMessageHandler(i),()=>{s=!0,e.removeMessageHandler(i)}};let Us=class{transferables;timeout;constructor(e){this.transferables=e?.transferables,this.timeout=e?.timeout}};const Ds=new Set(["apply","call","bind"]),Ls=(e,t,r=[])=>new Proxy(r.length?()=>{}:Object.create(null),{get(n,s){if("then"!==s)return r.length&&Ds.has(s)?Reflect.get(n,s):Ls(e,t,[...r,s])},apply:(t,n,s)=>e(r,s)}),Bs=e=>new ds("CONNECTION_DESTROYED",`Method call ${Os(e)}() failed due to destroyed connection`),Fs=(e,t,r)=>{let n=!1;const s=new Map,i=e=>{if(!As(e))return;const{callId:t,value:n,isError:i,isSerializedErrorInstance:o}=e,a=s.get(t);a&&(s.delete(t),r?.(`Received ${Os(a.methodPath)}() call`,e),i?a.reject(o?(({name:e,message:t,stack:r,penpalCode:n})=>{const s=n?new ds(n,t):new Error(t);return s.name=e,s.stack=r,s})(n):n):a.resolve(n))};return e.addMessageHandler(i),{remoteProxy:Ls((i,o)=>{if(n)throw Bs(i);const a=Yr(),c=o[o.length-1],u=c instanceof Us,{timeout:h,transferables:l}=u?c:{},d=u?o.slice(0,-1):o;return new Promise((n,o)=>{const c=void 0!==h?window.setTimeout(()=>{s.delete(a),o(new ds("METHOD_CALL_TIMEOUT",`Method call ${Os(i)}() timed out after ${h}ms`))},h):void 0;s.set(a,{methodPath:i,resolve:n,reject:o,timeoutId:c});try{const n={namespace:fs,channel:t,type:"CALL",id:a,methodPath:i,args:d};r?.(`Sending ${Os(i)}() call`,n),e.sendMessage(n,l)}catch(n){o(new ds("TRANSMISSION_FAILED",n.message))}})},r),destroy:()=>{n=!0,e.removeMessageHandler(i);for(const{methodPath:e,reject:t,timeoutId:r}of s.values())clearTimeout(r),t(Bs(e));s.clear()}}},qs=({messenger:e,methods:t,timeout:r,channel:n,log:s})=>{const i=Yr();let o;const a=[];let c=!1;const u=Ns(t),{promise:h,resolve:l,reject:d}=(()=>{let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}})(),f=setTimeout(()=>{d(new ds("CONNECTION_TIMEOUT",`Connection timed out after ${r}ms`))},r),p=()=>{for(const e of a)e()},m=()=>{if(c)return;a.push(Ms(e,t,n,s));const{remoteProxy:r,destroy:i}=Fs(e,n,s);a.push(i),clearTimeout(f),c=!0,l({remoteProxy:r,destroy:p})},g=()=>{const t={namespace:fs,type:"SYN",channel:n,participantId:i};s?.("Sending handshake SYN",t);try{e.sendMessage(t)}catch(t){d(new ds("TRANSMISSION_FAILED",t.message))}},y=t=>{gs(t)&&(t=>{if(s?.("Received handshake SYN",t),t.participantId===o&&o!==Es)return;if(o=t.participantId,g(),!(i>o||o===Es))return;const r={namespace:fs,channel:n,type:"ACK1",methodPaths:u};s?.("Sending handshake ACK1",r);try{e.sendMessage(r)}catch(t){d(new ds("TRANSMISSION_FAILED",t.message))}})(t),ys(t)&&(t=>{s?.("Received handshake ACK1",t);const r={namespace:fs,channel:n,type:"ACK2"};s?.("Sending handshake ACK2",r);try{e.sendMessage(r)}catch(t){return void d(new ds("TRANSMISSION_FAILED",t.message))}m()})(t),ws(t)&&(e=>{s?.("Received handshake ACK2",e),m()})(t)};return e.addMessageHandler(y),a.push(()=>e.removeMessageHandler(y)),g(),h},Gs=new WeakSet,js=({messenger:e,methods:t={},timeout:r,channel:n,log:s})=>{if(!e)throw new ds("INVALID_ARGUMENT","messenger must be defined");if(Gs.has(e))throw new ds("INVALID_ARGUMENT","A messenger can only be used for a single connection");Gs.add(e);const i=[e.destroy],o=(e=>{let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)})(t=>{if(t){const r={namespace:fs,channel:n,type:"DESTROY"};try{e.sendMessage(r)}catch(t){}}for(const e of i)e();s?.("Connection destroyed")}),a=e=>(e=>ps(e)&&e.namespace===fs)(e)&&e.channel===n;return{promise:(async()=>{try{e.initialize({log:s,validateReceivedMessage:a}),e.addMessageHandler(e=>{(e=>"DESTROY"===e.type)(e)&&o(!1)});const{remoteProxy:c,destroy:u}=await qs({messenger:e,methods:t,timeout:r,channel:n,log:s});return i.push(u),c}catch(e){throw o(!0),e}})(),destroy:()=>{o(!0)}}};var Hs;!function(e){e.RECOVER="recover",e.RECOVERED="recovered",e.CREATE="create",e.CREATED="created",e.UPDATE_AUTHENTICATION="update-authentication",e.AUTHENTICATION_UPDATED="authentication-updated",e.SIGN="sign",e.SET_RECOVERY_METHOD="set-recovery-method",e.SWITCH_CHAIN="switch-chain",e.CHAIN_SWITCHED="chain-switched",e.EXPORT="export",e.SIGNED="signed",e.LOGGED_OUT="logged-out",e.GET_CURRENT_DEVICE="get-current-device",e.CURRENT_DEVICE="current-device"}(Hs||(Hs={}));let zs=class{uuid;action=Hs.GET_CURRENT_DEVICE;playerID;constructor(e,t){this.uuid=e,this.playerID=t}};class Ks{uuid;action=Hs.SIGN;message;requestConfiguration;requireArrayify;requireHash;chainType;constructor(e,t,r,n,s,i){this.uuid=e,this.message=t,this.requestConfiguration=r,this.requireArrayify=n,this.requireHash=s,this.chainType=i||"EVM"}}class Vs{uuid;action=Hs.SWITCH_CHAIN;chainId;requestConfiguration;constructor(e,t,r){this.uuid=e,this.chainId=t,this.requestConfiguration=r}}class Ws{uuid;action=Hs.EXPORT;requestConfiguration;constructor(e,t){this.uuid=e,this.requestConfiguration=t}}class Js{uuid;action=Hs.SET_RECOVERY_METHOD;recoveryMethod;recoveryPassword;encryptionSession;passkeyKey;passkeyId;requestConfiguration;constructor(e,t,r,n,s,i,o){this.uuid=e,this.recoveryMethod=t,this.recoveryPassword=n,this.encryptionSession=s,this.requestConfiguration=r,this.passkeyKey=i,this.passkeyId=o}}function Ys(e){return"error"in e}class Qs{uuid;action=Hs.UPDATE_AUTHENTICATION;accessToken;recovery;constructor(e,t,r){this.uuid=e,this.accessToken=t,this.recovery=r}}var $s;!function(e){e.OPENFORT="openfort"}($s||($s={}));class Xs extends Or{constructor(){super(Ar.MISSING_RECOVERY_PASSWORD,"This embedded signer requires a password to be recovered","password")}}class Zs extends Or{constructor(){super(Ar.INCORRECT_PASSKEY,"Wrong recovery passkey for this embedded signer","passkey")}}class ei extends Or{constructor(){super(Ar.MISSING_PROJECT_ENTROPY,"Project entropy is missing","entropy")}}let ti=class extends Or{constructor(){super(Ar.WRONG_RECOVERY_PASSWORD,"Wrong recovery password for this embedded signer","password")}};class ri extends kr{constructor(){super(Ar.NOT_CONFIGURED,"Signer is not configured")}}let ni=class extends Er{constructor(){super(Ar.OTP_REQUIRED,"OTP verification required")}};class si{messenger;connection;remote;storage;sdkConfiguration;isInitialized=!1;initializationPromise=null;hasFailed=!1;constructor(e,t,r){if(!e)throw new Pr("Configuration is required for IframeManager");if(!t)throw new Pr("Storage is required for IframeManager");if(!r)throw new Pr("Messenger is required for IframeManager");this.sdkConfiguration=e,this.storage=t,this.messenger=r}async initialize(){if(!this.isInitialized){if(this.hasFailed)throw new Er(Ar.INTERNAL_ERROR,"Failed to establish iFrame connection: Previous connection attempt failed");if(this.initializationPromise)await this.initializationPromise;else{this.initializationPromise=this.doInitialize();try{await this.initializationPromise,this.isInitialized=!0}catch(e){throw this.hasFailed=!0,this.initializationPromise=null,e}}}}async doInitialize(){sn("Initializing IframeManager connection..."),this.messenger.initialize({validateReceivedMessage:e=>!(!e||"object"!=typeof e),log:sn}),this.connection=js({messenger:this.messenger,timeout:1e4,log:sn});try{this.remote=await this.connection.promise,sn("IframeManager connection established")}catch(e){const t=e;throw rn.captureException(t),this.destroy(),sn("Failed to establish connection:",t),new Er(Ar.INTERNAL_ERROR,`Failed to establish iFrame connection: ${t.cause||t.message}\n        \n        In apps built with:\n        - react native\n        - swift\n        - unity (non-webgl) \n        \n        You must configure your origin in the openfort dashboard before using the embedded wallet.\n\n        For more information, see: https://www.openfort.io/docs/configuration/native-apps\n        `)}}async ensureConnection(){if(this.isInitialized&&this.remote||await this.initialize(),!this.remote)throw new Er(Ar.INTERNAL_ERROR,"Failed to establish connection");return this.remote}handleError(e){if(Ys(e)){if("not-configured-error"===e.error)throw this.storage.remove(yr.ACCOUNT),new ri;if("missing-user-entropy-error"===e.error)throw this.storage.remove(yr.ACCOUNT),new Xs;if("missing-project-entropy-error"===e.error)throw this.storage.remove(yr.ACCOUNT),new ei;if("incorrect-user-entropy-error"===e.error)throw new ti;if("missing-passkey-error"===e.error)throw this.storage.remove(yr.ACCOUNT),new Xs;if("incorrect-passkey-error"===e.error)throw new Zs;if("otp-required-error"===e.error)throw new ni;throw this.storage.remove(yr.ACCOUNT),new Er(Ar.INTERNAL_ERROR,`Unknown error: ${e.error}`)}throw e}async buildRequestConfiguration(){const e=await wr.fromStorage(this.storage);if(!e)throw new _r(Ar.NOT_LOGGED_IN,"Must be authenticated to create a signer");const t={auth:$s.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyProvider:e.thirdPartyProvider,thirdPartyTokenType:e.thirdPartyTokenType,token:e.token,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,openfortURL:this.sdkConfiguration.backendUrl,shieldAuthentication:t,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",shieldURL:this.sdkConfiguration.shieldUrl,encryptionKey:this.sdkConfiguration?.shieldConfiguration?.shieldEncryptionKey??void 0,appNativeIdentifier:this.sdkConfiguration?.nativeAppIdentifier??void 0}}async buildIFrameRequestConfiguration(){const e=await wr.fromStorage(this.storage);if(!e)throw new _r(Ar.NOT_LOGGED_IN,"Must be authenticated to create a signer");const t={auth:$s.OPENFORT,authProvider:e.thirdPartyProvider,token:e.token,tokenType:e.thirdPartyTokenType};return{thirdPartyTokenType:e.thirdPartyTokenType??null,thirdPartyProvider:e.thirdPartyProvider??null,accessToken:e.token,playerID:e.userId,recovery:t,chainId:null,password:null,passkey:null}}async create(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await this.ensureConnection(),r=await this.buildIFrameRequestConfiguration();r.chainId=e.chainId??null,r.password=e?.entropy?.recoveryPassword??null,r.recovery={...r.recovery,encryptionSession:e?.entropy?.encryptionSession},r.passkey=e?.entropy?.passkey??null;const n={uuid:Yr(),action:Hs.CREATE,recovery:r.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:r.accessToken,playerID:r.playerID,thirdPartyProvider:r.thirdPartyProvider,thirdPartyTokenType:r.thirdPartyTokenType,encryptionKey:r.password,encryptionSession:r.recovery?.encryptionSession??null,passkey:r.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,chainId:e.chainId??null,accountType:e.accountType,chainType:e.chainType,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},s=await t.create(n);return Ys(s)&&this.handleError(s),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",s.version??"undefined"),s}async recover(e){if(!this.sdkConfiguration.shieldConfiguration)throw new Error("shieldConfiguration is required");const t=await Zr.fromStorage(this.storage),r=await this.ensureConnection(),n=await this.buildIFrameRequestConfiguration();n.chainId=t?.chainId??null,n.password=e?.entropy?.recoveryPassword??null,n.recovery={...n.recovery,encryptionSession:e?.entropy?.encryptionSession},n.passkey=e?.entropy?.passkey??null;const s={uuid:Yr(),action:Hs.RECOVER,recovery:n.recovery,publishableKey:this.sdkConfiguration.baseConfiguration.publishableKey,shieldAPIKey:this.sdkConfiguration.shieldConfiguration?.shieldPublishableKey||"",accessToken:n.accessToken,playerID:n.playerID,thirdPartyProvider:n.thirdPartyProvider,thirdPartyTokenType:n.thirdPartyTokenType,encryptionKey:n.password,encryptionSession:n.recovery?.encryptionSession??null,passkey:n.passkey??null,openfortURL:this.sdkConfiguration.backendUrl,shieldURL:this.sdkConfiguration.shieldUrl,account:e.account,nativeAppIdentifier:this.sdkConfiguration?.nativeAppIdentifier??null},i=await r.recover(s);return Ys(i)&&this.handleError(i),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",i.version??"undefined"),i}async sign(e,t,r,n){sn("[iframe] ensureConnection");const s=await this.ensureConnection(),i=new Ks(Yr(),e,await this.buildRequestConfiguration(),t,r,n);sn("[iframe] done ensureConnection");const o=await s.sign(i);return sn("[iframe] response",o),Ys(o)&&this.handleError(o),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",o.version??"undefined"),o.signature}async switchChain(e){const t=await this.ensureConnection(),r=new Vs(Yr(),e,await this.buildRequestConfiguration()),n=await t.switchChain(r);return Ys(n)&&this.handleError(n),n}async export(){const e=await this.ensureConnection(),t=new Ws(Yr(),await this.buildRequestConfiguration()),r=await e.export(t);return Ys(r)&&this.handleError(r),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",r.version??"undefined"),r.key}async setRecoveryMethod(e,t,r,n,s){const i=await this.ensureConnection(),o=new Js(Yr(),e,await this.buildRequestConfiguration(),t,r,n,s),a=await i.setRecoveryMethod(o);Ys(a)&&this.handleError(a),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",a.version??"undefined")}async getCurrentDevice(e){const t=await this.ensureConnection(),r=new zs(Yr(),e);try{const e=await t.getCurrentDevice(r);return Ys(e)&&this.handleError(e),"undefined"!=typeof sessionStorage&&sessionStorage.setItem("iframe-version",e.version??"undefined"),e}catch(e){if(e instanceof ri)return null;throw e}}async updateAuthentication(){if(!this.isLoaded()||!this.remote)return void sn("IframeManager not loaded, skipping authentication update");const e=await wr.fromStorage(this.storage);if(!e)return void sn("No authentication found, skipping update");const t=new Qs(Yr(),e.token);sn("Updating authentication in iframe with token");const r=await this.remote.updateAuthentication(t);Ys(r)&&this.handleError(r)}async disconnect(){const e=await this.ensureConnection(),t={uuid:Yr()};await e.logout(t)}async onMessage(e){sn("[HANDSHAKE DEBUG] IframeManager.onMessage called with:",e),this.messenger instanceof Rs?(this.isInitialized||this.connection?sn(`[HANDSHAKE DEBUG] Connection already initialized (isInitialized: ${this.isInitialized}, hasConnection: ${!!this.connection})`):(sn("[HANDSHAKE DEBUG] First message received, initializing connection..."),this.initialize().catch(e=>{sn("[HANDSHAKE DEBUG] Failed to initialize connection:",e)})),sn("[HANDSHAKE DEBUG] Passing message to ReactNativeMessenger"),this.messenger.handleMessage(e)):sn("[HANDSHAKE DEBUG] Not a ReactNativeMessenger, ignoring message")}isLoaded(){return this.isInitialized&&void 0!==this.remote}destroy(){this.connection&&this.connection.destroy(),this.remote=void 0,this.isInitialized=!1,this.connection=void 0,this.initializationPromise=null}}let ii=class{#t;#s;#e;#n;#o;#i=new Set;#a;#r=!1;constructor({remoteWindow:e,allowedOrigins:t}){if(!e)throw new ds("INVALID_ARGUMENT","remoteWindow must be defined");this.#t=e,this.#s=t?.length?t:[window.origin]}initialize=({log:e,validateReceivedMessage:t})=>{this.#e=e,this.#n=t,window.addEventListener("message",this.#h)};sendMessage=(e,t)=>{if(gs(e)){const r=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:r,transfer:t})}if(ys(e)||this.#r){const r=this.#r?(e=>{if(ys(e))return{penpal:Ss.SynAck,methodNames:e.methodPaths.map(ks)};if(vs(e))return{penpal:Ss.Call,id:e.id,methodName:ks(e.methodPath),args:e.args};if(As(e))return e.isError?{penpal:Ss.Reply,id:e.callId,resolution:_s.Rejected,...e.isSerializedErrorInstance?{returnValue:e.value,returnValueIsError:!0}:{returnValue:e.value}}:{penpal:Ss.Reply,id:e.callId,resolution:_s.Fulfilled,returnValue:e.value};throw Is(e)})(e):e,n=this.#f(e);return void this.#t.postMessage(r,{targetOrigin:n,transfer:t})}if(ws(e)){const{port1:r,port2:n}=new MessageChannel;this.#a=r,r.addEventListener("message",this.#p),r.start();const s=[n,...t||[]],i=this.#f(e);return void this.#t.postMessage(e,{targetOrigin:i,transfer:s})}if(!this.#a)throw new bs("Port is undefined");this.#a.postMessage(e,{transfer:t})};addMessageHandler=e=>{this.#i.add(e)};removeMessageHandler=e=>{this.#i.delete(e)};destroy=()=>{window.removeEventListener("message",this.#h),this.#u(),this.#i.clear()};#c=e=>this.#s.some(t=>t instanceof RegExp?t.test(e):t===e||"*"===t);#f=e=>{if(gs(e))return"*";if(!this.#o)throw new bs("Concrete remote origin not set");return"null"===this.#o&&this.#s.includes("*")?"*":this.#o};#u=()=>{this.#a?.removeEventListener("message",this.#p),this.#a?.close(),this.#a=void 0};#h=({source:e,origin:t,ports:r,data:n})=>{if(e===this.#t&&((e=>ps(e)&&"penpal"in e)(n)&&(this.#e?.("Please upgrade the child window to the latest version of Penpal."),this.#r=!0,n=(e=>{if(e.penpal===Ss.Syn)return{namespace:fs,channel:void 0,type:"SYN",participantId:Es};if(e.penpal===Ss.SynAck)return{namespace:fs,channel:void 0,type:"ACK1",methodPaths:e.methodNames.map(Ps)};if(e.penpal===Ss.Ack)return{namespace:fs,channel:void 0,type:"ACK2"};if(e.penpal===Ss.Call)return{namespace:fs,channel:void 0,type:"CALL",id:e.id,methodPath:Ps(e.methodName),args:e.args};if(e.penpal===Ss.Reply)return e.resolution===_s.Fulfilled?{namespace:fs,channel:void 0,type:"REPLY",callId:e.id,value:e.returnValue}:{namespace:fs,channel:void 0,type:"REPLY",callId:e.id,isError:!0,...e.returnValueIsError?{value:e.returnValue,isSerializedErrorInstance:!0}:{value:e.returnValue}};throw Is(e)})(n)),this.#n?.(n)))if(this.#c(t)){if(gs(n)&&(this.#u(),this.#o=t),ws(n)&&!this.#r){if([this.#a]=r,!this.#a)throw new bs("No port received on ACK2");this.#a.addEventListener("message",this.#p),this.#a.start()}for(const e of this.#i)e(n)}else this.#e?.(`Received a message from origin \`${t}\` which did not match allowed origins \`[${this.#s.join(", ")}]\``)};#p=({data:e})=>{if(this.#n?.(e))for(const t of this.#i)t(e)}};class oi{storage;validateAndRefreshToken;ensureInitialized;eventEmitter;passkeyHandler;iframeManager=null;iframeManagerPromise=null;signer=null;signerPromise=null;provider=null;messagePoster=null;messenger=null;constructor(e,t,r,n,s){this.storage=e,this.validateAndRefreshToken=t,this.ensureInitialized=r,this.eventEmitter=n,this.passkeyHandler=s,this.eventEmitter.on(Mr.ON_LOGOUT,()=>{sn("Handling logout event in EmbeddedWalletApi"),this.handleLogout()})}get backendApiClients(){const e=Xr.getInstance();if(!e)throw new Pr("Configuration not found");return new gr({basePath:e.backendUrl,accessToken:e.baseConfiguration.publishableKey,nativeAppIdentifier:e.nativeAppIdentifier})}async getIframeManager(){if(sn("[HANDSHAKE DEBUG] getIframeManager called"),this.iframeManager&&this.iframeManager.hasFailed&&(sn("[HANDSHAKE DEBUG] Existing iframeManager has failed, clearing for recreation"),this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null),this.iframeManager)return sn("[HANDSHAKE DEBUG] Returning existing iframeManager instance"),this.iframeManager;if(this.iframeManagerPromise)return sn("[HANDSHAKE DEBUG] Returning existing iframeManagerPromise"),this.iframeManagerPromise;sn("[HANDSHAKE DEBUG] Creating new iframeManager"),this.iframeManagerPromise=this.createIframeManager();try{return sn("[HANDSHAKE DEBUG] Awaiting iframeManager creation"),this.iframeManager=await this.iframeManagerPromise,sn("[HANDSHAKE DEBUG] IframeManager created successfully"),this.iframeManagerPromise=null,this.iframeManager}catch(e){throw sn("[HANDSHAKE DEBUG] Error creating iframeManager:",e),this.iframeManagerPromise=null,this.messenger&&(this.messenger.destroy(),this.messenger=null),this.iframeManager=null,e}}async createIframeManager(){sn("[HANDSHAKE DEBUG] createIframeManager starting");const e=Xr.getInstance();if(!e)throw sn("[HANDSHAKE DEBUG] Configuration not found"),new Pr("Configuration not found");let t;if(sn("[HANDSHAKE DEBUG] Configuration found"),this.messagePoster)sn("[HANDSHAKE DEBUG] Creating ReactNativeMessenger with messagePoster"),this.messenger&&(sn("[HANDSHAKE DEBUG] Destroying old messenger before creating new one"),this.messenger.destroy()),this.messenger=new Rs(this.messagePoster),sn("[HANDSHAKE DEBUG] Created new ReactNativeMessenger instance"),t=this.messenger;else{sn("[HANDSHAKE DEBUG] Creating WindowMessenger for browser mode");const r=this.createIframe(e.iframeUrl),n=new URL(e.iframeUrl).origin;t=new ii({remoteWindow:r.contentWindow,allowedOrigins:[n]}),sn("[HANDSHAKE DEBUG] Created WindowMessenger")}return sn("[HANDSHAKE DEBUG] Creating IframeManager instance"),new si(e,this.storage,t)}async ensureSigner(){if(this.iframeManager&&this.iframeManager.hasFailed&&(sn("IframeManager has failed, clearing signer for recreation"),this.signer=null),this.signer)return this.signer;if(this.signerPromise)return this.signerPromise;this.signerPromise=this.createSigner();try{return this.signer=await this.signerPromise,this.signer}catch(e){throw this.signerPromise=null,e}finally{this.signerPromise=null}}async createSigner(){const e=await this.getIframeManager();return new on(e,this.storage,this.backendApiClients,this.passkeyHandler,this.eventEmitter)}createIframe(e){if("undefined"==typeof document)throw new Pr("Document is not available. Please provide a message poster for non-browser environments.");const t=document.getElementById("openfort-iframe");t&&t.remove();const r=document.createElement("iframe");return r.style.display="none",r.id="openfort-iframe",r.src=e,document.body.appendChild(r),r}async getPasskeyKey(e){const t=await wr.fromStorage(this.storage);return await this.passkeyHandler.deriveAndExportKey({id:e,seed:t?.userId??""})}async getEntropy(e){switch(e.recoveryMethod){case Ur.PASSWORD:return{recoveryPassword:e.password};case Ur.AUTOMATIC:return{encryptionSession:e.encryptionSession};case Ur.PASSKEY:return{passkey:e.passkeyInfo?{id:e.passkeyInfo.passkeyId,key:e.passkeyInfo.passkeyKey||await this.getPasskeyKey(e.passkeyInfo.passkeyId)}:{}};default:throw new Pr("Invalid recovery method")}}async configure(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Ur.AUTOMATIC},[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),s={chainId:e.chainId,entropy:n,accountType:e.accountType??Hr.SMART_ACCOUNT,chainType:e.chainType??zr.EVM,getPasskeyKeyFn:async e=>this.getPasskeyKey(e)},i=await r.configure(s);return{id:i.id,chainId:i.chainId,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,factoryAddress:i.factoryAddress,salt:i.salt,createdAt:i.createdAt,implementationAddress:i.implementationAddress,recoveryMethod:Zr.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails}}async create(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Ur.AUTOMATIC},r=await wr.fromStorage(this.storage);if(!r)throw new _r(Ar.NOT_LOGGED_IN,"missing authentication");if(t.recoveryMethod===Ur.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Jr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:r?.userId});t.passkeyInfo={passkeyId:e.id,passkeyKey:e.key}}const[n,s]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),i=await n.create({accountType:e.accountType,chainType:e.chainType,chainId:e.chainId,entropy:s}),o={id:i.id,chainId:i.chainId,address:i.address,ownerAddress:i.ownerAddress,chainType:i.chainType,accountType:i.accountType,implementationType:i.implementationType,factoryAddress:i.factoryAddress,salt:i.salt,createdAt:i.createdAt,implementationAddress:i.implementationAddress,recoveryMethod:Zr.parseRecoveryMethod(i.recoveryMethod),recoveryMethodDetails:i.recoveryMethodDetails};return this.eventEmitter.emit(Mr.ON_EMBEDDED_WALLET_CREATED,o),o}async recover(e){await this.validateAndRefreshToken();const t=e.recoveryParams??{recoveryMethod:Ur.AUTOMATIC};if(t.recoveryMethod===Ur.PASSKEY){if(!t.passkeyInfo?.passkeyId)throw new Pr("Passkey ID must be provided for passkey recovery");t.passkeyInfo={passkeyId:t.passkeyInfo.passkeyId}}const[r,n]=await Promise.all([this.ensureSigner(),this.getEntropy(t)]),s=await r.recover({account:e.account,entropy:n}),i={id:s.id,chainId:s.chainId,implementationAddress:s.implementationAddress,factoryAddress:s.factoryAddress,salt:s.salt,address:s.address,ownerAddress:s.ownerAddress,chainType:s.chainType,accountType:s.accountType,implementationType:s.implementationType,createdAt:s.createdAt,recoveryMethod:Zr.parseRecoveryMethod(s.recoveryMethod),recoveryMethodDetails:s.recoveryMethodDetails};return this.eventEmitter.emit(Mr.ON_EMBEDDED_WALLET_RECOVERED,i),i}async signMessage(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),{hashMessage:n=!0,arrayifyMessage:s=!1}=t||{},i=await Zr.fromStorage(this.storage);return await r.sign(e,s,n,i?.chainType)}async signTypedData(e,t,r){await this.validateAndRefreshToken();const n=await this.ensureSigner(),s=await Zr.fromStorage(this.storage);if(!s)throw new kr(Ar.MISSING_SIGNER,"No account found");const i={...t};delete i.EIP712Domain;const{_TypedDataEncoder:o}=await Promise.resolve().then(function(){return ja}),a=o.hash(e,i,r);return await gn({hash:a,implementationType:s.implementationType||s.type,chainId:Number(s.chainId),signer:n,address:s.address,ownerAddress:s.ownerAddress,factoryAddress:s.factoryAddress,salt:s.salt})}async exportPrivateKey(){await this.validateAndRefreshToken();const e=await this.ensureSigner();return await e.export()}async setRecoveryMethod(e,t){await this.validateAndRefreshToken();const r=await this.ensureSigner(),n=await wr.fromStorage(this.storage);if(!n)throw new _r(Ar.NOT_LOGGED_IN,"missing authentication");let s,i,o,a;if(e.recoveryMethod===Ur.PASSKEY){const e=await Zr.fromStorage(this.storage);if(!e)throw new Pr("missing account");const t=e?.recoveryMethodDetails?.passkeyId;if(!t)throw new Pr("missing passkey id for account");o={passkeyId:t,passkeyKey:await this.passkeyHandler.deriveAndExportKey({id:t,seed:n.userId})}}else if(t.recoveryMethod===Ur.PASSKEY){const e=await this.passkeyHandler.createPasskey({id:Jr.randomPasskeyName(),displayName:"Openfort - Embedded Wallet",seed:n.userId});o={passkeyId:e.id,passkeyKey:e.key},a={passkeyId:e.id}}if(e.recoveryMethod===Ur.PASSWORD?s=e.password:t.recoveryMethod===Ur.PASSWORD&&(s=t.password),e.recoveryMethod===Ur.AUTOMATIC?i=e.encryptionSession:t.recoveryMethod===Ur.AUTOMATIC&&(i=t.encryptionSession),!s&&!i)throw new Pr("Password or encryption session is not provided");await r.setRecoveryMethod({recoveryMethod:t.recoveryMethod,recoveryPassword:s,encryptionSession:i,passkeyInfo:o});const c=await Zr.fromStorage(this.storage);c&&new Zr({...c,recoveryMethod:t.recoveryMethod,recoveryMethodDetails:a}).save(this.storage)}async get(){await this.validateAndRefreshToken();const e=await Zr.fromStorage(this.storage);if(!e)throw new kr(Ar.MISSING_SIGNER,"No signer configured");if(!await wr.fromStorage(this.storage))throw new _r(Ar.NOT_LOGGED_IN,"No access token found");return{id:e.id,chainId:e.chainId,address:e.address,ownerAddress:e.ownerAddress,factoryAddress:e.factoryAddress,salt:e.salt,chainType:e.chainType,accountType:e.accountType,implementationAddress:e.implementationAddress,implementationType:e.implementationType,createdAt:e.createdAt,recoveryMethod:Zr.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails}}async list(e){await this.validateAndRefreshToken();const t={accountType:Hr.SMART_ACCOUNT,...e},r=Xr.getInstance();if(!r)throw new Pr("Configuration not found");const n=await wr.fromStorage(this.storage);if(!n)throw new _r(Ar.NOT_LOGGED_IN,"No access token found");return await this.validateAndRefreshToken(),nn(async()=>(await this.backendApiClients.accountsV2Api.getAccountsV2(t,{headers:n.thirdPartyProvider?{authorization:`Bearer ${r.baseConfiguration.publishableKey}`,"x-player-token":n.token,"x-auth-provider":n.thirdPartyProvider,"x-token-type":n.thirdPartyTokenType}:{authorization:`Bearer ${n.token}`,"x-project-key":r.baseConfiguration.publishableKey}})).data.data.map(e=>({chainType:e.chainType,id:e.id,address:e.address,active:e.smartAccount?.active,ownerAddress:e.ownerAddress,factoryAddress:e.smartAccount?.factoryAddress,salt:e.smartAccount?.salt,accountType:e.accountType,implementationAddress:e.smartAccount?.implementationAddress,createdAt:e.createdAt,implementationType:e.smartAccount?.implementationType,chainId:e.chainId,recoveryMethod:Zr.parseRecoveryMethod(e.recoveryMethod),recoveryMethodDetails:e.recoveryMethodDetails})),{context:"list"})}async getEmbeddedState(){try{return await wr.fromStorage(this.storage)?await Zr.fromStorage(this.storage)?xr.READY:xr.EMBEDDED_SIGNER_NOT_CONFIGURED:xr.UNAUTHENTICATED}catch(e){return sn("Failed to get embedded state:",e),xr.UNAUTHENTICATED}}async getEthereumProvider(e){await this.ensureInitialized();const t={announceProvider:!0,...e},r=await wr.fromStorage(this.storage),n=await Zr.fromStorage(this.storage);return this.provider?this.provider&&t.policy&&this.provider.updatePolicy(t.policy):(this.provider=new hs({storage:this.storage,openfortEventEmitter:this.eventEmitter,ensureSigner:this.ensureSigner.bind(this),account:n||void 0,authentication:r||void 0,backendApiClients:this.backendApiClients,policyId:t.policy,validateAndRefreshSession:this.validateAndRefreshToken.bind(this),chains:t.chains}),t.announceProvider&&function(e){if("undefined"==typeof window)return;const t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t),window.addEventListener("eip6963:requestProvider",()=>window.dispatchEvent(t))}({info:{...ls,...t.providerInfo},provider:this.provider})),this.provider}async ping(e){try{e>0&&await new Promise(t=>{setTimeout(t,e)});const t=await this.getIframeManager();if(!t.isLoaded())return!1;const r=await wr.fromStorage(this.storage);if(r)try{return await t.getCurrentDevice(r.userId),!0}catch(e){return!1}return t.isLoaded()}catch(e){return sn("Ping failed:",e),!1}}getURL(){const e=Xr.getInstance();if(!e)throw new Pr("Configuration not found");return e.iframeUrl}async setMessagePoster(e){if(!e||"function"!=typeof e.postMessage)throw new Pr("Invalid message poster");this.messagePoster=e,this.messenger&&this.messenger.destroy(),this.iframeManager&&this.iframeManager.destroy(),this.signer=null,this.signerPromise=null,this.iframeManager=null,this.iframeManagerPromise=null,this.messenger=null}async handleLogout(){if("undefined"==typeof document&&!this.messagePoster)return sn("Skipping signer disconnect: no messagePoster available in non-browser environment"),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,void(this.signerPromise=null);const e=await this.ensureSigner();await e.disconnect(),this.provider=null,this.messenger=null,this.iframeManager=null,this.iframeManagerPromise=null,this.signer=null,this.signerPromise=null}async onMessage(e){if(!e||"object"!=typeof e)return void sn("Invalid message received:",e);sn("[HANDSHAKE DEBUG] EmbeddedWalletApi onMessage:",e);const t="penpal"===e.namespace&&"SYN"===e.type||e.penpal&&"string"==typeof e.penpal;if(t&&this.messenger&&this.messagePoster)return sn("[HANDSHAKE DEBUG] Passing message directly to existing ReactNativeMessenger"),void this.messenger.handleMessage(e);const r=await this.getIframeManager();sn(`[HANDSHAKE DEBUG] IframeManager obtained, isLoaded: ${r.isLoaded()}`),t&&!r.isLoaded()&&sn("[HANDSHAKE DEBUG] Received penpal message before connection initialized, setting up connection..."),sn("[HANDSHAKE DEBUG] Calling iframeManager.onMessage"),await r.onMessage(e),sn("[HANDSHAKE DEBUG] iframeManager.onMessage completed")}isReady(){return this.iframeManager?.isLoaded()||!1}}let ai=class{backendApiClients;validateAndRefreshToken;ensureInitialized;getSignerSignFunction;constructor(e,t,r,n,s){this.backendApiClients=t,this.validateAndRefreshToken=r,this.ensureInitialized=n,this.getSignerSignFunction=s}async sendSignatureTransactionIntentRequest(e,t=null,r=null,n=!1){if(await this.ensureInitialized(),!Xr.getInstance())throw new Pr("Configuration not found");await this.validateAndRefreshToken();let s=r;if(!s){if(!t)throw new Pr("No signableHash or signature provided");if(!this.getSignerSignFunction)throw new kr(Ar.MISSING_SIGNER,"In order to sign a transaction intent, a signer must be configured");const e=await this.getSignerSignFunction();s=await e(t)}const i={id:e,signatureRequest:{signature:s,optimistic:n}};return nn(async()=>(await this.backendApiClients.transactionIntentsApi.signature(i)).data,{context:"sendSignatureTransactionIntentRequest"})}async sendSignatureSessionRequest(e,t,r){await this.ensureInitialized();const n={id:e,signatureRequest:{signature:t,optimistic:r}};return nn(async()=>(await this.backendApiClients.sessionsApi.signatureSession(n)).data,{context:"sendSignatureSessionRequest"})}},ci=class{storage;authManager;validateAndRefreshToken;constructor(e,t,r){this.storage=e,this.authManager=t,this.validateAndRefreshToken=r}async get(){await this.validateAndRefreshToken();const e=await wr.fromStorage(this.storage);if(!e)throw new _r(Ar.NOT_LOGGED_IN,"No access token found");return await this.authManager.getUser(e)}};function ui(e){if(!e)throw new Er(Ar.INTERNAL_ERROR,"User data is missing");return{id:e.id||"",email:e.email,name:e.name??void 0,image:e.image??void 0,emailVerified:e.emailVerified,isAnonymous:e.isAnonymous,createdAt:e.createdAt,updatedAt:e.updatedAt,phoneNumber:e.phoneNumber,phoneNumberVerified:e.phoneNumberVerified,linkedAccounts:e.linkedAccounts}}function hi(e){if(e)return{id:e.id,token:e.token,userId:e.userId,expiresAt:e.expiresAt,createdAt:e.createdAt,updatedAt:e.updatedAt}}class li{backendApiClientsInstance;publishableKeyInstance;setBackendApiClients(e,t){this.backendApiClientsInstance=e,this.publishableKeyInstance=t}get backendApiClients(){if(!this.backendApiClientsInstance)throw new Pr("Backend API clients not initialized");return this.backendApiClientsInstance}get publishableKey(){if(!this.publishableKeyInstance)throw new Pr("Publishable key not initialized");return this.publishableKeyInstance}buildAuthHeaders(e){return{"x-project-key":this.publishableKey,...e&&{authorization:`Bearer ${e}`}}}async initOAuth(e,t,r){return await nn(async()=>(await this.backendApiClients.authApi.socialSignIn({socialSignInRequest:{provider:e,callbackURL:t,scopes:r?.scopes?.split(" "),disableRedirect:r?.skipBrowserRedirect??!1}},{headers:{"x-project-key":`${this.publishableKey}`}})).data.url||"",{context:"initOAuth"})}async linkOAuthToAnonymous(e,t,r){return await nn(async()=>(await this.backendApiClients.authApi.socialSignIn({socialSignInRequest:{provider:t,callbackURL:r}},{headers:{authorization:`Bearer ${e.token}`,"x-project-key":`${this.publishableKey}`}})).data.url||"",{context:"initOAuth"})}async registerGuest(){return nn(async()=>{const e=await this.backendApiClients.authApi.signInAnonymousPost({headers:{"x-project-key":`${this.publishableKey}`}});return{token:e.data.token,user:ui(e.data.user)}},{context:"registerGuest"})}async loginWithIdToken(e,t){const r={socialSignInRequest:{provider:e,idToken:{token:t}}};return await nn(async()=>{const e=await this.backendApiClients.authApi.socialSignIn(r,{headers:{"x-project-key":`${this.publishableKey}`}});return{token:e.data.token,user:ui(e.data.user)}},{context:"loginWithIdToken"})}async authenticateThirdParty(e,t){const r={thirdPartyOAuthRequest:{provider:e,token:t}};return nn(async()=>({userId:(await this.backendApiClients.userApi.thirdPartyV2(r,{headers:{"x-project-key":`${this.publishableKey}`}})).data.id}),{context:"authenticateThirdParty"})}async initSIWE(e){const t={siweNoncePostRequest:{walletAddress:e}};return{address:e,nonce:(await nn(async()=>this.backendApiClients.authApi.siweNoncePost(t,{headers:{"x-project-key":`${this.publishableKey}`}}),{context:"initSIWE"})).data.nonce}}async linkSIWE(e,t){const r={siweNoncePostRequest:{walletAddress:e}};return{address:e,nonce:(await nn(async()=>this.backendApiClients.authApi.linkSiweNoncePost(r,{headers:t.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:this.buildAuthHeaders(t.token)}),{context:"linkSIWE"})).data.nonce}}async authenticateSIWE(e,t,r,n,s){const i={siweVerifyPostRequest:{signature:e,walletAddress:s,message:t,walletClientType:r,connectorType:n}};return nn(async()=>{const e=await this.backendApiClients.authApi.siweVerifyPost(i,{headers:{"x-project-key":`${this.publishableKey}`}}),t=e.data.user;return{token:e.data.token,user:ui(t)}},{context:"authenticateSIWE"})}async loginEmailPassword(e,t){return nn(async()=>{const r=(await this.backendApiClients.authApi.signInEmailPost({signInEmailPostRequest:{email:e,password:t}},{headers:{"x-project-key":`${this.publishableKey}`}})).data;return{token:r.token,user:ui(r.user)}},{context:"loginEmailPassword"})}async requestResetPassword(e,t){await nn(async()=>{await this.backendApiClients.authApi.requestPasswordResetPost({forgetPasswordPostRequest:{email:e,redirectTo:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"requestResetPassword"})}async resetPassword(e,t){return nn(async()=>{await this.backendApiClients.authApi.resetPasswordPost({resetPasswordPostRequest:{newPassword:e,token:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"resetPassword"})}async requestEmailVerification(e,t){await nn(async()=>{await this.backendApiClients.authApi.sendVerificationEmailPost({sendVerificationEmailPostRequest:{email:e,callbackURL:t}},{headers:{"x-project-key":`${this.publishableKey}`}})},{context:"requestEmailVerification"})}async verifyEmail(e,t){return nn(async()=>{await this.backendApiClients.authApi.verifyEmailGet({token:e,callbackURL:t})},{context:"verifyEmail"})}async signupEmailPassword(e,t,r,n,s){return nn(async()=>{const i=(await this.backendApiClients.authApi.signUpEmailPost({signUpEmailPostRequest:{email:e,password:t,name:r,callbackURL:n}},{headers:this.buildAuthHeaders(s)})).data;return null===i.token?{action:jr.ACTION_VERIFY_EMAIL}:{token:i.token,user:ui(i.user)}},{context:"signupEmailPassword"})}async validateCredentials(e,t){sn("Validating credentials with token:",e.token);const r=await this.getSessionWithToken(e,t);return{token:r.session.token,user:ui(r.user),session:hi(r.session)}}async logout(e){return nn(async()=>{await this.backendApiClients.authApi.signOutPost(void 0,{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})},{context:"logout"})}async getUser(e){return nn(async()=>ui((await this.backendApiClients.userApi.meV2({headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})).data),{context:"getUser"})}async linkOAuth(e,t,r,n){const s=n?.skipBrowserRedirect??!1,i={linkSocialPostRequest:{provider:t,callbackURL:r,scopes:n?.scopes?.split(" "),disableRedirect:s}},o=await nn(async()=>this.backendApiClients.authApi.linkSocialPost(i,{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)}),{context:"linkOAuth"});return"undefined"!=typeof window&&!s&&o.data.url&&window.location.assign(o.data.url),o.data.url||""}async unlinkOAuth(e,t){const r={unlinkAccountPostRequest:{providerId:e}};return nn(async()=>(await this.backendApiClients.authApi.unlinkAccountPost(r,{headers:t.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":t.token,"x-auth-provider":t.thirdPartyProvider,"x-token-type":t.thirdPartyTokenType}:this.buildAuthHeaders(t.token)})).data,{context:"unlinkOAuth"})}async addEmail(e,t,r){return nn(async()=>(await this.backendApiClients.authApi.changeEmailPost({changeEmailPostRequest:{newEmail:e,callbackURL:t}},{headers:r.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:this.buildAuthHeaders(r.token)})).data,{context:"addEmail"})}async unlinkWallet(e,t,r){const n={linkSiweUnlinkPostRequest:{walletAddress:e,chaindId:t}};return nn(async()=>(await this.backendApiClients.authApi.linkSiweUnlinkPost(n,{headers:r.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":r.token,"x-auth-provider":r.thirdPartyProvider,"x-token-type":r.thirdPartyTokenType}:this.buildAuthHeaders(r.token)})).data,{context:"unlinkWallet"})}async linkWallet(e,t,r,n,s,i,o){const a={siweVerifyPostRequest:{signature:e,message:t,walletAddress:s,chainId:i,walletClientType:r,connectorType:n}};return nn(async()=>(await this.backendApiClients.authApi.linkSiweVerifyPost(a,{headers:o.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":o.token,"x-auth-provider":o.thirdPartyProvider,"x-token-type":o.thirdPartyTokenType}:this.buildAuthHeaders(o.token)})).data,{context:"linkWallet"})}async requestEmailOTP(e,t){const r={emailOtpSendVerificationOtpPostRequest:{email:e,type:t}};await nn(async()=>(await this.backendApiClients.authApi.emailOtpSendVerificationOtpPost(r,{headers:{"x-project-key":`${this.publishableKey}`}})).data,{context:"requestEmailOTP"})}async verifyEmailOtp(e,t,r){await nn(async()=>(await this.backendApiClients.authApi.emailOtpVerifyEmailPost({emailOtpVerifyEmailPostRequest:{email:e,otp:t}},{headers:this.buildAuthHeaders(r)})).data,{context:"verifyEmailOtp"})}async loginWithEmailOTP(e,t,r){return await nn(async()=>{const n=(await this.backendApiClients.authApi.signInEmailOtpPost({signInEmailOtpPostRequest:{email:e,otp:t}},{headers:this.buildAuthHeaders(r)})).data;return{token:n.token,user:ui(n.user)}},{context:"loginWithEmailOTP"})}async requestPhoneOtp(e){const t={phoneNumberSendOtpPostRequest:{phoneNumber:e}};await nn(async()=>(await this.backendApiClients.authApi.phoneNumberSendOtpPost(t,{headers:{"x-project-key":`${this.publishableKey}`}})).data,{context:"requestPhoneOtp"})}async loginWithSMSOTP(e,t){return await nn(async()=>{const r=(await this.backendApiClients.authApi.phoneNumberVerifyPost({phoneNumberVerifyPostRequest:{code:t,phoneNumber:e}},{headers:{"x-project-key":`${this.publishableKey}`}})).data;return{token:r.token,user:ui(r.user)}},{context:"loginWithSMSOTP"})}async linkSMSOTP(e,t,r){return await nn(async()=>{const n=(await this.backendApiClients.authApi.phoneNumberVerifyPost({phoneNumberVerifyPostRequest:{code:t,phoneNumber:e,updatePhoneNumber:!0}},{headers:{authorization:`Bearer ${r.token}`,"x-project-key":`${this.publishableKey}`}})).data;return{token:n.token,user:ui(n.user)}},{context:"linkSMSOTP"})}async getSessionWithToken(e,t){return await nn(async()=>(await this.backendApiClients.authApi.getSessionGet({disableCookieCache:t},{headers:e.thirdPartyProvider?{authorization:`Bearer ${this.publishableKey}`,"x-player-token":e.token,"x-auth-provider":e.thirdPartyProvider,"x-token-type":e.thirdPartyTokenType}:this.buildAuthHeaders(e.token)})).data,{context:"getSessionWithToken"})}}let di=class{storage;scope;constructor(e,t){this.storage=e,this.scope=this.createScope(t)}createScope(e){return e.substring(8).substring(0,8)}scopeKey(e){return`${this.scope}.${e}`}async get(e){return this.storage.get(this.scopeKey(e))}save(e,t){this.storage.save(this.scopeKey(e),t)}remove(e){this.storage.remove(this.scopeKey(e))}flush(){for(const e of Object.values(yr))this.storage.remove(this.scopeKey(e))}};class fi{storage;constructor(e){this.storage=e}async get(e){return Promise.resolve(this.storage.getItem(e))}save(e,t){this.storage.setItem(e,t)}remove(e){this.storage.removeItem(e)}flush(){for(const e of Object.values(yr))this.storage.removeItem(e)}}let pi=class{realStorage=null;customStorage;publishableKey;constructor(e,t){this.publishableKey=e,this.customStorage=t}getRealStorage(){if(!this.realStorage){let e;if(this.customStorage)e=this.customStorage;else{if("undefined"==typeof window||"undefined"==typeof localStorage)throw new Pr("Storage not available. Please provide custom storage or use in browser environment.");e=new fi(localStorage)}this.realStorage=new di(e,this.publishableKey)}return this.realStorage}async get(e){return this.getRealStorage().get(e)}save(e,t){this.getRealStorage().save(e,t)}remove(e){this.getRealStorage().remove(e)}flush(){this.getRealStorage().flush()}};const mi={};class gi{storage;authManager;eventEmitter;constructor(e,t,r){this.storage=e,this.authManager=t,this.eventEmitter=r}async getThirdPartyAuthToken(){const e=Xr.getInstance();if(!e?.thirdPartyAuth)throw new Cr("No third party configuration found");const{getAccessToken:t,provider:r}=e.thirdPartyAuth;if(!t||!r)throw new Pr("Third party is not configured. Please configure getAccessToken and thirdPartyAuthProvider in your Openfort instance");const n=await t();if(!n)throw new Sr(Ar.INVALID_TOKEN,"Could not get access token");let s=(await wr.fromStorage(this.storage))?.userId;return s||(s=(await this.authManager.authenticateThirdParty(r,n)).userId),new wr("third_party",n,s,r,"idToken").save(this.storage),n}async getAccessToken(){return Xr.getInstance()?.thirdPartyAuth?this.getThirdPartyAuthToken():(await wr.fromStorage(this.storage))?.token??null}async validateAndRefreshToken(e){return((e,t)=>{let r=mi[t];return r||(r=e().finally(()=>{delete mi[t],r=null}),mi[t]=r),r})(async()=>{if(Xr.getInstance()?.thirdPartyAuth)return void await this.getThirdPartyAuthToken();const t=await wr.fromStorage(this.storage);if(!t)throw new _r(Ar.NOT_LOGGED_IN,"Must be logged in to validate and refresh token");let r;sn("validating credentials...");try{r=await this.authManager.validateCredentials(t,e)}catch(e){throw wr.clear(this.storage),this.eventEmitter.emit(Mr.ON_LOGOUT),e}if(!r.user?.id)throw new Cr("No user found in credentials");r.token!==t.token&&(sn("tokens refreshed"),new wr("session",r.token,r.user.id).save(this.storage))},"openfort.validateAndRefreshToken")}}class yi{storage;iAuthManager=null;openfortInternal;initPromise;asyncInitPromise=null;authInstance;embeddedWalletInstance;userInstance;proxyInstance;configuration;eventEmitter;iPasskeyHandler;static globalEventEmitter=null;get auth(){if(!this.authInstance)throw new Pr("Openfort SDK not initialized. Please await waitForInitialization() before accessing auth.");return this.authInstance}get embeddedWallet(){if(!this.embeddedWalletInstance)throw new Pr("Openfort SDK not initialized. Please await waitForInitialization() before accessing embeddedWallet.");return this.embeddedWalletInstance}get user(){if(!this.userInstance)throw new Pr("Openfort SDK not initialized. Please await waitForInitialization() before accessing user.");return this.userInstance}get proxy(){if(!this.proxyInstance)throw new Pr("Openfort SDK not initialized. Please await waitForInitialization() before accessing proxy.");return this.proxyInstance}initializeSynchronously(){try{this.iAuthManager=new li,this.openfortInternal=new gi(this.storage,this.authManager,this.eventEmitter),this.authInstance=new Vr(this.storage,this.authManager,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter),this.embeddedWalletInstance=new oi(this.storage,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),this.eventEmitter,this.passkeyHandler),this.userInstance=new ci(this.storage,this.authManager,this.validateAndRefreshToken.bind(this)),this.proxyInstance=new ai(this.storage,this.backendApiClients,this.validateAndRefreshToken.bind(this),this.ensureInitialized.bind(this),async()=>{if(!this.embeddedWalletInstance)throw new kr(Ar.MISSING_SIGNER,"Embedded wallet not initialized");const e=this.embeddedWalletInstance;return t=>e.signMessage(t,{hashMessage:!0,arrayifyMessage:!0})})}catch(e){throw new Pr("Openfort SDK synchronous initialization failed")}}constructor(e){this.configuration=new Xr(e),this.storage=new pi(this.configuration.baseConfiguration.publishableKey,this.configuration.storage),this.eventEmitter=new hn,yi.globalEventEmitter?["onAuthInit","onAuthSuccess","onAuthFailure","onLogout","onSwitchAccount","onSignedMessage","onEmbeddedWalletCreated","onEmbeddedWalletRecovered","onAuthFlowOpen","onAuthFlowClose","onAuthFlowCancel"].forEach(e=>{this.eventEmitter.on(e,(...t)=>{yi.globalEventEmitter?.emit(e,...t)})}):yi.globalEventEmitter=this.eventEmitter,this.iPasskeyHandler=new Jr({rpId:this.configuration.passkeyRpId,rpName:this.configuration.passkeyRpName,extractableKey:!0}),tn.init({configuration:this.configuration}),this.initializeSynchronously(),this.initPromise=Promise.resolve()}static getEventEmitter(){return yi.globalEventEmitter||(yi.globalEventEmitter=new hn),yi.globalEventEmitter}async waitForInitialization(){await this.initPromise,await this.ensureAsyncInitialized()}async getAccessToken(){return await this.ensureInitialized(),this.openfortInternal.getAccessToken()}async validateAndRefreshToken(e){return await this.ensureInitialized(),await this.openfortInternal.validateAndRefreshToken(e)}get backendApiClients(){return new gr({basePath:this.configuration.backendUrl,accessToken:this.configuration.baseConfiguration.publishableKey,nativeAppIdentifier:this.configuration.nativeAppIdentifier,storage:this.storage,onLogout:()=>{this.eventEmitter.emit("onLogout")}})}get authManager(){if(!this.iAuthManager)throw new Cr("AuthManager not initialized");return this.iAuthManager}get passkeyHandler(){return this.iPasskeyHandler}static async isStorageAccessible(e){try{const t=yr.TEST,r="openfort_storage_test";e.save(t,r);const n=await e.get(t);return e.remove(t),n===r}catch(e){return!1}}async initializeAsync(){if(!await yi.isStorageAccessible(this.storage))throw new Er("Storage is not accessible",br.INVALID_CONFIGURATION);this.authManager.setBackendApiClients(this.backendApiClients,this.configuration.baseConfiguration.publishableKey)}async ensureAsyncInitialized(){this.asyncInitPromise||(this.asyncInitPromise=this.initializeAsync()),await this.asyncInitPromise}async ensureInitialized(){await this.initPromise,await this.ensureAsyncInitialized()}}yi.getEventEmitter();var wi={exports:{}},vi=kt(Object.freeze({__proto__:null,default:{}}));!function(e){!function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:vi.Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function c(e,t,n,s){for(var i=0,o=0,a=Math.min(e.length,n),c=t;c<a;c++){var u=e.charCodeAt(c)-48;i*=s,o=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&o<s,"Invalid character"),i+=o}return i}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(s++,this.negative=1),s<e.length&&(16===t?this._parseHex(e,s,n):(this._parseBase(e,t,s),"le"===n&&this._initArray(this.toArray(),t,n)))},s.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},s.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var i,o,a=0;if("be"===n)for(s=e.length-1,i=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(s=0,i=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[i]|=o<<a&67108863,this.words[i+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,i=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)s=a(e,t,n)<<i,this.words[o]|=67108863&s,i>=18?(i-=18,o+=1,this.words[o]|=s>>>26):i+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,s=1;s<=67108863;s*=t)n++;n--,s=s/t|0;for(var i=e.length-r,o=i%n,a=Math.min(i,i-o)+r,u=0,h=r;h<a;h+=n)u=c(e,h,h+n,t),this.imuln(s),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var l=1;for(u=c(e,h,e.length,t),h=0;h<o;h++)l*=t;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var s=0,i=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<s|i)).toString(16);i=a>>>24-s&16777215,(s+=2)>=26&&(s-=26,o--),n=0!==i||o!==this.length-1?l[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],h=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(h).toString(e);n=(p=p.idivn(h)).isZero()?m+n:l[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},i&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(i,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var s=0|e.words[0],i=0|t.words[0],o=s*i,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var h=c>>>26,l=67108863&c,d=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=d;f++){var p=u-f|0;h+=(o=(s=0|e.words[p])*(i=0|t.words[f])+l)/67108864|0,l=67108863&o}r.words[u]=0|l,c=0|h}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}s.prototype.toArrayLike=function(e,t,n){this._strip();var s=this.byteLength(),i=n||Math.max(1,s);r(s<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,s),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===i?(r<e.length&&(e[r++]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,s=0,i=0;s<this.length;s++){var o=this.words[s]<<i|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===i?(r>=0&&(e[r--]=o>>24&255),n=0,i=0):(n=o>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return n>0&&(this.words[s]=~this.words[s]&67108863>>26-n),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,s=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<s:this.words[n]&~(1<<s),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var s=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+s,this.words[i]=67108863&t,s=t>>>26;for(;0!==s&&i<r.length;i++)t=(0|r.words[i])+s,this.words[i]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)i=(t=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&t;for(;0!==i&&o<r.length;o++)i=(t=(0|r.words[o])+i)>>26,this.words[o]=67108863&t;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,s,i,o=e.words,a=t.words,c=r.words,u=0,h=0|o[0],l=8191&h,d=h>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],y=8191&g,w=g>>>13,v=0|o[3],A=8191&v,b=v>>>13,E=0|o[4],S=8191&E,_=E>>>13,P=0|o[5],k=8191&P,I=P>>>13,R=0|o[6],T=8191&R,N=R>>>13,O=0|o[7],C=8191&O,x=O>>>13,M=0|o[8],U=8191&M,D=M>>>13,L=0|o[9],B=8191&L,F=L>>>13,q=0|a[0],G=8191&q,j=q>>>13,H=0|a[1],z=8191&H,K=H>>>13,V=0|a[2],W=8191&V,J=V>>>13,Y=0|a[3],Q=8191&Y,$=Y>>>13,X=0|a[4],Z=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,se=0|a[6],ie=8191&se,oe=se>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,he=0|a[8],le=8191&he,de=he>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(u+(n=Math.imul(l,G))|0)+((8191&(s=(s=Math.imul(l,j))+Math.imul(d,G)|0))<<13)|0;u=((i=Math.imul(d,j))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,G),s=(s=Math.imul(p,j))+Math.imul(m,G)|0,i=Math.imul(m,j);var ye=(u+(n=n+Math.imul(l,z)|0)|0)+((8191&(s=(s=s+Math.imul(l,K)|0)+Math.imul(d,z)|0))<<13)|0;u=((i=i+Math.imul(d,K)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,G),s=(s=Math.imul(y,j))+Math.imul(w,G)|0,i=Math.imul(w,j),n=n+Math.imul(p,z)|0,s=(s=s+Math.imul(p,K)|0)+Math.imul(m,z)|0,i=i+Math.imul(m,K)|0;var we=(u+(n=n+Math.imul(l,W)|0)|0)+((8191&(s=(s=s+Math.imul(l,J)|0)+Math.imul(d,W)|0))<<13)|0;u=((i=i+Math.imul(d,J)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(A,G),s=(s=Math.imul(A,j))+Math.imul(b,G)|0,i=Math.imul(b,j),n=n+Math.imul(y,z)|0,s=(s=s+Math.imul(y,K)|0)+Math.imul(w,z)|0,i=i+Math.imul(w,K)|0,n=n+Math.imul(p,W)|0,s=(s=s+Math.imul(p,J)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,J)|0;var ve=(u+(n=n+Math.imul(l,Q)|0)|0)+((8191&(s=(s=s+Math.imul(l,$)|0)+Math.imul(d,Q)|0))<<13)|0;u=((i=i+Math.imul(d,$)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(S,G),s=(s=Math.imul(S,j))+Math.imul(_,G)|0,i=Math.imul(_,j),n=n+Math.imul(A,z)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(b,z)|0,i=i+Math.imul(b,K)|0,n=n+Math.imul(y,W)|0,s=(s=s+Math.imul(y,J)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,J)|0,n=n+Math.imul(p,Q)|0,s=(s=s+Math.imul(p,$)|0)+Math.imul(m,Q)|0,i=i+Math.imul(m,$)|0;var Ae=(u+(n=n+Math.imul(l,Z)|0)|0)+((8191&(s=(s=s+Math.imul(l,ee)|0)+Math.imul(d,Z)|0))<<13)|0;u=((i=i+Math.imul(d,ee)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(k,G),s=(s=Math.imul(k,j))+Math.imul(I,G)|0,i=Math.imul(I,j),n=n+Math.imul(S,z)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(_,z)|0,i=i+Math.imul(_,K)|0,n=n+Math.imul(A,W)|0,s=(s=s+Math.imul(A,J)|0)+Math.imul(b,W)|0,i=i+Math.imul(b,J)|0,n=n+Math.imul(y,Q)|0,s=(s=s+Math.imul(y,$)|0)+Math.imul(w,Q)|0,i=i+Math.imul(w,$)|0,n=n+Math.imul(p,Z)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var be=(u+(n=n+Math.imul(l,re)|0)|0)+((8191&(s=(s=s+Math.imul(l,ne)|0)+Math.imul(d,re)|0))<<13)|0;u=((i=i+Math.imul(d,ne)|0)+(s>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(T,G),s=(s=Math.imul(T,j))+Math.imul(N,G)|0,i=Math.imul(N,j),n=n+Math.imul(k,z)|0,s=(s=s+Math.imul(k,K)|0)+Math.imul(I,z)|0,i=i+Math.imul(I,K)|0,n=n+Math.imul(S,W)|0,s=(s=s+Math.imul(S,J)|0)+Math.imul(_,W)|0,i=i+Math.imul(_,J)|0,n=n+Math.imul(A,Q)|0,s=(s=s+Math.imul(A,$)|0)+Math.imul(b,Q)|0,i=i+Math.imul(b,$)|0,n=n+Math.imul(y,Z)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,n=n+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ee=(u+(n=n+Math.imul(l,ie)|0)|0)+((8191&(s=(s=s+Math.imul(l,oe)|0)+Math.imul(d,ie)|0))<<13)|0;u=((i=i+Math.imul(d,oe)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(C,G),s=(s=Math.imul(C,j))+Math.imul(x,G)|0,i=Math.imul(x,j),n=n+Math.imul(T,z)|0,s=(s=s+Math.imul(T,K)|0)+Math.imul(N,z)|0,i=i+Math.imul(N,K)|0,n=n+Math.imul(k,W)|0,s=(s=s+Math.imul(k,J)|0)+Math.imul(I,W)|0,i=i+Math.imul(I,J)|0,n=n+Math.imul(S,Q)|0,s=(s=s+Math.imul(S,$)|0)+Math.imul(_,Q)|0,i=i+Math.imul(_,$)|0,n=n+Math.imul(A,Z)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(b,Z)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(y,re)|0,s=(s=s+Math.imul(y,ne)|0)+Math.imul(w,re)|0,i=i+Math.imul(w,ne)|0,n=n+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,oe)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,oe)|0;var Se=(u+(n=n+Math.imul(l,ce)|0)|0)+((8191&(s=(s=s+Math.imul(l,ue)|0)+Math.imul(d,ce)|0))<<13)|0;u=((i=i+Math.imul(d,ue)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,G),s=(s=Math.imul(U,j))+Math.imul(D,G)|0,i=Math.imul(D,j),n=n+Math.imul(C,z)|0,s=(s=s+Math.imul(C,K)|0)+Math.imul(x,z)|0,i=i+Math.imul(x,K)|0,n=n+Math.imul(T,W)|0,s=(s=s+Math.imul(T,J)|0)+Math.imul(N,W)|0,i=i+Math.imul(N,J)|0,n=n+Math.imul(k,Q)|0,s=(s=s+Math.imul(k,$)|0)+Math.imul(I,Q)|0,i=i+Math.imul(I,$)|0,n=n+Math.imul(S,Z)|0,s=(s=s+Math.imul(S,ee)|0)+Math.imul(_,Z)|0,i=i+Math.imul(_,ee)|0,n=n+Math.imul(A,re)|0,s=(s=s+Math.imul(A,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(y,ie)|0,s=(s=s+Math.imul(y,oe)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,oe)|0,n=n+Math.imul(p,ce)|0,s=(s=s+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var _e=(u+(n=n+Math.imul(l,le)|0)|0)+((8191&(s=(s=s+Math.imul(l,de)|0)+Math.imul(d,le)|0))<<13)|0;u=((i=i+Math.imul(d,de)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(B,G),s=(s=Math.imul(B,j))+Math.imul(F,G)|0,i=Math.imul(F,j),n=n+Math.imul(U,z)|0,s=(s=s+Math.imul(U,K)|0)+Math.imul(D,z)|0,i=i+Math.imul(D,K)|0,n=n+Math.imul(C,W)|0,s=(s=s+Math.imul(C,J)|0)+Math.imul(x,W)|0,i=i+Math.imul(x,J)|0,n=n+Math.imul(T,Q)|0,s=(s=s+Math.imul(T,$)|0)+Math.imul(N,Q)|0,i=i+Math.imul(N,$)|0,n=n+Math.imul(k,Z)|0,s=(s=s+Math.imul(k,ee)|0)+Math.imul(I,Z)|0,i=i+Math.imul(I,ee)|0,n=n+Math.imul(S,re)|0,s=(s=s+Math.imul(S,ne)|0)+Math.imul(_,re)|0,i=i+Math.imul(_,ne)|0,n=n+Math.imul(A,ie)|0,s=(s=s+Math.imul(A,oe)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,oe)|0,n=n+Math.imul(y,ce)|0,s=(s=s+Math.imul(y,ue)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,ue)|0,n=n+Math.imul(p,le)|0,s=(s=s+Math.imul(p,de)|0)+Math.imul(m,le)|0,i=i+Math.imul(m,de)|0;var Pe=(u+(n=n+Math.imul(l,pe)|0)|0)+((8191&(s=(s=s+Math.imul(l,me)|0)+Math.imul(d,pe)|0))<<13)|0;u=((i=i+Math.imul(d,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(B,z),s=(s=Math.imul(B,K))+Math.imul(F,z)|0,i=Math.imul(F,K),n=n+Math.imul(U,W)|0,s=(s=s+Math.imul(U,J)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,J)|0,n=n+Math.imul(C,Q)|0,s=(s=s+Math.imul(C,$)|0)+Math.imul(x,Q)|0,i=i+Math.imul(x,$)|0,n=n+Math.imul(T,Z)|0,s=(s=s+Math.imul(T,ee)|0)+Math.imul(N,Z)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(k,re)|0,s=(s=s+Math.imul(k,ne)|0)+Math.imul(I,re)|0,i=i+Math.imul(I,ne)|0,n=n+Math.imul(S,ie)|0,s=(s=s+Math.imul(S,oe)|0)+Math.imul(_,ie)|0,i=i+Math.imul(_,oe)|0,n=n+Math.imul(A,ce)|0,s=(s=s+Math.imul(A,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(y,le)|0,s=(s=s+Math.imul(y,de)|0)+Math.imul(w,le)|0,i=i+Math.imul(w,de)|0;var ke=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(B,W),s=(s=Math.imul(B,J))+Math.imul(F,W)|0,i=Math.imul(F,J),n=n+Math.imul(U,Q)|0,s=(s=s+Math.imul(U,$)|0)+Math.imul(D,Q)|0,i=i+Math.imul(D,$)|0,n=n+Math.imul(C,Z)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(x,Z)|0,i=i+Math.imul(x,ee)|0,n=n+Math.imul(T,re)|0,s=(s=s+Math.imul(T,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(k,ie)|0,s=(s=s+Math.imul(k,oe)|0)+Math.imul(I,ie)|0,i=i+Math.imul(I,oe)|0,n=n+Math.imul(S,ce)|0,s=(s=s+Math.imul(S,ue)|0)+Math.imul(_,ce)|0,i=i+Math.imul(_,ue)|0,n=n+Math.imul(A,le)|0,s=(s=s+Math.imul(A,de)|0)+Math.imul(b,le)|0,i=i+Math.imul(b,de)|0;var Ie=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(s=(s=s+Math.imul(y,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((i=i+Math.imul(w,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(B,Q),s=(s=Math.imul(B,$))+Math.imul(F,Q)|0,i=Math.imul(F,$),n=n+Math.imul(U,Z)|0,s=(s=s+Math.imul(U,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,n=n+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ne)|0)+Math.imul(x,re)|0,i=i+Math.imul(x,ne)|0,n=n+Math.imul(T,ie)|0,s=(s=s+Math.imul(T,oe)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,oe)|0,n=n+Math.imul(k,ce)|0,s=(s=s+Math.imul(k,ue)|0)+Math.imul(I,ce)|0,i=i+Math.imul(I,ue)|0,n=n+Math.imul(S,le)|0,s=(s=s+Math.imul(S,de)|0)+Math.imul(_,le)|0,i=i+Math.imul(_,de)|0;var Re=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(s=(s=s+Math.imul(A,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(B,Z),s=(s=Math.imul(B,ee))+Math.imul(F,Z)|0,i=Math.imul(F,ee),n=n+Math.imul(U,re)|0,s=(s=s+Math.imul(U,ne)|0)+Math.imul(D,re)|0,i=i+Math.imul(D,ne)|0,n=n+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,oe)|0)+Math.imul(x,ie)|0,i=i+Math.imul(x,oe)|0,n=n+Math.imul(T,ce)|0,s=(s=s+Math.imul(T,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(k,le)|0,s=(s=s+Math.imul(k,de)|0)+Math.imul(I,le)|0,i=i+Math.imul(I,de)|0;var Te=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(s=(s=s+Math.imul(S,me)|0)+Math.imul(_,pe)|0))<<13)|0;u=((i=i+Math.imul(_,me)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(B,re),s=(s=Math.imul(B,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(U,ie)|0,s=(s=s+Math.imul(U,oe)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,oe)|0,n=n+Math.imul(C,ce)|0,s=(s=s+Math.imul(C,ue)|0)+Math.imul(x,ce)|0,i=i+Math.imul(x,ue)|0,n=n+Math.imul(T,le)|0,s=(s=s+Math.imul(T,de)|0)+Math.imul(N,le)|0,i=i+Math.imul(N,de)|0;var Ne=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(s=(s=s+Math.imul(k,me)|0)+Math.imul(I,pe)|0))<<13)|0;u=((i=i+Math.imul(I,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(B,ie),s=(s=Math.imul(B,oe))+Math.imul(F,ie)|0,i=Math.imul(F,oe),n=n+Math.imul(U,ce)|0,s=(s=s+Math.imul(U,ue)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,ue)|0,n=n+Math.imul(C,le)|0,s=(s=s+Math.imul(C,de)|0)+Math.imul(x,le)|0,i=i+Math.imul(x,de)|0;var Oe=(u+(n=n+Math.imul(T,pe)|0)|0)+((8191&(s=(s=s+Math.imul(T,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(B,ce),s=(s=Math.imul(B,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(U,le)|0,s=(s=s+Math.imul(U,de)|0)+Math.imul(D,le)|0,i=i+Math.imul(D,de)|0;var Ce=(u+(n=n+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(x,pe)|0))<<13)|0;u=((i=i+Math.imul(x,me)|0)+(s>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(B,le),s=(s=Math.imul(B,de))+Math.imul(F,le)|0,i=Math.imul(F,de);var xe=(u+(n=n+Math.imul(U,pe)|0)|0)+((8191&(s=(s=s+Math.imul(U,me)|0)+Math.imul(D,pe)|0))<<13)|0;u=((i=i+Math.imul(D,me)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863;var Me=(u+(n=Math.imul(B,pe))|0)+((8191&(s=(s=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ge,c[1]=ye,c[2]=we,c[3]=ve,c[4]=Ae,c[5]=be,c[6]=Ee,c[7]=Se,c[8]=_e,c[9]=Pe,c[10]=ke,c[11]=Ie,c[12]=Re,c[13]=Te,c[14]=Ne,c[15]=Oe,c[16]=Ce,c[17]=xe,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function g(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,s=0,i=0;i<r.length-1;i++){var o=s;s=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var h=i-u,l=(0|e.words[h])*(0|t.words[u]),d=67108863&l;a=67108863&(d=d+a|0),s+=(o=(o=o+(l/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[i]=a,n=o,o=s}return 0!==n?r.words[i]=n:r.length--,r._strip()}function y(e,t,r){return g(e,t,r)}Math.imul||(m=p),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?g(this,e,t):y(this,e,t)},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,s=0;s<this.length;s++){var i=(0|this.words[s])*e,o=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=o>>>26,this.words[s]=67108863&o}return 0!==n&&(this.words[s]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,s=r%26;t[r]=e.words[n]>>>s&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,s=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|o,o=a>>>26-n}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,n){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var i=e%26,o=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(s-=o,s=Math.max(0,s),c){for(var u=0;u<o;u++)c.words[u]=this.words[u];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=s);u--){var l=0|this.words[u];this.words[u]=h<<26-i|l>>>i,h=l&a}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,s=1<<t;return!(this.length<=n)&&!!(this.words[n]&s)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,n){var s,i,o=e.length+n;this._expand(o);var a=0;for(s=0;s<e.length;s++){i=(0|this.words[s+n])+a;var c=(0|e.words[s])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[s+n]=67108863&i}for(;s<this.length-n;s++)a=(i=(0|this.words[s+n])+a)>>26,this.words[s+n]=67108863&i;if(0===a)return this._strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(i=-(0|this.words[s])+a)>>26,this.words[s]=67108863&i;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var h=n.clone()._ishlnsubmul(i,1,c);0===h.negative&&(n=h,a&&(a.words[c]=1));for(var l=c-1;l>=0;l--){var d=67108864*(0|n.words[i.length+l])+(0|n.words[i.length+l-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,l);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,l),n.isZero()||(n.negative^=1);a&&(a.words[l]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),n&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),s=e.andln(1),i=r.cmp(n);return i<0||1===s&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,s=0,i=this.length-1;i>=0;i--)s=(n*s+(0|this.words[i]))%e;return t?-s:s},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,s=this.length-1;s>=0;s--){var i=(0|this.words[s])+67108864*n;this.words[s]=i/e|0,n=i%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var h=n.clone(),l=t.clone();!t.isZero();){for(var d=0,f=1;0===(t.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(h),o.isub(l)),i.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(l)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),o.isub(c)):(n.isub(t),a.isub(i),c.isub(o))}return{a:a,b:c,gcd:n.iushln(u)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,h=1;0===(t.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(t.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var l=0,d=1;0===(n.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(a)):(n.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var i=t;t=r,r=i}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,s=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=s,this;for(var i=s,o=n;0!==i&&o<this.length;o++){var a=0|this.words[o];i=(a+=i)>>>26,a&=67108863,this.words[o]=a}return 0!==i&&(this.words[o]=i,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],s=0|e.words[r];if(n!==s){n<s?t=-1:n>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new _(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(A,v),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),s=0;s<n;s++)t.words[s]=e.words[s];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,s=10;s<e.length;s++){var o=0|e.words[s];e.words[s-10]=(o&r)<<4|i>>>22,i=o}i>>>=22,e.words[s-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(b,v),n(E,v),n(S,v),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,s=67108863&n;n>>>=26,e.words[r]=s,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new b;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return w[e]=t,t},_.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new s(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,u).cmp(c);)h.redIAdd(c);for(var l=this.pow(h,i),d=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var y=this.pow(l,new s(1).iushln(p-g-1));d=d.redMul(y),l=y.redSqr(),f=f.redMul(l),p=g}return d},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],h=c-1;h>=0;h--){var l=u>>h&1;i!==r[0]&&(i=this.sqr(i)),0!==l||0!==o?(o<<=1,o|=l,(4===++a||0===n&&0===h)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new P(e)},n(P,_),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(n).iushrn(this.shift),i=s;return s.cmp(this.m)>=0?i=s.isub(this.m):s.cmpn(0)<0&&(i=s.iadd(this.m)),i._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,_t)}(wi);var Ai=Pt(wi.exports);var bi=Ai.BN;const Ei=new Cn("bignumber/5.8.0"),Si={},_i=9007199254740991;let Pi=!1;class ki{constructor(e,t){e!==Si&&Ei.throwError("cannot call constructor directly; use BigNumber.from",Cn.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Ri(Ti(this).fromTwos(e))}toTwos(e){return Ri(Ti(this).toTwos(e))}abs(){return"-"===this._hex[0]?ki.from(this._hex.substring(1)):this}add(e){return Ri(Ti(this).add(Ti(e)))}sub(e){return Ri(Ti(this).sub(Ti(e)))}div(e){return ki.from(e).isZero()&&Ni("division-by-zero","div"),Ri(Ti(this).div(Ti(e)))}mul(e){return Ri(Ti(this).mul(Ti(e)))}mod(e){const t=Ti(e);return t.isNeg()&&Ni("division-by-zero","mod"),Ri(Ti(this).umod(t))}pow(e){const t=Ti(e);return t.isNeg()&&Ni("negative-power","pow"),Ri(Ti(this).pow(t))}and(e){const t=Ti(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","and"),Ri(Ti(this).and(t))}or(e){const t=Ti(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","or"),Ri(Ti(this).or(t))}xor(e){const t=Ti(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","xor"),Ri(Ti(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ni("negative-width","mask"),Ri(Ti(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ni("negative-width","shl"),Ri(Ti(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ni("negative-width","shr"),Ri(Ti(this).shrn(e))}eq(e){return Ti(this).eq(Ti(e))}lt(e){return Ti(this).lt(Ti(e))}lte(e){return Ti(this).lte(Ti(e))}gt(e){return Ti(this).gt(Ti(e))}gte(e){return Ti(this).gte(Ti(e))}isNegative(){return"-"===this._hex[0]}isZero(){return Ti(this).isZero()}toNumber(){try{return Ti(this).toNumber()}catch(e){Ni("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return Ei.throwError("this platform does not support BigInt",Cn.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Pi||(Pi=!0,Ei.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Ei.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Cn.errors.UNEXPECTED_ARGUMENT,{}):Ei.throwError("BigNumber.toString does not accept parameters",Cn.errors.UNEXPECTED_ARGUMENT,{})),Ti(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof ki)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new ki(Si,Ii(e)):e.match(/^-?[0-9]+$/)?new ki(Si,Ii(new bi(e))):Ei.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&Ni("underflow","BigNumber.from",e),(e>=_i||e<=-_i)&&Ni("overflow","BigNumber.from",e),ki.from(String(e));const t=e;if("bigint"==typeof t)return ki.from(t.toString());if(Bn(t))return ki.from(Kn(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return ki.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Hn(e)||"-"===e[0]&&Hn(e.substring(1))))return ki.from(e)}return Ei.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function Ii(e){if("string"!=typeof e)return Ii(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Ei.throwArgumentError("invalid hex","value",e),"0x00"===(e=Ii(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Ri(e){return ki.from(Ii(e))}function Ti(e){const t=ki.from(e).toHexString();return"-"===t[0]?new bi("-"+t.substring(3),16):new bi(t.substring(2),16)}function Ni(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),Ei.throwError(e,Cn.errors.NUMERIC_FAULT,n)}var Oi=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ci=new Cn("properties/5.8.0");function xi(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Mi(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function Ui(e){return Oi(this,void 0,void 0,function*(){const t=Object.keys(e).map(t=>{const r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})})}function Di(e,t){e&&"object"==typeof e||Ci.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||Ci.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function Li(e){const t={};for(const r in e)t[r]=e[r];return t}const Bi={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Fi(e){if(null==e||Bi[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!Fi(n))return!1}return!0}return Ci.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function qi(e){if(Fi(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>Gi(e)));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&xi(t,r,Gi(n))}return t}return Ci.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Gi(e){return qi(e)}class ji{constructor(e){for(const t in e)this[t]=Gi(e[t])}}const Hi="abi/5.8.0",zi=new Cn(Hi),Ki={};let Vi={calldata:!0,memory:!0,storage:!0},Wi={calldata:!0,memory:!0};function Ji(e,t){if("bytes"===e||"string"===e){if(Vi[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Wi[t])return!0;return(Vi[t]||"payable"===t)&&zi.throwArgumentError("invalid modifier","name",t),!1}function Yi(e,t){for(let r in t)xi(e,r,t[r])}const Qi=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),$i=new RegExp(/^(.*)\[([0-9]*)\]$/);class Xi{constructor(e,t){e!==Ki&&zi.throwError("use fromString",Cn.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Yi(this,t);let r=this.type.match($i);Yi(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Xi.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Qi.sighash),Qi[e]||zi.throwArgumentError("invalid format type","format",e),e===Qi.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==Qi.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===Qi.full?", ":",")+")"):t+=this.type,e!==Qi.sighash&&(!0===this.indexed&&(t+=" indexed"),e===Qi.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Xi.fromString(e,t):Xi.fromObject(e)}static fromObject(e){return Xi.isParamType(e)?e:new Xi(Ki,{name:e.name||null,type:Zi(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Xi.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){zi.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function s(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let i={type:"",name:"",state:{allowType:!0}},o=i;for(let r=0;r<e.length;r++){let i=e[r];switch(i){case"(":o.state.allowType&&""===o.type?o.type="tuple":o.state.allowParams||n(r),o.state.allowType=!1,o.type=Zi(o.type),o.components=[s(o)],o=o.components[0];break;case")":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),Ji(o.type,o.name)&&(o.name=""),o.type=Zi(o.type);let e=o;o=o.parent,o||n(r),delete e.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,"indexed"===o.name&&(t||n(r),o.indexed=!0,o.name=""),Ji(o.type,o.name)&&(o.name=""),o.type=Zi(o.type);let a=s(o.parent);o.parent.components.push(a),delete o.parent,o=a;break;case" ":o.state.allowType&&""!==o.type&&(o.type=Zi(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&""!==o.name&&("indexed"===o.name?(t||n(r),o.indexed&&n(r),o.indexed=!0,o.name=""):Ji(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(r),o.type+=i,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(r),o.type+=i,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=i,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=i,delete o.state.allowArray):o.state.readArray?o.type+=i:n(r)}}return o.parent&&zi.throwArgumentError("unexpected eof","param",e),delete i.state,"indexed"===o.name?(t||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):Ji(o.type,o.name)&&(o.name=""),i.type=Zi(i.type),i}(e,!!t),Xi.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Zi(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const eo=new Cn(Hi);class to{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){eo.throwArgumentError(e,this.localName,t)}}class ro{constructor(e){xi(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Jn(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(qn(e._data))}writeBytes(e){let t=Fn(e);const r=t.length%this.wordSize;return r&&(t=qn([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=Fn(ki.from(e));return t.length>this.wordSize&&eo.throwError("value out-of-bounds",Cn.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=qn([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class no{constructor(e,t,r,n){xi(this,"_data",Fn(e)),xi(this,"wordSize",t||32),xi(this,"_coerceFunc",r),xi(this,"allowLoose",n),this._offset=0}get data(){return Kn(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):no.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:eo.throwError("data out-of-bounds",Cn.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new no(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return ki.from(this.readBytes(this.wordSize))}}const so=new Cn("rlp/5.8.0");function io(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function oo(e,t,r){let n=0;for(let s=0;s<r;s++)n=256*n+e[t+s];return n}function ao(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(ao(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=io(t.length);return r.unshift(247+r.length),r.concat(t)}Dn(e)||so.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(Fn(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=io(t.length);return r.unshift(183+r.length),r.concat(t)}function co(e){return Kn(ao(e))}function uo(e,t,r,n){const s=[];for(;r<t+1+n;){const i=ho(e,r);s.push(i.result),(r+=i.consumed)>t+1+n&&so.throwError("child data too short",Cn.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:s}}function ho(e,t){if(0===e.length&&so.throwError("data too short",Cn.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&so.throwError("data short segment too short",Cn.errors.BUFFER_OVERRUN,{});const n=oo(e,t+1,r);return t+1+r+n>e.length&&so.throwError("data long segment too short",Cn.errors.BUFFER_OVERRUN,{}),uo(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&so.throwError("data array too short",Cn.errors.BUFFER_OVERRUN,{}),uo(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&so.throwError("data array too short",Cn.errors.BUFFER_OVERRUN,{});const n=oo(e,t+1,r);t+1+r+n>e.length&&so.throwError("data array too short",Cn.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:Kn(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&so.throwError("data too short",Cn.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:Kn(e.slice(t+1,t+1+r))}}return{consumed:1,result:Kn(e[t])}}function lo(e){const t=Fn(e),r=ho(t,0);return r.consumed!==t.length&&so.throwArgumentError("invalid rlp data","data",e),r.result}const fo=new Cn("address/5.8.0");function po(e){Hn(e,20)||fo.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=Fn(ts(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const mo={};for(let e=0;e<10;e++)mo[String(e)]=String(e);for(let e=0;e<26;e++)mo[String.fromCharCode(65+e)]=String(10+e);const go=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function yo(e){let t=null;if("string"!=typeof e&&fo.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=po(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&fo.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>mo[e]).join("");for(;t.length>=go;){let e=t.substring(0,go);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e)&&fo.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new bi(r,36).toString(16);t.length<40;)t="0"+t;t=po("0x"+t)}else fo.throwArgumentError("invalid address","address",e);var r;return t}class wo extends to{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=yo(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return yo($n(e.readValue().toHexString(),20))}}class vo extends to{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const Ao=new Cn(Hi);function bo(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||Ao.throwError("cannot encode object for signature with missing names",Cn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&Ao.throwError("cannot encode object for signature with duplicate names",Cn.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else Ao.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Ao.throwArgumentError("types/value length mismatch","tuple",r);let s=new ro(e.wordSize),i=new ro(e.wordSize),o=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=i.length;e.encode(i,r);let n=s.writeUpdatableValue();o.push(e=>{n(e+t)})}else e.encode(s,r)}),o.forEach(e=>{e(s.length)});let a=e.appendWriter(s);return a+=e.appendWriter(i),a}function Eo(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readValue(),i=n.subReader(r.toNumber());try{s=t.decode(i)}catch(e){if(e.code===Cn.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(e.code===Cn.errors.BUFFER_OVERRUN)throw e;s=e,s.baseType=t.name,s.name=t.localName,s.type=t.type}null!=s&&r.push(s)});const s=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==s[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const i=r[t];i instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw i}}):r[n]=i});for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class So extends to{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Ao.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return bo(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&Ao.throwError("insufficient data length",Cn.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new vo(this.coder));return e.coerce(this.name,Eo(e,r))}}class _o extends to{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Po extends to{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Fn(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class ko extends Po{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Kn(super.decode(e)))}}class Io extends to{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=Fn(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,Kn(e.readBytes(this.size)))}}class Ro extends to{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const To=ki.from(-1),No=ki.from(0),Oo=ki.from(1),Co=ki.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class xo extends to{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=ki.from(t),n=Co.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(Oo).mul(To)))&&this._throwError("value out-of-bounds",t)}else(r.lt(No)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const Mo=new Cn("strings/5.8.0");var Uo,Do;function Lo(e,t,r,n,s){if(e===Do.BAD_PREFIX||e===Do.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Do.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Uo||(Uo={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Do||(Do={}));const Bo=Object.freeze({error:function(e,t,r,n,s){return Mo.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:Lo,replace:function(e,t,r,n,s){return e===Do.OVERLONG?(n.push(s),0):(n.push(65533),Lo(e,t,r))}});function Fo(e,t){null==t&&(t=Bo.error),e=Fn(e);const r=[];let n=0;for(;n<e.length;){const s=e[n++];if(!(s>>7)){r.push(s);continue}let i=null,o=null;if(192==(224&s))i=1,o=127;else if(224==(240&s))i=2,o=2047;else{if(240!=(248&s)){n+=t(128==(192&s)?Do.UNEXPECTED_CONTINUE:Do.BAD_PREFIX,n-1,e,r);continue}i=3,o=65535}if(n-1+i>=e.length){n+=t(Do.OVERRUN,n-1,e,r);continue}let a=s&(1<<8-i-1)-1;for(let s=0;s<i;s++){let s=e[n];if(128!=(192&s)){n+=t(Do.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&s,n++}null!==a&&(a>1114111?n+=t(Do.OUT_OF_RANGE,n-1-i,e,r,a):a>=55296&&a<=57343?n+=t(Do.UTF16_SURROGATE,n-1-i,e,r,a):a<=o?n+=t(Do.OVERLONG,n-1-i,e,r,a):r.push(a))}return r}function qo(e,t=Uo.current){t!=Uo.current&&(Mo.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const s=e.charCodeAt(t);if(t>=e.length||56320!=(64512&s))throw new Error("invalid utf-8 string");const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Fn(r)}function Go(e,t){return Fo(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}class jo extends Po{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,qo(t))}decode(e){return Go(super.decode(e))}}class Ho extends to{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)});super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let s=r.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[n]))}),Object.freeze(e)}encode(e,t){return bo(e,this.coders,t)}decode(e){return e.coerce(this.name,Eo(e,this.coders))}}const zo=new Cn(Hi),Ko=new RegExp(/^bytes([0-9]*)$/),Vo=new RegExp(/^(u?int)([0-9]*)$/);class Wo{constructor(e){xi(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new wo(e.name);case"bool":return new _o(e.name);case"string":return new jo(e.name);case"bytes":return new ko(e.name);case"array":return new So(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Ho((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new Ro(e.name)}let t=e.type.match(Vo);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&zo.throwArgumentError("invalid "+t[1]+" bit length","param",e),new xo(r/8,"int"===t[1],e.name)}if(t=e.type.match(Ko),t){let r=parseInt(t[1]);return(0===r||r>32)&&zo.throwArgumentError("invalid bytes length","param",e),new Io(r,e.name)}return zo.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new no(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new ro(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(Xi.from(e)));return new Ho(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&zo.throwError("types/values length mismatch",Cn.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(Xi.from(e))),n=new Ho(r,"_"),s=this._getWriter();return n.encode(s,t),s.data}decode(e,t,r){const n=e.map(e=>this._getCoder(Xi.from(e)));return new Ho(n,"_").decode(this._getReader(Fn(t),r))}}const Jo=new Wo;function Yo(e){return ts(qo(e))}const Qo="hash/5.8.0";function $o(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return Fn(t)}function Xo(e){e=Fn(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Zo(e,t){null==t&&(t=1);const r=[],n=r.forEach,s=function(e,t){n.call(e,function(e){t>0&&Array.isArray(e)?s(e,t-1):r.push(e)})};return s(e,t),r}function ea(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),s=1,i=[0,1];for(let e=1;e<n;e++)i.push(s+=r());let o=r(),a=t;t+=o;let c=0,u=0;function h(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const l=Math.pow(2,31),d=l>>>1,f=d>>1,p=l-1;let m=0;for(let e=0;e<31;e++)m=m<<1|h();let g=[],y=0,w=l;for(;;){let e=Math.floor(((m-y+1)*s-1)/w),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<i[n]?r=n:t=n}if(0==t)break;g.push(t);let o=y+Math.floor(w*i[t]/s),a=y+Math.floor(w*i[t+1]/s)-1;for(;0==((o^a)&d);)m=m<<1&p|h(),o=o<<1&p,a=a<<1&p|1;for(;o&~a&f;)m=m&d|m<<1&p>>>1|h(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,w=1+a-o}let v=n-4;return g.map(t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}})}(e))}function ta(e){return 1&e?~e>>1:e>>1}function ra(e,t){let r=Array(e);for(let n=0,s=-1;n<e;n++)r[n]=s+=1+t();return r}function na(e,t){let r=Array(e);for(let n=0,s=0;n<e;n++)r[n]=s+=ta(t());return r}function sa(e,t){let r=ra(e(),e),n=e(),s=ra(n,e),i=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<i[e];t++)r.push(s[e]+t);return t?r.map(e=>t[e]):r}function ia(e,t,r){let n=Array(e).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)na(e,r).forEach((e,t)=>n[t].push(e));return n}function oa(e,t){let r=1+t(),n=t(),s=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Zo(ia(s.length,1+e,t).map((e,t)=>{const i=e[0],o=e.slice(1);return Array(s[t]).fill(void 0).map((e,t)=>{let s=t*n;return[i+t*r,o.map(e=>e+s)]})}))}function aa(e,t){return ia(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}const ca=ea($o("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA==")),ua=new Set(sa(ca)),ha=new Set(sa(ca)),la=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(oa(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(aa(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Zo(t))}(ca),da=function(e){let t=sa(e).sort((e,t)=>e-t);return function r(){let n=[];for(;;){let s=sa(e,t);if(0==s.length)break;n.push({set:new Set(s),node:r()})}n.sort((e,t)=>t.set.size-e.set.size);let s=e(),i=s%3;s=s/3|0;let o=!!(1&s);return s>>=1,{branches:n,valid:i,fe0f:o,save:1==s,check:2==s}}()}(ca);function fa(e){return function(e,t=Uo.current){return Fo(qo(e,t))}(e)}function pa(e){return e.filter(e=>65039!=e)}function ma(e){for(let t of e.split(".")){let e=fa(t);try{for(let t=e.lastIndexOf(95)-1;t>=0;t--)if(95!==e[t])throw new Error("underscore only allowed at start");if(e.length>=4&&e.every(e=>e<128)&&45===e[2]&&45===e[3])throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function ga(e){return ma(function(e,t){let r=fa(e).reverse(),n=[];for(;r.length;){let e=ya(r);if(e){n.push(...t(e));continue}let s=r.pop();if(ua.has(s)){n.push(s);continue}if(ha.has(s))continue;let i=la[s];if(!i)throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`);n.push(...i)}return ma(function(e){return e.normalize("NFC")}(String.fromCodePoint(...n)))}(e,pa))}function ya(e,t){var r;let n,s,i=da,o=[],a=e.length;for(;a;){let t=e[--a];if(i=null===(r=i.branches.find(e=>e.set.has(t)))||void 0===r?void 0:r.node,!i)break;if(i.save)s=t;else if(i.check&&t===s)break;o.push(t),i.fe0f&&(o.push(65039),a>0&&65039==e[a-1]&&a--),i.valid&&(n=o.slice(),2==i.valid&&n.splice(1,1),e.length=a)}return n}const wa=new Cn(Qo),va=new Uint8Array(32);function Aa(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function ba(e){const t=qo(ga(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++){46===t[e]&&(r.push(Aa(t.slice(n,e))),n=e+1)}if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(Aa(t.slice(n))),r}function Ea(e){"string"!=typeof e&&wa.throwArgumentError("invalid ENS name; not a string","name",e);let t=va;const r=ba(e);for(;r.length;)t=ts(qn([t,ts(r.pop())]));return Kn(t)}function Sa(e){return Kn(qn(ba(e).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"}va.fill(0);const _a="Ethereum Signed Message:\n";function Pa(e){return"string"==typeof e&&(e=qo(e)),ts(qn([qo(_a),qo(String(e.length)),e]))}var ka=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ia=new Cn(Qo),Ra=new Uint8Array(32);Ra.fill(0);const Ta=ki.from(-1),Na=ki.from(0),Oa=ki.from(1),Ca=ki.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const xa=$n(Oa.toHexString(),32),Ma=$n(Na.toHexString(),32),Ua={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Da=["name","version","chainId","verifyingContract","salt"];function La(e){return function(t){return"string"!=typeof t&&Ia.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Ba={name:La("name"),version:La("version"),chainId:function(e){try{return ki.from(e).toString()}catch(e){}return Ia.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return yo(e).toLowerCase()}catch(e){}return Ia.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=Fn(e);if(32!==t.length)throw new Error("bad length");return Kn(t)}catch(e){}return Ia.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Fa(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&Ia.throwArgumentError("invalid numeric width","type",e);const s=Ca.mask(r?n-1:n),i=r?s.add(Oa).mul(Ta):Na;return function(t){const r=ki.from(t);return(r.lt(i)||r.gt(s))&&Ia.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),$n(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&Ia.throwArgumentError("invalid bytes width","type",e),function(t){return Fn(t).length!==r&&Ia.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=Fn(e),r=t.length%32;return r?Jn([t,Ra.slice(r)]):Kn(t)}(t)}}}switch(e){case"address":return function(e){return $n(yo(e),32)};case"bool":return function(e){return e?xa:Ma};case"bytes":return function(e){return ts(e)};case"string":return function(e){return Yo(e)}}return null}function qa(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class Ga{constructor(e){xi(this,"types",Object.freeze(Gi(e))),xi(this,"_encoderCache",{}),xi(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach(e=>{t[e]={},r[e]=[],n[e]={}});for(const n in e){const s={};e[n].forEach(i=>{s[i.name]&&Ia.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",e),s[i.name]=!0;const o=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];o===n&&Ia.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e);Fa(o)||(r[o]||Ia.throwArgumentError(`unknown type ${JSON.stringify(o)}`,"types",e),r[o].push(n),t[n][o]=!0)})}const s=Object.keys(r).filter(e=>0===r[e].length);0===s.length?Ia.throwArgumentError("missing primary type","types",e):s.length>1&&Ia.throwArgumentError(`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),xi(this,"primaryType",s[0]),function s(i,o){o[i]&&Ia.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e),o[i]=!0,Object.keys(t[i]).forEach(e=>{r[e]&&(s(e,o),Object.keys(o).forEach(t=>{n[t][e]=!0}))}),delete o[i]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=qa(t,e[t])+r.map(t=>qa(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=Fa(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&Ia.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let s=t.map(r);return this._types[e]&&(s=s.map(ts)),ts(Jn(s))}}const r=this.types[e];if(r){const t=Yo(this._types[e]);return e=>{const n=r.map(({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?ts(n):n});return n.unshift(t),Jn(n)}}return Ia.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||Ia.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ts(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Fa(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],s=parseInt(n[3]);return s>=0&&t.length!==s&&Ia.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(t=>this._visit(e,t,r))}const s=this.types[e];return s?s.reduce((e,{name:n,type:s})=>(e[n]=this._visit(s,t[n],r),e),{}):Ia.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ga(e)}static getPrimaryType(e){return Ga.from(e).primaryType}static hashStruct(e,t,r){return Ga.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=Ua[r];n||Ia.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>Da.indexOf(e.name)-Da.indexOf(t.name)),Ga.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Jn(["0x1901",Ga.hashDomain(e),Ga.from(t).hash(r)])}static hash(e,t,r){return ts(Ga.encode(e,t,r))}static resolveNames(e,t,r,n){return ka(this,void 0,void 0,function*(){e=Li(e);const s={};e.verifyingContract&&!Hn(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const i=Ga.from(t);i.visit(r,(e,t)=>("address"!==e||Hn(t,20)||(s[t]="0x"),t));for(const e in s)s[e]=yield n(e);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=i.visit(r,(e,t)=>"address"===e&&s[t]?s[t]:t),{domain:e,value:r}})}static getPayload(e,t,r){Ga.hashDomain(e);const n={},s=[];Da.forEach(t=>{const r=e[t];null!=r&&(n[t]=Ba[t](r),s.push({name:t,type:Ua[t]}))});const i=Ga.from(t),o=Li(t);return o.EIP712Domain?Ia.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):o.EIP712Domain=s,i.encode(r),{types:o,domain:n,primaryType:i.primaryType,message:i.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return Kn(Fn(t));if(e.match(/^u?int/))return ki.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&Ia.throwArgumentError("invalid string","value",t),t}return Ia.throwArgumentError("unsupported type","type",e)})}}}var ja=Object.freeze({__proto__:null,_TypedDataEncoder:Ga,dnsEncode:Sa,hashMessage:Pa,id:Yo,messagePrefix:_a,namehash:Ea}),Ha=Object.freeze({__proto__:null,AbiCoder:Wo,FormatTypes:Qi,ParamType:Xi,defaultAbiCoder:Jo});var za=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ka=new Cn("abstract-provider/5.8.0");class Va extends ji{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class Wa{constructor(){Ka.checkAbstract(new.target,Wa),xi(this,"_isProvider",!0)}getFeeData(){return za(this,void 0,void 0,function*(){const{block:e,gasPrice:t}=yield Ui({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)});let r=null,n=null,s=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,s=ki.from("1500000000"),n=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:s,gasPrice:t}})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var Ja=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Ya=new Cn("abstract-signer/5.8.0"),Qa=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],$a=[Cn.errors.INSUFFICIENT_FUNDS,Cn.errors.NONCE_EXPIRED,Cn.errors.REPLACEMENT_UNDERPRICED];class Xa{constructor(){Ya.checkAbstract(new.target,Xa),xi(this,"_isSigner",!0)}getBalance(e){return Ja(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ja(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ja(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const t=yield Ui(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return Ja(this,void 0,void 0,function*(){this._checkProvider("call");const r=yield Ui(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return Ja(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return Ja(this,void 0,void 0,function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ja(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ja(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ja(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const t in e)-1===Qa.indexOf(t)&&Ya.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=Li(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&Ya.throwArgumentError("from address mismatch","transaction",e),t[0])),t}populateTransaction(e){return Ja(this,void 0,void 0,function*(){const t=yield Ui(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>Ja(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&Ya.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||Ya.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Ya.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&Ya.throwError("network does not support EIP-1559",Cn.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):Ya.throwError("failed to get consistent fee data",Cn.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if($a.indexOf(e.code)>=0)throw e;return Ya.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Cn.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&Ya.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield Ui(t)})}_checkProvider(e){this.provider||Ya.throwError("missing provider",Cn.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}var Za={},ec={},tc=rc;function rc(e,t){if(!e)throw new Error(t||"Assertion failed")}rc.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var nc={exports:{}};"function"==typeof Object.create?nc.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:nc.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var sc=nc.exports,ic=tc,oc=sc;function ac(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function cc(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function uc(e){return 1===e.length?"0"+e:e}function hc(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}ec.inherits=oc,ec.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var n=0,s=0;s<e.length;s++){var i=e.charCodeAt(s);i<128?r[n++]=i:i<2048?(r[n++]=i>>6|192,r[n++]=63&i|128):ac(e,s)?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++s)),r[n++]=i>>18|240,r[n++]=i>>12&63|128,r[n++]=i>>6&63|128,r[n++]=63&i|128):(r[n++]=i>>12|224,r[n++]=i>>6&63|128,r[n++]=63&i|128)}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},ec.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=uc(e[r].toString(16));return t},ec.htonl=cc,ec.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var s=e[n];"little"===t&&(s=cc(s)),r+=hc(s.toString(16))}return r},ec.zero2=uc,ec.zero8=hc,ec.join32=function(e,t,r,n){var s=r-t;ic(s%4==0);for(var i=new Array(s/4),o=0,a=t;o<i.length;o++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],i[o]=c>>>0}return i},ec.split32=function(e,t){for(var r=new Array(4*e.length),n=0,s=0;n<e.length;n++,s+=4){var i=e[n];"big"===t?(r[s]=i>>>24,r[s+1]=i>>>16&255,r[s+2]=i>>>8&255,r[s+3]=255&i):(r[s+3]=i>>>24,r[s+2]=i>>>16&255,r[s+1]=i>>>8&255,r[s]=255&i)}return r},ec.rotr32=function(e,t){return e>>>t|e<<32-t},ec.rotl32=function(e,t){return e<<t|e>>>32-t},ec.sum32=function(e,t){return e+t>>>0},ec.sum32_3=function(e,t,r){return e+t+r>>>0},ec.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},ec.sum32_5=function(e,t,r,n,s){return e+t+r+n+s>>>0},ec.sum64=function(e,t,r,n){var s=e[t],i=n+e[t+1]>>>0,o=(i<n?1:0)+r+s;e[t]=o>>>0,e[t+1]=i},ec.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},ec.sum64_lo=function(e,t,r,n){return t+n>>>0},ec.sum64_4_hi=function(e,t,r,n,s,i,o,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+i>>>0)<i?1:0,e+r+s+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},ec.sum64_4_lo=function(e,t,r,n,s,i,o,a){return t+n+i+a>>>0},ec.sum64_5_hi=function(e,t,r,n,s,i,o,a,c,u){var h=0,l=t;return h+=(l=l+n>>>0)<t?1:0,h+=(l=l+i>>>0)<i?1:0,h+=(l=l+a>>>0)<a?1:0,e+r+s+o+c+(h+=(l=l+u>>>0)<u?1:0)>>>0},ec.sum64_5_lo=function(e,t,r,n,s,i,o,a,c,u){return t+n+i+a+u>>>0},ec.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},ec.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},ec.shr64_hi=function(e,t,r){return e>>>r},ec.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var lc={},dc=ec,fc=tc;function pc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}lc.BlockHash=pc,pc.prototype.update=function(e,t){if(e=dc.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=dc.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},pc.prototype.digest=function(e){return this.update(this._pad()),fc(null===this.pending),this._digest(e)},pc.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var s=1;s<r;s++)n[s]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=255&e}else for(n[s++]=255&e,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,i=8;i<this.padLength;i++)n[s++]=0;return n};var mc={},gc={},yc=ec.rotr32;function wc(e,t,r){return e&t^~e&r}function vc(e,t,r){return e&t^e&r^t&r}function Ac(e,t,r){return e^t^r}gc.ft_1=function(e,t,r,n){return 0===e?wc(t,r,n):1===e||3===e?Ac(t,r,n):2===e?vc(t,r,n):void 0},gc.ch32=wc,gc.maj32=vc,gc.p32=Ac,gc.s0_256=function(e){return yc(e,2)^yc(e,13)^yc(e,22)},gc.s1_256=function(e){return yc(e,6)^yc(e,11)^yc(e,25)},gc.g0_256=function(e){return yc(e,7)^yc(e,18)^e>>>3},gc.g1_256=function(e){return yc(e,17)^yc(e,19)^e>>>10};var bc=ec,Ec=lc,Sc=gc,_c=bc.rotl32,Pc=bc.sum32,kc=bc.sum32_5,Ic=Sc.ft_1,Rc=Ec.BlockHash,Tc=[1518500249,1859775393,2400959708,3395469782];function Nc(){if(!(this instanceof Nc))return new Nc;Rc.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}bc.inherits(Nc,Rc);var Oc=Nc;Nc.blockSize=512,Nc.outSize=160,Nc.hmacStrength=80,Nc.padLength=64,Nc.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=_c(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),h=kc(_c(s,5),Ic(u,i,o,a),c,r[n],Tc[u]);c=a,a=o,o=_c(i,30),i=s,s=h}this.h[0]=Pc(this.h[0],s),this.h[1]=Pc(this.h[1],i),this.h[2]=Pc(this.h[2],o),this.h[3]=Pc(this.h[3],a),this.h[4]=Pc(this.h[4],c)},Nc.prototype._digest=function(e){return"hex"===e?bc.toHex32(this.h,"big"):bc.split32(this.h,"big")};var Cc=ec,xc=lc,Mc=gc,Uc=tc,Dc=Cc.sum32,Lc=Cc.sum32_4,Bc=Cc.sum32_5,Fc=Mc.ch32,qc=Mc.maj32,Gc=Mc.s0_256,jc=Mc.s1_256,Hc=Mc.g0_256,zc=Mc.g1_256,Kc=xc.BlockHash,Vc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Wc(){if(!(this instanceof Wc))return new Wc;Kc.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Vc,this.W=new Array(64)}Cc.inherits(Wc,Kc);var Jc=Wc;Wc.blockSize=512,Wc.outSize=256,Wc.hmacStrength=192,Wc.padLength=64,Wc.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Lc(zc(r[n-2]),r[n-7],Hc(r[n-15]),r[n-16]);var s=this.h[0],i=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],h=this.h[6],l=this.h[7];for(Uc(this.k.length===r.length),n=0;n<r.length;n++){var d=Bc(l,jc(c),Fc(c,u,h),this.k[n],r[n]),f=Dc(Gc(s),qc(s,i,o));l=h,h=u,u=c,c=Dc(a,d),a=o,o=i,i=s,s=Dc(d,f)}this.h[0]=Dc(this.h[0],s),this.h[1]=Dc(this.h[1],i),this.h[2]=Dc(this.h[2],o),this.h[3]=Dc(this.h[3],a),this.h[4]=Dc(this.h[4],c),this.h[5]=Dc(this.h[5],u),this.h[6]=Dc(this.h[6],h),this.h[7]=Dc(this.h[7],l)},Wc.prototype._digest=function(e){return"hex"===e?Cc.toHex32(this.h,"big"):Cc.split32(this.h,"big")};var Yc=ec,Qc=Jc;function $c(){if(!(this instanceof $c))return new $c;Qc.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Yc.inherits($c,Qc);var Xc=$c;$c.blockSize=512,$c.outSize=224,$c.hmacStrength=192,$c.padLength=64,$c.prototype._digest=function(e){return"hex"===e?Yc.toHex32(this.h.slice(0,7),"big"):Yc.split32(this.h.slice(0,7),"big")};var Zc=ec,eu=lc,tu=tc,ru=Zc.rotr64_hi,nu=Zc.rotr64_lo,su=Zc.shr64_hi,iu=Zc.shr64_lo,ou=Zc.sum64,au=Zc.sum64_hi,cu=Zc.sum64_lo,uu=Zc.sum64_4_hi,hu=Zc.sum64_4_lo,lu=Zc.sum64_5_hi,du=Zc.sum64_5_lo,fu=eu.BlockHash,pu=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function mu(){if(!(this instanceof mu))return new mu;fu.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=pu,this.W=new Array(160)}Zc.inherits(mu,fu);var gu=mu;function yu(e,t,r,n,s){var i=e&r^~e&s;return i<0&&(i+=4294967296),i}function wu(e,t,r,n,s,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function vu(e,t,r,n,s){var i=e&r^e&s^r&s;return i<0&&(i+=4294967296),i}function Au(e,t,r,n,s,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function bu(e,t){var r=ru(e,t,28)^ru(t,e,2)^ru(t,e,7);return r<0&&(r+=4294967296),r}function Eu(e,t){var r=nu(e,t,28)^nu(t,e,2)^nu(t,e,7);return r<0&&(r+=4294967296),r}function Su(e,t){var r=ru(e,t,14)^ru(e,t,18)^ru(t,e,9);return r<0&&(r+=4294967296),r}function _u(e,t){var r=nu(e,t,14)^nu(e,t,18)^nu(t,e,9);return r<0&&(r+=4294967296),r}function Pu(e,t){var r=ru(e,t,1)^ru(e,t,8)^su(e,t,7);return r<0&&(r+=4294967296),r}function ku(e,t){var r=nu(e,t,1)^nu(e,t,8)^iu(e,t,7);return r<0&&(r+=4294967296),r}function Iu(e,t){var r=ru(e,t,19)^ru(t,e,29)^su(e,t,6);return r<0&&(r+=4294967296),r}function Ru(e,t){var r=nu(e,t,19)^nu(t,e,29)^iu(e,t,6);return r<0&&(r+=4294967296),r}mu.blockSize=1024,mu.outSize=512,mu.hmacStrength=192,mu.padLength=128,mu.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var s=Iu(r[n-4],r[n-3]),i=Ru(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=Pu(r[n-30],r[n-29]),u=ku(r[n-30],r[n-29]),h=r[n-32],l=r[n-31];r[n]=uu(s,i,o,a,c,u,h,l),r[n+1]=hu(s,i,o,a,c,u,h,l)}},mu.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],s=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],h=this.h[7],l=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],w=this.h[15];tu(this.k.length===r.length);for(var v=0;v<r.length;v+=2){var A=y,b=w,E=Su(l,d),S=_u(l,d),_=yu(l,d,f,p,m),P=wu(l,d,f,p,m,g),k=this.k[v],I=this.k[v+1],R=r[v],T=r[v+1],N=lu(A,b,E,S,_,P,k,I,R,T),O=du(A,b,E,S,_,P,k,I,R,T);A=bu(n,s),b=Eu(n,s),E=vu(n,s,i,o,a),S=Au(n,s,i,o,a,c);var C=au(A,b,E,S),x=cu(A,b,E,S);y=m,w=g,m=f,g=p,f=l,p=d,l=au(u,h,N,O),d=cu(h,h,N,O),u=a,h=c,a=i,c=o,i=n,o=s,n=au(N,O,C,x),s=cu(N,O,C,x)}ou(this.h,0,n,s),ou(this.h,2,i,o),ou(this.h,4,a,c),ou(this.h,6,u,h),ou(this.h,8,l,d),ou(this.h,10,f,p),ou(this.h,12,m,g),ou(this.h,14,y,w)},mu.prototype._digest=function(e){return"hex"===e?Zc.toHex32(this.h,"big"):Zc.split32(this.h,"big")};var Tu=ec,Nu=gu;function Ou(){if(!(this instanceof Ou))return new Ou;Nu.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Tu.inherits(Ou,Nu);var Cu=Ou;Ou.blockSize=1024,Ou.outSize=384,Ou.hmacStrength=192,Ou.padLength=128,Ou.prototype._digest=function(e){return"hex"===e?Tu.toHex32(this.h.slice(0,12),"big"):Tu.split32(this.h.slice(0,12),"big")},mc.sha1=Oc,mc.sha224=Xc,mc.sha256=Jc,mc.sha384=Cu,mc.sha512=gu;var xu={},Mu=ec,Uu=lc,Du=Mu.rotl32,Lu=Mu.sum32,Bu=Mu.sum32_3,Fu=Mu.sum32_4,qu=Uu.BlockHash;function Gu(){if(!(this instanceof Gu))return new Gu;qu.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function ju(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function Hu(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function zu(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}Mu.inherits(Gu,qu),xu.ripemd160=Gu,Gu.blockSize=512,Gu.outSize=160,Gu.hmacStrength=192,Gu.padLength=64,Gu.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],s=this.h[2],i=this.h[3],o=this.h[4],a=r,c=n,u=s,h=i,l=o,d=0;d<80;d++){var f=Lu(Du(Fu(r,ju(d,n,s,i),e[Ku[d]+t],Hu(d)),Wu[d]),o);r=o,o=i,i=Du(s,10),s=n,n=f,f=Lu(Du(Fu(a,ju(79-d,c,u,h),e[Vu[d]+t],zu(d)),Ju[d]),l),a=l,l=h,h=Du(u,10),u=c,c=f}f=Bu(this.h[1],s,h),this.h[1]=Bu(this.h[2],i,l),this.h[2]=Bu(this.h[3],o,a),this.h[3]=Bu(this.h[4],r,c),this.h[4]=Bu(this.h[0],n,u),this.h[0]=f},Gu.prototype._digest=function(e){return"hex"===e?Mu.toHex32(this.h,"little"):Mu.split32(this.h,"little")};var Ku=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Vu=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Wu=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ju=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Yu=ec,Qu=tc;function $u(e,t,r){if(!(this instanceof $u))return new $u(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(Yu.toArray(t,r))}var Xu=$u;$u.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Qu(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},$u.prototype.update=function(e,t){return this.inner.update(e,t),this},$u.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=ec,t.common=lc,t.sha=mc,t.ripemd=xu,t.hmac=Xu,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Za);var Zu=Pt(Za);function eh(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}var th=rh;function rh(e,t){if(!e)throw new Error(t||"Assertion failed")}rh.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var nh=eh(function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function s(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var s=e.charCodeAt(n),i=s>>8,o=255&s;i?r.push(i,o):r.push(o)}return r},r.zero2=n,r.toHex=s,r.encode=function(e,t){return"hex"===t?s(e):e}}),sh=eh(function(e,t){var r=t;r.assert=th,r.toArray=nh.toArray,r.zero2=nh.zero2,r.toHex=nh.toHex,r.encode=nh.encode,r.getNAF=function(e,t,r){var n,s=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<s.length;n+=1)s[n]=0;var i=1<<t+1,o=e.clone();for(n=0;n<s.length;n++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,s[n]=a,o.iushrn(1)}return s},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,s=0,i=0;e.cmpn(-s)>0||t.cmpn(-i)>0;){var o,a,c=e.andln(3)+s&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),o=1&c?3!==(n=e.andln(7)+s&7)&&5!==n||2!==u?c:-c:0,r[0].push(o),a=1&u?3!==(n=t.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*s===o+1&&(s=1-s),2*i===a+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new Ai(e,"hex","le")}}),ih=sh.getNAF,oh=sh.getJSF,ah=sh.assert;function ch(e,t){this.type=e,this.p=new Ai(t.p,16),this.red=t.prime?Ai.red(t.prime):Ai.mont(this.p),this.zero=new Ai(0).toRed(this.red),this.one=new Ai(1).toRed(this.red),this.two=new Ai(2).toRed(this.red),this.n=t.n&&new Ai(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var uh=ch;function hh(e,t){this.curve=e,this.type=t,this.precomputed=null}ch.prototype.point=function(){throw new Error("Not implemented")},ch.prototype.validate=function(){throw new Error("Not implemented")},ch.prototype._fixedNafMul=function(e,t){ah(e.precomputed);var r=e._getDoubles(),n=ih(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;var i,o,a=[];for(i=0;i<n.length;i+=r.step){o=0;for(var c=i+r.step-1;c>=i;c--)o=(o<<1)+n[c];a.push(o)}for(var u=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=s;l>0;l--){for(i=0;i<a.length;i++)(o=a[i])===l?h=h.mixedAdd(r.points[i]):o===-l&&(h=h.mixedAdd(r.points[i].neg()));u=u.add(h)}return u.toP()},ch.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var s=n.points,i=ih(t,r,this._bitLength),o=this.jpoint(null,null,null),a=i.length-1;a>=0;a--){for(var c=0;a>=0&&0===i[a];a--)c++;if(a>=0&&c++,o=o.dblp(c),a<0)break;var u=i[a];ah(0!==u),o="affine"===e.type?u>0?o.mixedAdd(s[u-1>>1]):o.mixedAdd(s[-u-1>>1].neg()):u>0?o.add(s[u-1>>1]):o.add(s[-u-1>>1].neg())}return"affine"===e.type?o.toP():o},ch.prototype._wnafMulAdd=function(e,t,r,n,s){var i,o,a,c=this._wnafT1,u=this._wnafT2,h=this._wnafT3,l=0;for(i=0;i<n;i++){var d=(a=t[i])._getNAFPoints(e);c[i]=d.wnd,u[i]=d.points}for(i=n-1;i>=1;i-=2){var f=i-1,p=i;if(1===c[f]&&1===c[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=oh(r[f],r[p]);for(l=Math.max(y[0].length,l),h[f]=new Array(l),h[p]=new Array(l),o=0;o<l;o++){var w=0|y[0][o],v=0|y[1][o];h[f][o]=g[3*(w+1)+(v+1)],h[p][o]=0,u[f]=m}}else h[f]=ih(r[f],c[f],this._bitLength),h[p]=ih(r[p],c[p],this._bitLength),l=Math.max(h[f].length,l),l=Math.max(h[p].length,l)}var A=this.jpoint(null,null,null),b=this._wnafT4;for(i=l;i>=0;i--){for(var E=0;i>=0;){var S=!0;for(o=0;o<n;o++)b[o]=0|h[o][i],0!==b[o]&&(S=!1);if(!S)break;E++,i--}if(i>=0&&E++,A=A.dblp(E),i<0)break;for(o=0;o<n;o++){var _=b[o];0!==_&&(_>0?a=u[o][_-1>>1]:_<0&&(a=u[o][-_-1>>1].neg()),A="affine"===a.type?A.mixedAdd(a):A.add(a))}}for(i=0;i<n;i++)u[i]=null;return s?A:A.toP()},ch.BasePoint=hh,hh.prototype.eq=function(){throw new Error("Not implemented")},hh.prototype.validate=function(){return this.curve.validate(this)},ch.prototype.decodePoint=function(e,t){e=sh.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?ah(e[e.length-1]%2==0):7===e[0]&&ah(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},hh.prototype.encodeCompressed=function(e){return this.encode(e,!0)},hh.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},hh.prototype.encode=function(e,t){return sh.encode(this._encode(t),e)},hh.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},hh.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},hh.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,s=0;s<t;s+=e){for(var i=0;i<e;i++)n=n.dbl();r.push(n)}return{step:e,points:r}},hh.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(n);return{wnd:e,points:t}},hh.prototype._getBeta=function(){return null},hh.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var lh=eh(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),dh=sh.assert;function fh(e){uh.call(this,"short",e),this.a=new Ai(e.a,16).toRed(this.red),this.b=new Ai(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}lh(fh,uh);var ph=fh;function mh(e,t,r,n){uh.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ai(t,16),this.y=new Ai(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function gh(e,t,r,n){uh.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ai(0)):(this.x=new Ai(t,16),this.y=new Ai(r,16),this.z=new Ai(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}fh.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new Ai(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new Ai(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],dh(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new Ai(e.a,16),b:new Ai(e.b,16)}}):this._getEndoBasis(r)}}},fh.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Ai.mont(e),r=new Ai(2).toRed(t).redInvm(),n=r.redNeg(),s=new Ai(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(s).fromRed(),n.redSub(s).fromRed()]},fh.prototype._getEndoBasis=function(e){for(var t,r,n,s,i,o,a,c,u,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),f=new Ai(1),p=new Ai(0),m=new Ai(0),g=new Ai(1),y=0;0!==l.cmpn(0);){var w=d.div(l);c=d.sub(w.mul(l)),u=m.sub(w.mul(f));var v=g.sub(w.mul(p));if(!n&&c.cmp(h)<0)t=a.neg(),r=f,n=c.neg(),s=u;else if(n&&2===++y)break;a=c,d=l,l=c,m=f,f=u,g=p,p=v}i=c.neg(),o=u;var A=n.sqr().add(s.sqr());return i.sqr().add(o.sqr()).cmp(A)>=0&&(i=t,o=r),n.negative&&(n=n.neg(),s=s.neg()),i.negative&&(i=i.neg(),o=o.neg()),[{a:n,b:s},{a:i,b:o}]},fh.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],s=n.b.mul(e).divRound(this.n),i=r.b.neg().mul(e).divRound(this.n),o=s.mul(r.a),a=i.mul(n.a),c=s.mul(r.b),u=i.mul(n.b);return{k1:e.sub(o).sub(a),k2:c.add(u).neg()}},fh.prototype.pointFromX=function(e,t){(e=new Ai(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=n.fromRed().isOdd();return(t&&!s||!t&&s)&&(n=n.redNeg()),this.point(e,n)},fh.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(s).cmpn(0)},fh.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,s=this._endoWnafT2,i=0;i<e.length;i++){var o=this._endoSplit(t[i]),a=e[i],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),n[2*i]=a,n[2*i+1]=c,s[2*i]=o.k1,s[2*i+1]=o.k2}for(var u=this._wnafMulAdd(1,n,s,2*i,r),h=0;h<2*i;h++)n[h]=null,s[h]=null;return u},lh(mh,uh.BasePoint),fh.prototype.point=function(e,t,r){return new mh(this,e,t,r)},fh.prototype.pointFromJSON=function(e,t){return mh.fromJSON(this,e,t)},mh.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},mh.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},mh.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function s(t){return e.point(t[0],t[1],r)}var i=t[2];return n.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[n].concat(i.doubles.points.map(s))},naf:i.naf&&{wnd:i.naf.wnd,points:[n].concat(i.naf.points.map(s))}},n},mh.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},mh.prototype.isInfinity=function(){return this.inf},mh.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},mh.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),i=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,o)},mh.prototype.getX=function(){return this.x.fromRed()},mh.prototype.getY=function(){return this.y.fromRed()},mh.prototype.mul=function(e){return e=new Ai(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},mh.prototype.mulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},mh.prototype.jmulAdd=function(e,t,r){var n=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},mh.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},mh.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},mh.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},lh(gh,uh.BasePoint),fh.prototype.jpoint=function(e,t,r){return new gh(this,e,t,r)},gh.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},gh.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},gh.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),s=e.x.redMul(r),i=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=n.redSub(s),c=i.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),h=u.redMul(a),l=n.redMul(u),d=c.redSqr().redIAdd(h).redISub(l).redISub(l),f=c.redMul(l.redISub(d)).redISub(i.redMul(h)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},gh.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),s=this.y,i=e.y.redMul(t).redMul(this.z),o=r.redSub(n),a=s.redSub(i);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),u=c.redMul(o),h=r.redMul(c),l=a.redSqr().redIAdd(u).redISub(h).redISub(h),d=a.redMul(h.redISub(l)).redISub(s.redMul(u)),f=this.z.redMul(o);return this.curve.jpoint(l,d,f)},gh.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,s=this.curve.tinv,i=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),u=o.redAdd(o);for(t=0;t<e;t++){var h=i.redSqr(),l=u.redSqr(),d=l.redSqr(),f=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c)),p=i.redMul(l),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(d);var w=u.redMul(a);t+1<e&&(c=c.redMul(d)),i=m,a=w,u=y}return this.curve.jpoint(i,u.redMul(s),a)},gh.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},gh.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(o).redISub(o),u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),d=l.redSqr(),f=this.x.redAdd(l).redSqr().redISub(h).redISub(d);f=f.redIAdd(f);var p=h.redAdd(h).redIAdd(h),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},gh.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),i=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(n).redISub(i);o=o.redIAdd(o);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(o.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),d=this.x.redMul(l),f=this.x.redSub(h).redMul(this.x.redAdd(h));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},gh.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,s=n.redSqr().redSqr(),i=t.redSqr(),o=r.redSqr(),a=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(s)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(o),h=a.redSqr().redISub(u.redAdd(u)),l=u.redISub(h),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(l).redISub(d),p=r.redAdd(r).redMul(n);return this.curve.jpoint(h,f,p)},gh.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),s=e.redAdd(e).redIAdd(e),i=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(i)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(i).redISub(a).redISub(c),h=t.redMul(u);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(l,d,f)},gh.prototype.mul=function(e,t){return e=new Ai(e,t),this.curve._wnafMul(this,e)},gh.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),s=r.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)},gh.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),s=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}},gh.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},gh.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var yh=eh(function(e,t){var r=t;r.base=uh,r.short=ph,r.mont=null,r.edwards=null}),wh=eh(function(e,t){var r,n=t,s=sh.assert;function i(e){"short"===e.type?this.curve=new yh.short(e):"edwards"===e.type?this.curve=new yh.edwards(e):this.curve=new yh.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function o(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new i(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=i,o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Zu.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Zu.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Zu.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Zu.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Zu.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zu.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Zu.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Zu.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function vh(e){if(!(this instanceof vh))return new vh(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=nh.toArray(e.entropy,e.entropyEnc||"hex"),r=nh.toArray(e.nonce,e.nonceEnc||"hex"),n=nh.toArray(e.pers,e.persEnc||"hex");th(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Ah=vh;vh.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},vh.prototype._hmac=function(){return new Zu.hmac(this.hash,this.K)},vh.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},vh.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=nh.toArray(e,t),r=nh.toArray(r,n),th(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},vh.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=nh.toArray(r,n||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var i=s.slice(0,e);return this._update(r),this._reseed++,nh.encode(i,t)};var bh=sh.assert;function Eh(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Sh=Eh;Eh.fromPublic=function(e,t,r){return t instanceof Eh?t:new Eh(e,{pub:t,pubEnc:r})},Eh.fromPrivate=function(e,t,r){return t instanceof Eh?t:new Eh(e,{priv:t,privEnc:r})},Eh.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Eh.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Eh.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Eh.prototype._importPrivate=function(e,t){this.priv=new Ai(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Eh.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?bh(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||bh(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Eh.prototype.derive=function(e){return e.validate()||bh(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Eh.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Eh.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},Eh.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var _h=sh.assert;function Ph(e,t){if(e instanceof Ph)return e;this._importDER(e,t)||(_h(e.r&&e.s,"Signature without r or s"),this.r=new Ai(e.r,16),this.s=new Ai(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var kh=Ph;function Ih(){this.place=0}function Rh(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var s=0,i=0,o=t.place;i<n;i++,o++)s<<=8,s|=e[o],s>>>=0;return!(s<=127)&&(t.place=o,s)}function Th(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Nh(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Ph.prototype._importDER=function(e,t){e=sh.toArray(e,t);var r=new Ih;if(48!==e[r.place++])return!1;var n=Rh(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=Rh(e,r);if(!1===s)return!1;if(128&e[r.place])return!1;var i=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var o=Rh(e,r);if(!1===o)return!1;if(e.length!==o+r.place)return!1;if(128&e[r.place])return!1;var a=e.slice(r.place,o+r.place);if(0===i[0]){if(!(128&i[1]))return!1;i=i.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new Ai(i),this.s=new Ai(a),this.recoveryParam=null,!0},Ph.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Th(t),r=Th(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Nh(n,t.length),(n=n.concat(t)).push(2),Nh(n,r.length);var s=n.concat(r),i=[48];return Nh(i,s.length),i=i.concat(s),sh.encode(i,e)};var Oh=function(){throw new Error("unsupported")},Ch=sh.assert;function xh(e){if(!(this instanceof xh))return new xh(e);"string"==typeof e&&(Ch(Object.prototype.hasOwnProperty.call(wh,e),"Unknown curve "+e),e=wh[e]),e instanceof wh.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Mh=xh;xh.prototype.keyPair=function(e){return new Sh(this,e)},xh.prototype.keyFromPrivate=function(e,t){return Sh.fromPrivate(this,e,t)},xh.prototype.keyFromPublic=function(e,t){return Sh.fromPublic(this,e,t)},xh.prototype.genKeyPair=function(e){e||(e={});for(var t=new Ah({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Oh(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new Ai(2));;){var s=new Ai(t.generate(r));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},xh.prototype._truncateToN=function(e,t,r){var n;if(Ai.isBN(e)||"number"==typeof e)n=(e=new Ai(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new Ai(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new Ai(s,16)}"number"!=typeof r&&(r=8*n);var i=r-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},xh.prototype.sign=function(e,t,r,n){if("object"==typeof r&&(n=r,r=null),n||(n={}),"string"!=typeof e&&"number"!=typeof e&&!Ai.isBN(e)){Ch("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),Ch(e.length>>>0===e.length);for(var s=0;s<e.length;s++)Ch((255&e[s])===e[s])}t=this.keyFromPrivate(t,r),e=this._truncateToN(e,!1,n.msgBitLength),Ch(!e.isNeg(),"Can not sign a negative message");var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i);Ch(new Ai(a).eq(e),"Can not sign message");for(var c=new Ah({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new Ai(1)),h=0;;h++){var l=n.k?n.k(h):new Ai(c.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var d=this.g.mul(l);if(!d.isInfinity()){var f=d.getX(),p=f.umod(this.n);if(0!==p.cmpn(0)){var m=l.invm(this.n).mul(p.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(d.getY().isOdd()?1:0)|(0!==f.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new kh({r:p,s:m,recoveryParam:g})}}}}}},xh.prototype.verify=function(e,t,r,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),r=this.keyFromPublic(r,n);var i=(t=new kh(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,c=o.invm(this.n),u=c.mul(e).umod(this.n),h=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),h)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},xh.prototype.recoverPubKey=function(e,t,r,n){Ch((3&r)===r,"The recovery param is more than two bits"),t=new kh(t,n);var s=this.n,i=new Ai(e),o=t.r,a=t.s,c=1&r,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),c):this.curve.pointFromX(o,c);var h=t.r.invm(s),l=s.sub(i).mul(h).umod(s),d=a.mul(h).umod(s);return this.g.mulAdd(l,o,d)},xh.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new kh(t,n)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(e,t,s)}catch(e){continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var Uh=eh(function(e,t){var r=t;r.version="6.6.1",r.utils=sh,r.rand=function(){throw new Error("unsupported")},r.curve=yh,r.curves=wh,r.ec=Mh,r.eddsa=null}).ec;const Dh=new Cn("signing-key/5.8.0");let Lh=null;function Bh(){return Lh||(Lh=new Uh("secp256k1")),Lh}class Fh{constructor(e){xi(this,"curve","secp256k1"),xi(this,"privateKey",Kn(e)),32!==Vn(this.privateKey)&&Dh.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=Bh().keyFromPrivate(Fn(this.privateKey));xi(this,"publicKey","0x"+t.getPublic(!1,"hex")),xi(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),xi(this,"_isSigningKey",!0)}_addPoint(e){const t=Bh().keyFromPublic(Fn(this.publicKey)),r=Bh().keyFromPublic(Fn(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=Bh().keyFromPrivate(Fn(this.privateKey)),r=Fn(e);32!==r.length&&Dh.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return Xn({recoveryParam:n.recoveryParam,r:$n("0x"+n.r.toString(16),32),s:$n("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=Bh().keyFromPrivate(Fn(this.privateKey)),r=Bh().keyFromPublic(Fn(qh(e)));return $n("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function qh(e,t){const r=Fn(e);if(32===r.length){return new Fh(r).publicKey}return 33===r.length?"0x"+Bh().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?Kn(r):Dh.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Gh=new Cn("transactions/5.8.0");var jh;function Hh(e){return"0x"===e?null:yo(e)}function zh(e){return"0x"===e?No:ki.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(jh||(jh={}));const Kh=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Vh={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Wh(e){return yo(Wn(ts(Wn(qh(e),1)),12))}function Jh(e,t){return Wh(function(e,t){const r=Xn(t),n={r:Fn(r.r),s:Fn(r.s)};return"0x"+Bh().recoverPubKey(Fn(e),n,r.recoveryParam).encode("hex",!1)}(Fn(e),t))}function Yh(e,t){const r=Gn(ki.from(e).toHexString());return r.length>32&&Gh.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Qh(e,t){return{address:yo(e),storageKeys:(t||[]).map((t,r)=>(32!==Vn(t)&&Gh.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function $h(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&Gh.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),Qh(e[0],e[1])):Qh(e.address,e.storageKeys));const t=Object.keys(e).map(t=>{const r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return Qh(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function Xh(e){return $h(e).map(e=>[e.address,e.storageKeys])}function Zh(e,t){if(null!=e.gasPrice){const t=ki.from(e.gasPrice),r=ki.from(e.maxFeePerGas||0);t.eq(r)||Gh.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[Yh(e.chainId||0,"chainId"),Yh(e.nonce||0,"nonce"),Yh(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yh(e.maxFeePerGas||0,"maxFeePerGas"),Yh(e.gasLimit||0,"gasLimit"),null!=e.to?yo(e.to):"0x",Yh(e.value||0,"value"),e.data||"0x",Xh(e.accessList||[])];if(t){const e=Xn(t);r.push(Yh(e.recoveryParam,"recoveryParam")),r.push(Gn(e.r)),r.push(Gn(e.s))}return Jn(["0x02",co(r)])}function el(e,t){const r=[Yh(e.chainId||0,"chainId"),Yh(e.nonce||0,"nonce"),Yh(e.gasPrice||0,"gasPrice"),Yh(e.gasLimit||0,"gasLimit"),null!=e.to?yo(e.to):"0x",Yh(e.value||0,"value"),e.data||"0x",Xh(e.accessList||[])];if(t){const e=Xn(t);r.push(Yh(e.recoveryParam,"recoveryParam")),r.push(Gn(e.r)),r.push(Gn(e.s))}return Jn(["0x01",co(r)])}function tl(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&Gh.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){Di(e,Vh);const r=[];Kh.forEach(function(t){let n=e[t.name]||[];const s={};t.numeric&&(s.hexPad="left"),n=Fn(Kn(n,s)),t.length&&n.length!==t.length&&n.length>0&&Gh.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=Gn(n),n.length>t.maxLength&&Gh.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(Kn(n))});let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&Gh.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!Dn(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(Kn(n)),r.push("0x"),r.push("0x")),!t)return co(r);const s=Xn(t);let i=27+s.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),i+=2*n+8,s.v>28&&s.v!==i&&Gh.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):s.v!==i&&Gh.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(Kn(i)),r.push(Gn(Fn(s.r))),r.push(Gn(Fn(s.s))),co(r)}(e,t);switch(e.type){case 1:return el(e,t);case 2:return Zh(e,t)}return Gh.throwError(`unsupported transaction type: ${e.type}`,Cn.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function rl(e,t,r){try{const r=zh(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){Gh.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=$n(t[1],32),e.s=$n(t[2],32);try{const t=ts(r(e));e.from=Jh(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function nl(e){const t=Fn(e);if(t[0]>127)return function(e){const t=lo(e);9!==t.length&&6!==t.length&&Gh.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:zh(t[0]).toNumber(),gasPrice:zh(t[1]),gasLimit:zh(t[2]),to:Hh(t[3]),value:zh(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=ki.from(t[6]).toNumber()}catch(e){return r}if(r.r=$n(t[7],32),r.s=$n(t[8],32),ki.from(r.r).isZero()&&ki.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const s=t.slice(0,6);0!==r.chainId&&(s.push(Kn(r.chainId)),s.push("0x"),s.push("0x"),n-=2*r.chainId+8);const i=ts(co(s));try{r.from=Jh(i,{r:Kn(r.r),s:Kn(r.s),recoveryParam:n})}catch(e){}r.hash=ts(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=lo(e.slice(1));8!==t.length&&11!==t.length&&Gh.throwArgumentError("invalid component count for transaction type: 1","payload",Kn(e));const r={type:1,chainId:zh(t[0]).toNumber(),nonce:zh(t[1]).toNumber(),gasPrice:zh(t[2]),gasLimit:zh(t[3]),to:Hh(t[4]),value:zh(t[5]),data:t[6],accessList:$h(t[7])};return 8===t.length||(r.hash=ts(e),rl(r,t.slice(8),el)),r}(t);case 2:return function(e){const t=lo(e.slice(1));9!==t.length&&12!==t.length&&Gh.throwArgumentError("invalid component count for transaction type: 2","payload",Kn(e));const r=zh(t[2]),n=zh(t[3]),s={type:2,chainId:zh(t[0]).toNumber(),nonce:zh(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:zh(t[4]),to:Hh(t[5]),value:zh(t[6]),data:t[7],accessList:$h(t[8])};return 9===t.length||(s.hash=ts(e),rl(s,t.slice(9),Zh)),s}(t)}return Gh.throwError(`unsupported transaction type: ${t[0]}`,Cn.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var sl=Object.freeze({__proto__:null,get TransactionTypes(){return jh},accessListify:$h,computeAddress:Wh,parse:nl,recoverAddress:Jh,serialize:tl});class il{constructor(e){xi(this,"alphabet",e),xi(this,"base",e.length),xi(this,"_alphabetMap",{}),xi(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=Fn(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let s=n;for(let e=0;e<t.length;++e)s+=t[e]*this.base,t[e]=255&s,s>>=8;for(;s>0;)t.push(255&s),s>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return Fn(new Uint8Array(t.reverse()))}}new il("abcdefghijklmnopqrstuvwxyz234567");const ol=new il("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var al;!function(e){e.sha256="sha256",e.sha512="sha512"}(al||(al={}));const cl=new Cn("sha2/5.8.0");function ul(e){return"0x"+Zu.sha256().update(Fn(e)).digest("hex")}function hl(e,t,r){return al[e]||cl.throwError("unsupported algorithm "+e,Cn.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Zu.hmac(Zu[e],Fn(t)).update(Fn(r)).digest("hex")}function ll(e,t,r,n,s){let i;e=Fn(e),t=Fn(t);let o=1;const a=new Uint8Array(n),c=new Uint8Array(t.length+4);let u,h;c.set(t);for(let l=1;l<=o;l++){c[t.length]=l>>24&255,c[t.length+1]=l>>16&255,c[t.length+2]=l>>8&255,c[t.length+3]=255&l;let d=Fn(hl(s,e,c));i||(i=d.length,h=new Uint8Array(i),o=Math.ceil(n/i),u=n-(o-1)*i),h.set(d);for(let t=1;t<r;t++){d=Fn(hl(s,e,d));for(let e=0;e<i;e++)h[e]^=d[e]}const f=(l-1)*i,p=l===o?u:i;a.set(Fn(h).slice(0,p),f)}return Kn(a)}const dl=new Cn("wordlists/5.8.0");class fl{constructor(e){dl.checkAbstract(new.target,fl),xi(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Yo(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let pl=null;function ml(e){if(null==pl&&(pl="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==fl.check(e)))throw pl=null,new Error("BIP39 Wordlist for en (English) FAILED")}const gl=new class extends fl{constructor(){super("en")}getWord(e){return ml(this),pl[e]}getWordIndex(e){return ml(this),pl.indexOf(e)}};fl.register(gl);const yl={en:gl},wl=new Cn("hdnode/5.8.0"),vl=ki.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Al=qo("Bitcoin seed"),bl=2147483648;function El(e){return(1<<e)-1<<8-e}function Sl(e){return(1<<e)-1}function _l(e){return $n(Kn(e),32)}function Pl(e){return ol.encode(qn([e,Wn(ul(ul(e)),0,4)]))}function kl(e){if(null==e)return yl.en;if("string"==typeof e){const t=yl[e];return null==t&&wl.throwArgumentError("unknown locale","wordlist",e),t}return e}const Il={},Rl="m/44'/60'/0'/0/0";class Tl{constructor(e,t,r,n,s,i,o,a){if(e!==Il)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new Fh(t);xi(this,"privateKey",e.privateKey),xi(this,"publicKey",e.compressedPublicKey)}else xi(this,"privateKey",null),xi(this,"publicKey",Kn(r));var c;xi(this,"parentFingerprint",n),xi(this,"fingerprint",Wn((c=ul(this.publicKey),"0x"+Zu.ripemd160().update(Fn(c)).digest("hex")),0,4)),xi(this,"address",Wh(this.publicKey)),xi(this,"chainCode",s),xi(this,"index",i),xi(this,"depth",o),null==a?(xi(this,"mnemonic",null),xi(this,"path",null)):"string"==typeof a?(xi(this,"mnemonic",null),xi(this,"path",a)):(xi(this,"mnemonic",a),xi(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Pl(qn([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",Kn(this.depth),this.parentFingerprint,$n(Kn(this.index),4),this.chainCode,null!=this.privateKey?qn(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Tl(Il,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));const r=new Uint8Array(37);if(e&bl){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Fn(this.privateKey),1),t&&(t+="'")}else r.set(Fn(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=Fn(hl(al.sha512,this.chainCode,r)),s=n.slice(0,32),i=n.slice(32);let o=null,a=null;if(this.privateKey)o=_l(ki.from(s).add(this.privateKey).mod(vl));else{a=new Fh(Kn(s))._addPoint(this.publicKey)}let c=t;const u=this.mnemonic;return u&&(c=Object.freeze({phrase:u.phrase,path:t,locale:u.locale||"en"})),new Tl(Il,o,a,this.fingerprint,_l(i),e,this.depth+1,c)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=bl)throw new Error("invalid path index - "+n);r=r._derive(bl+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=bl)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=Fn(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=Fn(hl(al.sha512,Al,r));return new Tl(Il,_l(n.slice(0,32)),null,"0x00000000",_l(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=Ol(Nl(e,r=kl(r)),r),Tl._fromSeed(function(e,t){t||(t="");const r=qo("mnemonic"+t,Uo.NFKD);return ll(qo(e,Uo.NFKD),r,2048,64,"sha512")}(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return Tl._fromSeed(e,null)}static fromExtendedKey(e){const t=ol.decode(e);82===t.length&&Pl(t.slice(0,78))===e||wl.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=Kn(t.slice(5,9)),s=parseInt(Kn(t.slice(9,13)).substring(2),16),i=Kn(t.slice(13,45)),o=t.slice(45,78);switch(Kn(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Tl(Il,null,Kn(o),n,i,s,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new Tl(Il,Kn(o.slice(1)),null,n,i,s,r,null)}return wl.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Nl(e,t){t=kl(t),wl.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=Fn(new Uint8Array(Math.ceil(11*r.length/8)));let s=0;for(let e=0;e<r.length;e++){let i=t.getWordIndex(r[e].normalize("NFKD"));if(-1===i)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)i&1<<10-e&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,o=El(r.length/3);if((Fn(ul(n.slice(0,i/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return Kn(n.slice(0,i/8))}function Ol(e,t){if(t=kl(t),(e=Fn(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&Sl(8-n)),n+=3);const s=e.length/4,i=Fn(ul(e))[0]&El(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,t.join(r.map(e=>t.getWord(e)))}const Cl=new Cn("random/5.8.0");const xl=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();let Ml=xl.crypto||xl.msCrypto;function Ul(e){(e<=0||e>1024||e%1||e!=e)&&Cl.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return Ml.getRandomValues(t),Fn(t)}Ml&&Ml.getRandomValues||(Cl.warn("WARNING: Missing strong random number source"),Ml={getRandomValues:function(e){return Cl.throwError("no secure random source avaialble",Cn.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var Dl={exports:{}};!function(e){!function(){function t(e){return parseInt(e)===e}function r(e){if(!t(e.length))return!1;for(var r=0;r<e.length;r++)if(!t(e[r])||e[r]<0||e[r]>255)return!1;return!0}function n(e,n){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return n&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!r(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(t(e.length)&&r(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function s(e){return new Uint8Array(e)}function i(e,t,r,n,s){null==n&&null==s||(e=e.slice?e.slice(n,s):Array.prototype.slice.call(e,n,s)),t.set(e,r)}var o,a={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var s=e.charCodeAt(r++);37===s?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(s)}return n(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},c=(o="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(o[(240&n)>>4]+o[15&n])}return t.join("")}}),u={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],f=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],_=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function P(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var k=function(e){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(e,!0)}),this._prepare()};k.prototype._prepare=function(){var e=u[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),s=this.key.length/4,i=P(this.key);for(t=0;t<s;t++)r=t>>2,this._Ke[r][t%4]=i[t],this._Kd[e-r][t%4]=i[t];for(var o,a=0,c=s;c<n;){if(o=i[s-1],i[0]^=l[o>>16&255]<<24^l[o>>8&255]<<16^l[255&o]<<8^l[o>>24&255]^h[a]<<24,a+=1,8!=s)for(t=1;t<s;t++)i[t]^=i[t-1];else{for(t=1;t<s/2;t++)i[t]^=i[t-1];o=i[s/2-1],i[s/2]^=l[255&o]^l[o>>8&255]<<8^l[o>>16&255]<<16^l[o>>24&255]<<24;for(t=s/2+1;t<s;t++)i[t]^=i[t-1]}for(t=0;t<s&&c<n;)d=c>>2,f=c%4,this._Ke[d][f]=i[t],this._Kd[e-d][f]=i[t++],c++}for(var d=1;d<e;d++)for(var f=0;f<4;f++)o=this._Kd[d][f],this._Kd[d][f]=b[o>>24&255]^E[o>>16&255]^S[o>>8&255]^_[255&o]},k.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=P(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)r[i]=f[n[i]>>24&255]^p[n[(i+1)%4]>>16&255]^m[n[(i+2)%4]>>8&255]^g[255&n[(i+3)%4]]^this._Ke[o][i];n=r.slice()}var a,c=s(16);for(i=0;i<4;i++)a=this._Ke[t][i],c[4*i]=255&(l[n[i]>>24&255]^a>>24),c[4*i+1]=255&(l[n[(i+1)%4]>>16&255]^a>>16),c[4*i+2]=255&(l[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(l[255&n[(i+3)%4]]^a);return c},k.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=P(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var o=1;o<t;o++){for(i=0;i<4;i++)r[i]=y[n[i]>>24&255]^w[n[(i+3)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^A[255&n[(i+1)%4]]^this._Kd[o][i];n=r.slice()}var a,c=s(16);for(i=0;i<4;i++)a=this._Kd[t][i],c[4*i]=255&(d[n[i]>>24&255]^a>>24),c[4*i+1]=255&(d[n[(i+3)%4]>>16&255]^a>>16),c[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),c[4*i+3]=255&(d[255&n[(i+1)%4]]^a);return c};var I=function(e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new k(e)};I.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),o=0;o<e.length;o+=16)i(e,r,0,o,o+16),i(r=this._aes.encrypt(r),t,o);return t},I.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),o=0;o<e.length;o+=16)i(e,r,0,o,o+16),i(r=this._aes.decrypt(r),t,o);return t};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=s(16);this._lastCipherblock=n(t,!0),this._aes=new k(e)};R.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),o=0;o<e.length;o+=16){i(e,r,0,o,o+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),i(this._lastCipherblock,t,o)}return t},R.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),o=0;o<e.length;o+=16){i(e,r,0,o,o+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[o+a]=r[a]^this._lastCipherblock[a];i(e,this._lastCipherblock,0,o,o+16)}return t};var T=function(e,t,r){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=s(16);r||(r=1),this.segmentSize=r,this._shiftRegister=n(t,!0),this._aes=new k(e)};T.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=n(e,!0),s=0;s<r.length;s+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[s+o]^=t[o];i(this._shiftRegister,this._shiftRegister,0,this.segmentSize),i(r,this._shiftRegister,16-this.segmentSize,s,s+this.segmentSize)}return r},T.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=n(e,!0),s=0;s<r.length;s+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[s+o]^=t[o];i(this._shiftRegister,this._shiftRegister,0,this.segmentSize),i(e,this._shiftRegister,16-this.segmentSize,s,s+this.segmentSize)}return r};var N=function(e,t){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=s(16);this._lastPrecipher=n(t,!0),this._lastPrecipherIndex=16,this._aes=new k(e)};N.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},N.prototype.decrypt=N.prototype.encrypt;var O=function(e){if(!(this instanceof O))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=s(16),this.setValue(e)):this.setBytes(e)};O.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},O.prototype.setBytes=function(e){if(16!=(e=n(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},O.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var C=function(e,t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof O||(t=new O(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new k(e)};C.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},C.prototype.decrypt=C.prototype.encrypt;var x={AES:k,Counter:O,ModeOfOperation:{ecb:I,cbc:R,cfb:T,ofb:N,ctr:C},utils:{hex:c,utf8:a},padding:{pkcs7:{pad:function(e){var t=16-(e=n(e,!0)).length%16,r=s(e.length+t);i(e,r);for(var o=e.length;o<r.length;o++)r[o]=t;return r},strip:function(e){if((e=n(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,o=0;o<t;o++)if(e[r+o]!==t)throw new Error("PKCS#7 invalid padding byte");var a=s(r);return i(e,a,0,0,r),a}}},_arrayTest:{coerceArray:n,createArray:s,copyArray:i}};e.exports=x}()}(Dl);var Ll=Pt(Dl.exports);const Bl="json-wallets/5.8.0";function Fl(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Fn(e)}function ql(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function Gl(e){return"string"==typeof e?qo(e,Uo.NFKC):Fn(e)}function jl(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const s in r)if(s.toLowerCase()===n[e]){t=r[s];break}if(null===t)return null;r=t}return r}function Hl(e){const t=Fn(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=Kn(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const zl=new Cn(Bl);class Kl extends ji{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function Vl(e,t){const r=JSON.parse(e);t=Gl(t);const n=yo(jl(r,"ethaddr")),s=Fl(jl(r,"encseed"));s&&s.length%16==0||zl.throwArgumentError("invalid encseed","json",e);const i=Fn(ll(t,t,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),a=s.slice(16),c=new Ll.ModeOfOperation.cbc(i,o),u=Ll.padding.pkcs7.strip(Fn(c.decrypt(a)));let h="";for(let e=0;e<u.length;e++)h+=String.fromCharCode(u[e]);const l=ts(qo(h));return new Kl({_isCrowdsaleAccount:!0,address:n,privateKey:l})}function Wl(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function Jl(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}var Yl={exports:{}};!function(e){!function(){const t=2147483647;function r(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,s=1013904242,i=2773480762,o=1359893119,a=2600822924,c=528734635,u=1541459225;const h=new Uint32Array(64);function l(e){let l=0,d=e.length;for(;d>=64;){let f,p,m,g,y,w=r,v=n,A=s,b=i,E=o,S=a,_=c,P=u;for(p=0;p<16;p++)m=l+4*p,h[p]=(255&e[m])<<24|(255&e[m+1])<<16|(255&e[m+2])<<8|255&e[m+3];for(p=16;p<64;p++)f=h[p-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=h[p-15],y=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,h[p]=(g+h[p-7]|0)+(y+h[p-16]|0)|0;for(p=0;p<64;p++)g=(((E>>>6|E<<26)^(E>>>11|E<<21)^(E>>>25|E<<7))+(E&S^~E&_)|0)+(P+(t[p]+h[p]|0)|0)|0,y=((w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10))+(w&v^w&A^v&A)|0,P=_,_=S,S=E,E=b+g|0,b=A,A=v,v=w,w=g+y|0;r=r+w|0,n=n+v|0,s=s+A|0,i=i+b|0,o=o+E|0,a=a+S|0,c=c+_|0,u=u+P|0,l+=64,d-=64}}l(e);let d,f=e.length%64,p=e.length/536870912|0,m=e.length<<3,g=f<56?56:120,y=e.slice(e.length-f,e.length);for(y.push(128),d=f+1;d<g;d++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(m>>>24&255),y.push(m>>>16&255),y.push(m>>>8&255),y.push(m>>>0&255),l(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function n(e,t,n){e=e.length<=64?e:r(e);const s=64+t.length+4,i=new Array(s),o=new Array(64);let a,c=[];for(a=0;a<64;a++)i[a]=54;for(a=0;a<e.length;a++)i[a]^=e[a];for(a=0;a<t.length;a++)i[64+a]=t[a];for(a=s-4;a<s;a++)i[a]=0;for(a=0;a<64;a++)o[a]=92;for(a=0;a<e.length;a++)o[a]^=e[a];function u(){for(let e=s-1;e>=s-4;e--){if(i[e]++,i[e]<=255)return;i[e]=0}}for(;n>=32;)u(),c=c.concat(r(o.concat(r(i)))),n-=32;return n>0&&(u(),c=c.concat(r(o.concat(r(i))).slice(0,n))),c}function s(e,t,r,n,s){let i;for(c(e,16*(2*r-1),s,0,16),i=0;i<2*r;i++)a(e,16*i,s,16),o(s,n),c(s,0,e,t+16*i,16);for(i=0;i<r;i++)c(e,t+2*i*16,e,16*i,16);for(i=0;i<r;i++)c(e,t+16*(2*i+1),e,16*(i+r),16)}function i(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=i(t[0]+t[12],7),t[8]^=i(t[4]+t[0],9),t[12]^=i(t[8]+t[4],13),t[0]^=i(t[12]+t[8],18),t[9]^=i(t[5]+t[1],7),t[13]^=i(t[9]+t[5],9),t[1]^=i(t[13]+t[9],13),t[5]^=i(t[1]+t[13],18),t[14]^=i(t[10]+t[6],7),t[2]^=i(t[14]+t[10],9),t[6]^=i(t[2]+t[14],13),t[10]^=i(t[6]+t[2],18),t[3]^=i(t[15]+t[11],7),t[7]^=i(t[3]+t[15],9),t[11]^=i(t[7]+t[3],13),t[15]^=i(t[11]+t[7],18),t[1]^=i(t[0]+t[3],7),t[2]^=i(t[1]+t[0],9),t[3]^=i(t[2]+t[1],13),t[0]^=i(t[3]+t[2],18),t[6]^=i(t[5]+t[4],7),t[7]^=i(t[6]+t[5],9),t[4]^=i(t[7]+t[6],13),t[5]^=i(t[4]+t[7],18),t[11]^=i(t[10]+t[9],7),t[8]^=i(t[11]+t[10],9),t[9]^=i(t[8]+t[11],13),t[10]^=i(t[9]+t[8],18),t[12]^=i(t[15]+t[14],7),t[13]^=i(t[12]+t[15],9),t[14]^=i(t[13]+t[12],13),t[15]^=i(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function a(e,t,r,n){for(let s=0;s<n;s++)r[s]^=e[t+s]}function c(e,t,r,n,s){for(;s--;)r[n++]=e[t++]}function u(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function h(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function l(e,r,i,o,l,d,f){if(i=h(i,"N"),o=h(o,"r"),l=h(l,"p"),d=h(d,"dkLen"),0===i||i&i-1)throw new Error("N must be power of 2");if(i>t/128/o)throw new Error("N too large");if(o>t/128/l)throw new Error("r too large");if(!u(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!u(r))throw new Error("salt must be an array or buffer");r=Array.prototype.slice.call(r);let p=n(e,r,128*l*o);const m=new Uint32Array(32*l*o);for(let e=0;e<m.length;e++){const t=4*e;m[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|255&p[t+0]}const g=new Uint32Array(64*o),y=new Uint32Array(32*o*i),w=32*o,v=new Uint32Array(16),A=new Uint32Array(16),b=l*i*2;let E,S,_=0,P=null,k=!1,I=0,R=0;const T=f?parseInt(1e3/o):4294967295,N="undefined"!=typeof setImmediate?setImmediate:setTimeout,O=function(){if(k)return f(new Error("cancelled"),_/b);let t;switch(I){case 0:S=32*R*o,c(m,S,g,0,w),I=1,E=0;case 1:t=i-E,t>T&&(t=T);for(let e=0;e<t;e++)c(g,0,y,(E+e)*w,w),s(g,w,o,v,A);if(E+=t,_+=t,f){const e=parseInt(1e3*_/b);if(e!==P){if(k=f(null,_/b),k)break;P=e}}if(E<i)break;E=0,I=2;case 2:t=i-E,t>T&&(t=T);for(let e=0;e<t;e++){const e=g[16*(2*o-1)]&i-1;a(y,e*w,g,w),s(g,w,o,v,A)}if(E+=t,_+=t,f){const e=parseInt(1e3*_/b);if(e!==P){if(k=f(null,_/b),k)break;P=e}}if(E<i)break;if(c(g,0,m,S,w),R++,R<l){I=0;break}p=[];for(let e=0;e<m.length;e++)p.push(255&m[e]),p.push(m[e]>>8&255),p.push(m[e]>>16&255),p.push(m[e]>>24&255);const r=n(e,p,d);return f&&f(null,1,r),r}f&&N(O)};if(!f)for(;;){const e=O();if(null!=e)return e}O()}const d={scrypt:function(e,t,r,n,s,i,o){return new Promise(function(a,c){let u=0;o&&o(0),l(e,t,r,n,s,i,function(e,t,r){if(e)c(e);else if(r)o&&1!==u&&o(1),a(new Uint8Array(r));else if(o&&t!==u)return u=t,o(t)})})},syncScrypt:function(e,t,r,n,s,i){return new Uint8Array(l(e,t,r,n,s,i))}};e.exports=d}()}(Yl);var Ql=Pt(Yl.exports),$l=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const Xl=new Cn(Bl);function Zl(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class ed extends ji{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function td(e,t){const r=Fl(jl(e,"crypto/ciphertext"));if(Kn(ts(qn([t.slice(16,32),r]))).substring(2)!==jl(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===jl(e,"crypto/cipher")){const n=Fl(jl(e,"crypto/cipherparams/iv")),s=new Ll.Counter(n);return Fn(new Ll.ModeOfOperation.ctr(t,s).decrypt(r))}return null}(e,t.slice(0,16),r);n||Xl.throwError("unsupported cipher",Cn.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=t.slice(32,64),i=Wh(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),yo(t)!==i)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:i,privateKey:Kn(n)};if("0.1"===jl(e,"x-ethers/version")){const t=Fl(jl(e,"x-ethers/mnemonicCiphertext")),r=Fl(jl(e,"x-ethers/mnemonicCounter")),n=new Ll.Counter(r),i=new Ll.ModeOfOperation.ctr(s,n),a=jl(e,"x-ethers/path")||Rl,c=jl(e,"x-ethers/locale")||"en",u=Fn(i.decrypt(t));try{const e=Ol(u,c),t=Tl.fromMnemonic(e,null,c).derivePath(a);if(t.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=t.mnemonic}catch(e){if(e.code!==Cn.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new ed(o)}function rd(e,t,r,n,s){return Fn(ll(e,t,r,n,s))}function nd(e,t,r,n,s){return Promise.resolve(rd(e,t,r,n,s))}function sd(e,t,r,n,s){const i=Gl(t),o=jl(e,"crypto/kdf");if(o&&"string"==typeof o){const t=function(e,t){return Xl.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===o.toLowerCase()){const r=Fl(jl(e,"crypto/kdfparams/salt")),a=parseInt(jl(e,"crypto/kdfparams/n")),c=parseInt(jl(e,"crypto/kdfparams/r")),u=parseInt(jl(e,"crypto/kdfparams/p"));a&&c&&u||t("kdf",o),a&a-1&&t("N",a);const h=parseInt(jl(e,"crypto/kdfparams/dklen"));return 32!==h&&t("dklen",h),n(i,r,a,c,u,64,s)}if("pbkdf2"===o.toLowerCase()){const n=Fl(jl(e,"crypto/kdfparams/salt"));let s=null;const o=jl(e,"crypto/kdfparams/prf");"hmac-sha256"===o?s="sha256":"hmac-sha512"===o?s="sha512":t("prf",o);const a=parseInt(jl(e,"crypto/kdfparams/c")),c=parseInt(jl(e,"crypto/kdfparams/dklen"));return 32!==c&&t("dklen",c),r(i,n,a,c,s)}}return Xl.throwArgumentError("unsupported key-derivation function","kdf",o)}function id(e,t,r){if(Wl(e)){r&&r(0);const n=Vl(e,t);return r&&r(1),Promise.resolve(n)}return Jl(e)?function(e,t,r){return $l(this,void 0,void 0,function*(){const n=JSON.parse(e);return td(n,yield sd(n,t,nd,Ql.scrypt,r))})}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function od(e,t){if(Wl(e))return Vl(e,t);if(Jl(e))return function(e,t){const r=JSON.parse(e);return td(r,sd(r,t,rd,Ql.syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}var ad=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const cd=new Cn("wallet/5.8.0");class ud extends Xa{constructor(e,t){if(super(),null!=(r=e)&&Hn(r.privateKey,32)&&null!=r.address){const t=new Fh(e.privateKey);if(xi(this,"_signingKey",()=>t),xi(this,"address",Wh(this.publicKey)),this.address!==yo(e.address)&&cd.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;xi(this,"_mnemonic",()=>({phrase:t.phrase,path:t.path||Rl,locale:t.locale||"en"}));const r=this.mnemonic;Wh(Tl.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&cd.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else xi(this,"_mnemonic",()=>null)}else{if(Fh.isSigningKey(e))"secp256k1"!==e.curve&&cd.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),xi(this,"_signingKey",()=>e);else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new Fh(e);xi(this,"_signingKey",()=>t)}xi(this,"_mnemonic",()=>null),xi(this,"address",Wh(this.publicKey))}var r;t&&!Wa.isProvider(t)&&cd.throwArgumentError("invalid provider","provider",t),xi(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new ud(this,e)}signTransaction(e){return Ui(e).then(t=>{null!=t.from&&(yo(t.from)!==this.address&&cd.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(ts(tl(t)));return tl(t,r)})}signMessage(e){return ad(this,void 0,void 0,function*(){return Zn(this._signingKey().signDigest(Pa(e)))})}_signTypedData(e,t,r){return ad(this,void 0,void 0,function*(){const n=yield Ga.resolveNames(e,t,r,e=>(null==this.provider&&cd.throwError("cannot resolve ENS names without a provider",Cn.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e)));return Zn(this._signingKey().signDigest(Ga.hash(n.domain,t,n.value)))})}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(yo(e.address)!==Wh(e.privateKey))throw new Error("address/privateKey mismatch");if(Zl(e)){const t=e.mnemonic;if(Tl.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||Rl).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const s=Fn(e.privateKey),i=Gl(t);let o=null,a=null,c=null;if(Zl(e)){const t=e.mnemonic;o=Fn(Nl(t.phrase,t.locale||"en")),a=t.path||Rl,c=t.locale||"en"}let u=r.client;u||(u="ethers.js");let h=null;h=r.salt?Fn(r.salt):Ul(32);let l=null;if(r.iv){if(l=Fn(r.iv),16!==l.length)throw new Error("invalid iv")}else l=Ul(16);let d=null;if(r.uuid){if(d=Fn(r.uuid),16!==d.length)throw new Error("invalid uuid")}else d=Ul(16);let f=1<<17,p=8,m=1;return r.scrypt&&(r.scrypt.N&&(f=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(m=r.scrypt.p)),Ql.scrypt(i,h,f,p,m,64,n).then(t=>{const r=(t=Fn(t)).slice(0,16),n=t.slice(16,32),i=t.slice(32,64),g=new Ll.Counter(l),y=Fn(new Ll.ModeOfOperation.ctr(r,g).encrypt(s)),w=ts(qn([n,y])),v={address:e.address.substring(2).toLowerCase(),id:Hl(d),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Kn(l).substring(2)},ciphertext:Kn(y).substring(2),kdf:"scrypt",kdfparams:{salt:Kn(h).substring(2),n:f,dklen:32,p:m,r:p},mac:w.substring(2)}};if(o){const e=Ul(16),t=new Ll.Counter(e),r=Fn(new Ll.ModeOfOperation.ctr(i,t).encrypt(o)),n=new Date,s=n.getUTCFullYear()+"-"+ql(n.getUTCMonth()+1,2)+"-"+ql(n.getUTCDate(),2)+"T"+ql(n.getUTCHours(),2)+"-"+ql(n.getUTCMinutes(),2)+"-"+ql(n.getUTCSeconds(),2)+".0Z";v["x-ethers"]={client:u,gethFilename:"UTC--"+s+"--"+v.address,mnemonicCounter:Kn(e).substring(2),mnemonicCiphertext:Kn(r).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(v)})}(this,e,t,r)}static createRandom(e){let t=Ul(16);e||(e={}),e.extraEntropy&&(t=Fn(Wn(ts(qn([t,e.extraEntropy])),0,16)));const r=Ol(t,e.locale);return ud.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return id(e,t,r).then(e=>new ud(e))}static fromEncryptedJsonSync(e,t){return new ud(od(e,t))}static fromMnemonic(e,t,r){return t||(t=Rl),new ud(Tl.fromMnemonic(e,null,r).derivePath(t))}}const hd=new Cn("networks/5.8.0");function ld(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const s=["goerli","ropsten","rinkeby","sepolia"];try{const i=new t.PocketProvider(e,r.pocket);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const s=["ropsten"],i=new t.AnkrProvider(e,r.ankr);i.network&&-1===s.indexOf(i.network.name)&&n.push(i)}catch(e){}if(t.QuickNodeProvider&&"-"!==r.quicknode)try{n.push(new t.QuickNodeProvider(e,r.quicknode))}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let s=1;return null!=r.quorum?s=r.quorum:"homestead"===e&&(s=2),new t.FallbackProvider(n,s)}return n[0]};return t.renetwork=function(e){return ld(e)},t}function dd(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return dd(e,t)},r}const fd={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ld("homestead")},pd={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ld("ropsten")},md={chainId:63,name:"classicMordor",_defaultProvider:dd("https://www.ethercluster.com/mordor","classicMordor")},gd={unspecified:{chainId:0,name:"unspecified"},homestead:fd,mainnet:fd,morden:{chainId:2,name:"morden"},ropsten:pd,testnet:pd,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ld("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ld("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ld("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:ld("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:ld("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:dd("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:md,classicTestnet:md,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:dd("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ld("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:ld("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:ld("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function yd(e){if(null==e)return null;if("number"==typeof e){for(const t in gd){const r=gd[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=gd[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=gd[e.name];if(!t)return"number"!=typeof e.chainId&&hd.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&hd.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}var wd=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};function vd(e,t){return wd(this,void 0,void 0,function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),s=yield n.arrayBuffer(),i={};return n.headers.forEach?n.headers.forEach((e,t)=>{i[t.toLowerCase()]=e}):n.headers.keys().forEach(e=>{i[e.toLowerCase()]=n.headers.get(e)}),{headers:i,statusCode:n.status,statusMessage:n.statusText,body:Fn(new Uint8Array(s))}})}var Ad=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const bd=new Cn("web/5.8.0");function Ed(e){return new Promise(t=>{setTimeout(t,e)})}function Sd(e,t){if(null==e)return null;if("string"==typeof e)return e;if(Dn(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Go(e)}catch(e){}return Kn(e)}return e}function _d(e,t,r){let n=null;if(null!=t){n=qo(t);const r="string"==typeof e?{url:e}:Li(e);if(r.headers){const e=0!==Object.keys(r.headers).filter(e=>"content-type"===e.toLowerCase()).length;e||(r.headers=Li(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};e=r}return function(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;bd.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const s="object"==typeof e?e.throttleCallback:null,i="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;bd.assertArgument(i>0&&i%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",i);const o="object"==typeof e&&!!e.errorPassThrough,a={};let c=null;const u={method:"GET"};let h=!1,l=12e4;if("string"==typeof e)c=e;else if("object"==typeof e){if(null!=e&&null!=e.url||bd.throwArgumentError("missing URL","connection.url",e),c=e.url,"number"==typeof e.timeout&&e.timeout>0&&(l=e.timeout),e.headers)for(const t in e.headers)a[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(h=!0);if(u.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==c.substring(0,6)&&!0!==e.allowInsecureAuthentication&&bd.throwError("basic authentication requires a secure https url",Cn.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;a.authorization={key:"Authorization",value:"Basic "+Xo(qo(t))}}null!=e.skipFetchSetup&&(u.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(u.fetchOptions=Li(e.fetchOptions))}const d=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=c?c.match(d):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?$o(f[3]):(p=f[3],qo(p.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){bd.throwError("processing response error",Cn.errors.SERVER_ERROR,{body:Sd(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:c})}var p;t&&(u.method="POST",u.body=t,null==a["content-type"]&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==a["content-length"]&&(a["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(a).forEach(e=>{const t=a[e];m[t.key]=t.value}),u.headers=m;const g=function(){let e=null;return{promise:new Promise(function(t,r){l&&(e=setTimeout(()=>{null!=e&&(e=null,r(bd.makeError("timeout",Cn.errors.TIMEOUT,{requestBody:Sd(u.body,m["content-type"]),requestMethod:u.method,timeout:l,url:c})))},l))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return Ad(this,void 0,void 0,function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield vd(c,u),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===u.method&&e.match(/^https:/)){c=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(s&&(r=yield s(e,c)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):i*parseInt(String(Math.random()*Math.pow(2,e))),yield Ed(r);continue}}}catch(e){t=e.response,null==t&&(g.cancel(),bd.throwError("missing response",Cn.errors.SERVER_ERROR,{requestBody:Sd(u.body,m["content-type"]),requestMethod:u.method,serverError:e,url:c}))}let a=t.body;if(h&&304===t.statusCode?a=null:!o&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),bd.throwError("bad response",Cn.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:Sd(a,t.headers?t.headers["content-type"]:null),requestBody:Sd(u.body,m["content-type"]),requestMethod:u.method,url:c})),r)try{const e=yield r(a,t);return g.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(s&&(t=yield s(e,c)),t){const t=i*parseInt(String(Math.random()*Math.pow(2,e)));yield Ed(t);continue}}g.cancel(),bd.throwError("processing response error",Cn.errors.SERVER_ERROR,{body:Sd(a,t.headers?t.headers["content-type"]:null),error:r,requestBody:Sd(u.body,m["content-type"]),requestMethod:u.method,url:c})}return g.cancel(),a}return bd.throwError("failed response",Cn.errors.SERVER_ERROR,{requestBody:Sd(u.body,m["content-type"]),requestMethod:u.method,url:c})})}();return Promise.race([g.promise,y])}(e,n,(e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(Go(e))}catch(t){bd.throwError("invalid JSON",Cn.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n})}function Pd(e,t){return t||(t={}),null==(t=Li(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,n){let s=null,i=!1;const o=()=>!i&&(i=!0,s&&clearTimeout(s),!0);t.timeout&&(s=setTimeout(()=>{o()&&n(new Error("timeout"))},t.timeout));const a=t.retryLimit;let c=0;!function s(){return e().then(function(e){if(void 0!==e)o()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",s);else if(t.onceBlock)t.onceBlock.once("block",s);else if(!i){if(c++,c>a)return void(o()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,c)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(s,e)}return null},function(e){o()&&n(e)})}()})}for(var kd="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Id={},Rd=0;Rd<32;Rd++){var Td=kd.charAt(Rd);if(void 0!==Id[Td])throw new TypeError(Td+" is ambiguous");Id[Td]=Rd}function Nd(e){var t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function Od(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=Nd(t)^n>>5}for(t=Nd(t),r=0;r<e.length;++r){var s=e.charCodeAt(r);t=Nd(t)^31&s}return t}function Cd(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase(),n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;var s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;var i=e.slice(0,s),o=e.slice(s+1);if(o.length<6)return"Data too short";var a=Od(i);if("string"==typeof a)return a;for(var c=[],u=0;u<o.length;++u){var h=o.charAt(u),l=Id[h];if(void 0===l)return"Unknown character "+h;a=Nd(a)^l,u+6>=o.length||c.push(l)}return 1!==a?"Invalid checksum for "+e:{prefix:i,words:c}}function xd(e,t,r,n){for(var s=0,i=0,o=(1<<r)-1,a=[],c=0;c<e.length;++c)for(s=s<<t|e[c],i+=t;i>=r;)i-=r,a.push(s>>i&o);if(n)i>0&&a.push(s<<r-i&o);else{if(i>=t)return"Excess padding";if(s<<r-i&o)return"Non-zero padding"}return a}var Md={decodeUnsafe:function(){var e=Cd.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=Cd.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,t,r){if(r=r||90,e.length+7+t.length>r)throw new TypeError("Exceeds length limit");var n=Od(e=e.toLowerCase());if("string"==typeof n)throw new Error(n);for(var s=e+"1",i=0;i<t.length;++i){var o=t[i];if(o>>5)throw new Error("Non 5-bit word");n=Nd(n)^o,s+=kd.charAt(o)}for(i=0;i<6;++i)n=Nd(n);for(n^=1,i=0;i<6;++i){s+=kd.charAt(n>>5*(5-i)&31)}return s},toWordsUnsafe:function(e){var t=xd(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=xd(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=xd(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=xd(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}},Ud=Pt(Md);const Dd="providers/5.8.0",Ld=new Cn(Dd);class Bd{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),s=this.data.bind(this),i=this.hash.bind(this),o=this.hex.bind(this),a=this.number.bind(this),c=this.type.bind(this);return e.transaction={hash:i,type:c,accessList:Bd.allowNull(this.accessList.bind(this),null),blockHash:Bd.allowNull(i,null),blockNumber:Bd.allowNull(a,null),transactionIndex:Bd.allowNull(a,null),confirmations:Bd.allowNull(a,null),from:t,gasPrice:Bd.allowNull(r),maxPriorityFeePerGas:Bd.allowNull(r),maxFeePerGas:Bd.allowNull(r),gasLimit:r,to:Bd.allowNull(t,null),value:r,nonce:a,data:s,r:Bd.allowNull(this.uint256),s:Bd.allowNull(this.uint256),v:Bd.allowNull(a),creates:Bd.allowNull(t,null),raw:Bd.allowNull(s)},e.transactionRequest={from:Bd.allowNull(t),nonce:Bd.allowNull(a),gasLimit:Bd.allowNull(r),gasPrice:Bd.allowNull(r),maxPriorityFeePerGas:Bd.allowNull(r),maxFeePerGas:Bd.allowNull(r),to:Bd.allowNull(t),value:Bd.allowNull(r),data:Bd.allowNull(e=>this.data(e,!0)),type:Bd.allowNull(a),accessList:Bd.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:i,address:t,topics:Bd.arrayOf(i),data:s,logIndex:a,blockHash:i},e.receipt={to:Bd.allowNull(this.address,null),from:Bd.allowNull(this.address,null),contractAddress:Bd.allowNull(t,null),transactionIndex:a,root:Bd.allowNull(o),gasUsed:r,logsBloom:Bd.allowNull(s),blockHash:i,transactionHash:i,logs:Bd.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Bd.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:Bd.allowNull(r),status:Bd.allowNull(a),type:c},e.block={hash:Bd.allowNull(i),parentHash:i,number:a,timestamp:a,nonce:Bd.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Bd.allowNull(t),extraData:s,transactions:Bd.allowNull(Bd.arrayOf(i)),baseFeePerGas:Bd.allowNull(r)},e.blockWithTransactions=Li(e.block),e.blockWithTransactions.transactions=Bd.allowNull(Bd.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Bd.allowNull(n,void 0),toBlock:Bd.allowNull(n,void 0),blockHash:Bd.allowNull(i,void 0),address:Bd.allowNull(t,void 0),topics:Bd.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Bd.allowNull(a),blockHash:Bd.allowNull(i),transactionIndex:a,removed:Bd.allowNull(this.boolean.bind(this)),address:t,data:Bd.allowFalsish(s,"0x"),topics:Bd.arrayOf(i),transactionHash:i,logIndex:a},e}accessList(e){return $h(e||[])}number(e){return"0x"===e?0:ki.from(e).toNumber()}type(e){return"0x"===e||null==e?0:ki.from(e).toNumber()}bigNumber(e){return ki.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),Hn(e))?e.toLowerCase():Ld.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return yo(e)}callAddress(e){if(!Hn(e,32))return null;const t=yo(Wn(e,12));return"0x0000000000000000000000000000000000000000"===t?null:t}contractAddress(e){return function(e){let t=null;try{t=yo(e.from)}catch(t){fo.throwArgumentError("missing from address","transaction",e)}return yo(Wn(ts(co([t,Gn(Fn(ki.from(e.nonce).toHexString()))])),12))}(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Hn(e))return Yn(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==Vn(r)?Ld.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=ki.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!Hn(e))throw new Error("invalid uint256");return $n(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=Bd.check(t,e);return n._difficulty=null==r?null:ki.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Bd.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&ki.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=Bd.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;Hn(r)&&(r=ki.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),Hn(r)&&(r=ki.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return nl(e)}receiptLog(e){return Bd.check(this.formats.receiptLog,e)}receipt(e){const t=Bd.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=ki.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Ld.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Ld.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Ld.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return Bd.check(this.formats.filter,e)}filterLog(e){return Bd.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const s=e[n](t[n]);void 0!==s&&(r[n]=s)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach(function(t){r.push(e(t))}),r}}}var Fd=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const qd=new Cn(Dd);function Gd(e){return null==e?"null":(32!==Vn(e)&&qd.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function jd(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){const t={};e.forEach(e=>{t[Gd(e)]=!0});const r=Object.keys(t);return r.sort(),r.join("|")}return Gd(e)}).join("&")}function Hd(e){if("string"==typeof e){if(32===Vn(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+jd(e);if(Va.isForkEvent(e))throw qd.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+jd(e.topics||[])}throw new Error("invalid event - "+e)}function zd(){return(new Date).getTime()}function Kd(e){return new Promise(t=>{setTimeout(t,e)})}const Vd=["block","network","pending","poll"];let Wd=class{constructor(e,t,r){xi(this,"tag",e),xi(this,"listener",t),xi(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=""===(n=e[2])?[]:n.split(/&/g).map(e=>{if(""===e)return[];const t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t});var n;const s={};return r.length>0&&(s.topics=r),t&&"*"!==t&&(s.address=t),s}pollable(){return this.tag.indexOf(":")>=0||Vd.indexOf(this.tag)>=0}};const Jd={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Yd(e){return $n(ki.from(e).toHexString(),32)}function Qd(e){return ol.encode(qn([e,Wn(ul(ul(e)),0,4)]))}const $d=new RegExp("^(ipfs)://(.*)$","i"),Xd=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),$d,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Zd(e,t){try{return Go(ef(e,t))}catch(e){}return null}function ef(e,t){if("0x"===e)return null;const r=ki.from(Wn(e,t,t+32)).toNumber(),n=ki.from(Wn(e,r,r+32)).toNumber();return Wn(e,r+32,r+32+n)}function tf(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):qd.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function rf(e){const t=Fn(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function nf(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function sf(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const s=Fn(e[n]);t[n]=rf(r),t.push(rf(s.length)),t.push(nf(s)),r+=32+32*Math.ceil(s.length/32)}return Jn(t)}class of{constructor(e,t,r,n){xi(this,"provider",e),xi(this,"name",r),xi(this,"address",e.formatter.address(t)),xi(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>ki.from(e).eq(1)).catch(e=>{if(e.code===Cn.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,t){return Fd(this,void 0,void 0,function*(){const r={to:this.address,ccipReadEnabled:!0,data:Jn([e,Ea(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=Jn(["0x9061b923",sf([Sa(this.name),r.data])]));try{let e=yield this.provider.call(r);return Fn(e).length%32==4&&qd.throwError("resolver threw error",Cn.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=ef(e,0)),e}catch(e){if(e.code===Cn.errors.CALL_EXCEPTION)return null;throw e}})}_fetchBytes(e,t){return Fd(this,void 0,void 0,function*(){const r=yield this._fetch(e,t);return null!=r?ef(r,0):null})}_getAddress(e,t){const r=Jd[String(e)];if(null==r&&qd.throwError(`unsupported coin type: ${e}`,Cn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=Fn(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Qd(qn([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Qd(qn([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=Ud.toWords(n.slice(2));return e.unshift(t),Ud.encode(r.prefix,e)}}return null}getAddress(e){return Fd(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===Cn.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",Yd(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&qd.throwError("invalid or unsupported coin data",Cn.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r})}getAvatar(){return Fd(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<Xd.length;r++){const n=t.match(Xd[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:tf(t)};case"erc721":case"erc1155":{const r="erc721"===s?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:t});const i=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const a=yield this.provider.formatter.address(o[0]),c=$n(ki.from(o[1]).toHexString(),32);if("erc721"===s){const t=this.provider.formatter.callAddress(yield this.provider.call({to:a,data:Jn(["0x6352211e",c])}));if(i!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===s){const t=ki.from(yield this.provider.call({to:a,data:Jn(["0x00fdd58e",$n(i,32),c])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const u={to:this.provider.formatter.address(o[0]),data:Jn([r,c])};let h=Zd(yield this.provider.call(u),0);if(null==h)return null;e.push({type:"metadata-url-base",content:h}),"erc1155"===s&&(h=h.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=tf(h)),e.push({type:"metadata-url",content:h});const l=yield _d(h);if(!l)return null;e.push({type:"metadata",content:JSON.stringify(l)});let d=l.image;if("string"!=typeof d)return null;if(d.match(/^(https:\/\/|data:)/i));else{if(null==d.match($d))return null;e.push({type:"url-ipfs",content:d}),d=tf(d)}return e.push({type:"url",content:d}),{linkage:e,url:d}}}}}catch(e){}return null})}getContentHash(){return Fd(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+ol.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+ol.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&68===s[1].length){const e={"=":"","+":"-","/":"_"},t=Xo("0x"+s[1]).replace(/[=+\/]/g,t=>e[t]);return"sia://"+t}return qd.throwError("invalid or unsupported content hash data",Cn.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Fd(this,void 0,void 0,function*(){let t=qo(e);t=qn([Yd(64),Yd(t.length),t]),t.length%32!=0&&(t=qn([t,$n("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Kn(t));return null==r||"0x"===r?null:Go(r)})}}let af=null,cf=1;class uf extends Wa{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),xi(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{const t=Mi(new.target,"getNetwork")(e);t?(xi(this,"_network",t),this.emit("network",t,null)):qd.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Fd(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||qd.throwError("no network detected",Cn.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:xi(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Pd(()=>this._ready().then(e=>e,e=>{if(e.code!==Cn.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==af&&(af=new Bd),af}static getNetwork(e){return yd(null==e?"homestead":e)}ccipReadFetch(e,t,r){return Fd(this,void 0,void 0,function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const t=r[e],o=t.replace("{sender}",n).replace("{data}",s),a=t.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:n}),c=yield _d({url:o,errorPassThrough:!0},a,(e,t)=>(e.status=t.statusCode,e));if(c.data)return c.data;const u=c.message||"unknown error";if(c.status>=400&&c.status<500)return qd.throwError(`response not found during CCIP fetch: ${u}`,Cn.errors.SERVER_ERROR,{url:t,errorMessage:u});i.push(u)}return qd.throwError(`error encountered during CCIP fetch: ${i.map(e=>JSON.stringify(e)).join(", ")}`,Cn.errors.SERVER_ERROR,{urls:r,errorMessages:i})})}_getInternalBlockNumber(e){return Fd(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(zd()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=zd(),r=Ui({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const s=zd();return(e=ki.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:s}});return this._internalBlockNumber=r,r.catch(e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)}),(yield r).blockNumber})}poll(){return Fd(this,void 0,void 0,function*(){const e=cf++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)qd.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",qd.makeError("network block skew detected",Cn.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then(e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const s=n.toBlock-this._maxFilterBlockRange;s>n.fromBlock&&(n.fromBlock=s),n.fromBlock<0&&(n.fromBlock=0);const i=this.getLogs(n).then(t=>{e._inflight=!1,0!==t.length&&t.forEach(t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)})}).catch(t=>{this.emit("error",t),e._inflight=!1});t.push(i)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Fd(this,void 0,void 0,function*(){return qd.throwError("provider does not support network detection",Cn.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Fd(this,void 0,void 0,function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Kd(0),this._network;const r=qd.makeError("underlying network changed",Cn.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=zd();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=zd(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return Fd(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,n){return Fd(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=t?s:new Promise((s,i)=>{const o=[];let a=!1;const c=function(){return!!a||(a=!0,o.forEach(e=>{e()}),!1)},u=e=>{e.confirmations<t||c()||s(e)};if(this.on(e,u),o.push(()=>{this.removeListener(e,u)}),n){let r=n.startBlock,s=null;const u=o=>Fd(this,void 0,void 0,function*(){a||(yield Kd(1e3),this.getTransactionCount(n.from).then(h=>Fd(this,void 0,void 0,function*(){if(!a){if(h<=n.nonce)r=o;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==s&&(s=r-3,s<n.startBlock&&(s=n.startBlock));s<=o;){if(a)return;const r=yield this.getBlockWithTransactions(s);for(let s=0;s<r.transactions.length;s++){const o=r.transactions[s];if(o.hash===e)return;if(o.from===n.from&&o.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(o.hash,t);if(c())return;let s="replaced";return o.data===n.data&&o.to===n.to&&o.value.eq(n.value)?s="repriced":"0x"===o.data&&o.from===o.to&&o.value.isZero()&&(s="cancelled"),void i(qd.makeError("transaction was replaced",Cn.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===s||"cancelled"===s,reason:s,replacement:this._wrapTransaction(o),hash:e,receipt:r}))}}s++}}a||this.once("block",u)}}),e=>{a||this.once("block",u)}))});if(a)return;this.once("block",u),o.push(()=>{this.removeListener("block",u)})}if("number"==typeof r&&r>0){const e=setTimeout(()=>{c()||i(qd.makeError("timeout exceeded",Cn.errors.TIMEOUT,{timeout:r}))},r);e.unref&&e.unref(),o.push(()=>{clearTimeout(e)})}})})}getBlockNumber(){return Fd(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return ki.from(e)}catch(t){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return ki.from(n)}catch(e){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}})}getTransactionCount(e,t){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return ki.from(n).toNumber()}catch(e){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}})}getCode(e,t){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return Kn(n)}catch(e){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}})}getStorageAt(e,t,r){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Ui({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>Yn(e))}),s=yield this.perform("getStorageAt",n);try{return Kn(s)}catch(e){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:s,error:e})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==Vn(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&qd.throwError("Transaction hash mismatch from Provider.sendTransaction.",Cn.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>Fd(this,void 0,void 0,function*(){let s;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(s={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const i=yield this._waitForTransaction(e.hash,t,n,s);return null==i&&0===t?null:(this._emitted["t:"+e.hash]=i.blockNumber,0===i.status&&qd.throwError("transaction failed",Cn.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:i}),i)}),n}sendTransaction(e){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then(e=>Kn(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}})}_getTransactionRequest(e){return Fd(this,void 0,void 0,function*(){const t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?ki.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?Kn(e):null))}),this.formatter.transactionRequest(yield Ui(r))})}_getFilter(e){return Fd(this,void 0,void 0,function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter(yield Ui(t))})}_call(e,t,r){return Fd(this,void 0,void 0,function*(){r>=10&&qd.throwError("CCIP read exceeded maximum redirections",Cn.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,s=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===s.substring(0,10)&&Vn(s)%32==4)try{const i=Wn(s,4),o=Wn(i,0,32);ki.from(o).eq(n)||qd.throwError("CCIP Read sender did not match",Cn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const a=[],c=ki.from(Wn(i,32,64)).toNumber(),u=ki.from(Wn(i,c,c+32)).toNumber(),h=Wn(i,c+32);for(let t=0;t<u;t++){const r=Zd(h,32*t);null==r&&qd.throwError("CCIP Read contained corrupt URL string",Cn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),a.push(r)}const l=ef(i,64);ki.from(Wn(i,100,128)).isZero()||qd.throwError("CCIP Read callback selector included junk",Cn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=Wn(i,96,100),f=ef(i,128),p=yield this.ccipReadFetch(e,l,a);null==p&&qd.throwError("CCIP Read disabled or provided no URLs",Cn.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const m={to:n,data:Jn([d,sf([p,f])])};return this._call(m,t,r+1)}catch(e){if(e.code===Cn.errors.SERVER_ERROR)throw e}try{return Kn(s)}catch(r){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:s,error:r})}})}call(e,t){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Ui({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)})}estimateGas(e){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ui({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return ki.from(r)}catch(e){return qd.throwError("bad result from backend",Cn.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}})}_getAddress(e){return Fd(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&qd.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&qd.throwError("ENS name not configured",Cn.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return Fd(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(Hn(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),Hn(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){qd.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Pd(()=>Fd(this,void 0,void 0,function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map(e=>this._wrapTransaction(e)),r}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Fd(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Pd(()=>Fd(this,void 0,void 0,function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}),{oncePoll:this})})}getTransactionReceipt(e){return Fd(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Pd(()=>Fd(this,void 0,void 0,function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}),{oncePoll:this})})}getLogs(e){return Fd(this,void 0,void 0,function*(){yield this.getNetwork();const t=yield Ui({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),Bd.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return Fd(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Fd(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&qd.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return Fd(this,void 0,void 0,function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new of(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}})}_getResolver(e,t){return Fd(this,void 0,void 0,function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||qd.throwError("network does not support ENS",Cn.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Ea(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null})}resolveName(e){return Fd(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(Hn(e))throw t}"string"!=typeof e&&qd.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null})}lookupAddress(e){return Fd(this,void 0,void 0,function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=Zd(yield this.call({to:r,data:"0x691f3431"+Ea(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n})}getAvatar(e){return Fd(this,void 0,void 0,function*(){let t=null;if(Hn(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new of(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==Cn.errors.CALL_EXCEPTION)throw e}try{const e=Zd(yield this.call({to:n,data:"0x691f3431"+Ea(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==Cn.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url})}perform(e,t){return qd.throwError(e+" not implemented",Cn.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){const n=new Wd(Hd(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],s=Hd(e);return this._events=this._events.filter(e=>e.tag!==s||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(n.push(e),!1))),n.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=Hd(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=Hd(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,s=Hd(e);return this._events=this._events.filter(e=>e.tag!==s||e.listener!=t||(!!n||(n=!0,r.push(e),!1))),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Hd(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var hf=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const lf=new Cn(Dd),df=["call","estimateGas"];function ff(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=Hn(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=ff(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return ff(JSON.parse(e),t)}catch(e){}return null}function pf(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=ff(t,!0);if(e)return e.data;lf.throwError("missing revert data in call exception; Transaction reverted without a reason string",Cn.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=ff(t.body,!1);null==r&&(r=ff(t,!1)),r&&lf.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Cn.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let s=t.message;throw t.code===Cn.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?s=t.error.message:"string"==typeof t.body?s=t.body:"string"==typeof t.responseText&&(s=t.responseText),s=(s||"").toLowerCase(),s.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&lf.throwError("insufficient funds for intrinsic transaction cost",Cn.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),s.match(/nonce (is )?too low/i)&&lf.throwError("nonce has already been used",Cn.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),s.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&lf.throwError("replacement fee too low",Cn.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),s.match(/only replay-protected/i)&&lf.throwError("legacy pre-eip-155 transactions not supported",Cn.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),df.indexOf(e)>=0&&s.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&lf.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Cn.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function mf(e){return new Promise(function(t){setTimeout(t,e)})}function gf(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function yf(e){return e?e.toLowerCase():e}const wf={};class vf extends Xa{constructor(e,t,r){if(super(),e!==wf)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");xi(this,"provider",t),null==r&&(r=0),"string"==typeof r?(xi(this,"_address",this.provider.formatter.address(r)),xi(this,"_index",null)):"number"==typeof r?(xi(this,"_index",r),xi(this,"_address",null)):lf.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return lf.throwError("cannot alter JSON-RPC Signer connection",Cn.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Af(wf,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&lf.throwError("unknown account #"+this._index,Cn.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Li(e);const t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){const r=Li(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>hf(this,void 0,void 0,function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&lf.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),Ui({tx:Ui(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&lf.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then(e=>e,e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&lf.throwError("user rejected transaction",Cn.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),pf("sendTransaction",e,n)))})}signTransaction(e){return lf.throwError("signing transactions is unsupported",Cn.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return hf(this,void 0,void 0,function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Pd(()=>hf(this,void 0,void 0,function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}})}signMessage(e){return hf(this,void 0,void 0,function*(){const t="string"==typeof e?qo(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Kn(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&lf.throwError("user rejected signing",Cn.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}})}_legacySignMessage(e){return hf(this,void 0,void 0,function*(){const t="string"==typeof e?qo(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Kn(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&lf.throwError("user rejected signing",Cn.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}})}_signTypedData(e,t,r){return hf(this,void 0,void 0,function*(){const n=yield Ga.resolveNames(e,t,r,e=>this.provider.resolveName(e)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Ga.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&lf.throwError("user rejected signing",Cn.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:n.domain,types:t,value:n.value}}),e}})}unlock(e){return hf(this,void 0,void 0,function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class Af extends vf{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}const bf={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Ef extends uf{constructor(e,t){let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=Mi(this.constructor,"defaultUrl")()),xi(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Li(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return hf(this,void 0,void 0,function*(){yield mf(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=Mi(this.constructor,"getNetwork");try{return t(ki.from(e).toNumber())}catch(t){return lf.throwError("could not detect network",Cn.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return lf.throwError("could not detect network",Cn.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new vf(wf,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Gi(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const s=_d(this.connection,JSON.stringify(r),gf).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return n&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[yf(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[yf(t.address),t.blockTag]];case"getCode":return["eth_getCode",[yf(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[yf(t.address),$n(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[Mi(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[Mi(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=yf(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return hf(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&ki.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Li(t)).transaction=Li(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&lf.throwError(e+" not implemented",Cn.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return pf(e,r,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function n(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),n.then(function(){return mf(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){n()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Li(bf);if(t)for(const e in t)t[e]&&(r[e]=!0);Di(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;const r=Yn(ki.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=Kn(e[t]))}),e.accessList&&(n.accessList=$h(e.accessList)),n}}var Sf=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((n=n.apply(e,t||[])).next())})};const _f=new Cn(Dd);var Pf,kf,If=Object.freeze({__proto__:null,BaseProvider:uf,Formatter:Bd,JsonRpcProvider:Ef,JsonRpcSigner:vf,Provider:Wa,Resolver:of,StaticJsonRpcProvider:class extends Ef{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return Sf(this,void 0,void 0,function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||_f.throwError("no network detected",Cn.errors.UNKNOWN_ERROR,{}),null==this._network&&(xi(this,"_network",t),this.emit("network",t,null))),t})}},getNetwork:yd}),Rf="init",Tf="logout",Nf="getEthereumProvider",Of="configureEmbeddedWallet",Cf="createEmbeddedWallet",xf="recoverEmbeddedWallet",Mf="listWallets",Uf="getWallet",Df="logInWithEmailPassword",Lf="signUpWithEmailPassword",Bf="signUpGuest",Ff="requestEmailVerification",qf="resetPassword",Gf="requestResetPassword",jf="verifyEmail",Hf="initOAuth",zf="initLinkOAuth",Kf="unlinkOAuth",Vf="initSiwe",Wf="loginWithSiwe",Jf="initLinkSiwe",Yf="linkWithSiwe",Qf="unlinkWallet",$f="storeCredentials",Xf="sendSignatureTransactionIntentRequest",Zf="signMessage",ep="signTypedData",tp="getEmbeddedState",rp="getAccessToken",np="getUser",sp="validateAndRefreshToken",ip="setThirdPartyToken",op="logInWithIdToken",ap="requestEmailOtp",cp="logInWithEmailOtp",up="verifyEmailOtp",hp="requestPhoneOtp",lp="logInWithPhoneOtp",dp="linkPhoneOtp",fp="addEmail",pp={},mp=function(e){var t=JSON.stringify(e);console.log("callbackToGame: ".concat(t)),console.log(t),void 0!==window.ue?void 0===window.ue.jsconnector?console.error("Unreal JSConnector not defined"):window.ue.jsconnector.sendtogame(t):"undefined"!=typeof blu_event?blu_event("sendtogame",t):"undefined"!=typeof UnityPostMessage?UnityPostMessage(t):void 0!==window.parent.unityWebView?window.parent.unityWebView.sendMessage("WebViewObject",t):void 0!==window.Unity?window.Unity.call(t):console.error("No available game callbacks to call from OpenfortSDK platform-bridge")};window.requestAccessToken=function(){return new Promise(function(e,t){var r=Date.now()+Math.random();pp[r]={resolve:e,reject:t},mp({responseFor:ip,requestId:r,success:!0})})},window.onAccessTokenReceived=function(e,t){pp[e]&&(pp[e].resolve(t),delete pp[e])},window.callFunction=function(n){return t(void 0,void 0,void 0,function(){var s,i,o,a,c,u,h,l,d,f,p,m,g,y,w,v,A,b,E,S,_,P,k,I,R;return r(this,function(T){switch(T.label){case 0:console.log("Call function ".concat(n)),s=null,i=null,T.label=1;case 1:switch(T.trys.push([1,82,,83]),o=JSON.parse(n),s=o.fxName,i=o.requestId,a=o.data,s){case Rf:return[3,2];case Hf:return[3,3];case Tf:return[3,5];case zf:return[3,7];case Kf:return[3,9];case Vf:return[3,11];case Wf:return[3,13];case Jf:return[3,15];case Yf:return[3,17];case Qf:return[3,19];case $f:return[3,21];case Xf:return[3,23];case Zf:return[3,25];case ep:return[3,27];case tp:return[3,29];case sp:return[3,31];case Cf:return[3,33];case xf:return[3,35];case Uf:return[3,37];case Mf:return[3,39];case Of:return[3,41];case Gf:return[3,43];case qf:return[3,45];case Ff:return[3,47];case jf:return[3,49];case Df:return[3,51];case Bf:return[3,53];case Lf:return[3,55];case op:return[3,57];case ap:return[3,59];case cp:return[3,61];case up:return[3,63];case hp:return[3,65];case lp:return[3,67];case dp:return[3,69];case fp:return[3,71];case rp:return[3,73];case np:return[3,75];case Nf:return[3,77];case ip:return[3,79]}return[3,80];case 2:return S=JSON.parse(a),Pf||(c={baseConfiguration:{publishableKey:S.publishableKey,nativeAppIdentifier:S.nativeAppIdentifier},shieldConfiguration:S.shieldPublishableKey?{shieldPublishableKey:S.shieldPublishableKey,shieldDebug:null!==(P=S.shieldDebug)&&void 0!==P&&P}:void 0,thirdPartyAuth:(null===(k=S.thirdPartyAuth)||void 0===k?void 0:k.provider)?{provider:S.thirdPartyAuth.provider,getAccessToken:function(){return t(void 0,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,window.requestAccessToken()];case 1:return[2,e.sent()]}})})}}:void 0,overrides:{backendUrl:null!==(I=null==S?void 0:S.backendUrl)&&void 0!==I?I:"https://api.openfort.io",iframeUrl:null==S?void 0:S.iframeUrl,shieldUrl:null!==(R=null==S?void 0:S.shieldUrl)&&void 0!==R?R:"https://shield.openfort.io"}},Pf=new yi(c),console.log("Openfort client initialized")),ud.createRandom(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 3:return S=JSON.parse(a),[4,Pf.auth.initOAuth({provider:S.provider,redirectTo:S.redirectTo,options:S.options})];case 4:return u=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:u}),[3,81];case 5:return[4,Pf.auth.logout()];case 6:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 7:return S=JSON.parse(a),[4,Pf.auth.initLinkOAuth({provider:S.provider,redirectTo:S.redirectTo,options:S.options})];case 8:return h=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:h}),[3,81];case 9:return S=JSON.parse(a),[4,Pf.auth.unlinkOAuth({provider:S.provider})];case 10:return v=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},v)),[3,81];case 11:return S=JSON.parse(a),[4,Pf.auth.initSiwe({address:S.address})];case 12:return l=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},l)),[3,81];case 13:return S=JSON.parse(a),[4,Pf.auth.loginWithSiwe({signature:S.signature,message:S.message,walletClientType:S.walletClientType,connectorType:S.connectorType,address:S.address})];case 14:return w=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},w)),[3,81];case 15:return S=JSON.parse(a),[4,Pf.auth.initLinkSiwe({address:S.address})];case 16:return v=T.sent(),mp(e(e({},v),{responseFor:s,requestId:i,success:!0})),[3,81];case 17:return S=JSON.parse(a),[4,Pf.auth.linkWithSiwe({signature:S.signature,message:S.message,walletClientType:S.walletClientType,connectorType:S.connectorType,address:S.address,chainId:S.chainId})];case 18:return v=T.sent(),mp(e(e({},v),{responseFor:s,requestId:i,success:!0})),[3,81];case 19:return S=JSON.parse(a),[4,Pf.auth.unlinkWallet({address:S.address,chainId:S.chainId})];case 20:return v=T.sent(),mp(e(e({},v),{responseFor:s,requestId:i,success:!0})),[3,81];case 21:return S=JSON.parse(a),[4,Pf.auth.storeCredentials({token:S.token,userId:S.userId})];case 22:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 23:return S=JSON.parse(a),[4,Pf.proxy.sendSignatureTransactionIntentRequest(S.transactionIntentId,S.userOperationHash,S.signature,S.optimistic)];case 24:return d=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},d)),[3,81];case 25:return S=JSON.parse(a),[4,Pf.embeddedWallet.signMessage(S.message,S.options)];case 26:return f=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:f}),[3,81];case 27:return S=JSON.parse(a),[4,Pf.embeddedWallet.signTypedData(S.domain,S.types,S.value)];case 28:return f=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:f}),[3,81];case 29:return[4,Pf.embeddedWallet.getEmbeddedState()];case 30:return p=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:p}),[3,81];case 31:return S=JSON.parse(a),[4,Pf.validateAndRefreshToken(S.forceRefresh)];case 32:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 33:return S=JSON.parse(a),[4,Pf.embeddedWallet.create({chainType:S.chainType,accountType:S.accountType,recoveryParams:S.recoveryParams})];case 34:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 35:return S=JSON.parse(a),[4,Pf.embeddedWallet.recover({account:S.accountAddress,recoveryParams:S.recoveryParams})];case 36:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 37:return[4,Pf.embeddedWallet.get()];case 38:return m=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},m)),[3,81];case 39:return S=JSON.parse(a),[4,Pf.embeddedWallet.list(e({},S))];case 40:return g=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},g)),[3,81];case 41:return S=JSON.parse(a),[4,Pf.embeddedWallet.configure({chainId:S.chainId,recoveryParams:S.recoveryParams})];case 42:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 43:return S=JSON.parse(a),[4,Pf.auth.requestResetPassword({email:S.email,redirectUrl:S.redirectUrl})];case 44:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 45:return S=JSON.parse(a),[4,Pf.auth.resetPassword({password:S.password,token:S.token})];case 46:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 47:return S=JSON.parse(a),[4,Pf.auth.requestEmailVerification({email:S.email,redirectUrl:S.redirectUrl})];case 48:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 49:return S=JSON.parse(a),[4,Pf.auth.verifyEmail({token:S.token,callbackURL:S.callbackURL})];case 50:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 51:return S=JSON.parse(a),[4,Pf.auth.logInWithEmailPassword({email:S.email,password:S.password})];case 52:return y=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},y)),[3,81];case 53:return[4,Pf.auth.signUpGuest()];case 54:return y=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},y)),[3,81];case 55:return S=JSON.parse(a),[4,Pf.auth.signUpWithEmailPassword({email:S.email,password:S.password,name:S.name,callbackURL:S.callbackURL})];case 56:return y=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},y)),[3,81];case 57:return S=JSON.parse(a),[4,Pf.auth.logInWithIdToken({provider:S.provider,token:S.token})];case 58:return w=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},w)),[3,81];case 59:return S=JSON.parse(a),[4,Pf.auth.requestEmailOtp({email:S.email})];case 60:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 61:return S=JSON.parse(a),[4,Pf.auth.logInWithEmailOtp({email:S.email,otp:S.otp})];case 62:return w=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},w)),[3,81];case 63:return S=JSON.parse(a),[4,Pf.auth.verifyEmailOtp({email:S.email,otp:S.otp})];case 64:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 65:return S=JSON.parse(a),[4,Pf.auth.requestPhoneOtp({phoneNumber:S.phoneNumber})];case 66:return T.sent(),mp({responseFor:s,requestId:i,success:!0}),[3,81];case 67:return S=JSON.parse(a),[4,Pf.auth.logInWithPhoneOtp({phoneNumber:S.phoneNumber,otp:S.otp})];case 68:return w=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},w)),[3,81];case 69:return S=JSON.parse(a),[4,Pf.auth.linkPhoneOtp({phoneNumber:S.phoneNumber,otp:S.otp})];case 70:return w=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},w)),[3,81];case 71:return S=JSON.parse(a),[4,Pf.auth.addEmail({email:S.email,callbackURL:S.callbackURL})];case 72:return v=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},v)),[3,81];case 73:return[4,Pf.getAccessToken()];case 74:return A=T.sent(),mp({responseFor:s,requestId:i,success:!0,result:A}),[3,81];case 75:return[4,Pf.user.get()];case 76:return b=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},b)),[3,81];case 77:return[4,Pf.embeddedWallet.getEthereumProvider()];case 78:return E=T.sent(),mp(e({responseFor:s,requestId:i,success:!0},E)),[3,81];case 79:return S=JSON.parse(a),window.onAccessTokenReceived(i,S.token),[3,81];case 80:return[3,81];case 81:return[3,83];case 82:return _=T.sent(),console.log(_),mp({responseFor:s,requestId:i,success:!1,error:_.message,errorCode:_ instanceof Er?_.error:null}),[3,83];case 83:return[2]}})})},console.log("index.ts loaded"),kf=function(){mp({responseFor:"init",requestId:"1",success:!0})},"complete"===document.readyState?kf():window.addEventListener("load",kf);const gp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,yp=globalThis,wp="9.47.1";function vp(){return Ap(yp),yp}function Ap(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||wp,t[wp]=t[wp]||{}}function bp(e,t,r=yp){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[wp]=n[wp]||{};return s[e]||(s[e]=t())}const Ep={};function Sp(e){if(!("console"in yp))return e();const t=yp.console,r={},n=Object.keys(Ep);n.forEach(e=>{const n=Ep[e];r[e]=t[e],t[e]=n});try{return e()}finally{n.forEach(e=>{t[e]=r[e]})}}function _p(){return kp().enabled}function Pp(e,...t){gp&&_p()&&Sp(()=>{yp.console[e](`Sentry Logger [${e}]:`,...t)})}function kp(){return gp?bp("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Ip={enable:function(){kp().enabled=!0},disable:function(){kp().enabled=!1},isEnabled:_p,log:function(...e){Pp("log",...e)},warn:function(...e){Pp("warn",...e)},error:function(...e){Pp("error",...e)}},Rp="?",Tp=/\(error: (.*)\)/,Np=/captureMessage|captureException/;function Op(e){return e[e.length-1]||{}}const Cp="<anonymous>";const xp=Object.prototype.toString;function Mp(e){switch(xp.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Hp(e,Error)}}function Up(e,t){return xp.call(e)===`[object ${t}]`}function Dp(e){return Up(e,"ErrorEvent")}function Lp(e){return Up(e,"DOMError")}function Bp(e){return Up(e,"String")}function Fp(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function qp(e){return Up(e,"Object")}function Gp(e){return"undefined"!=typeof Event&&Hp(e,Event)}function jp(e){return Boolean(e?.then&&"function"==typeof e.then)}function Hp(e,t){try{return e instanceof t}catch{return!1}}const zp=yp;function Kp(e,t){const r=e,n=[];if(!r?.tagName)return"";if(zp.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=t?.length?t.filter(e=>r.getAttribute(e)).map(e=>[e,r.getAttribute(e)]):null;if(s?.length)s.forEach(e=>{n.push(`[${e[0]}="${e[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const e=r.className;if(e&&Bp(e)){const t=e.split(/\s+/);for(const e of t)n.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const e of i){const t=r.getAttribute(e);t&&n.push(`[${e}="${t}"]`)}return n.join("")}function Vp(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Wp(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{gp&&Ip.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Jp(e){if(Mp(e))return{message:e.message,name:e.name,stack:e.stack,...Qp(e)};if(Gp(e)){const t={type:e.type,target:Yp(e.target),currentTarget:Yp(e.currentTarget),...Qp(e)};return"undefined"!=typeof CustomEvent&&Hp(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Yp(e){try{return t=e,"undefined"!=typeof Element&&Hp(t,Element)?function(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||80;for(;r&&i++<n&&(u=Kp(r,h),!("html"===u||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,r=r.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}var t}function Qp(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function $p(e=function(){const e=yp;return e.crypto||e.msCrypto}()){let t=()=>16*Math.random();try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"");e?.getRandomValues&&(t=()=>{const t=new Uint8Array(1);return e.getRandomValues(t),t[0]})}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,e=>(e^(15&t())>>e/4).toString(16))}function Xp(e,t,r){const n=e.exception=e.exception||{},s=n.values=n.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Zp(e,t){const r=function(e){return e.exception?.values?.[0]}(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n?.data,...t.data};r.mechanism.data=e}}function em(e){if(function(e){try{return e.__sentry_captured__}catch{}}(e))return!0;try{Wp(e,"__sentry_captured__",!0)}catch{}return!1}function tm(){return Date.now()/1e3}let rm;function nm(){return(rm??(rm=function(){const{performance:e}=yp;if(!e?.now||!e.timeOrigin)return tm;const t=e.timeOrigin;return()=>(t+e.now())/1e3}()))()}function sm(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||nm(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:$p()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function im(e,t,r=2){if(!t||"object"!=typeof t||r<=0)return t;if(e&&0===Object.keys(t).length)return e;const n={...e};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=im(n[e],t[e],r-1));return n}function om(){return $p()}function am(){return $p().substring(16)}const cm="_sentrySpan";function um(e,t){t?Wp(e,cm,t):delete e[cm]}function hm(e){return e[cm]}class lm{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:om(),sampleRand:Math.random()}}clone(){const e=new lm;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,um(e,hm(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&sm(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,r=t instanceof lm?t.getScopeData():qp(t)?e:void 0,{tags:n,extra:s,user:i,contexts:o,level:a,fingerprint:c=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...s},this._contexts={...this._contexts,...o},i&&Object.keys(i).length&&(this._user=i),a&&(this._level=a),c.length&&(this._fingerprint=c),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,um(this,void 0),this._attachments=[],this.setPropagationContext({traceId:om(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:tm(),...e,message:e.message?Vp(e.message,2048):e.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:hm(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=im(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t?.event_id||$p();if(!this._client)return gp&&Ip.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r?.event_id||$p();if(!this._client)return gp&&Ip.warn("No client configured on scope - will not capture message!"),n;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureEvent(e,t){const r=t?.event_id||$p();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(gp&&Ip.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class dm{constructor(e,t){let r,n;r=e||new lm,n=t||new lm,this._stack=[{scope:r}],this._isolationScope=n}withScope(e){const t=this._pushScope();let r;try{r=e(t)}catch(e){throw this._popScope(),e}return jp(r)?r.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function fm(){const e=Ap(vp());return e.stack=e.stack||new dm(bp("defaultCurrentScope",()=>new lm),bp("defaultIsolationScope",()=>new lm))}function pm(e){return fm().withScope(e)}function mm(e,t){const r=fm();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function gm(e){return fm().withScope(()=>e(fm().getIsolationScope()))}function ym(e){const t=Ap(e);return t.acs?t.acs:{withIsolationScope:gm,withScope:pm,withSetScope:mm,withSetIsolationScope:(e,t)=>gm(t),getCurrentScope:()=>fm().getScope(),getIsolationScope:()=>fm().getIsolationScope()}}function wm(){return ym(vp()).getCurrentScope()}function vm(){return ym(vp()).getIsolationScope()}function Am(){return bp("globalScope",()=>new lm)}function bm(){return wm().getClient()}function Em(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=t,i={trace_id:r,span_id:s||am()};return n&&(i.parent_span_id=n),i}const Sm="sentry.source",_m="sentry.sample_rate",Pm="sentry.op",km="sentry.origin",Im="sentry.profile_id",Rm="sentry.exclusive_time";function Tm(e){return{scope:e._sentryScope,isolationScope:e._sentryIsolationScope}}const Nm=/^sentry-/;function Om(e){const t=function(e){if(!e||!Bp(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const r=Cm(t);return Object.entries(r).forEach(([t,r])=>{e[t]=r}),e},{});return Cm(e)}(e);if(!t)return;const r=Object.entries(t).reduce((e,[t,r])=>{if(t.match(Nm)){e[t.slice(7)]=r}return e},{});return Object.keys(r).length>0?r:void 0}function Cm(e){return e.split(",").map(e=>e.split("=").map(e=>{try{return decodeURIComponent(e.trim())}catch{return}})).reduce((e,[t,r])=>(t&&r&&(e[t]=r),e),{})}let xm=!1;function Mm(e){const{spanId:t,traceId:r,isRemote:n}=e.spanContext(),s=n?t:Bm(e).parent_span_id,i=Tm(e).scope;return{parent_span_id:s,span_id:n?i?.getPropagationContext().propagationSpanId||am():t,trace_id:r}}function Um(e){return e&&e.length>0?e.map(({context:{spanId:e,traceId:t,traceFlags:r,...n},attributes:s})=>({span_id:e,trace_id:t,sampled:1===r,attributes:s,...n})):void 0}function Dm(e){return"number"==typeof e?Lm(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Lm(e.getTime()):nm()}function Lm(e){return e>9999999999?e/1e3:e}function Bm(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:n,startTime:s,name:i,endTime:o,status:a,links:c}=e;return{span_id:t,trace_id:r,data:n,description:i,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0,start_timestamp:Dm(s),timestamp:Dm(o)||void 0,status:Fm(a),op:n[Pm],origin:n[km],links:Um(c)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Fm(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}function qm(e){return e._sentryRootSpan||e}function Gm(){xm||(Sp(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),xm=!0)}const jm="production",Hm=/^o(\d+)\./,zm=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Km(e,t=!1){const{host:r,path:n,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${r}${i?`:${i}`:""}/${n?`${n}/`:n}${o}`}function Vm(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Wm(e){const t="string"==typeof e?function(e){const t=zm.exec(e);if(!t)return void Sp(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});const[r,n,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const h=u.split("/");if(h.length>1&&(c=h.slice(0,-1).join("/"),u=h.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Vm({host:i,pass:s,path:c,projectId:u,port:o,protocol:r,publicKey:n})}(e):Vm(e);if(t&&function(e){if(!gp)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(Ip.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(Ip.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Ip.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(Ip.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}function Jm(e,t){const r=t.getOptions(),{publicKey:n,host:s}=t.getDsn()||{};let i;r.orgId?i=String(r.orgId):s&&(i=function(e){const t=e.match(Hm);return t?.[1]}(s));const o={environment:r.environment||jm,release:r.release,public_key:n,trace_id:e,org_id:i};return t.emit("createDsc",o),o}function Ym(e){const t=bm();if(!t)return{};const r=qm(e),n=Bm(r),s=n.data,i=r.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[_m]??s["sentry.previous_trace_sample_rate"];function a(e){return"number"!=typeof o&&"string"!=typeof o||(e.sample_rate=`${o}`),e}const c=r._frozenDsc;if(c)return a(c);const u=i?.get("sentry.dsc"),h=u&&Om(u);if(h)return a(h);const l=Jm(e.spanContext().traceId,t),d=s[Sm],f=n.description;return"url"!==d&&f&&(l.transaction=f),function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||bm()?.getOptions();return!(!t||null==t.tracesSampleRate&&!t.tracesSampler)}()&&(l.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return 1===t}(r)),l.sample_rand=i?.get("sentry.sample_rand")??Tm(r).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,r),l}function Qm(e,t=100,r=1/0){try{return Xm("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function $m(e,t=3,r=102400){const n=Qm(e,t);return s=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>r?$m(e,t-1,r):n;var s}function Xm(e,t,r=1/0,n=1/0,s=function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function r(t){e.delete(t)}return[t,r]}()){const[i,o]=s;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if("object"==typeof(r=t)&&null!==r&&(r.__isVue||r._isVue))return"[VueViewModel]";if(function(e){return qp(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${function(e){try{return e&&"function"==typeof e&&e.name||Cp}catch{return Cp}}(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}var r}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&"function"==typeof u.toJSON)try{return Xm("",u.toJSON(),c-1,n,s)}catch{}const h=Array.isArray(t)?[]:{};let l=0;const d=Jp(t);for(const e in d){if(!Object.prototype.hasOwnProperty.call(d,e))continue;if(l>=n){h[e]="[MaxProperties ~]";break}const t=d[e];h[e]=Xm(e,t,c-1,n,s),l++}return o(t),h}function Zm(e,t=[]){return[e,t]}function eg(e,t){const[r,n]=e;return[r,[...n,t]]}function tg(e,t){const r=e[1];for(const e of r){if(t(e,e[0].type))return!0}return!1}function rg(e){const t=Ap(yp);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function ng(e){const[t,r]=e;let n=JSON.stringify(t);function s(e){"string"==typeof n?n="string"==typeof e?n+e:[rg(n),e]:n.push("string"==typeof e?rg(e):e)}for(const e of r){const[t,r]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)s(r);else{let e;try{e=JSON.stringify(r)}catch{e=JSON.stringify(Qm(r))}s(e)}}return"string"==typeof n?n:function(e){const t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(n)}function sg(e){const t="string"==typeof e.data?rg(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const ig={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function og(e){return ig[e]}function ag(e){if(!e?.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function cg(e,t,r,n){const s=ag(r),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r?.sdk);const o=function(e,t,r,n){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:Km(n)},...s&&{trace:s}}}(e,s,n,t);delete e.sdkProcessingMetadata;return Zm(o,[[{type:i},e]])}function ug(e){return new lg(t=>{t(e)})}function hg(e){return new lg((t,r)=>{r(e)})}class lg{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new lg((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new lg((t,r)=>{let n,s;return this.then(t=>{s=!1,n=t,e&&e()},t=>{s=!0,n=t,e&&e()}).then(()=>{s?r(n):t(n)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&(jp(t)?t.then(r,n):(this._state=e,this._value=t,this._executeHandlers()))},r=e=>{t(1,e)},n=e=>{t(2,e)};try{e(r,n)}catch(e){n(e)}}}function dg(e,t,r,n=0){return new lg((s,i)=>{const o=e[n];if(null===t||"function"!=typeof o)s(t);else{const a=o({...t},r);gp&&o.id&&null===a&&Ip.log(`Event processor "${o.id}" dropped event`),jp(a)?a.then(t=>dg(e,t,r,n+1).then(s)).then(null,i):dg(e,a,r,n+1).then(s).then(null,i)}})}function fg(e,t){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(r).length&&(e.extra={...r,...e.extra});Object.keys(n).length&&(e.tags={...n,...e.tags});Object.keys(s).length&&(e.user={...s,...e.user});Object.keys(i).length&&(e.contexts={...i,...e.contexts});o&&(e.level=o);a&&"transaction"!==e.type&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:Mm(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ym(t),...e.sdkProcessingMetadata};const r=qm(t),n=Bm(r).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}(e,n),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function pg(e,t){const{extra:r,tags:n,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:h,attachments:l,propagationContext:d,transactionName:f,span:p}=t;mg(e,"extra",r),mg(e,"tags",n),mg(e,"user",s),mg(e,"contexts",i),e.sdkProcessingMetadata=im(e.sdkProcessingMetadata,a,2),o&&(e.level=o),f&&(e.transactionName=f),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),h.length&&(e.eventProcessors=[...e.eventProcessors,...h]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...d}}function mg(e,t,r){e[t]=im(e[t],r,1)}let gg,yg,wg;function vg(e,t,r,n,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||$p(),timestamp:t.timestamp||tm()},u=r.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:r,release:n,dist:s,maxValueLength:i=250}=t;e.environment=e.environment||r||jm,!e.release&&n&&(e.release=n);!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&(o.url=Vp(o.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,u),s&&s.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){const r=function(e){const t=yp._sentryDebugIds;if(!t)return{};const r=Object.keys(t);return wg&&r.length===yg||(yg=r.length,wg=r.reduce((r,n)=>{gg||(gg={});const s=gg[n];if(s)r[s[0]]=s[1];else{const s=e(n);for(let e=s.length-1;e>=0;e--){const i=s[e],o=i?.filename,a=t[n];if(o&&a){r[o]=a,gg[n]=[o,a];break}}}return r},{})),wg}(t);e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}(c,e.stackParser);const h=function(e,t){if(!t)return e;const r=e?e.clone():new lm;return r.update(t),r}(n,r.captureContext);r.mechanism&&Zp(c,r.mechanism);const l=s?s.getEventProcessors():[],d=Am().getScopeData();if(i){pg(d,i.getScopeData())}if(h){pg(d,h.getScopeData())}const f=[...r.attachments||[],...d.attachments];f.length&&(r.attachments=f),fg(c,d);return dg([...l,...d.eventProcessors],c,r).then(e=>(e&&function(e){const t={};if(e.exception?.values?.forEach(e=>{e.stacktrace?.frames?.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([e,t])=>{r.push({type:"sourcemap",code_file:e,debug_id:t})})}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:Qm(e.data,t,r)}}))},...e.user&&{user:Qm(e.user,t,r)},...e.contexts&&{contexts:Qm(e.contexts,t,r)},...e.extra&&{extra:Qm(e.extra,t,r)}};e.contexts?.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=Qm(e.contexts.trace.data,t,r)));e.spans&&(n.spans=e.spans.map(e=>({...e,...e.data&&{data:Qm(e.data,t,r)}})));e.contexts?.flags&&n.contexts&&(n.contexts.flags=Qm(e.contexts.flags,3,r));return n}(e,o,a):e))}function Ag(e,t,r){return t||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){const r={sentry_version:"7"};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}(e,r)}`}const bg=[];function Eg(e,t){for(const r of t)r?.afterAllSetup&&r.afterAllSetup(e)}function Sg(e,t,r){if(r[t.name])gp&&Ip.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===bg.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),bg.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,n)=>r(t,n,e))}if("function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign((t,n)=>r(t,n,e),{id:t.name});e.addEventProcessor(n)}gp&&Ip.log(`Integration installed: ${t.name}`)}}const _g="Not capturing exception because it's already been captured.",Pg="Discarded session because of missing or non-string release",kg=Symbol.for("SentryInternalError"),Ig=Symbol.for("SentryDoNotSendEventError");function Rg(e){return{message:e,[kg]:!0}}function Tg(e){return{message:e,[Ig]:!0}}function Ng(e){return!!e&&"object"==typeof e&&kg in e}function Og(e){return!!e&&"object"==typeof e&&Ig in e}class Cg{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Wm(e.dsn):gp&&Ip.warn("No DSN provided, client will not send events."),this._dsn){const t=Ag(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){const n=$p();if(em(e))return gp&&Ip.log(_g),n;const s={event_id:n,...t};return this._process(this.eventFromException(e,s).then(e=>this._captureEvent(e,s,r))),s.event_id}captureMessage(e,t,r,n){const s={event_id:$p(),...r},i=Fp(e)?e:String(e),o=null===(a=e)||Fp(a)||"object"!=typeof a&&"function"!=typeof a?this.eventFromMessage(i,t,s):this.eventFromException(e,s);var a;return this._process(o.then(e=>this._captureEvent(e,s,n))),s.event_id}captureEvent(e,t,r){const n=$p();if(t?.originalException&&em(t.originalException))return gp&&Ip.log(_g),n;const s={event_id:n,...t},i=e.sdkProcessingMetadata||{},o=i.capturedSpanScope,a=i.capturedSpanIsolationScope;return this._process(this._captureEvent(e,s,o||r,a)),s.event_id}captureSession(e){this.sendSession(e),sm(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>t.flush(e).then(e=>r&&e))):ug(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.emit("close"),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Sg(this,e,this._integrations),t||Eg(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=cg(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=eg(r,sg(e));const n=this.sendEnvelope(r);n&&n.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const{release:t,environment:r=jm}=this._options;if("aggregates"in e){const n=e.attrs||{};if(!n.release&&!t)return void(gp&&Ip.warn(Pg));n.release=n.release||t,n.environment=n.environment||r,e.attrs=n}else{if(!e.release&&!t)return void(gp&&Ip.warn(Pg));e.release=e.release||t,e.environment=e.environment||r}this.emit("beforeSendSession",e);const n=function(e,t,r,n){const s=ag(r);return Zm({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!n&&t&&{dsn:Km(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(e,t,r=1){if(this._options.sendClientReports){const n=`${e}:${t}`;gp&&Ip.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(e,t){const r=this._hooks[e]=this._hooks[e]||[];return r.push(t),()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)}}emit(e,...t){const r=this._hooks[e];r&&r.forEach(e=>e(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,e=>(gp&&Ip.error("Error while sending envelope:",e),e)):(gp&&Ip.error("Transport disabled"),ug({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach(t=>{t&&Sg(e,t,r)}),r}(this,e),Eg(this,e)}_updateSessionFromEvent(e,t){let r="fatal"===t.level,n=!1;const s=t.exception?.values;if(s){n=!0;for(const e of s){const t=e.mechanism;if(!1===t?.handled){r=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&r)&&(sm(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new lg(t=>{let r=0;const n=setInterval(()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n){const s=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i?.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||n.setLastEventId(e.event_id||t.event_id),vg(s,e,t,r,this,n).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts={trace:Em(r),...e.contexts};const n=function(e,t){const r=t.getPropagationContext();return r.dsc||Jm(r.traceId,e)}(this,r);return e.sdkProcessingMetadata={dynamicSamplingContext:n,...e.sdkProcessingMetadata},e})}_captureEvent(e,t={},r=wm(),n=vm()){return gp&&xg(e)&&Ip.log(`Captured error event \`${function(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r?.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}(e)[0]||"<unknown>"}\``),this._processEvent(e,t,r,n).then(e=>e.event_id,e=>{gp&&(Og(e)?Ip.log(e.message):Ng(e)?Ip.warn(e.message):Ip.warn(e))})}_processEvent(e,t,r,n){const s=this.getOptions(),{sampleRate:i}=s,o=Mg(e),a=xg(e),c=e.type||"error",u=`before send for type \`${c}\``,h=void 0===i?void 0:function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;return"number"!=typeof t||isNaN(t)||t<0||t>1?void 0:t}(i);if(a&&"number"==typeof h&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),hg(Tg(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const l="replay_event"===c?"replay":c;return this._prepareEvent(e,t,r,n).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",l),Tg("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const r=function(e,t,r,n){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=t;let a=r;if(xg(a)&&s)return s(a,n);if(Mg(a)){if(o){const e=o(function(e){const{trace_id:t,parent_span_id:r,span_id:n,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[Im],exclusive_time:o?.[Rm],measurements:e.measurements,is_segment:!0}}(a));if(e?a=im(r,{type:"transaction",timestamp:(c=e).timestamp,start_timestamp:c.start_timestamp,transaction:c.description,contexts:{trace:{trace_id:c.trace_id,span_id:c.span_id,parent_span_id:c.parent_span_id,op:c.op,status:c.status,origin:c.origin,data:{...c.data,...c.profile_id&&{[Im]:c.profile_id},...c.exclusive_time&&{[Rm]:c.exclusive_time}}}},measurements:c.measurements}):Gm(),a.spans){const e=[];for(const t of a.spans){const r=o(t);r?e.push(r):(Gm(),e.push(t))}a.spans=e}}if(i){if(a.spans){const e=a.spans.length;a.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(a,n)}}var c;return a}(0,s,e,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(jp(e))return e.then(e=>{if(!qp(e)&&null!==e)throw Rg(r);return e},e=>{throw Rg(`${t} rejected with ${e}`)});if(!qp(e)&&null!==e)throw Rg(r);return e}(r,u)}).then(s=>{if(null===s){if(this.recordDroppedEvent("before_send",l),o){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw Tg(`${u} returned \`null\`, will not send event.`)}const i=r.getSession()||n.getSession();if(a&&i&&this._updateSessionFromEvent(i,s),o){const e=(s.sdkProcessingMetadata?.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const c=s.transaction_info;if(o&&c&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...c,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{if(Og(e)||Ng(e))throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),Rg(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([e,t])=>{const[r,n]=e.split(":");return{reason:r,category:n,quantity:t}})}_flushOutcomes(){gp&&Ip.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(gp&&Ip.log("No outcomes to send"));if(!this._dsn)return void(gp&&Ip.log("No dsn provided, will not send outcomes"));gp&&Ip.log("Sending outcomes:",e);const t=(r=e,Zm((n=this._options.tunnel&&Km(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:tm(),discarded_events:r}]]));var r,n;this.sendEnvelope(t)}}function xg(e){return void 0===e.type}function Mg(e){return"transaction"===e.type}function Ug(e,t){const r=function(e){return Dg().get(e)}(e)??[];if(0===r.length)return;const n=e.getOptions(),s=function(e,t,r,n){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),r&&n&&(s.dsn=Km(n)),Zm(s,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(r,n._metadata,n.tunnel,e.getDsn());Dg().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function Dg(){return bp("clientToLogBufferMap",()=>new WeakMap)}const Lg=Symbol.for("SentryBufferFullError");function Bg(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return hg(Lg);const s=n();return-1===t.indexOf(s)&&t.push(s),s.then(()=>r(s)).then(null,()=>r(s).then(null,()=>{})),s},drain:function(e){return new lg((r,n)=>{let s=t.length;if(!s)return r(!0);const i=setTimeout(()=>{e&&e>0&&r(!1)},e);t.forEach(e=>{ug(e).then(()=>{--s||(clearTimeout(i),r(!0))},n)})})}}}function Fg(e,{statusCode:t,headers:r},n=Date.now()){const s={...e},i=r?.["x-sentry-rate-limits"],o=r?.["retry-after"];if(i)for(const e of i.trim().split(",")){const[t,r,,,i]=e.split(":",5),o=parseInt(t,10),a=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))"metric_bucket"===e&&i&&!i.split(";").includes("custom")||(s[e]=n+a);else s.all=n+a}else o?s.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?6e4:n-t}(o,n):429===t&&(s.all=n+6e4);return s}function qg(e,t,r=Bg(e.bufferSize||64)){let n={};return{send:function(s){const i=[];if(tg(s,(t,r)=>{const s=og(r);!function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,s)?i.push(t):e.recordDroppedEvent("ratelimit_backoff",s)}),0===i.length)return ug({});const o=Zm(s[0],i),a=t=>{tg(o,(r,n)=>{e.recordDroppedEvent(t,og(n))})};return r.add(()=>t({body:ng(o)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&gp&&Ip.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=Fg(n,e),e),e=>{throw a("network_error"),gp&&Ip.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===Lg)return gp&&Ip.error("Skipped sending event because buffer is full."),a("queue_overflow"),ug({});throw e})},flush:e=>r.drain(e)}}function Gg(e){void 0===e.user?.ip_address&&(e.user={...e.user,ip_address:"{{auto}}"})}function jg(e){"aggregates"in e?void 0===e.attrs?.ip_address&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}const Hg=yp;function zg(e,t){const r=Wg(e,t),n={type:Qg(t),value:$g(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Kg(e,t,r,n){const s=bm(),i=s?.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}return}(t),a={__serialized__:$m(t,i)};if(o)return{exception:{values:[zg(e,o)]},extra:a};const c={exception:{values:[{type:Gp(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:ty(t,{isUnhandledRejection:n})}]},extra:a};if(r){const t=Wg(e,r);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function Vg(e,t){return{exception:{values:[zg(e,t)]}}}function Wg(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e&&Jg.test(e.message))return 1;return 0}(t),s=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(r,n,s)}catch{}return[]}const Jg=/Minified React error #\d+;/i;function Yg(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function Qg(e){const t=e?.name;if(!t&&Yg(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function $g(e){const t=e?.message;return Yg(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Xg(e,t,r,n){const s=function(e,t,r,n,s){let i;if(Dp(t)&&t.error){return Vg(e,t.error)}if(Lp(t)||(o=t,Up(o,"DOMException"))){const s=t;if("stack"in t)i=Vg(e,t);else{const t=s.name||(Lp(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;i=ey(e,o,r,n),Xp(i,o)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}var o;if(Mp(t))return Vg(e,t);if(qp(t)||Gp(t)){return i=Kg(e,t,r,s),Zp(i,{synthetic:!0}),i}return i=ey(e,t,r,n),Xp(i,`${t}`),Zp(i,{synthetic:!0}),i}(e,t,r?.syntheticException||void 0,n);return Zp(s),s.level="error",r?.event_id&&(s.event_id=r.event_id),ug(s)}function Zg(e,t,r="info",n,s){const i=ey(e,t,n?.syntheticException||void 0,s);return i.level=r,n?.event_id&&(i.event_id=n.event_id),ug(i)}function ey(e,t,r,n){const s={};if(n&&r){const n=Wg(e,r);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]}),Zp(s,{synthetic:!0})}if(Fp(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return s.logentry={message:e,params:r},s}return s.message=t,s}function ty(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(Jp(e));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=t)return Vp(n,t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:Vp(n,t)}return""}(e),n="exception";if(Dp(e))return`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``;if(Gp(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}(e);return`Event \`${t}\` (type=${e.type}) captured as ${n}`}return`Object captured as ${n} with keys: ${r}`}const ry="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ny=yp,sy={};function iy(e){sy[e]=void 0}function oy(e,t,r,n){const s={filename:e,function:"<anonymous>"===t?Rp:t,in_app:!0};return void 0!==r&&(s.lineno=r),void 0!==n&&(s.colno=n),s}const ay=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,cy=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,uy=/\((\S*)(?::(\d+))(?::(\d+))\)/,hy=[30,e=>{const t=ay.exec(e);if(t){const[,e,r,n]=t;return oy(e,Rp,+r,+n)}const r=cy.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=uy.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=gy(r[1]||Rp,r[2]);return oy(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],ly=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,dy=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,fy=[50,e=>{const t=ly.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=dy.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Rp;return[r,e]=gy(r,e),oy(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],py=[hy,fy],my=function(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,r=0,n=0)=>{const s=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=Tp.test(r)?r.replace(Tp,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){s.push(t);break}}if(s.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(Op(t).function||"")&&t.pop();t.reverse(),Np.test(Op(t).function||"")&&(t.pop(),Np.test(Op(t).function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||Op(t).filename,function:e.function||Rp}))}(s.slice(n))}}(...py),gy=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Rp,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};var yy=Object.freeze({__proto__:null,BrowserClient:class extends Cg{constructor(e){const t=(r=e,{release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:Hg.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...r});var r;!function(e,t,r=[t],n="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:r.map(e=>({name:`${n}:@sentry/${e}`,version:wp})),version:wp}),e._metadata=s}(t,"browser",["browser"],Hg.SENTRY_SDK_SOURCE||"npm"),super(t);const{sendDefaultPii:n,sendClientReports:s,enableLogs:i,_experiments:o}=this._options,a=i??o?.enableLogs;Hg.document&&(s||a)&&Hg.document.addEventListener("visibilitychange",()=>{"hidden"===Hg.document.visibilityState&&(s&&this._flushOutcomes(),a&&Ug(this))}),a&&(this.on("flush",()=>{Ug(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{Ug(this)},5e3)})),n&&(this.on("postprocessEvent",Gg),this.on("beforeSendSession",jg))}eventFromException(e,t){return Xg(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return Zg(this._options.stackParser,e,t,r,this._options.attachStacktrace)}_prepareEvent(e,t,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r,n)}},SDK_VERSION:wp,SEMANTIC_ATTRIBUTE_SENTRY_OP:Pm,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:km,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:_m,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Sm,Scope:lm,WINDOW:Hg,chromeStackLineParser:hy,createTransport:qg,defaultStackLineParsers:py,defaultStackParser:my,eventFromException:Xg,eventFromMessage:Zg,exceptionFromError:zg,geckoStackLineParser:fy,getClient:bm,getCurrentScope:wm,getGlobalScope:Am,getIsolationScope:vm,getRootSpan:qm,makeFetchTransport:function(e,t=function(e){const t=sy[e];if(t)return t;let r=ny[e];if((n=r)&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(n.toString()))return sy[e]=r.bind(ny);var n;const s=ny.document;if(s&&"function"==typeof s.createElement)try{const t=s.createElement("iframe");t.hidden=!0,s.head.appendChild(t);const n=t.contentWindow;n?.[e]&&(r=n[e]),s.head.removeChild(t)}catch(t){ry&&Ip.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return r?sy[e]=r.bind(ny):r}("fetch")){let r=0,n=0;return qg(e,function(s){const i=s.body.length;r+=i,n++;const o={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};if(!t)return iy("fetch"),hg("No fetch implementation available");try{return t(e.url,o).then(e=>(r-=i,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(e){return iy("fetch"),r-=i,n--,hg(e)}})},spanToJSON:Bm})}();

    </script>
</head>
<body>
    <h1>Bridge Running</h1>
</body>
</html>